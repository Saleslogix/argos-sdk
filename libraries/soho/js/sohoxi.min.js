/*! 
 *  IDS Enterprise Components - v4.36.2
 *  Date: 2021-01-25T21:45:32.182Z
 *  Revision: 057fc3b6595d40824a84fd7ddeee375c2bbf8180
 *  
 *  
 *  Apache License
 *  Version 2.0, January 2004
 *  http://www.apache.org/licenses/
 *  
 *  TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *  
 *  1. Definitions.
 *  
 *  "License" shall mean the terms and conditions for use, reproduction,
 *  and distribution as defined by Sections 1 through 9 of this document.
 *  
 *  "Licensor" shall mean the copyright owner or entity authorized by
 *  the copyright owner that is granting the License.
 *  
 *  "Legal Entity" shall mean the union of the acting entity and all
 *  other entities that control, are controlled by, or are under common
 *  control with that entity. For the purposes of this definition,
 *  "control" means (i) the power, direct or indirect, to cause the
 *  direction or management of such entity, whether by contract or
 *  otherwise, or (ii) ownership of fifty percent (50%) or more of the
 *  outstanding shares, or (iii) beneficial ownership of such entity.
 *  
 *  "You" (or "Your") shall mean an individual or Legal Entity
 *  exercising permissions granted by this License.
 *  
 *  "Source" form shall mean the preferred form for making modifications,
 *  including but not limited to software source code, documentation
 *  source, and configuration files.
 *  
 *  "Object" form shall mean any form resulting from mechanical
 *  transformation or translation of a Source form, including but
 *  not limited to compiled object code, generated documentation,
 *  and conversions to other media types.
 *  
 *  "Work" shall mean the work of authorship, whether in Source or
 *  Object form, made available under the License, as indicated by a
 *  copyright notice that is included in or attached to the work
 *  (an example is provided in the Appendix below).
 *  
 *  "Derivative Works" shall mean any work, whether in Source or Object
 *  form, that is based on (or derived from) the Work and for which the
 *  editorial revisions, annotations, elaborations, or other modifications
 *  represent, as a whole, an original work of authorship. For the purposes
 *  of this License, Derivative Works shall not include works that remain
 *  separable from, or merely link (or bind by name) to the interfaces of,
 *  the Work and Derivative Works thereof.
 *  
 *  "Contribution" shall mean any work of authorship, including
 *  the original version of the Work and any modifications or additions
 *  to that Work or Derivative Works thereof, that is intentionally
 *  submitted to Licensor for inclusion in the Work by the copyright owner
 *  or by an individual or Legal Entity authorized to submit on behalf of
 *  the copyright owner. For the purposes of this definition, "submitted"
 *  means any form of electronic, verbal, or written communication sent
 *  to the Licensor or its representatives, including but not limited to
 *  communication on electronic mailing lists, source code control systems,
 *  and issue tracking systems that are managed by, or on behalf of, the
 *  Licensor for the purpose of discussing and improving the Work, but
 *  excluding communication that is conspicuously marked or otherwise
 *  designated in writing by the copyright owner as "Not a Contribution."
 *  
 *  "Contributor" shall mean Licensor and any individual or Legal Entity
 *  on behalf of whom a Contribution has been received by Licensor and
 *  subsequently incorporated within the Work.
 *  
 *  2. Grant of Copyright License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  copyright license to reproduce, prepare Derivative Works of,
 *  publicly display, publicly perform, sublicense, and distribute the
 *  Work and such Derivative Works in Source or Object form.
 *  
 *  3. Grant of Patent License. Subject to the terms and conditions of
 *  this License, each Contributor hereby grants to You a perpetual,
 *  worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 *  (except as stated in this section) patent license to make, have made,
 *  use, offer to sell, sell, import, and otherwise transfer the Work,
 *  where such license applies only to those patent claims licensable
 *  by such Contributor that are necessarily infringed by their
 *  Contribution(s) alone or by combination of their Contribution(s)
 *  with the Work to which such Contribution(s) was submitted. If You
 *  institute patent litigation against any entity (including a
 *  cross-claim or counterclaim in a lawsuit) alleging that the Work
 *  or a Contribution incorporated within the Work constitutes direct
 *  or contributory patent infringement, then any patent licenses
 *  granted to You under this License for that Work shall terminate
 *  as of the date such litigation is filed.
 *  
 *  4. Redistribution. You may reproduce and distribute copies of the
 *  Work or Derivative Works thereof in any medium, with or without
 *  modifications, and in Source or Object form, provided that You
 *  meet the following conditions:
 *  
 *  (a) You must give any other recipients of the Work or
 *  Derivative Works a copy of this License; and
 *  
 *  (b) You must cause any modified files to carry prominent notices
 *  stating that You changed the files; and
 *  
 *  (c) You must retain, in the Source form of any Derivative Works
 *  that You distribute, all copyright, patent, trademark, and
 *  attribution notices from the Source form of the Work,
 *  excluding those notices that do not pertain to any part of
 *  the Derivative Works; and
 *  
 *  (d) If the Work includes a "NOTICE" text file as part of its
 *  distribution, then any Derivative Works that You distribute must
 *  include a readable copy of the attribution notices contained
 *  within such NOTICE file, excluding those notices that do not
 *  pertain to any part of the Derivative Works, in at least one
 *  of the following places: within a NOTICE text file distributed
 *  as part of the Derivative Works; within the Source form or
 *  documentation, if provided along with the Derivative Works; or,
 *  within a display generated by the Derivative Works, if and
 *  wherever such third-party notices normally appear. The contents
 *  of the NOTICE file are for informational purposes only and
 *  do not modify the License. You may add Your own attribution
 *  notices within Derivative Works that You distribute, alongside
 *  or as an addendum to the NOTICE text from the Work, provided
 *  that such additional attribution notices cannot be construed
 *  as modifying the License.
 *  
 *  You may add Your own copyright statement to Your modifications and
 *  may provide additional or different license terms and conditions
 *  for use, reproduction, or distribution of Your modifications, or
 *  for any such Derivative Works as a whole, provided Your use,
 *  reproduction, and distribution of the Work otherwise complies with
 *  the conditions stated in this License.
 *  
 *  5. Submission of Contributions. Unless You explicitly state otherwise,
 *  any Contribution intentionally submitted for inclusion in the Work
 *  by You to the Licensor shall be under the terms and conditions of
 *  this License, without any additional terms or conditions.
 *  Notwithstanding the above, nothing herein shall supersede or modify
 *  the terms of any separate license agreement you may have executed
 *  with Licensor regarding such Contributions.
 *  
 *  6. Trademarks. This License does not grant permission to use the trade
 *  names, trademarks, service marks, or product names of the Licensor,
 *  except as required for reasonable and customary use in describing the
 *  origin of the Work and reproducing the content of the NOTICE file.
 *  
 *  7. Disclaimer of Warranty. Unless required by applicable law or
 *  agreed to in writing, Licensor provides the Work (and each
 *  Contributor provides its Contributions) on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 *  implied, including, without limitation, any warranties or conditions
 *  of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 *  PARTICULAR PURPOSE. You are solely responsible for determining the
 *  appropriateness of using or redistributing the Work and assume any
 *  risks associated with Your exercise of permissions under this License.
 *  
 *  8. Limitation of Liability. In no event and under no legal theory,
 *  whether in tort (including negligence), contract, or otherwise,
 *  unless required by applicable law (such as deliberate and grossly
 *  negligent acts) or agreed to in writing, shall any Contributor be
 *  liable to You for damages, including any direct, indirect, special,
 *  incidental, or consequential damages of any character arising as a
 *  result of this License or out of the use or inability to use the
 *  Work (including but not limited to damages for loss of goodwill,
 *  work stoppage, computer failure or malfunction, or any and all
 *  other commercial damages or losses), even if such Contributor
 *  has been advised of the possibility of such damages.
 *  
 *  9. Accepting Warranty or Additional Liability. While redistributing
 *  the Work or Derivative Works thereof, You may choose to offer,
 *  and charge a fee for, acceptance of support, warranty, indemnity,
 *  or other liability obligations and/or rights consistent with this
 *  License. However, in accepting such obligations, You may act only
 *  on Your own behalf and on Your sole responsibility, not on behalf
 *  of any other Contributor, and only if You agree to indemnify,
 *  defend, and hold each Contributor harmless for any liability
 *  incurred by, or claims asserted against, such Contributor by reason
 *  of your accepting any such warranty or additional liability.
 *  
 *  END OF TERMS AND CONDITIONS
 *  
 *  APPENDIX: How to apply the Apache License to your work.
 *  
 *  To apply the Apache License to your work, attach the following
 *  boilerplate notice, with the fields enclosed by brackets "[]"
 *  replaced with your own identifying information. (Don't include
 *  the brackets!)  The text should be enclosed in the appropriate
 *  comment syntax for the file format. We also recommend that a
 *  file or class name and description of purpose be included on the
 *  same "printed page" as the copyright notice for easier
 *  identification within third-party archives.
 *  
 *  Copyright 2018  Infor, Inc.
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *  
 *  http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *  
 */
var Soho=function(t){"use strict";var e=Object.freeze({__proto__:null,enableTimeLogging:!1,logTimeStart:function(t){},logTimeEnd:function(t){},enableConsoleLogging:!1,log:function(t,e){},getComponents:function(t){var e=(t?$(t):$("body")).find("*"),i=[];return e.each((function(t,e){var n=$(e).data();n&&Object.keys(n).length&&i.push({data:n,element:e})})),i}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),i=e.length;--i>=0&&e.item(i)!==this;);return i>-1}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})),!!window.MSInputMethodContext&&!!document.documentMode||(jQuery.event.special.touchstart={setup:function(t,e,i){this.addEventListener("touchstart",i,{passive:!0})}},jQuery.event.special.touchmove={setup:function(t,e,i){this.addEventListener("touchmove",i,{passive:!0})}},jQuery.event.special.mousewheel={setup:function(t,e,i){this.addEventListener("mousewheel",i,{passive:!0})}});function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e,i){return(l=o()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var s=new(Function.bind.apply(t,n));return i&&r(s,i.prototype),s}).apply(null,arguments)}function c(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h={stripHTML:function(t){var e=t;return e?e=e.replace(/<\/?[^>]+(>|$)/g,""):""},stripTags:function(t,e){if(!t)return"";if("number"==typeof t)return t;var i=("".concat(e||"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(n,(function(t,e){return i.indexOf("<"+e.toLowerCase()+">")>-1?t:""})).replace(n,(function(t,e){return i.indexOf("<"+e.toLowerCase()+">")>-1?t:""})).replace(n,(function(t,e){return i.indexOf("<"+e.toLowerCase()+">")>-1?t:""}))},sanitizeConsoleMethods:function(t){var e=new RegExp("console\\.(".concat(["assert","clear","count","debug","dirxml","dir","error","exception","groupCollapsed","groupEnd","group","info","log","markTimeline","profileEnd","profile","table","timeEnd","timeStamp","time","trace","warn"].join("|"),")((\\s+)?\\(([^)]+)\\);?)?"),"igm");return"string"!=typeof t?t:t.replace(e,"")},sanitizeHTML:function(t){var e=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g,"");return e=e.replace(/<[^>]+/g,(function(t){return t.replace(/(\/|\s)on\w+=(\'|")?[^"]*(\'|")?/g,"")})),e=(e=this.sanitizeConsoleMethods(e)).replace(/<\/script>/g,"")},ensureAlphaNumeric:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9-]/gi,"","")},ensureAlphaNumericWithSpaces:function(t){return"number"==typeof t?t:this.stripTags(t).replace(/[^a-z0-9 ]/gi,"","")},toCamelCase:function(t){return"string"!=typeof t?t:(t=this.stripTags(t).replace(/[^a-z0-9 ]/gi,"","")).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(function(t,e){return e.toUpperCase()}))},escapeHTML:function(t){var e=t;if("string"==typeof e){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return e.replace(/[&<>"']/gi,(function(t){return i[t]}))}return e},unescapeHTML:function(t){if(""===t)return"";if("string"==typeof t){var e=function(e){return(t.match(e)||[""])[0]},i=(new DOMParser).parseFromString(t,"text/html");return"".concat(e(/^\s*/)).concat(i.documentElement.textContent.trim()).concat(e(/\s*$/))}return t},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},isUrlLocal:function(t){return!(""===t)&&("/"===t[0]&&(1===t.length||"/"!==t[1]&&"\\"!==t[1])||t.length>1&&"~"===t[0]&&"/"===t[1])||t.length>=1&&"#"===t[0]}},u={isValidElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement},getAttributes:function(t){return t&&(t instanceof HTMLElement||t instanceof SVGElement)?t.attributes:{}},hasAnyClass:function(t){var e=t.className;return e&&e.length>0},hasClass:function(t,e){var i=!1;if(null==t||!(null==t?void 0:t.getAttribute))return i;if("classList"in t)i=t.classList.contains(e);else{var n=t.getAttribute("class");i=!!n&&-1!==n.split(/\s+/).indexOf(e)}return i},addClass:function(t){if(t){for(var e="",i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var a=0;a<n.length;a++)t.classList?t.classList.add(n[a]):u.hasClass(t,[a])||(e.length&&(e+=" "),e+=n[a]);e.length&&$(t).addClass(e)}},removeClass:function(t){if(t){for(var e="",i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var a=0;a<n.length;a++)t.classList?t.classList.remove(n[a]):u.hasClass(t,[a])||(e.length&&(e+=" "),e+=n[a]);e.length&&$(t).removeClass(e)}},isElement:function(t){return!!(t instanceof HTMLElement||t instanceof SVGElement||t instanceof $&&t.length)},getDimensions:function(t){if(!u.isElement(t))return{};if(t instanceof $){if(!t.length)return{};t=t[0]}var e=t.getBoundingClientRect(),i={};for(var n in e)isNaN(e[n])||(i[n]=e[n]);return i},append:function(t,e,i){var n=t;t instanceof $&&t.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.insertAdjacentHTML("beforeend",this.xssClean(e,i))},remove:function(t){var e=t;t instanceof $&&t.length&&(e=e[0]),(e instanceof HTMLElement||e instanceof SVGElement)&&t.parentNode&&t.parentNode.removeChild(t)},setAttribute:function(t,e,i){var n=t;t instanceof $&&t.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&n.setAttribute("attribute",i)},xssClean:function(t,e){var i=t;return e&&"*"!==e&&(i=h.stripTags(t,e)),"*"===e&&(i=h.sanitizeHTML(t)),i},html:function(t,e,i){var n=t;t instanceof $&&t.length&&(n=n[0]),(n instanceof HTMLElement||n instanceof SVGElement)&&(n.innerHTML=this.xssClean(e,i))},parents:function(t,e,i){var n,s=[];if(!u.isValidElement(t))return s;for(;t.parentNode&&(!i||!s.length);)t=t.parentNode,(n=t)!==document&&n.matches(e)&&s.push(n);return i?s[0]:s},getNextSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var i=t.nextElementSibling;if(!e)return i;for(;i;){if(i.matches(e))return i;i=i.nextElementSibling}},getPreviousSibling:function(t,e){t instanceof $&&t.length&&(t=t[0]);var i=t.previousElementSibling;if(!e)return i;for(;i;){if(i.matches(e))return i;i=i.previousElementSibling}},getSiblings:function(t){return t instanceof $&&t.length&&(t=t[0]),[].slice.call(t.parentNode.children).filter((function(e){return e!==t}))},getSimpleSelector:function(t){var e=t.tagName.toLowerCase(),i=t.id?"#".concat(t.id):"",n=t.className?".".concat(t.className.split(" ").join(".")):"";return"".concat(e).concat(i).concat(n)}},p={phone:320,slim:400,phablet:610,"phone-to-tablet":767,"wide-tablet":968,"tablet-to-desktop":1280,desktop:1024,"desktop-to-extralarge":1600},g=Object.keys(p);function f(t,e,i){var n;return function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var o=this;function l(){i||t.apply(o,a),n=null}n?clearTimeout(n):i&&t.apply(o,a),n=setTimeout(l,e||250)}}p.available=g,p.current=function(){var t=!!window.getComputedStyle&&window.getComputedStyle(document.body,":after");return t?(t.getPropertyValue("content")||"").replace(/"/g,""):""},p.isAbove=function(t){var e=p[t];return!!e&&$(window).width()>e-1},p.isBelow=function(t){var e=p[t];return!!e&&$(window).width()<e},p.compare=function(){this.last||(this.last="");var t=this.current();this.last!==t&&($("body").triggerHandler("breakpoint-change",[{previous:this.last,current:t}]),this.last=t)},p.isHidden=function(t){if(!t||!u.isElement(t))return!1;var e=t.classList;if(!e.length)return!1;if(e.contains("hidden"))return!0;var i={phonedown:"xs",phone:"sm",tablet:"md",desktop:"lg",extralarge:"xl"}[this.current()],n="hidden-".concat(i),s="visible-".concat(i,"-");return!!e.contains(n)||(e.toString().indexOf(s),!1)},$.fn.isHiddenAtBreakpoint=function(){return!!this.length&&p.isHidden($(this).first()[0])};$.fn.debouncedResize=function(t){return t?this.bind("resize",f(t)):this.trigger("debouncedResize")};var m={browser:{},features:{resizeObserver:"undefined"!=typeof ResizeObserver,touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},os:{},devicespecs:{},get rtl(){return"rtl"===$("html").attr("dir")},set:function(){$("html").attr("data-sohoxi-version","4.36.2"),this.viewport=document.querySelector("meta[name=viewport]"),this.viewport&&this.viewport.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0"),this.addBrowserClasses(),this.addGlobalResize(),this.addDeviceSpecs()},addBrowserClasses:function(){var t=navigator.userAgent||navigator.vendor||window.opera,e=navigator.platform,i=$("html"),n="";if(-1!==t.indexOf("Safari")&&-1===t.indexOf("Chrome")&&-1===t.indexOf("Android")&&(n+="is-safari ",this.browser.name="safari"),this.browser.isWKWebView=function(){return!1},"iP"===navigator.platform.substr(0,2)){var s=/constructor/i.test(window.HTMLElement),a=!!window.indexedDB;(window.webkit&&window.webkit.messageHandlers||!s||a)&&(this.browser.name="wkwebview",n+="is-safari is-wkwebview ",this.browser.isWKWebView=function(){return!0})}-1!==t.indexOf("Chrome")&&(n+="is-chrome ",this.browser.name="chrome");if(["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)>-1&&!/Linux/.test(e)&&(n+="is-mac ",this.os.name="Mac OS X"),t.indexOf("Firefox")>0&&(n+="is-firefox ",this.browser.name="firefox"),t.match(/Edge\//)&&(n+="ie ie-edge ",this.browser.name="edge",this.browser.version=navigator.appVersion.indexOf("Edge/18")>-1?"18":"17",n+="ie-edge".concat(this.browser.version)),t.match(/Trident/)&&(n+="ie ",this.browser.name="ie"),(navigator.appVersion.indexOf("MSIE 8.0")>-1||t.indexOf("MSIE 8.0")>-1||8===document.documentMode)&&(n+="ie8 ",this.browser.version="8"),navigator.appVersion.indexOf("MSIE 9.0")>-1&&(n+="ie9 ",this.browser.version="9"),navigator.appVersion.indexOf("MSIE 10.0")>-1?(n+="ie10 ",this.browser.version="10"):t.match(/Trident\/7\./)&&(n+="ie11 ",this.browser.version="11"),/iPhone|iPod|iPad/.test(t)){n+="ios ",this.os.name="ios";for(var r=["iPod","iPad","iPhone"],o=0;o<r.length;o++)new RegExp(r[o]).test(t)&&(n+="".concat(r[o].toLowerCase()," "),this.device=r[o])}/Android/.test(t)&&(n+="android ",this.os.name="android"),!this.os.name&&/Linux/.test(e)&&(this.os.name="linux"),i.addClass(n)},addDeviceSpecs:function(){var t,e,i,n=navigator.appVersion,s=navigator.userAgent,a=navigator.appName,r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10),l="";-1!==(e=s.indexOf("Opera"))&&(a="Opera",r=s.substring(e+6),-1!==(e=s.indexOf("Version"))&&(r=s.substring(e+8))),-1!==(e=s.indexOf("OPR"))?(a="Opera",r=s.substring(e+4)):-1!==(e=s.indexOf("Edge"))?(a="Microsoft Edge",r=s.substring(e+5)):-1!==(e=s.indexOf("MSIE"))?(a="Microsoft Internet Explorer",r=s.substring(e+5)):-1!==(e=s.indexOf("Chrome"))?(a="Chrome",r=s.substring(e+7),s.indexOf("Edg")>-1&&(l="Microsoft Edge")):-1!==(e=s.indexOf("Safari"))?(a="Safari",r=s.substring(e+7),-1!==(e=s.indexOf("Version"))&&(r=s.substring(e+8))):this.browser.isWKWebView()?(a="WKWebView",r="",o=""):-1!==(e=s.indexOf("Firefox"))?(a="Firefox",r=s.substring(e+8)):-1!==s.indexOf("Trident/")?(a="Microsoft Internet Explorer",r=s.substring(s.indexOf("rv:")+3)):(t=s.lastIndexOf(" ")+1)<(e=s.lastIndexOf("/"))&&(a=s.substring(t,e),r=s.substring(e+1),a.toLowerCase()===a.toUpperCase()&&(a=navigator.appName)),-1!==(i=r.indexOf(";"))&&(r=r.substring(0,i)),-1!==(i=r.indexOf(" "))&&(r=r.substring(0,i)),-1!==(i=r.indexOf(")"))&&(r=r.substring(0,i)),o=" ".concat(parseInt(r,10)),isNaN(o)&&(r=" ".concat(parseFloat(navigator.appVersion)),o=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(n),d="-",h=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(var u in h){var p=h[u];if(p.r.test(s)){d=p.s;break}}var g="-";switch(/Windows/.test(d)&&(g=/Windows (.*)/.exec(d)[1]),d){case"Mac OS X":g=/Mac OS X ([1-9][0-9][\.\_\d]+)/.exec(s)[1].replace(/\_/g,".");break;case"Android":g=/Android ([\.\_\d]+)/.exec(s)[1];break;case"iOS":g=/OS (\d+)_?(\d+)?/.exec(s),g="".concat(g[1],".").concat(g[2],".").concat(0|g[3])}this.devicespecs={currentBrowser:a,browserVersion:r.trim(),browserMajorVersion:o,isMobile:c,os:d,currentOSVersion:g,browserVersionName:l}},addGlobalResize:function(){$(window).debouncedResize((function(){$("body").triggerHandler("resize",[window]),p.compare()})),$(window).on("orientationchange load",(function(){return p.compare()}))},removeGlobalEvents:function(){$(window).off("scroll.".concat("environment")),$("body").off(["focusin.".concat("environment"),"focusout.".concat("environment")].join(" "))}};function v(t){return this.init(t)}function b(t,e,i){var n=$.Deferred();if(!u.isElement(t))return n.reject();if(t instanceof $&&t.length&&(t=t[0]),null==e)return n.resolve();if(isNaN(i)&&(i=0),e=Math.round(e),(i=Math.round(i))<0)return n.fail();if(0===i)return t.scrollLeft+=e,n.resolve();var s=Date.now(),a=s+i,r=t.scrollLeft,o=e;var l=t.scrollLeft;return setTimeout((function e(){if(t.scrollLeft===l){var i=Date.now(),c=function(t,e,i){if(i<=t)return 0;if(i>=e)return 1;var n=(i-t)/(e-t);return n*n*(3-2*n)}(s,a,i),d=Math.round(r+o*c);t.scrollLeft=d,i>=a?n.resolve():t.scrollLeft!==l||t.scrollLeft===d?(l=t.scrollLeft,setTimeout(e,0)):n.resolve()}else n.reject()}),0),n}function y(t,e){return(void 0!==window.requestAnimationFrame?window.requestAnimationFrame:setTimeout)(t,e)}m.browser.isEdge=function(){return"edge"===m.browser.name},m.browser.isIE11=function(){return"ie"===m.browser.name&&"11"===m.browser.version},m.browser.isSafari=function(){return"safari"===m.browser.name||"wkwebview"===m.browser.name},m.browser.isIE10=function(){return"ie"===m.browser.name&&"10"===m.browser.version},m.set(),v.prototype={init:function(t){!this.element&&(t instanceof HTMLElement||t instanceof SVGElement)&&(this.element=t);var e=$(this.element),i=!1,n=!1,s=!1;if(e.is(".checkbox, .radio, .switch")){var a=e.next();a.is('[type="hidden"]')&&(a=a.next()),this.label=a[0],e.addClass("hide-focus").on("focusin.hide-focus",(function(t){i||n||s||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),i=!1,n=!0,s=!1})).on("focusout.hide-focus",(function(t){e.addClass("hide-focus"),s=a.is(s),i=!1,n=!1,e.triggerHandler("hidefocusadd",[t])})),a.on("mousedown.hide-focus",(function(t){s=this,i=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])}))}else{var r=function(t){i=!0,e.addClass("hide-focus"),e.triggerHandler("hidefocusadd",[t])};m.features.touch&&e.on("touchstart.hide-focus",(function(t){r(t)})),e.addClass("hide-focus").on("mousedown.hide-focus",(function(t){r(t)})).on("focusin.hide-focus",(function(t){i||n||(e.removeClass("hide-focus"),e.triggerHandler("hidefocusremove",[t])),i=!1,n=!0})).on("focusout.hide-focus",(function(t){e.addClass("hide-focus"),i=!1,n=!1,e.triggerHandler("hidefocusadd",[t])}))}return this},updated:function(){return this.teardown().init()},teardown:function(){this.label&&$(this.label).off("mousedown.hide-focus");return $(this.element).off(["focusin.hide-focus","focusout.hide-focus","mousedown.hide-focus","touchstart.hide-focus"].join(" ")),this.element.classList.remove("hide-focus"),this}},$.fn.hideFocus=function(){return this.each((function(){var t=$.data(this,"hidefocus");t?t.updated():(t=$.data(this,"hidefocus",new v(this))).destroy=function(){this.teardown(),$.removeData(this,"hidefocus")}}))},$.fn.smoothScroll=function(t,e){return b(this,t,e)},$.fn.bindFirst=function(t,e){this.on(t,e),this.each((function(){var e=$._data(this,"events")[t.split(".")[0]],i=e.pop();e.splice(0,0,i)}))};var w=[];function x(t){return $.expr.filters.visible(t)&&!$(t).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.fn.cssPropSupport=function(t){if(!t)return null;var e=$("<div></div>")[0],i=t.toString(),n=["Moz","Webkit","O","ms"],s=i.charAt(0).toUpperCase()+i.substr(1);if(t in e.style)return $(e).remove(),t;for(var a=0;a<n.length;a++){var r=n[a]+s;if(r in e.style)return $(e).remove(),r}return $(e).remove(),null},$.fn.transitionEndName=function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"}[$.fn.cssPropSupport("transition")]||null},$.extend($.expr[":"],{focusable:function(t){return function(t){var e,i,n,s=t.nodeName.toLowerCase(),a=!isNaN($.attr(t,"tabindex"));return"area"===s?(i=(e=t.parentNode).name,!(!t.href||!i||"map"!==e.nodeName.toLowerCase())&&(!!(n=$("img[usemap=#".concat(i,"]"))[0])&&x(n))):!!x(t)&&(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&void 0!==t.href||a)}(t,isNaN($.attr(t,"tabindex")))}}),$.fn.listEvents=function(){var t={};return this.each((function(){t=$._data(this,"events")})),t};var C={};function k(t){return"object"===i(t)||"function"==typeof t}function T(t){return"function"==typeof t?t():t}C.uniqueId=function(t,e,i,n){var s=t.id;if(s&&$("#".concat(s)).length<2)return s;i=i?"".concat(i,"-"):"",n=n?"-".concat(n):"",e=e||C.getArrayFromList(t.classList).join("-"),w[e]||(w[e]=1);var a="".concat(i).concat(e,"-").concat(w[e]).concat(n);return w[e]+=1,a},C.parseSettings=function(t,e){var i={};if(!t||!(t instanceof HTMLElement)&&!(t instanceof $)||t instanceof $&&!t.length)return i;t instanceof $&&(t=t[0]),e=e||"data-options";var n,s,a=t.getAttribute(e);if(!a||"string"!=typeof a||-1===a.indexOf("{"))return i;function r(t){return t.replace(/'/g,'"')}try{i=JSON.parse(r(a))}catch(t){i=JSON.parse((s=/({|,)(?:\s*)(?:')?([A-Za-z_$\.][A-Za-z0-9_ \-\.$]*)(?:')?(?:\s*):/g,n=(n=a).replace(s,'$1"$2":'),s=/:(?:\s*)(?!(true|false|null|undefined))([A-Za-z_$\.#][A-Za-z0-9_ \-\.$]*)/g,n=r(n=n.replace(s,':"$2"'))))}return i},C.parseOptions=function(t,e){return C.parseSettings(t,e)},$.fn.parseOptions=function(t,e){var i=[],n=this;return t instanceof HTMLElement||t instanceof SVGElement||t instanceof $?n=$(t):(e=t,t=void 0),n.each((function(t,n){i.push({element:this,options:C.parseOptions(n,e)})})),1===i.length?i[0].options:i},C.coerceToBoolean=function(t){return!/^(false|0)$/i.test(t)&&!!t},C.coerceSettingsToBoolean=function(t,e){var i,n;for(e&&Array.isArray(e)||Object.keys(t).forEach((function(t){e.push(t)})),i=0,n=e.length;i<n;i++)t[e[i]]=C.coerceToBoolean(t[e[i]]);return t},$.fn.timer=function(t,e){var i,n=$(this),s=0;function a(){i=setInterval((function(){s+=10,n.triggerHandler("update",[{counter:s}]),s>e&&(n.triggerHandler("timeout"),t.apply(arguments),clearInterval(i),s=0)}),10)}return a(),{event:this,cancel:function(){n.triggerHandler("cancel"),clearInterval(i),s=0},pause:function(){n.triggerHandler("pause"),clearInterval(i)},resume:function(){n.triggerHandler("resume"),a()}}},$.copyToClipboard=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(t){return!1}finally{document.body.removeChild(e)}}},$.fn.clearable=function(){var t=this;this.element=$(this);this.xButton=this.element.find(".icon.close").first(),this.xButton&&this.xButton.length||(this.xButton=$.createIconElement({classes:"close is-empty",icon:"close"}).icon()),this.clear=function(){t.element.val("").trigger("change").focus().trigger("cleared"),t.checkContents()},this.handleKeydown=function(e){var i=e.key;("Enter"===i||e.altKey&&("Delete"===i||"Backspace"===i))&&(e.preventDefault(),t.clear())},this.checkContents=function(){var e=t.element.val();e&&e.length?this.xButton.removeClass("is-empty"):this.xButton.addClass("is-empty"),this.element.trigger("contents-checked")},this.xButton.insertAfter(t.element),this.xButton[0].tabIndex=0,this.xButton[0].setAttribute("focusable",!0),this.xButton.off(["click.".concat("clearable"),"keydown.".concat("clearable")].join(" ")).on("click.clearable",this.clear).on("keydown.clearable",this.handleKeydown);var e=["blur.".concat("clearable"),"change.".concat("clearable"),"keyup.".concat("clearable")].join(" ");this.element.off(e).on(e,(function(){t.checkContents()})),this.checkContents()},C.actualChar=function(t){var e=t.which,i={188:"44",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"},n={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",37:"%",38:"&",39:'"',44:"<",46:">",47:"?"};return Object.prototype.hasOwnProperty.call(i,e)&&(e=i[e]),e>=96&&e<=105&&(e-=48),!t.shiftKey&&e>=65&&e<=90?String.fromCharCode(e+32):!t.shiftKey&&e>=37&&e<=40?"":t.shiftKey&&Object.prototype.hasOwnProperty.call(n,e)?n[e]:String.fromCharCode(e)},$.actualChar=function(t){return C.actualChar(t)},C.equals=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},u.convertToHTMLElement=function(t){return t instanceof HTMLElement?t:t instanceof $?t=t.length?t[0]:void 0:void 0},u.focusableElems=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=['button:not([disabled]):not([tabindex="-1"])','[href]:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[focusable]:not([focusable="false"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","iframe"].concat(e).filter((function(t){return-1===i.indexOf(t)})),s=c(t.querySelectorAll(n.join(", ")));return s.filter((function(t){return"use"!==t.tagName.toLowerCase()}))},C.isPlainObject=function(t){return!(!t||"[object Object]"!==Object.prototype.toString.call(t))&&(!Object.getPrototypeOf(t)||null!==t&&"object"===i(t)&&Object.getPrototypeOf(t)===Object.prototype)},C.mergeByPosition=function(t,e){var i,n=Math.max((null===(i=t)||void 0===i||null==i?void 0:i.length)||0,(null==e||null==e?void 0:e.length)||0);if(t||(t=[]),0===n)return[];for(var s=0;s<n;s++)void 0!==e[s]&&null!==e[s]&&(t[s]=e[s]);return t||[]},C.extend=function t(){var e=arguments[0]||{},i=!1,n=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],e=Array.isArray(arguments[1])?[]:{},n++);for(var s=function(n){for(var s in n){if(n.hasOwnProperty(s))if(n[s]instanceof jQuery)e[s]=$(n[s]);else if(i&&"[object Object]"===Object.prototype.toString.call(n[s])){var a=n[s],r=C.isPlainObject(a),o=Array.isArray(a)?[]:{};e[s]=r?t(!0,o,e[s],a):a}else Array.isArray(n[s])?e[s]=C.mergeByPosition(e[s],n[s]):void 0!==n[s]&&(e[s]=void 0===n[s]&&void 0!==e[s]?e[s]:n[s]);n.hasOwnProperty(s)||e[s]||"[object Function]"!==Object.prototype.toString.call(n[s])||(e[s]=n[s])}};n<arguments.length;n++)s(arguments[n]);return e},C.fixSVGIcons=function t(e){if(("ie"===m.browser.name||"11"===m.browser.version)&&void 0!==e){var i="http://www.w3.org/1999/xlink";if(e instanceof $){if(!e.length)return;if(1!==e.length)return void e.each((function(e,i){t(i)}));e=e[0]}e instanceof NodeList?Array.prototype.forEach.call(e,(function(e){t(e)})):setTimeout((function(){for(var t=e.getElementsByTagName("use"),n=0;n<t.length;n++){var s=t[n].getAttributeNS(i,"href");t[n].setAttributeNS(i,"href","x"),t[n].setAttributeNS(i,"href",s)}}),1)}},C.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},C.getContainerScrollDistance=function(t){if(!u.isElement(t))return[];var e=[];return $(t).parents([".scrollable",".scrollable-x",".scrollable-y",".modal",".card-content",".widget-content",".tab-panel",".datagrid-content"].join(", ")).each((function(){e.push({element:this,left:this.scrollLeft,top:this.scrollTop})})),document.body.classList.contains("no-scroll")||e.push({element:document.body,left:document.body.scrollLeft,top:document.body.scrollTop}),e},C.getHiddenSize=function(t,e){var i={dims:{width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},parentElement:void 0,includeMargin:!1};if(!u.isElement(t))return i.dims;t=$(t),e=a(a({},i),e);var n=u.isElement(e.parentElement);n&&(t=t.clone().appendTo(e.parentElement));var s=e.dims,r=t.parents().add(t),o={transition:"none",webkitTransition:"none",mozTransition:"none",msTransition:"none",visibility:"hidden",display:"block"},l=[];return r.each((function(){var t=this,e={};Object.keys(o).forEach((function(i){t.style[i]&&(e[i]=t.style[i],t.style[i]=o[i])})),l.push(e)})),s.padding={bottom:t.css("padding-bottom"),left:t.css("padding-left"),right:t.css("padding-right"),top:t.css("padding-top")},s.width=t.width(),s.outerWidth=t.outerWidth(e.includeMargin),s.innerWidth=t.innerWidth(),s.scrollWidth=t[0].scrollWidth,s.height=t.height(),s.innerHeight=t.innerHeight(),s.outerHeight=t.outerHeight(e.includeMargin),s.scrollHeight=t[0].scrollHeight,r.each((function(t){var e=this,i=l[t];Object.keys(o).forEach((function(t){i[t]&&(e.style[t]=i[t])}))})),n&&t.remove(),s},$.fn.getHiddenSize=function(t){return C.getHiddenSize(this,t)},C.isString=function(t){return"string"==typeof t||t instanceof String},C.isNumber=function(t){return"number"==typeof t&&void 0===t.length&&!isNaN(t)},C.safeSetSelection=function(t,e,i){t instanceof HTMLInputElement&&-1!==["text","password","search","url","week","month"].indexOf(t.type)&&(e&&void 0===i&&(i=e),document.activeElement===t&&("android"===m.os.name?y((function(){t.setSelectionRange(e,i,"none")}),0):t.setSelectionRange(e,i,"none")))},C.mergeSettings=function(t,e,i){return e&&k(e)||(e=k(i)?i:{}),C.extend(!0,{},T(i),T(e),void 0!==t?C.parseSettings(t):{})},C.isHTML=function(t){return/(<([^>]+)>)/i.test(t)};var S={convertDelayToFPS:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return t/16.7},convertFPSToDelay:function(t){if(isNaN(t))throw new Error("provided delay value is not a number");return 16.7*t},isFinite:function(t){return"number"==typeof t&&(t==t&&t!==1/0&&t!==-1/0)}};C.forEach=function(t,e,i){for(var n=0;n<t.length;n++)e.call(i,t[n],n,t)},S.sign=function(t){return Math.sign?Math.sign(t):0===(t=+t)||isNaN(t)?t:t>0?1:-1},C.getArrayFromList=function(t){var e=Array.prototype.slice;return Function.prototype.call.bind(e)(t)},C.getScrollbarWidth=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",t.appendChild(i);var n=i.offsetWidth;return t.parentNode.removeChild(t),e-n},C.deepCopy=function(t){return C.extend(!0,Array.isArray(t)?[]:{},t)},C.isSubscribedTo=function(t,e,i,n){var s=$._data(t).events;for(var a in s)if(a===i&&(1!==s[a].length||s[a][0].namespace!==n))return!0;return!1},C.isInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},C.getSiblingsHeight=function(t){return u.getSiblings(t).map((function(t){return t.offsetHeight})).reduce((function(t,e){return t+e}),0)},C.getParentAvailableHeight=function(t){return t.parentNode.offsetHeight-C.getSiblingsHeight(t)},C.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},C.toggleCompactMode=function(t){var e="form-layout-compact",i=t.classList.contains(e);i?t.classList.remove(e):t.classList.add(e);for(var n=t.querySelectorAll(".datagrid-container"),s=0;s<n.length;s++){var a=$(n[s]).data("datagrid");if(!a.rowHeight)return;i?a.rowHeight(a.oldRowHeight||"large"):(a.oldRowHeight=a.settings.rowHeight,a.rowHeight("extra-small"))}},C.addAttributes=function(t,e,i,n,s){if(i){var a=function(e,i){!t[0]||!s&&t[0].hasAttribute(e)||t.attr(e,i+(n?"-".concat(n.toLowerCase()):""))};if(Array.isArray(i))i.forEach((function(t){var i="function"==typeof t.value?t.value(e):t.value;a(t.name,i)}));else{var r="function"==typeof i.value?i.value(e):i.value;a(i.name,r)}}},C.stringAttributes=function(t,e,i){var n="";if(!e)return n;if(Array.isArray(e))return e.forEach((function(e){var s="function"==typeof e.value?e.value(t):e.value;n+=" ".concat(e.name,'="').concat(s+(i?"-".concat(i):""),'"')})),n;var s="function"==typeof e.value?e.value(t):e.value;return n+=" ".concat(e.name,'="').concat(s+(i?"-".concat(i.toLowerCase()):""),'"')};var A={isEmpty:function(t){return 0===Object.keys(t).length&&t.constructor===Object}},E={EMPTY:"",splice:function(t,e,i,n){return t.slice(0,e)+n+t.slice(e+Math.abs(i))},removeDuplicates:function(t){return t.split("").filter((function(t,e,i){return i.indexOf(t)===e})).join("")},containsHTML:function(t){return/<[a-z][\s\S]*>/i.test(t)},stripWhitespace:function(t){return t.replace(/\n/g,"").replace(/[\t ]+</g,"<").replace(/>[\t ]+</g,"><").replace(/>[\t ]+$/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},toBoolean:function(t){var e=+t;return isNaN(e)?!!String(t).toLowerCase().replace(!1,""):!!e},textWidth:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");i.font="".concat(e,"px arial");var n=i.measureText(t);return Math.round(n.width)},padDate:function(t,e,i){return t+"0".concat(e+1).slice(-2)+"0".concat(i).slice(-2)}};E.textWidth=function(t,e,i){this.canvasTW=this.canvasTW||(this.canvasTW=document.createElement("canvas"));var n=this.canvasTW.getContext("2d");n.font=i||"14px arial";var s=n.measureText(t);return Math.round(s.width+(e||0))},E.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},E.count=function(t,e){return t.split(e).length-1};var D={truncate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=t.toString(),n=i.split(".");return n[1]=n[1]?n[1].substr(0,e):"","".concat(n[0],".").concat(n[1])},round:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return D.toFixed(t,e)},fixTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(+(Math.round(+(t+"e"+e))+"e"+-e)).toFixed(e)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=t.toString(),n="",s=i.split("."),a=[s[0].substr(0,10),s[0].substr(10),s[1]],r=a[0],o=a[1];return n=this.fixTo((o||r)+(a[2]?".".concat(a[2]):""),e).toString(),o&&11===n.length&&"10000000000"===n&&(n="0000000000",r=(parseInt(r,10)+1).toString()),o&&"0"!==o.substr(0,1)&&(n=r+n),o&&"0"===o.substr(0,1)&&(n="".concat(r,"0").concat(n)),n},decimalPlaces:function(t){return Math.floor(t)===t||-1===t.toString().indexOf(".")?0:t.toString().split(".")[1].length||0}},I={};function L(t){var e=Number(t).toString(16);return 1===e.length?"0".concat(e):e}I.hexToRgba=function(t,e){var i;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3===(i=t.substring(1).split("")).length&&(i=[i[0],i[0],i[1],i[1],i[2],i[2]]),i="0x".concat(i.join("")),"rgba(".concat([i>>16&255,i>>8&255,255&i].join(","),",").concat(e.toString(),")")):""},I.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},I.rgbToHex=function(t,e,n){return"object"!==i(t)||"number"!=typeof t.r&&"string"!=typeof t.r||(e=t.g,n=t.b,t=t.r),"#".concat(L(t)).concat(L(e)).concat(L(n))},I.rgbToHsl=function(t,e,n){"object"!==i(t)||"number"!=typeof t.r&&"string"!=typeof t.r||(e=t.g,n=t.b,t=t.r),t=Number(t),e=Number(e),n=Number(n),t/=255,e/=255,n/=255;var s=Math.min(t,e,n),a=Math.max(t,e,n),r=a-s,o=0,l=0,c=0;return o=0===r?0:a===t?(e-n)/r%6:a===e?(n-t)/r+2:(t-e)/r+4,(o=Math.round(60*o))<0&&(o+=360),c=(a+s)/2,0!==r&&(l=r/(1-Math.abs(2*c-1))),{h:o,s:l=+(100*l).toFixed(1),l:c=+(100*c).toFixed(1)}},I.hslToRgb=function(t,e,n){"object"!==i(t)||"number"!=typeof t.h&&"string"!=typeof t.h||(e=(t=t.h).s,n=t.l),t=Number(t),e=Number(e),n=Number(n),e/=100,n/=100;var s=(1-Math.abs(2*n-1))*e,a=s*(1-Math.abs(t/60%2-1)),r=n-s/2,o=0,l=0,c=0;return 0<=t&&t<60?(o=s,l=a,c=0):60<=t&&t<120?(o=a,l=s,c=0):120<=t&&t<180||180<=t&&t<240?(o=0,l=a,c=s):240<=t&&t<300?(o=a,l=0,c=s):300<=t&&t<360&&(o=s,l=0,c=a),{r:o=Math.round(255*(o+r)),g:l=Math.round(255*(l+r)),b:c=Math.round(255*(c+r))}},I.getLuminousColorShade=function(t,e){t=this.validateHex(t).substr(1),e=e||0;var i,n,s="#";for(n=0;n<3;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+="00".concat(i).substr(i.length);return s},I.validateHex=function(t){return(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#".concat(t)},I.getContrastColor=function(t,e,i){t=t?t.replace("#",""):"";var n=function(e){return parseInt(t.substr(e,2),16)};return(299*n(0)+587*n(2)+114*n(4))/1e3>=128?i||"black":e||"white"},I.getDesaturatedColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t=t?t.replace("#",""):"";var i=I.hexToRgb(t),n=.3086*i.r+.6094*i.g+.082*i.b;return i.r=Math.round(i.r*e+n*(1-e)),i.g=Math.round(i.g*e+n*(1-e)),i.b=Math.round(i.b*e+n*(1-e)),I.rgbToHex(i.r,i.g,i.b)},I.isLighter=function(t,e){var i=I.hexToRgb(t),n=I.hexToRgb(e),s=I.rgbToHsl(i),a=I.rgbToHsl(n);return s.l<=a.l};var P=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53914,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60647,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74585,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],M="",R=!1;"object"===i(window.SohoConfig)&&("string"==typeof window.SohoConfig.culturesPath&&(M=window.SohoConfig.culturesPath),"boolean"==typeof window.SohoConfig.minifyCultures&&(R=window.SohoConfig.minifyCultures));var B={currentLocale:{name:"",data:{}},currentLanguage:{name:""},cultures:{},languages:{},dff:[],culturesPath:M,defaultLocales:[{lang:"af",default:"af-ZA"},{lang:"ar",default:"ar-EG"},{lang:"bg",default:"bg-BG"},{lang:"cs",default:"cs-CZ"},{lang:"da",default:"da-DK"},{lang:"de",default:"de-DE"},{lang:"el",default:"el-GR"},{lang:"en",default:"en-US"},{lang:"es",default:"es-ES"},{lang:"et",default:"et-EE"},{lang:"fi",default:"fi-FI"},{lang:"fr",default:"fr-FR"},{lang:"he",default:"he-IL"},{lang:"hi",default:"hi-IN"},{lang:"hr",default:"hr-HR"},{lang:"hu",default:"hu-HU"},{lang:"id",default:"id-ID"},{lang:"it",default:"it-IT"},{lang:"iw",default:"he-IL"},{lang:"ja",default:"ja-JP"},{lang:"ko",default:"ko-KR"},{lang:"lt",default:"lt-LT"},{lang:"lv",default:"lv-LV"},{lang:"ms",default:"ms-bn"},{lang:"nb",default:"no-NO"},{lang:"nn",default:"no-NO"},{lang:"nl",default:"nl-NL"},{lang:"no",default:"no-NO"},{lang:"pl",default:"pl-PL"},{lang:"pt",default:"pt-PT"},{lang:"ro",default:"ro-RO"},{lang:"ru",default:"ru-RU"},{lang:"sk",default:"sk-SK"},{lang:"sl",default:"sl-SI"},{lang:"sv",default:"sv-SE"},{lang:"th",default:"th-TH"},{lang:"tr",default:"tr-TR"},{lang:"uk",default:"uk-UA"},{lang:"vi",default:"vi-VN"},{lang:"zh",default:"zh-CN"}],supportedLocales:["af-ZA","ar-EG","ar-SA","bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-AU","en-GB","en-IN","en-NZ","en-US","en-ZA","es-AR","es-ES","es-419","es-MX","es-US","et-EE","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","lt-LT","lv-LV","ms-bn","ms-my","nb-NO","nn-NO","nl-NL","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-Hans","zh-Hant","zh-TW"],translatedLocales:["fr-CA","fr-FR","pt-BR","pt-PT"],defaultLocale:"en-US",minify:R,updateLanguageTag:function(t){var e=$("html");2===t.length&&(t=this.defaultLocales.filter((function(e){return e.lang===t}))),e.attr("lang",t),this.isRTL()?e.attr("dir","rtl"):e.removeAttr("dir"),this.isRTL()&&B.flipIconsHorizontally(),$("body").removeClass("busy-loading-locale")},getCulturesPath:function(){if(!this.culturesPath)for(var t=document.getElementsByTagName("script"),e=/sohoxi(.min){0,1}(.{0,1}[a-z0-9]*)\.js/,i=0;i<t.length;i++){var n=t[i].src,s=n.indexOf("?");if(""!==n&&s>-1&&(n=n.substr(0,s)),"sohoxi-script"===t[i].id)return"".concat(n.substring(0,n.lastIndexOf("/")),"/");n.match(e)&&(this.culturesPath="".concat(n.replace(e,""),"cultures/"))}return this.culturesPath},cultureInHead:function(){for(var t=!1,e=document.getElementsByTagName("script"),i=0;i<e.length;i++){e[i].src.indexOf("cultures")>-1&&(t=!0)}return t},correctLocale:function(t){"in-ID"===t&&(t="id-ID"),"iw"===t.substr(0,2)&&(t="he-IL");var e=t.split("-")[0];if(-1===this.supportedLocales.indexOf(t)){if((t=this.defaultLocales.filter((function(t){return t.lang===e})))&&t[0])return t[0].default;t=this.defaultLocale}return t},correctLanguage:function(t){var e;"en-"===(null===(e=t)||void 0===e||null==e?void 0:e.substr(0,3))&&(t=t.substr(0,2));var i=this.defaultLocales.filter((function(e){return e.lang===t}));return i&&i[0]?this.remapLanguage(t):(i=this.remapLanguage(t),i)},remapLanguage:function(t){var e=t;return"in"===t&&(e="id"),"iw"===t&&(e="he"),"nb"!==t&&"nn"!==t&&"nb-NO"!==t&&"nn-NO"!==t||(e="no"),e},addCulture:function(t,e,i){var n=t.substr(0,2);if(this.cultures[t]=e,this.cultures[t].name=t,!this.languages[n]&&e.messages)this.languages[n]={name:n,direction:e.direction||(i?i.direction:""),nativeName:e.nativeName||(i?i.nativeName:""),messages:e.messages||(i?i.messages:{})},this.languages[t]={name:t,direction:e.direction||(i?i.direction:""),nativeName:e.nativeName||(i?i.nativeName:""),messages:e.messages||(i?i.messages:{})};else if(!this.languages[n]&&!e.messages){var s=this.parentLocale(t);s.default&&s.default!==t&&!this.cultures[s.default]&&this.appendLocaleScript(s.default)}},parentLocale:function(t){var e=t.substr(0,2),i=this.defaultLocales.filter((function(t){return t.lang===e}))[0]||[{default:"en-US"}];return this.translatedLocales.indexOf(t)>-1?{lang:"fr",default:"fr-CA"}:i},appendedLocales:[],appendLocaleScript:function(t,e,n,s){var a=this,r=document.createElement("script"),o=this.minify?".min":"";r.async=!1,this.appendedLocales.indexOf(t)>-1||(this.appendedLocales.push(t),r.src=s?"".concat(this.getCulturesPath()+s).concat(o,".js"):"".concat(this.getCulturesPath()+t).concat(o,".js"),r.onload=function(){e&&!n&&(a.setCurrentLocale(t,a.cultures[t]),a.dff[t].resolve(t)),n&&a.dff[n]&&(a.setCurrentLocale(t,a.cultures[t]),a.setCurrentLocale(n,a.cultures[n]),a.dff[n].resolve(n)),n&&a.dff[t]&&a.cultures[t]&&(a.setCurrentLocale(t,a.cultures[t]),a.dff[t].resolve(t)),e||n||!a.dff[t]||a.dff[t].resolve(t)},r.onerror=function(){a.dff[t]&&a.dff[t].reject()},"object"===i(window.SohoConfig)&&"string"==typeof window.SohoConfig.nonce&&r.setAttribute("nonce",window.SohoConfig.nonce),document.head.appendChild(r))},set:function(t){if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t)return this.dff.resolve(),this.dff.promise();this.cultures["en-US"]||this.appendLocaleScript("en-US","en-US"===t);var e=!1,i=this.parentLocale(t);return i.default&&i.default!==t&&!this.cultures[i.default]&&(e=!0),e||!t||this.cultures[t]||this.currentLocale.name===t||"en-US"===t||(this.setCurrentLocale(t),this.appendLocaleScript(t,!0)),e&&("en-US"!==i.default&&this.appendLocaleScript(i.default,!1),this.appendLocaleScript(t,!1,i.default)),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(this.currentLocale.name),this.setCurrentLocale(t,this.cultures[t]),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(this.currentLocale.name),this.dff[t].promise()},getLocale:function(t,e){if(!t)return null;if(t=this.correctLocale(t),this.dff[t]=$.Deferred(),""===t){var i=$.Deferred();return i.resolve(),i.promise()}return t&&"en-US"!==t&&!this.cultures["en-US"]&&this.appendLocaleScript("en-US",!1),t&&!this.cultures[t]&&this.currentLocale.name!==t&&"en-US"!==t&&this.appendLocaleScript(t,!1,!1,e),t&&this.currentLocale.data&&this.currentLocale.dataName===t&&this.dff[t].resolve(t),this.cultures[t]&&this.cultureInHead()&&this.dff[t].resolve(t),this.dff[t].promise()},setLanguage:function(t){var e=this,i=this.currentLocale.name;t=this.correctLanguage(t),this.languages[t]||this.set(t).done((function(){e.set(i),e.setLanguage(t)}));var n=this.correctLocale(t);return this.languages[t]?(this.currentLanguage=this.languages[t],this.updateLanguageTag(t),this.dff[n]=$.Deferred(),this.dff[n].resolve()):(this.currentLanguage.name=t,this.dff[n])},setCurrentLocale:function(t,e){var n,s,a,r,o,l=this.remapLanguage(t.substr(0,2));(this.currentLocale.name=t,e)&&(this.currentLocale.data=e,this.currentLocale.dataName=t,this.currentLanguage={},this.currentLanguage.name=l,this.languages[l]&&(this.currentLanguage=this.languages[l],this.updateLanguageTag(t)),this.translatedLocales.indexOf(t)>-1&&(this.languages[l].direction=e.direction,this.languages[l].messages=e.messages,this.languages[l].name=l,this.languages[l].nativeName=e.nativeName,this.languages[t]={direction:e.direction,messages:e.messages,name:t,nativeName:e.nativeName}),"object"===("undefined"==typeof d3?"undefined":i(d3))&&d3.formatDefaultLocale({decimal:(null==e||null===(n=null==e?void 0:e.numbers)||void 0===n||null==n?void 0:n.decimal)||".",thousands:(null==e||null===(s=null==e?void 0:e.numbers)||void 0===s||null==s?void 0:s.group)||",",grouping:(null==e||null===(a=null==e?void 0:e.numbers)||void 0===a||null==a?void 0:a.groupSizes)||[3],percent:(null==e||null===(r=null==e?void 0:e.numbers)||void 0===r||null==r?void 0:r.percentSign)||"%",currency:null!=e&&(null==e?void 0:e.currencySign)?""===e.currencyFormat.split("")[0]?[e.currencySign,""]:["",e.currencySign]:["$",""],minus:(null==e||null===(o=null==e?void 0:e.numbers)||void 0===o||null==o?void 0:o.minusSign)||"-"}))},formatDate:function(t,e){e||(e={date:"short"});var i=this.useLocale(e);if(t){if("0000"===t||"000000"===t||"00000000"===t)return"";if("string"==typeof t&&/T|Z/g.test(t)&&(t=this.newDateObj(t)),!(t instanceof Date)&&"string"==typeof t){var n=B.parseDate(t,e);isNaN(n)&&"datetime"===e.date&&"-"===t.substr(4,1)&&"-"===t.substr(7,1)&&(n=new Date(t.substr(0,4),t.substr(5,2)-1,t.substr(8,2),t.substr(11,2),t.substr(14,2),t.substr(17,2))),t=n}if(!(t instanceof Date)&&"number"==typeof t)t=new Date(t);if(t){var s,a="",r=i.calendars?i.calendars[0]:null;e.pattern&&(s=e.pattern),e.date&&(s=r.dateFormat[e.date]),"string"==typeof e&&""!==e&&(s=e),s||(s=r.dateFormat.short);var o=t instanceof Array?t[0]:t.getFullYear(),l=t instanceof Array?t[1]:t.getMonth(),c=t instanceof Array?t[2]:t.getDate(),d=t.getDay?t.getDay():"",h=t instanceof Array?t[3]:t.getHours(),u=t instanceof Array?t[4]:t.getMinutes(),p=t instanceof Array?t[5]:t.getSeconds(),g=t instanceof Array?t[6]:t.getMilliseconds();if(e.fromGregorian||e.toUmalqura){var f=this.gregorianToUmalqura(t);c=f[2],l=f[1],o=f[0]}if(e.toGregorian||e.fromUmalqura){var m=this.umalquraToGregorian(o,l,c);c=m.getDate(),l=m.getMonth(),o=m.getFullYear()}var v=(a=(a=(a=(a=(a=(s=(s=(s=(s=s.replace("de","nnnnn")).replace("ngy","nnnn")).replace("thng","t1ng")).replace("den","nnn")).replace("dd",this.pad(c,2))).replace("d",c)).replace("yyyy",o)).replace("yy",o.toString().substr(2))).replace("y",o)).indexOf(" a")>-1||0===a.indexOf("a");if(v&&0===h&&(a=(a=a.replace("hh",12)).replace("h",12)),a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace("hh",h>12?this.pad(h-12,2):this.pad(h,2))).replace("h",h>12?h-12:h)).replace("HH",this.pad(h,2))).replace("H",h)).replace("mm",this.pad(u,2))).replace("ss",this.pad(p,2))).replace("SSS",this.pad(g,3))).replace("MMMM",r?r.months.wide[l]:null)).replace("MMM",r?r.months.abbreviated[l]:null),-1===s.indexOf("MMM")&&(a=(a=a.replace("MM",this.pad(l+1,2))).replace("M",l+1)),v&&r&&(0===(a=a.replace(" a"," ".concat(h>=12?r.dayPeriods[1]:r.dayPeriods[0]))).indexOf("a")&&(a=a.replace("a"," ".concat(h>=12?r.dayPeriods[1]:r.dayPeriods[0]))),a=a.replace("EEEE",r.days.wide[d])),r&&(a=a.replace("EEEE",r.days.wide[d])),r&&(a=a.replace("EEE",r.days.abbreviated[d])),r&&(a=a.replace("EE",r.days.narrow[d])),(a=(a=(a=(a=a.replace("nnnnn","de")).replace("nnnn","ngy")).replace("t1ng","thng")).replace("nnn","den")).indexOf("zz")>-1){var b=new Date,y=this.getTimeZone(b,"short"),w=this.getTimeZone(b,"long");a=(a=a.replace("zzzz",w)).replace("zz",y)}return a.trim()}}},newDateObj:function(t){var e=new Date(t);if("safari"===m.browser.name&&"string"==typeof t&&/T|Z/g.test(t)){var i=t.replace(/Z/,"").replace(/T|:/g,"-").split("-");i=i.map((function(t,e){return+(1===e?t-1:t)})),e=l(Date,c(i))}return e},formatHour:function(t,e){var n=this.calendar().dateFormat.timeSeparator,s=this.currentLocale.name;"object"===i(e)&&(s=e.locale||s,n=e.timeSeparator||this.calendar(s).dateFormat.timeSeparator),"string"==typeof t&&-1===t.indexOf(n)&&(n=":");var a=new Date;if("number"==typeof t){var r=t.toString().split(".");a.setHours(r[0]),a.setMinutes(r[1]?60*parseFloat("0.".concat(r[1])):0)}else{var o=t.split(n);a.setHours(o[0]),a.setMinutes(o[1]||0)}return this.formatDate(a,{date:"hour"})},formatHourRange:function(t,e,n){var s=this.currentLocale.name,a=this.calendar(s).dayPeriods,r=!1;"object"===i(n)&&(s=n.locale||s,a=this.calendar(s).dayPeriods);var o="".concat(B.formatHour(t,n)," - ").concat(B.formatHour(e,n));return(o.indexOf(":00 AM -")>-1||o.indexOf(":00 PM -")>-1)&&(r=!0),E.count(o,a[0])>1&&(o=o.replace(a[0],"")),E.count(o,a[1])>1&&(o=o.replace(" ".concat(a[1]),"")),o=o.replace("  "," "),r&&(o=o.replace(":00 -"," -")),o},getTimeZone:function(t,e){var i=B.currentLocale.name||"en-US";if("ie"===m.browser.name&&"11"===m.browser.version)return t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("");var n=t.toLocaleDateString(i),s=t.toLocaleDateString(i,{timeZoneName:"long"===e?"long":"short"}),a=s.indexOf(n);return a>=0?(s.substring(0,a)+s.substring(a+n.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):s},dateToTimeZone:function(t,e,i){return"ie"===m.browser.name&&"11"===m.browser.version?"".concat(t.toLocaleString(B.currentLocale.name)," ").concat(t.toTimeString().match(new RegExp("[A-Z](?!.*[(])","g")).join("")):t.toLocaleString(B.currentLocale.name,{timeZone:e,timeZoneName:i})},dateToUTC:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},toLocaleString:function(t,e,n,s){if("number"!=typeof t)return"";var a={locale:e||B.currentLocale.name,options:n||void 0},r=t.toLocaleString(a.locale,a.options);if(!/undefined|null/.test(i(s))){var o=this.getSeparator(a.locale,"group");"."!==o&&(r=r.replace(new RegExp(o,"g"),s.toString()))}return r},getSeparator:function(t,e){return Intl.NumberFormat(t).formatToParts(1000.1).find((function(t){return t.type===e})).value},convertNumberToEnglish:function(t){for(var e=["","","","","","","","","",""],i=["","","","","","","","","",""],n=["","","","","","","","","",""],s=["","","","","","","","","",""],a=["","","","","","","","","",""],r=0;r<=9;r++)t=(t=(t=(t=(t=(t=(t=t.replace(e[r],r)).replace("","")).replace(",","")).replace(i[r],r)).replace(n[r],r)).replace(s[r],r)).replace(a[r],r),0===r&&(t=t.replace("",r));return parseFloat(t)},isValidDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},parseDate:function(t,e,n){if(t){var s=e,a=this.currentLocale.name,r=this.calendar();"object"===i(e)&&(a=e.locale||a,s=e.dateFormat||this.calendar(a).dateFormat[s.date]),"object"===i(e)&&e.pattern&&(s=e.dateFormat||e.pattern),"object"===i(e)&&e.calendarName&&e.locale&&(r=this.calendar(e.locale,e.language,e.calendarName)),s||(s=this.calendar(a).dateFormat.short);var o=t;if("0000"!==t&&"000000"!==t&&"00000000"!==t){var l,c;s.pattern&&(s=s.pattern);var d,h,u={},p=s.toLowerCase().indexOf("h")>-1,g=t.toLowerCase().indexOf("z")>-1,f=3===(s.match(/M/g)||[]).length&&r&&r.months&&r.months.abbreviated&&r.months.abbreviated.filter((function(t){return/\./.test(t)})).length;if(p){var m=B.getTimeZone(new Date,"short"),v=B.getTimeZone(new Date,"long");t=(t=t.replace(" ".concat(m),"")).replace(" ".concat(v),"");var b=f?/[T\s:-]/g:/[T\s:.-]/g;s=(s=s.replace(" zzzz","").replace(" zz","")).replace(b,"/").replace(/z/i,""),t=t.replace(b,"/").replace(/z/i,"")}s=s.replace(" de "," "),t=t.replace(" de "," "),s=s.replace("/ah/","/a/h/"),t=t.replace("","/"),s=s.replace(",",""),t=t.replace(",","");var y=s.indexOf("Mdyyyy"),w=s.indexOf("dMyyyy"),x=-1,C=-1;if((y>-1||w>-1)&&(C=(x=y>-1?y:w>-1?w:0)+t.indexOf("/")>-1?t.indexOf("/"):t.length,t="".concat(t.substr(x,C-4),"/").concat(t.substr(C-4,t.length)),t="".concat(t.substr(x,t.indexOf("/")/2),"/").concat(t.substr(t.indexOf("/")/2,t.length))),y>-1&&(s=s.replace("Mdyyyy","M/d/yyyy")),w>-1&&(s=s.replace("dMyyyy","d/M/yyyy")),-1!==s.indexOf(" ")){var k=f?/[\s:]/g:/[\s:.]/g;s=s.replace(k,"/"),t=t.replace(k,"/")}if(s.indexOf("MMMM")>-1&&B.isRTL()&&s&&"MMMM/dd"!==s&&"dd/MMMM"!==s){var T=t.lastIndexOf("/");t=t.substr(0,T-1).replace("/"," ")+t.substr(T)}if(-1===s.indexOf(" ")&&-1===s.indexOf(".")&&-1===s.indexOf("/")&&-1===s.indexOf("-")){-1!==t.indexOf(" ")?t=t.split(" ").join(""):-1!==t.indexOf(".")?t=t.split(".").join(""):-1!==t.indexOf("/")?t=t.split("/").join(""):-1!==t.indexOf("-")&&(t=t.split("-").join(""));var S=s[0],A="",E="";for(d=0,h=s.length;d<h;d++)E+=s[d]!==S?"/".concat(t[d]):t[d],A+=s[d]!==S?"/".concat(s[d]):s[d],d>1&&(S=s[d]);t=E,s=A}l=s.split("/"),c=t.split("/"),1===l.length&&(l=s.split(".")),1===c.length&&(c=t.split(".")),1===l.length&&(l=s.split("-")),1===c.length&&(c=t.split("-")),1===l.length&&(l=s.split(" ")),1===c.length&&(c=t.split(" "));var D=this.getDatePart(l,c,"M","MM","MMM","MMMM"),I=this.getDatePart(l,c,"yy","yyyy"),L=!1,P=!1,M=r.dayPeriods[0].replace(/\./g,""),R=r.dayPeriods[1].replace(/\./g,"");for(d=0,h=c.length;d<h;d++){var O="".concat(l[d]),F=c[d],N=parseInt(F,10);L||(L=O.toLowerCase().indexOf("d")>-1);var z=void 0,H=void 0,q=void 0;switch(O){case"d":if(z=new Date(I,D,0).getDate(),N<1||N>31||N>z)return;u.day=F;break;case"dd":if(N<1||N>31||N<10&&"0"!==F.substr(0,1))return;u.day=F;break;case"M":if(N<1||N>12)return;u.month=F-1;break;case"MM":if(N<1||N>12||N<10&&"0"!==F.substr(0,1))return;u.month=F-1;break;case"MMM":H=this.calendar(a).months.abbreviated;for(var V=0;V<H.length;V++)o.indexOf(H[V])>-1&&(u.month=V);break;case"MMMM":q=this.calendar(a).months.wide;for(var W=0;W<q.length;W++)o.indexOf(q[W])>-1&&(u.month=W);break;case"yy":u.year=this.twoToFourDigitYear(F);break;case"yyyy":u.year=2===F.length?this.twoToFourDigitYear(F):F;break;case"h":if(N<0||N>12)return;u.h=P?u.h:F;break;case"hh":if(N<0||N>12)return;u.h=P?u.h:1===F.length?"0".concat(F):F;break;case"H":if(N<0||N>24)return;u.h=P?u.h:F;break;case"HH":if(N<0||N>24)return;u.h=P?u.h:1===F.length?"0".concat(F):F;break;case"ss":if(N<0||N>60){u.ss=0;break}u.ss=F;break;case"SSS":u.ms=F;break;case"mm":if(N<0||N>60){u.mm=0;break}u.mm=F;break;case"a":F.toLowerCase()!==M&&F.toUpperCase()!==M||(u.a="AM",!u.h&&l[d+1]&&"h"===l[d+1].toLowerCase().substr(0,1)&&(u.h=c[d+1],P=!0),u.h&&(12!==u.h&&"12"!==u.h||(u.h=0))),F.toLowerCase()!==R&&F.toUpperCase()!==R||(u.a="PM",u.h&&u.h<12&&(u.h=parseInt(u.h,10)+12))}}var j=function(t){return t%4==0&&t%100!=0||t%400==0};if(u.return=void 0,u.leapYear=j(u.year),!p||u.h||u.mm){if(!u.year&&0!==u.year&&!n){for(u.isUndefindedYear=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("y")>-1&&void 0!==c[d]){u.isUndefindedYear=!1;break}if(u.isUndefindedYear){var U=29===parseInt(u.day,10)&&1===parseInt(u.month,10);if(u.year=U?function(t){for(var e="number"!=typeof t||isNaN(t)?(new Date).getFullYear():t,i=0;i<4&&!j(e);i++)e--;return e}():(new Date).getFullYear(),"islamic-umalqura"===r.name){var _=this.gregorianToUmalqura(new Date(u.year,0,1));u.year=_[0]}}else delete u.year}if(u.year&&2===u.year.length&&(u.year="20".concat(u.year)),u.year=$.trim(u.year),u.day=$.trim(u.day),(""===u.year||u.year&&2!=="".concat(u.year).length&&4!=="".concat(u.year).length)&&delete u.year,!u.month&&0!==u.month&&!n){for(u.isUndefindedMonth=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("M")>-1&&void 0!==c[d]){u.isUndefindedMonth=!1;break}u.isUndefindedMonth&&(u.month=(new Date).getMonth())}if(!(u.day||0===u.day||n&&L)){for(u.isUndefindedDay=!0,d=0,h=l.length;d<h;d++)if(l[d].indexOf("d")>-1&&void 0!==c[d]){u.isUndefindedDay=!1;break}u.isUndefindedDay?u.day=1:delete u.day}return p?g?(void 0!==u.h&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm))),void 0!==u.ss&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss))),void 0!==u.ms&&(u.return=new Date(Date.UTC(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms)))):(void 0!==u.h&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm)),void 0!==u.ss&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss)),void 0!==u.ms&&(u.return=new Date(u.year,u.month,u.day,u.h,u.mm,u.ss,u.ms))):u.return=new Date(u.year,u.month,u.day),"islamic-umalqura"===r.name?[parseInt(u.year,10),parseInt(u.month,10),parseInt(u.day,10),parseInt(u.h||0,10),parseInt(u.mm||0,10),parseInt(u.ss||0,10),parseInt(u.ms||0,10)]:this.isValidDate(u.return)?u.return:void 0}}}},twoToFourDigitYear:function(t){return parseInt((t>39?"19":"20")+t,10)},getDatePart:function(t,e,i,n,s,a){var r=0;return $.each(e,(function(o){i!==t[o]&&n!==t[o]&&s!==t[o]&&a!==t[o]||(r=e[o])})),r},useLocale:function(t){var e=this.currentLocale.data;if(t&&t.locale&&this.cultures[t.locale]&&(e=this.cultures[t.locale]),t&&t.language&&this.languages[t.language]){var i=C.extend(!0,{},this.currentLocale.data);if(i.calendars)return i.calendars[0]=this.calendar(t.locale||this.currentLocale.name,t.language),i}return e.numbers||(e.numbers=this.numbers()),e},useLanguage:function(t){var e=this.currentLanguage;if(t&&t.locale){var i=t.locale.split("-")[0];e=this.languages[i]}return t&&t.locale&&this.currentLanguage.name!==this.currentLocale.name.substr(0,2)&&this.languages[this.currentLanguage.name]&&(e=this.languages[this.currentLanguage.name]),t&&t.language&&this.languages[t.language]&&(e=this.languages[t.language]),e},formatNumber:function(t,e){var i,n,s,a=this.useLocale(e),r=e&&e.decimal?e.decimal:a.numbers.decimal,o=e&&void 0!==e.minimumFractionDigits?e.minimumFractionDigits:e&&e.style&&"currency"===e.style?2:e&&e.style&&"percent"===e.style?0:2,l=e&&void 0!==e.maximumFractionDigits?e.maximumFractionDigits:e&&e.style&&("currency"===e.style||"percent"===e.style)?2:e&&e.minimumFractionDigits?e.minimumFractionDigits:3;if(null!=t&&""!==t){if(e&&"integer"===e.style&&(l=0,o=0),e&&"currency"===e.style){var c=e&&e.currencySign?e.currencySign:a.currencySign,d=e&&e.currencyFormat?e.currencyFormat:a.currencyFormat;d||(d="#,##0.00"),n=d.replace("",c)}if(e&&"percent"===e.style){var h=a.numbers?a.numbers.percentSign:"%";s=(s=a.numbers?a.numbers.percentFormat:"### %").replace("",h)}"string"==typeof t&&(t=B.parseNumber(t)),t.toString().indexOf("e")>-1&&(t=t.toFixed(l+1)),e&&"percent"===e.style&&(t=(100*t).toFixed(o));var u=this.truncateDecimals(t,o,l,e&&e.round).split("."),p=[3,3];a&&a.numbers&&a.numbers.groupSizes&&(p=a.numbers.groupSizes),e&&e.groupSizes&&(p=e.groupSizes);var g=e&&void 0!==e.group?e.group:a.numbers.group,f=this.expandNumber(u[0],p,g);u[0]=f,i=u.join(r);var m=a&&a.numbers&&a.numbers.minusSign?a.numbers.minusSign:"-",v=i.indexOf(m)>-1;i=i.replace(m,"");var b=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},y="";return 0===o&&(y=new RegExp("(".concat(b(r),"[0-9]*?)0+$")),i=i.replace(y,"$1")),o>0&&(y=new RegExp("(".concat(b(r),".{").concat(o,"}[0-9]*?)0+$")),i=i.replace(y,"$1")),y=new RegExp("".concat(b(r),"$")),i=i.replace(y,""),e&&"currency"===e.style&&(i=n.replace("###",i)),e&&"percent"===e.style&&(i=s.replace("###",i)),v&&(i=m+i),i}},expandNumber:function(t,e,i){var n=t.length,s=!1;if("-"===t.substr(0,1)&&(n=(t=t.substr(1)).length,s=!0),n<=3)return(s?"-":"")+t;if(0===e[0])return(s?"-":"")+t;var a=t.substr(t.length-e[0]),r=t.substr(0,t.length-e[0]);if(0===e[1])return(s?"-":"")+r+(""===r?"":i)+a;var o=r.split("").reverse().join(""),l=new RegExp(".{1,".concat(e[1],"}"),"g");return(s?"-":"")+o.match(l).join(i).split("").reverse().join("")+i+a},truncateDecimals:function(t,e,i,n){var s=t;s=n?D.round(t,i):D.truncate(t,i);var a=D.decimalPlaces(s);return a<e&&(s=s.toString()+new Array(e-a+1).join("0")),s.toString()},parseNumber:function(t,e){var i,n=this.useLocale(e),s=n.numbers;if(!(i=t))return NaN;"number"==typeof t&&(i=i.toString());var a=s?s.group:",",r=s?s.decimal:".",o=s?s.percentSign:"%",l=n.currencySign||"$",c=" "===a?new RegExp(/\s/g):new RegExp("\\".concat(a),"g");return(i=(i=(i=(i=(i=(i=i.replace(c,"")).replace(r,".")).replace(o,"")).replace(l,"")).replace("$","")).replace(" ","")).length>=19?i:parseFloat(i)},translate:function(t,e){var n=this.useLanguage(e),s=!1,a=!0;if("&nsbp;"===t)return"";if("boolean"==typeof e&&(s=e),"object"===i(e)&&void 0!==e.showAsUndefined&&(s=e.showAsUndefined),"object"===i(e)&&void 0!==e.showBrackets&&(a=e.showBrackets),void 0===n||void 0===n.messages)return s?void 0:"".concat(a?"[":"").concat(t).concat(a?"]":"");if(void 0===n.messages[t]){return this.languages&&this.languages.en&&this.languages.en.messages&&void 0!==this.languages.en.messages[t]?this.languages.en.messages[t].value:s?void 0:"".concat(a?"[":"").concat(t).concat(a?"]":"")}return n.messages[t].value},extendTranslations:function(t,e){if(this.languages[t]){var i=this.languages[t].messages;this.languages[t].messages=C.extend(!0,i,e)}},calendar:function(t,e,i){var n=[];if(this.currentLocale.data.calendars&&!t&&(n=this.currentLocale.data.calendars),e&&e.length>2&&(e=e.substr(0,2)),t&&this.cultures[t]&&(n=this.cultures[t].calendars),i&&n)for(var s=0;s<n.length;s++){var a=n[s];if(a.name===i)return a}if(!n[0])return{dateFormat:{separator:"/",timeSeparator:":",short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"EEEE, MMMM d, y",month:"MMMM d",year:"MMMM yyyy",timestamp:"h:mm:ss a",datetime:"M/d/yyyy h:mm a"},timeFormat:"HH:mm:ss",dayPeriods:["AM","PM"]};var r=C.extend(!0,{},n[0]);if(e&&t.substr(0,2)!==e){var o=this.defaultLocales.filter((function(t){return t.lang===e}));if(o[0]){var l=this.cultures[o[0].default];r.days=l.calendars[0].days,r.months=l.calendars[0].months,r.dayPeriods=l.calendars[0].dayPeriods}}return r},numbers:function(){return this.currentLocale.data.numbers?this.currentLocale.data.numbers:{percentSign:"%",percentFormat:"### %",minusSign:"-",decimal:".",group:","}},pad:function(t,e,i){return i=i||"0",(t+="").length>=e?t:new Array(e-t.length+1).join(i)+t},isRTL:function(){return!!this.currentLanguage&&"right-to-left"===this.currentLanguage.direction},isIslamic:function(t){var e;return"islamic-umalqura"===(null===(e=this.calendar(t))||void 0===e||null==e?void 0:e.name)},toUpperCase:function(t){return"function"==typeof this.currentLocale.data.toUpperCase?this.currentLocale.data.toUpperCase(t):t.toLocaleUpperCase()},toLowerCase:function(t){return"function"==typeof this.currentLocale.data.toLowerCase?this.currentLocale.data.toLowerCase(t):t.toString().toLocaleLowerCase()},capitalize:function(t){return this.toUpperCase(t.charAt(0))+t.slice(1)},capitalizeWords:function(t){for(var e=t.split(" "),i=0;i<e.length;i++)e[i]=this.capitalize(e[i]);return e.join(" ")},gregorianToUmalqura:function(t){if("function"!=typeof t.getMonth)return null;var e=function(t){for(var e=t-24e5+.5,i=0,n=0;n<P.length&&!(P[n]>e);n++)i++;var s=i+15292,a=Math.floor((s-1)/12);return{year:a+1,month:s-12*a-1,day:e-P[i-1]+1}}(function(t,e,i){t<0&&t++,e<3&&(e+=12,t--);var n=Math.floor(t/100),s=2-n+Math.floor(n/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+i+s-1524.5}(t.getFullYear(),t.getMonth()+1,t.getDate()));return[e.year,e.month,e.day,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]},umalquraToGregorian:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Array.isArray(t)&&(e=t[1],i=t[2]||0,n=t[3]||0,s=t[4]||0,a=t[5]||0,r=t[6]||0,t=t[0]);var o=function(t){return"number"==typeof t&&!isNaN(t)};if(!o(t)||!o(e)||!o(i))return null;var l=function(t,e,i){return i+P[12*(t-1)+e-15292-1]-1+24e5-.5},c=l(t,e+1,i),d=function(t){var e=Math.floor(t+.5),i=Math.floor((e-1867216.25)/36524.25),n=(i=e+1+i-Math.floor(i/4))+1524,s=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*s),r=Math.floor((n-a)/30.6001),o=r-(r>13.5?13:1),l=s-(o>2.5?4716:4715);return l<=0&&l--,{year:l,month:o-1,day:n-a-Math.floor(30.6001*r)}},h=d(c),u=new Date(h.year,h.month,h.day,n,s,a,r);return u},flipIconsHorizontally:function(){var t=["attach","bottom-aligned","bullet-list","cancel","cart","collapse-app-tray","cut","document","drilldown","duplicate","expand-app-tray","export","first-page","folder","import","last-page","launch","left-align","left-text-align","left-arrow","new-document","next-page","number-list","paste","previous-page","quote","redo","refresh","right-align","right-arrow","right-text-align","save","search-folder","search-list","search","send","tack","tree-collapse","tree-expand","undo","unlocked","add-grid-record","add-grid-row","additional-help","bubble","bullet-steps","cascade","change-font","clear-screen","script","clockwise-90","close-cancel","close-save","contacts","copy-from","copy-mail","copy-url","counter-clockwise-90","create-report","delete-grid-record","delete-grid-row","display","employee-directory","export-2","export-to-pdf","generate-key","get-more-rows","group-selection","headphones","help","helper-list-select","history","invoice-released","language","logout","key","lasso","line-bar-chart","line-chart","new-expense-report","new-payment-request","new-time-sheet","new-travel-plan","no-attachment","no-comment","no-filter","overlay-line","pdf-file","phone","payment-request","pie-chart","queries","quick-access","refresh-current","restore-user","run-quick-access","save-close","save-new","search-results-history","select","send-submit","show-last-x-days","special-item","stacked","timesheet","unsubscribe","update-preview","zoom-100","zoom-in","zoom-out","caret-left","caret-right"];$("svg").each((function(){var e=$(this).getIconName();e&&-1!==$.inArray(e,t)&&0===$(this).closest(".monthview").length&&$(this).addClass("icon-rtl-rotate")}))}};function O(t){if("function"!=typeof t){if("string"==typeof t)return t;throw new Error("".concat(i(t)," was provided where a function was expected."))}if("string"==typeof t.name)return"".concat(t.name,"()");var e=/^function\s+([\w$]+)\s*\(/.exec(t.toString());return e?"".concat(e[1],"()"):"(anonymous function)"}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("object"===("undefined"==typeof console?"undefined":i(console))){var s=O(t),a=O(e);n.length&&(n=" (".concat(n,")")),console.warn("IDS Enterprise".concat(n,': "').concat(a,'" is deprecated. Please use "').concat(s,'" instead.'))}}function N(t){"object"===("undefined"==typeof console?"undefined":i(console))&&console.warn('IDS Enterprise: "'.concat(t,'" is deprecated and will be later removed. Please adjust your code accordingly.'))}function z(t,e){var i=function(){F(t,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];t.apply(this,n)};return i.prototype=t.prototype,i}function H(t){return this.element=$(t),this}H.prototype={get url(){return window.location.href.replace(window.location.hash,"")},get href(){return this.element[0].getAttribute("href")},getCurrentURL:function(){return F("url","getCurrentURL"),this.url},getBaseURL:function(t){return this.element.length&&this.href&&"/"!==this.href?t?0===t.indexOf("/")?t:(t=(-1===t.indexOf("#")?"#":"")+t,this.url+t):this.url:t||""}};var q=new H($("base[href]"));$.getBaseURL=function(t){return q.getBaseURL(t)};var V={noAutoStart:!1},W={};function j(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function U(t){if(this.id=t.id,this.duration=t.duration||-1,this.duration<1&&("string"!=typeof this.id||!this.id.length))throw new Error("cannot build a RenderLoopItem with no duration and no namespace");return this.updateDuration=t.updateDuration||1,this.setFuncs(t),this.paused=!1,this.elapsedTime=0,this.startTime=j(),this}function _(t){return this.items=[],this.element=$("body"),this.settings=C.mergeSettings(null,t,V),!0!==this.settings.noAutoStart&&this.start(),this}"object"===i(window.SohoConfig)&&"object"===i(window.SohoConfig.renderLoop)&&(W=C.extend({},V,window.SohoConfig.renderLoop)),U.prototype={setFuncs:function(t){if("function"!=typeof t.updateCallback&&"function"!=typeof t.timeoutCallback)throw new Error("cannot register callback to RenderLoop because callback is not a function");"function"==typeof t.updateCallback&&(this.updateCallback=t.updateCallback),"function"==typeof t.timeoutCallback&&(this.timeoutCallback=t.timeoutCallback)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},destroy:function(t){t&&(this.noTimeout=!0),this.doRemoveOnNextTick=!0}},_.prototype={start:function(){this.doLoop=!0,this.startTime=j();var t,e,i=this,n=j();!function s(){i.doLoop&&(t=j(),e=(t-n)/1e3,i.items.forEach((function(s){var a;if(s.doRemoveOnNextTick)i.remove(s);else if(s.paused||s.elapsedTime++,"number"==typeof s.duration&&s.duration>-1&&(s.startTime||(s.startTime=t),s.elapsedTime>=s.duration))s.destroy();else if("function"==typeof s.updateCallback){if(s.updateDuration&&s.updateDuration>1&&(isNaN(s.timeUntilNextUpdate)&&(s.timeUntilNextUpdate=s.updateDuration),s.timeUntilNextUpdate>0))return void--s.timeUntilNextUpdate;a=[s,{last:n,delta:e,now:t}],s.updateCallback.apply(null,a)}})),n=t,requestAnimationFrame(s))}()},stop:function(){this.doLoop=!1},totalDuration:function(){return j()-this.startTime},queue:function(){return this.items},buildRenderLoopItem:function(t,e,i,n){var s="string"!=typeof n||!n.length;if("string"==typeof i)if(s)n=i,i=-1,s=!1;else{var a=Number(i);isNaN(a)||(i=a)}else"number"!=typeof i&&(i=-1);return"string"==typeof n&&n.length||(n=""),new U({id:n,updateCallback:t,timeoutCallback:e,duration:i})},register:function(t,e,i,n){return t instanceof U||(t=this.buildRenderLoopItem(t,e,i,n)),this.items.push(t),t},unregister:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to remove an entry from the RenderLoop queue.");return"string"==typeof t&&(e=t,t=void 0),this.remove({cb:t,id:e})},getFromQueue:function(t,e){var i;return"string"==typeof callback&&(e=t,t=void 0),"function"==typeof callback?this.items.forEach((function(e){return"".concat(e.updateCallback)!=="".concat(t)||(i=e,!1)})):"string"==typeof e&&this.items.forEach((function(t){return t.id!==e||(i=t,!1)})),i},remove:function(t){var e;return t instanceof U?(e=t,this.items=this.items.filter((function(e){return e!==t}))):"function"==typeof t.updateCallback?this.items=this.items.filter((function(i){return"".concat(i.updateCallback)!=="".concat(t.updateCallback)||(e=i,!1)})):"string"==typeof t.id&&(this.items=this.items.filter((function(i){return i.id!==t.id||(e=i,!1)}))),"function"!=typeof e.timeoutCallback||e.noTimeout||e.timeoutCallback.apply(null,e),this.element.triggerHandler("remove.renderLoop",[e]),e},pause:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(t,e);return i.pause(),i},resume:function(t,e){if("function"!=typeof t&&"string"!=typeof t&&"string"!=typeof e)throw new Error("must provide either a callback function or a namespace string to pause an entry in the RenderLoop queue.");var i=this.getFromQueue(t,e);return i.resume(),i}};var G=new _(W);function Y(){this.pressedKeys=new Map,this.init()}Y.prototype={init:function(){var t=this;$(document).on("keydown.".concat("keyboard"),(function(e){t.press(e.key),t.announceKeys()})).on("keyup.".concat("keyboard"),(function(e){t.unpress(e.key),t.announceKeys()}))},announceKeys:function(){var t=[];this.pressedKeys.forEach((function(e,i){t.push(i)})),$("body").triggerHandler("keys",[t])},press:function(t){return this.pressedKeys.set("".concat(t),!0)},unpress:function(t){return this.pressedKeys.delete("".concat(t))},isPressed:function(t){return this.pressedKeys.has("".concat(t))}};var K=new Y;function X(t){return void 0!==t&&t.element instanceof $&&"function"==typeof t.destroy}function Q(){return this.modals=[],this.handleEvents(),this}Q.prototype={get modalFadeDuration(){return 10},get currentlyOpen(){return this.modals.filter((function(t){return t.visible}))},get currentlyActive(){var t;return this.modals.forEach((function(e){e.active&&(t=e)})),t},set currentlyActive(t){if(!X(t))throw new Error("Cannot set the provided Modal API to currently displayed.");this.modals.forEach((function(e,i){e.active=$(e.element).is(t.element),e.active?e.element[0].style.zIndex="".concat(1020+i):e.visible?e.element[0].style.zIndex="".concat(920+i):e.element[0].style.zIndex=""})),this.refresh()},get last(){var t,e=this.currentlyOpen,i=e.length;return i&&(t=e[i-1]),t},render:function(){var t=document.createDocumentFragment(),e=document.createElement("div"),i=document.createElement("div");e.id="ids-modal-root",e.classList.add("modal-page-container"),e.setAttribute("aria-hidden",!0),t.appendChild(e),i.classList.add("overlay"),i.setAttribute("aria-hidden",!0),e.appendChild(i),document.body.appendChild(e),this.rootElem=e,this.overlayElem=i},refresh:function(){var t=this.currentlyActive;t||(t=this.activateLast()),this.checkOverlayVisibility(),t?this.showContainers(t):this.hideContainers(t)},showContainers:function(){this.rootElem.removeAttribute("aria-hidden"),this.overlayElem.removeAttribute("aria-hidden"),$("body")[0].classList.add("modal-engaged")},hideContainers:function(){this.rootElem.setAttribute("aria-hidden",!0),this.overlayElem.setAttribute("aria-hidden",!0),$("body")[0].classList.remove("modal-engaged")},register:function(t){if(!X(t))throw new Error("The provided API is not a Modal API, and cannot be registered.");this.checkRootElements(),this.modals.filter((function(e){return $(e.element).is(t)}))>0||this.modals.push(t)},unregister:function(t){if(!X(t))throw new Error("The provided API is not a Modal API, and cannot be unregistered.");this.checkRootElements(),this.modals=this.modals.filter((function(e){return!$(e.element).is(t.element)}))},checkOverlayVisibility:function(){var t=0;this.currentlyActive&&(t=this.currentlyActive.settings.overlayOpacity),this.overlayElem.style.opacity=t?"".concat(t):""},checkRootElements:function(){var t=document.querySelector("#ids-modal-root");if(t instanceof HTMLElement){this.rootElem=t;var e=t.querySelector(".overlay");e instanceof HTMLElement&&(this.overlayElem=e)}else this.rootElem instanceof HTMLElement?document.body.appendChild(this.rootElem):this.render()},close:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=t&&(t instanceof HTMLElement||t instanceof $&&t.length)?$(t).data("modal"):this.last)&&(i&&(e.isCancelled=!0),e.close())},closeAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach((function(e){t&&(e.isCancelled=!0),e.close(void 0,!0)})),this.refresh()},destroyAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modals.forEach((function(e){(!t||e.capAPI)&&(e.close(void 0,!0),e.destroy())})),this.refresh()},closeLast:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close(void 0,t)},activateLast:function(){var t=this.last;return t&&(this.currentlyActive=t),t},findById:function(t){if(t)return this.modals.filter((function(e){return e.id===t}))[0]||void 0},handleEvents:function(){var t=this;this.hasEstablishedEvents&&this.teardown(),$(document).on("keydown.".concat("modalmanager"),(function(e){var i=$(e.target).parents(".modal");switch(e.which||e.keyCode){case 27:t.close(i,!0);break;case 9:t.setModalFocus(e.shiftKey?"last":"first",e)}}));var e=this;this.preRendered?this.checkRootElements():$(document).ready((function(){e.checkRootElements(),e.preRendered=!0})),this.hasEstablishedEvents=!0},setModalFocus:function(t,e){var i=this.currentlyActive;i&&(!i.isFocused||$(i.focusableElems.last).is(document.activeElement)&&"first"===t||$(i.focusableElems.first).is(document.activeElement)&&"last"===t)&&(e.preventDefault(),i.setFocus(t))},teardown:function(){$(document).off("keydown.".concat("modalmanager")),delete this.hasEstablishedEvents,this.preRendered&&(this.rootElem.parentNode.remove(this.rootElem),delete this.overlayElem,delete this.rootElem,delete this.preRendered)}};var J=new Q,Z={currentTheme:{id:"theme-soho-light",name:B.translate("SohoLightTheme"),legacyId:"light"},allColors:[{id:"theme-soho-light",colors:{themeName:"theme-soho",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#f0f0f0"},font:{name:"body-color-primary-font",value:"#1a1a1a"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}},legacyId:"light"},{id:"theme-soho-dark",colors:{themeName:"theme-soho-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#2578a9",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#368ac0"},alt:{name:"ids-color-brand-primary-alt",value:"#2578a9"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#313236"},font:{name:"body-color-primary-font",value:"#ffffff"}},secondary:{background:{name:"body-color-secondary-background",value:"#414247"}}}}},legacyId:"dark"},{id:"theme-soho-contrast",colors:{themeName:"theme-soho-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#fbe9bf"},20:{name:"ids-color-palette-amber-20",value:"#f8e09c"},30:{name:"ids-color-palette-amber-30",value:"#f7d475"},40:{name:"ids-color-palette-amber-40",value:"#f4c951"},50:{name:"ids-color-palette-amber-50",value:"#f2bc41"},60:{name:"ids-color-palette-amber-60",value:"#efa836"},70:{name:"ids-color-palette-amber-70",value:"#ee9a36"},80:{name:"ids-color-palette-amber-80",value:"#e4882b"},90:{name:"ids-color-palette-amber-90",value:"#db7726"},100:{name:"ids-color-palette-amber-100",value:"#d66221"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#ede3fc"},20:{name:"ids-color-palette-amethyst-20",value:"#daccec"},30:{name:"ids-color-palette-amethyst-30",value:"#c7b4db"},40:{name:"ids-color-palette-amethyst-40",value:"#b59eca"},50:{name:"ids-color-palette-amethyst-50",value:"#a38db7"},60:{name:"ids-color-palette-amethyst-60",value:"#9279a6"},70:{name:"ids-color-palette-amethyst-70",value:"#806594"},80:{name:"ids-color-palette-amethyst-80",value:"#6e5282"},90:{name:"ids-color-palette-amethyst-90",value:"#5d3e70"},100:{name:"ids-color-palette-amethyst-100",value:"#4b2a5e"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#c8e9f4"},20:{name:"ids-color-palette-azure-20",value:"#addbeb"},30:{name:"ids-color-palette-azure-30",value:"#8dc9e6"},40:{name:"ids-color-palette-azure-40",value:"#69b5dd"},50:{name:"ids-color-palette-azure-50",value:"#54a1d3"},60:{name:"ids-color-palette-azure-60",value:"#368ac0"},70:{name:"ids-color-palette-azure-70",value:"#2578a9"},80:{name:"ids-color-palette-azure-80",value:"#1d5f8a"},90:{name:"ids-color-palette-azure-90",value:"#134d71"},100:{name:"ids-color-palette-azure-100",value:"#133c59"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#d5f6c0"},20:{name:"ids-color-palette-emerald-20",value:"#c3e8ac"},30:{name:"ids-color-palette-emerald-30",value:"#afdc91"},40:{name:"ids-color-palette-emerald-40",value:"#9cce7c"},50:{name:"ids-color-palette-emerald-50",value:"#89bf65"},60:{name:"ids-color-palette-emerald-60",value:"#76b051"},70:{name:"ids-color-palette-emerald-70",value:"#66a140"},80:{name:"ids-color-palette-emerald-80",value:"#56932e"},90:{name:"ids-color-palette-emerald-90",value:"#488421"},100:{name:"ids-color-palette-emerald-100",value:"#397514"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#f0f0f0"},20:{name:"ids-color-palette-graphite-20",value:"#d8d8d8"},30:{name:"ids-color-palette-graphite-30",value:"#bdbdbd"},40:{name:"ids-color-palette-graphite-40",value:"#999999"},50:{name:"ids-color-palette-graphite-50",value:"#737373"},60:{name:"ids-color-palette-graphite-60",value:"#5c5c5c"},70:{name:"ids-color-palette-graphite-70",value:"#454545"},80:{name:"ids-color-palette-graphite-80",value:"#383838"},90:{name:"ids-color-palette-graphite-90",value:"#292929"},100:{name:"ids-color-palette-graphite-100",value:"#1a1a1a"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#f6caca"},20:{name:"ids-color-palette-ruby-20",value:"#eb9d9d"},30:{name:"ids-color-palette-ruby-30",value:"#de8181"},40:{name:"ids-color-palette-ruby-40",value:"#d26d6d"},50:{name:"ids-color-palette-ruby-50",value:"#c65f5f"},60:{name:"ids-color-palette-ruby-60",value:"#b94e4a"},70:{name:"ids-color-palette-ruby-70",value:"#ad4242"},80:{name:"ids-color-palette-ruby-80",value:"#a13030"},90:{name:"ids-color-palette-ruby-90",value:"#941e1e"},100:{name:"ids-color-palette-ruby-100",value:"#880e0e"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#dee1e8"},20:{name:"ids-color-palette-slate-20",value:"#c8cbd4"},30:{name:"ids-color-palette-slate-30",value:"#abaeb7"},40:{name:"ids-color-palette-slate-40",value:"#888b94"},50:{name:"ids-color-palette-slate-50",value:"#656871"},60:{name:"ids-color-palette-slate-60",value:"#50535a"},70:{name:"ids-color-palette-slate-70",value:"#414247"},80:{name:"ids-color-palette-slate-80",value:"#313236"},90:{name:"ids-color-palette-slate-90",value:"#212224"},100:{name:"ids-color-palette-slate-100",value:"#1c1819"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#c0ede3"},20:{name:"ids-color-palette-turquoise-20",value:"#a9e1d6"},30:{name:"ids-color-palette-turquoise-30",value:"#8ed1c6"},40:{name:"ids-color-palette-turquoise-40",value:"#7cc0b5"},50:{name:"ids-color-palette-turquoise-50",value:"#69ada3"},60:{name:"ids-color-palette-turquoise-60",value:"#579e95"},70:{name:"ids-color-palette-turquoise-70",value:"#448d83"},80:{name:"ids-color-palette-turquoise-80",value:"#317c73"},90:{name:"ids-color-palette-turquoise-90",value:"#206b62"},100:{name:"ids-color-palette-turquoise-100",value:"#0e5b52"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#133c59",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#ffd726",paletteName:"#ffd726"},danger:{name:"ids-color-status-danger",value:"#e84f4f",paletteName:"#e84f4f"},success:{name:"ids-color-status-success",value:"#80ce4d",paletteName:"#80ce4d"},warning:{name:"ids-color-status-warning",value:"#ff9426",paletteName:"#ff9426"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#69b5dd"},base:{name:"ids-color-brand-primary-base",value:"#134d71"},alt:{name:"ids-color-brand-primary-alt",value:"#133c59"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#d8d8d8"},base:{name:"ids-color-brand-secondary-base",value:"#bdbdbd"},alt:{name:"ids-color-brand-secondary-alt",value:"#999999"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#383838"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#d8d8d8"},font:{name:"body-color-primary-font",value:"#000000"}},secondary:{background:{name:"body-color-secondary-background",value:"#d8d8d8"}}}}},legacyId:"high-contrast"},{id:"theme-uplift-light",colors:{themeName:"theme-uplift",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0066D4",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#606066"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#EFEFF0"},font:{name:"body-color-primary-font",value:"#2F2F32"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}},{id:"theme-uplift-dark",colors:{themeName:"theme-uplift-dark",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#0072ED",paletteName:"{ids.color.brand.primary.base.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#DA1217",paletteName:"#DA1217"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#0072ED"},alt:{name:"ids-color-brand-primary-alt",value:"#0066D4"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#97979B"},base:{name:"ids-color-brand-secondary-base",value:"#606066"},alt:{name:"ids-color-brand-secondary-alt",value:"#56565B"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#3E3E42"},font:{name:"body-color-primary-font",value:"#EFEFF0"}},secondary:{background:{name:"body-color-secondary-background",value:"#47474C"}}}}}},{id:"theme-uplift-contrast",colors:{themeName:"theme-uplift-contrast",palette:{amber:{10:{name:"ids-color-palette-amber-10",value:"#FEF2E5"},20:{name:"ids-color-palette-amber-20",value:"#FDDFBD"},30:{name:"ids-color-palette-amber-30",value:"#FCC888"},40:{name:"ids-color-palette-amber-40",value:"#FBAF50"},50:{name:"ids-color-palette-amber-50",value:"#FA9601"},60:{name:"ids-color-palette-amber-60",value:"#F98300"},70:{name:"ids-color-palette-amber-70",value:"#DF6F00"},80:{name:"ids-color-palette-amber-80",value:"#CD6200"},90:{name:"ids-color-palette-amber-90",value:"#BB5500"},100:{name:"ids-color-palette-amber-100",value:"#A14100"}},amethyst:{10:{name:"ids-color-palette-amethyst-10",value:"#F1EBFC"},20:{name:"ids-color-palette-amethyst-20",value:"#DDCBF7"},30:{name:"ids-color-palette-amethyst-30",value:"#C2A1F1"},40:{name:"ids-color-palette-amethyst-40",value:"#A876EB"},50:{name:"ids-color-palette-amethyst-50",value:"#8D4BE5"},60:{name:"ids-color-palette-amethyst-60",value:"#7928E1"},70:{name:"ids-color-palette-amethyst-70",value:"#6C23C9"},80:{name:"ids-color-palette-amethyst-80",value:"#591DA8"},90:{name:"ids-color-palette-amethyst-90",value:"#4E1A91"},100:{name:"ids-color-palette-amethyst-100",value:"#3B1470"}},azure:{10:{name:"ids-color-palette-azure-10",value:"#E6F1FD"},20:{name:"ids-color-palette-azure-20",value:"#BEDCFA"},30:{name:"ids-color-palette-azure-30",value:"#8ABFF7"},40:{name:"ids-color-palette-azure-40",value:"#55A3F3"},50:{name:"ids-color-palette-azure-50",value:"#1C86EF"},60:{name:"ids-color-palette-azure-60",value:"#0072ED"},70:{name:"ids-color-palette-azure-70",value:"#0066D4"},80:{name:"ids-color-palette-azure-80",value:"#0054B1"},90:{name:"ids-color-palette-azure-90",value:"#004A99"},100:{name:"ids-color-palette-azure-100",value:"#003876"}},emerald:{10:{name:"ids-color-palette-emerald-10",value:"#EBF9F1"},20:{name:"ids-color-palette-emerald-20",value:"#CBEFDC"},30:{name:"ids-color-palette-emerald-30",value:"#A1E4BF"},40:{name:"ids-color-palette-emerald-40",value:"#78D8A3"},50:{name:"ids-color-palette-emerald-50",value:"#4DCC86"},60:{name:"ids-color-palette-emerald-60",value:"#2AC371"},70:{name:"ids-color-palette-emerald-70",value:"#25AF65"},80:{name:"ids-color-palette-emerald-80",value:"#1F9254"},90:{name:"ids-color-palette-emerald-90",value:"#1C7F49"},100:{name:"ids-color-palette-emerald-100",value:"#156138"}},graphite:{10:{name:"ids-color-palette-graphite-10",value:"#EEEEEE"},20:{name:"ids-color-palette-graphite-20",value:"#D3D3D3"},30:{name:"ids-color-palette-graphite-30",value:"#B1B1B1"},40:{name:"ids-color-palette-graphite-40",value:"#8F8F8F"},50:{name:"ids-color-palette-graphite-50",value:"#6C6C6C"},60:{name:"ids-color-palette-graphite-60",value:"#535353"},70:{name:"ids-color-palette-graphite-70",value:"#4A4A4A"},80:{name:"ids-color-palette-graphite-80",value:"#3E3E3E"},90:{name:"ids-color-palette-graphite-90",value:"#363636"},100:{name:"ids-color-palette-graphite-100",value:"#292929"}},ruby:{10:{name:"ids-color-palette-ruby-10",value:"#FBE7E8"},20:{name:"ids-color-palette-ruby-20",value:"#F5C3C4"},30:{name:"ids-color-palette-ruby-30",value:"#EE9496"},40:{name:"ids-color-palette-ruby-40",value:"#E66467"},50:{name:"ids-color-palette-ruby-50",value:"#DF3539"},60:{name:"ids-color-palette-ruby-60",value:"#DA1217"},70:{name:"ids-color-palette-ruby-70",value:"#C31014"},80:{name:"ids-color-palette-ruby-80",value:"#A30D11"},90:{name:"ids-color-palette-ruby-90",value:"#8D0B0E"},100:{name:"ids-color-palette-ruby-100",value:"#6C080B"}},slate:{10:{name:"ids-color-palette-slate-10",value:"#EFEFF0"},20:{name:"ids-color-palette-slate-20",value:"#D7D7D8"},30:{name:"ids-color-palette-slate-30",value:"#B7B7BA"},40:{name:"ids-color-palette-slate-40",value:"#97979B"},50:{name:"ids-color-palette-slate-50",value:"#77777C"},60:{name:"ids-color-palette-slate-60",value:"#606066"},70:{name:"ids-color-palette-slate-70",value:"#56565B"},80:{name:"ids-color-palette-slate-80",value:"#47474C"},90:{name:"ids-color-palette-slate-90",value:"#3E3E42"},100:{name:"ids-color-palette-slate-100",value:"#2F2F32"}},turquoise:{10:{name:"ids-color-palette-turquoise-10",value:"#ECF8F8"},20:{name:"ids-color-palette-turquoise-20",value:"#CFEEEE"},30:{name:"ids-color-palette-turquoise-30",value:"#A8E1E1"},40:{name:"ids-color-palette-turquoise-40",value:"#82D4D4"},50:{name:"ids-color-palette-turquoise-50",value:"#5CC6C7"},60:{name:"ids-color-palette-turquoise-60",value:"#40BDBE"},70:{name:"ids-color-palette-turquoise-70",value:"#39A9AA"},80:{name:"ids-color-palette-turquoise-80",value:"#2F8D8E"},90:{name:"ids-color-palette-turquoise-90",value:"#297B7B"},100:{name:"ids-color-palette-turquoise-100",value:"#1F5E5E"}},white:{name:"ids-color-palette-white",value:"#ffffff",paletteName:"#ffffff"},black:{name:"ids-color-palette-black",value:"#000000",paletteName:"#000000"}},status:{base:{name:"ids-color-status-base",value:"#003876",paletteName:"{ids.color.brand.primary.alt.value}"},caution:{name:"ids-color-status-caution",value:"#FFD726",paletteName:"#FFD726"},danger:{name:"ids-color-status-danger",value:"#7B0F11",paletteName:"#7B0F11"},success:{name:"ids-color-status-success",value:"#2AC371",paletteName:"#2AC371"},warning:{name:"ids-color-status-warning",value:"#F98300",paletteName:"#F98300"}},brand:{primary:{lighter:{name:"ids-color-brand-primary-lighter",value:"#55A3F3"},base:{name:"ids-color-brand-primary-base",value:"#004A99"},alt:{name:"ids-color-brand-primary-alt",value:"#003876"},contrast:{name:"ids-color-brand-primary-contrast",value:"#ffffff"}},secondary:{lighter:{name:"ids-color-brand-secondary-lighter",value:"#47474C"},base:{name:"ids-color-brand-secondary-base",value:"#3E3E42"},alt:{name:"ids-color-brand-secondary-alt",value:"#2F2F32"},contrast:{name:"ids-color-brand-secondary-contrast",value:"#3E3E42"}}},components:{body:{primary:{background:{name:"body-color-primary-background",value:"#EFEFF0"},font:{name:"body-color-primary-font",value:"#3E3E42"}},secondary:{background:{name:"body-color-secondary-background",value:"#ffffff"}}}}}}],themes:function(){return[{id:"theme-soho-light",name:B.translate("SohoLightTheme"),themeId:"theme-soho",variantId:"light",variantName:B.translate("Light"),legacyId:"light"},{id:"theme-soho-dark",name:B.translate("SohoDarkTheme"),themeId:"theme-soho",variantId:"dark",variantName:B.translate("Dark"),legacyId:"dark"},{id:"theme-soho-contrast",name:B.translate("SohoHighContrastTheme"),themeId:"theme-soho",variantId:"contrast",variantName:B.translate("Contrast"),legacyId:"high-contrast"},{id:"theme-uplift-light",name:B.translate("UpliftLightTheme"),themeId:"theme-uplift",variantId:"light",variantName:B.translate("Light")},{id:"theme-uplift-dark",name:B.translate("UpliftDarkTheme"),themeId:"theme-uplift",variantId:"dark",variantName:B.translate("Dark")},{id:"theme-uplift-contrast",name:B.translate("UpliftHighContrastTheme"),themeId:"theme-uplift",variantId:"contrast",variantName:B.translate("Contrast")}]},themeColors:function(){var t=this,e=this.allColors.filter((function(e){return e.id===t.currentTheme.id}));return e[0]?e[0].colors:{palette:{},colors:{},brand:{}}},personalizationColors:function(){var t=this.themeColors().palette,e=this.themeColors().brand,i={},n={showBrackets:!1};return i.default={id:"default",name:B.translate("Default",n),backgroundColorClass:"primary-bg-color",value:e.primary.base.value},i.amber={id:"amber",name:B.translate("Amber",n),backgroundColorClass:"amber09",value:t.amber[90].value},i.amethyst={id:"amethyst",name:B.translate("Amethyst",n),backgroundColorClass:"amethyst06",value:t.amethyst[60].value},i.azure={id:"azure",name:B.translate("Azure",n),backgroundColorClass:"azure07",value:t.azure[70].value},i.emerald={id:"emerald",name:B.translate("Emerald",n),backgroundColorClass:"emerald08",value:t.emerald[80].value},i.graphite={id:"graphite",name:B.translate("Graphite",n),backgroundColorClass:"graphite06",value:t.graphite[60].value},i.ruby={id:"ruby",name:B.translate("Ruby",n),backgroundColorClass:"ruby09",value:t.ruby[90].value},i.slate={id:"slate",name:B.translate("Slate",n),backgroundColorClass:"slate06",value:t.slate[60].value},i.turquoise={id:"turquoise",name:B.translate("Turquoise",n),backgroundColorClass:"turquoise09",value:t.turquoise[90].value},i},setTheme:function(t){var e=this.themes().filter((function(e){return e.id===t||e.legacyId&&e.legacyId===t}));return 0===e.length?"":(this.currentTheme=e[0],e)},get uplift(){return this.currentTheme.id.indexOf("-uplift-")>-1}};var tt={colors:"",theme:"",font:"",blockUI:!0,noInit:!1};function et(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,tt),this.init()}et.prototype={init:function(){return this.handleEvents(),this.settings.noInit||(this.settings.theme?this.setTheme(this.settings.theme):this.setTheme(this.getThemeFromStylesheet()),this.settings.colors&&this.setColors(this.settings.colors),this.settings.font&&this.setFont(this.settings.font)),this},handleEvents:function(){var t=this;return this.element.off("updated.".concat("personalize")).on("updated.".concat("personalize"),(function(){t.updated()})),this},appendStyleSheet:function(t){var e=document.getElementById("soho-personalization");e&&e.parentNode.removeChild(e),(e=document.createElement("style")).setAttribute("id","soho-personalization"),e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},getColorStyleSheet:function(t){if(t||(t={}),"string"==typeof t&&(t={header:t}),!t||""===t)return this;var e={header:"2578A9"},i=Z.themeColors();t.theme={},t.theme.bg=i.components.body.primary.background.value,t.theme.altbg=i.components.body.secondary.background.value,t.theme.text=i.components.body.primary.font.value,t.theme.altText=i.components.body.secondary.background.value,t.theme.disabledText=i.brand.secondary.alt.value;var n=!1,s=!1,a=!1;i.themeName.indexOf("contrast")>-1&&(s=!0),i.themeName.indexOf("dark")>-1&&(n=!0),i.themeName.indexOf("uplift")>-1&&(a=!0),t.theme.props={contrast:s,dark:n,uplift:a};var r={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],azure:["#2578a9","#0563c2","#368AC0","#368ac0"],emerald:["#56932e","#1f9254"],graphite:["#5c5c5c","#808080"],ruby:["#941e1e","#7b0f11"],slate:["#50535a","#98949e"],turquoise:["#206b62","#297b7b"]},o=!1,l="".concat(t.header||e.header).toLowerCase();l=I.validateHex(l),Object.keys(r).forEach((function(t){o=o||r[t].indexOf(l)>-1})),l=o?"white":null;var c=I.validateHex(t.lightest||I.getLuminousColorShade(t.header||e.header,.3));"white"===I.getContrastColor(c,null,l)?(e.text="ffffff",e.subtext="f0f0f0"):(e.text="000000",e.subtext="292929"),t.header=I.validateHex(t.header||e.header),t.text=I.validateHex(t.text||e.text),t.subtext=I.validateHex(t.subtext||e.subtext),t.btnColorHeader=I.validateHex(t.btnColorHeader||I.getLuminousColorShade(t.header,.3)),t.subheader=I.validateHex(t.subheader||I.getLuminousColorShade(t.header,.2)),t.verticalBorder=I.validateHex(t.verticalBorder||I.getLuminousColorShade(t.header,.1)),t.btnColorSubheader=I.validateHex(t.btnColorSubheader||I.getLuminousColorShade(t.header,-.1)),t.inactive=I.validateHex(t.inactive||I.getLuminousColorShade(t.header,-.2)),t.horizontalBorder=I.validateHex(t.horizontalBorder||I.getLuminousColorShade(t.header,-.3)),t.hover=I.validateHex(t.hover||I.getLuminousColorShade(t.header,-.5)),t.button=I.validateHex(t.button||I.getLuminousColorShade(t.text,-.8)),t.lightest=t.btnColorHeader,t.lighter=t.subheader,t.light=t.verticalBorder,t.base=t.header,t.contrast=t.text,t.dark=t.btnColorSubheader,t.darker=t.inactive,t.darkest=t.horizontalBorder;var d={amber:["#db7726","#bb5500"],amethyst:["#9279a6","#7834dd"],emerald:["#56932e","#1f9254"],slate:["#50535a","#98949e"]},h=!1,u=I.validateHex("".concat(t.header||e.header).toLowerCase());Object.keys(d).forEach((function(t){h=h||d[t].indexOf(u)>-1}));var p=t.light,g=h?.5:.7,f=h?.3:.5;a?(g=h?.6:.8,f=h?.6:.8,n?(p=t.darkest,g=.1):s&&(g=.8,f=.4)):n?(p=t.darkest,g=-.1):s&&(g=.3);var m=I.getLuminousColorShade(p,g);m=I.getDesaturatedColor(m,f),t.baseDisabled=m,t.hyperlinkText=n?t.dark:t.lighter,t.hyperlinkTextHover=n?t.darker:t.lightest,t.selection=n?t.darker:t.lightest;var v=I.getContrastColor(t.darkest);return e.tooltipText="white"===v?"ffffff":"000000",t.tooltipText=I.validateHex(t.tooltipText||e.tooltipText),function(t){var e=I.hexToRgb(t.base),i=I.hexToRgb(t.hyperlinkText);return"\n\n.is-personalizable ::selection {\n  background: ".concat(t.selection," !important\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane),\n.btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable {\n  background-color: ").concat(t.base," !important;\n  border-color: ").concat(t.base," !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):disabled,\n.btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane).is-personalizable:disabled {\n  background-color: ").concat(t.baseDisabled," !important;\n  border-color: ").concat(t.baseDisabled," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled),\n.btn-link.is-personalizable:not(:disabled) {\n  color: ").concat(t.light," !important;\n}\n\n.is-personalizable .btn-link:not(:disabled) .icon,\n.btn-link.is-personalizable:not(:disabled) .icon {\n  color: ").concat(t.light," !important;\n}\n\n.is-personalizable button.is-pressed,\nbutton.is-personalizable.is-pressed {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable button.is-pressed .icon,\nbutton.is-personalizable.is-pressed .icon {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(t.darker," !important;\n  border-color: ").concat(t.darker," !important;\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled),\n.btn-primary.is-personalizable:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):hover:not(:disabled) {\n  background-color: ").concat(t.darker," !important;\n  border-color: ").concat(t.darker," !important;\n}\n\n.is-personalizable button:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):focus:not(.hide-focus),\nbutton.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable a.btn:focus:not(.hide-focus),\na.btn.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-menu:focus:not(.hide-focus),\na.btn-menu.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-icon:focus:not(.hide-focus),\na.btn-icon.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-tertiary:focus:not(.hide-focus),\na.btn-tertiary.is-personalizable:focus:not(.hide-focus),\n.is-personalizable a.btn-close:focus:not(.hide-focus),\na.btn-close.is-personalizable:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.base,",\n    0 0 4px 2px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.is-personalizable .btn-primary:not(.is-select):not(.is-select-month-pane):not(.is-cancel):not(.is-cancel-month-pane):focus:not(.hide-focus),\n.btn-primary.is-personalizable button:focus:not(.hide-focus),\n.is-personalizable .btn-secondary:focus:not(.hide-focus),\n.btn-secondary.is-personalizable button:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px ").concat(t.theme.bg,",\n    0 0 0 3px ").concat(t.base,",\n    0 0 4px 2px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .btn-menu:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-menu:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon,\n.is-personalizable .btn-actions:not(.btn-primary):not(.btn-secondary).is-open .icon,\n.btn-actions:not(.btn-primary):not(.btn-secondary).is-personalizable.is-open .icon {\n  color: ").concat(t.base,";\n}\n\n.is-personalizable .hyperlink:not(.today),\n.hyperlink:not(.today).is-personalizable {\n  color: ").concat(t.hyperlinkText,"\n}\n.is-personalizable .hyperlink:not(.today):hover,\n.hyperlink:not(.today).is-personalizable:hover {\n  color: ").concat(t.hyperlinkTextHover,";\n}\n.is-personalizable .hyperlink:not(.today):focus:not(.hide-focus),\n.hyperlink:not(.today).is-personalizable:focus:not(.hide-focus) {\n  border-color: ").concat(t.hyperlinkText,";\n  box-shadow: 0 0 4px 3px rgba(").concat(i.r,", ").concat(i.g,", ").concat(i.b,", 0.3);\n}\n\n.is-personalizable button:not(.btn-monthyear-pane):not(.btn-editor) svg.ripple-effect,\nbutton:not(.btn-monthyear-pane):not(.btn-editor).is-personalizable svg.ripple-effect,\n.is-personalizable a svg.ripple-effect,\na.is-personalizable svg.ripple-effect {\n  background-color: ").concat(t.base," !important;\n}\n\n.is-personalizable .btn-primary svg.ripple-effect,\n.btn-primary.is-personalizable svg.ripple-effect,\n.is-personalizable .btn-secondary svg.ripple-effect,\n.btn-secondary.is-personalizable svg.ripple-effect {\n  background-color: ").concat(t.contrast," !important;\n  border-color: ").concat(t.contrast," !important;\n}\n\n.tab-container.module-tabs.is-personalizable {\n  border-top: 1px solid ").concat(t.darkest," !important;\n  border-bottom: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab:not(:first-child) {\n  border-left: 1px solid ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.tab-container.vertical.is-personalizable > .tab-list-container > .tab-list > .tab.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.tab-container.vertical.is-personalizable .tab-focus-indicator.is-visible {\n  border-color: ").concat(t.base," !important;\n  box-shadow: 0 0 4px 3px rgba(").concat(e.r,", ").concat(e.g,", ").concat(e.b,", 0.3);\n}\n\n.accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(t.lighter," !important;\n  color: ").concat(t.contrast," !important;\n}\n\n.builder-header.is-personalizable{\n  background-color: ").concat(t.lighter,";\n}\n\n.header.is-personalizable {\n  background-color: ").concat(t.base,";\n}\n\n.header.is-personalizable .title {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable h1 {\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable button svg.ripple-effect {\n  background-color: ").concat(t.contrast," !important;\n}\n\n.header.is-personalizable button:not(:disabled),\n.header.is-personalizable button:not(:disabled) .icon,\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable .header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable button:not(:disabled):hover,\n.header.is-personalizable button:not(:disabled):hover .icon,\n.header.is-personalizable button:not(:disabled):hover .app-header.icon > span,\n.header.is-personalizable .toolbar [class^='btn']:hover:not([disabled]) {\n  color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable button:not(:disabled) .app-header.icon > span {\n  background-color: ").concat(t.contrast," !important;\n  opacity: 1;\n}\n\n.header.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.lightest,";\n  border-color:").concat(t.lightest,";\n  color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab.is-selected:not(.is-disabled) {\n  color: ").concat(t.contrast," !important;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  color: ").concat(t.contrast," !important;\n  opacity: .8;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled),\n.is-personalizable.tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)  {\n  color: ").concat(t.contrast,' !important;\n  opacity: 1;\n}\n\nhtml[class*="theme-uplift-"] .header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab,\nhtml[class*="theme-uplift-"] .is-personalizable.tab-container.header-tabs > .tab-list-container .tab  {\n  opacity: 1;\n}\n\n.header.is-personalizable.has-tabs .tab-container.header-tabs > .tab-list-container .tab:hover:not(.is-disabled)::before {\n  background-color: ').concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .animated-bar {\n  background-color: ").concat(t.contrast,";\n}\n\n.header.is-personalizable.has-tabs .tab-list-container .tab.is-selected:not(.is-disabled):hover::before {\n  background-color: ").concat(t.contrast," !important;\n}\n\n.subheader.is-personalizable .go-button.is-personalizable {\n  background-color: ").concat(t.dark,";\n  border-color: ").concat(t.dark,";\n  color: ").concat(t.contrast,";\n}\n\n.is-personalizable .breadcrumb .hyperlink,\n.breadcrumb.is-personalizable .hyperlink {\n  color: ").concat(t.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:hover,\n.breadcrumb.is-personalizable .hyperlink:hover {\n  color: ").concat(t.theme.text,";\n}\n.is-personalizable .breadcrumb .hyperlink:focus:not(.hide-focus),\n.breadcrumb.is-personalizable .hyperlink:focus:not(.hide-focus) {\n  box-shadow: none;\n}\n.is-personalizable .breadcrumb .hyperlink[disabled],\n.breadcrumb.is-personalizable .hyperlink[disabled],\n.is-personalizable .breadcrumb .hyperlink[disabled]:hover,\n.breadcrumb.is-personalizable .hyperlink[disabled]:hover {\n  color: ").concat(t.theme.disabledText,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) {\n  background-color: ").concat(t.base,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\n.scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(t.base,", ").concat(I.hexToRgba(t.base,0),");\n}\nhtml[dir='rtl'] .is-personalizable .scrollable-flex-header .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before,\nhtml[dir='rtl'] .scrollable-flex-header.is-personalizable .breadcrumb.truncated:not(.alternate) .breadcrumb-list::before {\n  background-image: linear-gradient(to right, ").concat(I.hexToRgba(t.base,0),", ").concat(t.base,");\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink {\n  color: ").concat(t.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .hyperlink:hover,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .hyperlink:hover  {\n  color: ").concat(t.contrast,";\n}\n\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions.is-open .icon,\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions.is-open .icon {\n  color: ").concat(t.contrast,";\n}\n.is-personalizable .scrollable-flex-header .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus),\n.scrollable-flex-header.is-personalizable .breadcrumb:not(.alternate) .btn-actions:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent, 0 0 0 1px ").concat(t.contrast,", 0 0 1px 2px ").concat(I.hexToRgba(t.contrast,.3)," !important;\n}\n\n.module-tabs.is-personalizable .tab-more {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .tab-more:hover {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-open {\n  background-color: ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab-more.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.header .toolbar > .toolbar-searchfield-wrapper.active .searchfield-category-button {\n  background-color: ").concat(t.hover," !important;\n  border-bottom-color: ").concat(t.hover," !important;\n}\n\n.subheader.is-personalizable {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.builder .sidebar .header {\n  border-right: 1px solid ").concat(t.hover," !important;\n}\n\n.module-tabs.is-personalizable .tab:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.has-toolbar.is-personalizable .tab-list-container + .toolbar {\n  border-left-color: ").concat(t.darkest,' !important;\n}\n\n.module-tabs.is-personalizable [class^="btn"] {\n  background-color: transparent !important;\n  color: ').concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled {\n  background-color: ").concat(t.darker," !important;\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .tab.is-disabled > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button {\n  border-left-color: ").concat(t.darkest," !important;\n}\n\n.module-tabs.is-personalizable .add-tab-button:hover {\n  background-color: ").concat(t.darker," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > .searchfield {\n  color: ").concat(t.contrast," !important;\n}\n\n.module-tabs.is-personalizable .toolbar-searchfield-wrapper > svg {\n  fill: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::before,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::before {\n  background-image: linear-gradient(to right, ").concat(t.dark," , ").concat(I.hexToRgba(t.dark,0),") !important;\n}\n\n.is-personalizable .tab-container.header-tabs:not(.alternate)::after,\n.is-personalizable.tab-container.header-tabs:not(.alternate)::after {\n  background-image: linear-gradient(to right, ").concat(I.hexToRgba(t.dark,0),", ").concat(t.dark,") !important;\n}\n\n.hero-widget.is-personalizable {\n  background-color: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .hero-bottom {\n  background-color: ").concat(t.base,";\n}\n\n.hero-widget.is-personalizable .hero-footer .hero-footer-nav li::before {\n  color: ").concat(t.light,";\n}\n\n.hero-widget.is-personalizable .chart-container .arc {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container .bar {\n  stroke: ").concat(t.lighter,";\n}\n\n.hero-widget.is-personalizable .chart-container.line-chart .dot {\n  stroke: ").concat(t.lighter,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button .icon,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button span,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .hyperlink {\n  color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button:not(:disabled):hover .icon,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button:not(:disabled):hover span,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .hyperlink:hover {\n  color: ').concat(t.contrast,';\n  opacity: 1;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel {\n  background-color: ').concat(t.lighter,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .name-xl,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .name,\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion-heading {\n  color: ').concat(t.contrast,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel .accordion-header {\n  background-color: ').concat(t.lighter," !important;\n  border: 1px solid transparent !important;\n  color: ").concat(t.contrast,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel .accordion-header .icon {\n  color: ').concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .btn-icon:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.lighter,",\n    0 0 2px 1px ").concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected {\n  background-color: ").concat(t.base," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover {\n  border-bottom-color: ").concat(t.dark," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected:hover > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-selected .icon {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion.panel .accordion-header.is-focused:not(.hide-focus) {\n  border: 1px solid ").concat(t.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: ').concat(t.lighter,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  border: 1px solid ').concat(t.lighter,";\n}\n\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before,\n.application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ").concat(t.contrast,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button:focus:not(.hide-focus),\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .hyperlink:focus:not(.hide-focus)::after {\n  border-color: ').concat(t.contrast,' !important;\n  box-shadow: none !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu .application-menu-header button:hover,\nhtml[class*="theme-uplift-"] .application-menu .application-menu-footer button:hover {\n  background-color: ').concat(t.base,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .searchfield-wrapper .searchfield {\n  color: ').concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .accordion-header.has-filtered-children > a,\n.application-menu.is-personalizable .accordion.panel .accordion-header.has-filtered-children.is-focused {\n  color: ").concat(t.contrast," !important;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .searchfield::placeholder {\n  color: ").concat(t.contrast,";\n  opacity: .5;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper .icon {\n  color: ").concat(t.contrast,";\n  opacity: .8;\n}\n\n.application-menu.is-personalizable .searchfield-wrapper.active .icon {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel,\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header {\n  background-color: ").concat(t.base," !important;\n  border-top-color: transparent;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion.panel .accordion-header:hover {\n  background-color: ").concat(t.darkest," !important;\n}\n\n.application-menu.is-personalizable .application-menu-switcher-panel .accordion-heading {\n  border-top-color: ").concat(t.darkest,";\n}\n\n.application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ").concat(t.base,";\n  border-bottom: none !important;\n}\n\nhtml[dir='rtl'] .application-menu.is-personalizable {\n  background-color: ").concat(t.lighter,";\n  border-left: ").concat(t.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable button svg.ripple-effect {\n  background-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable {\n  background-color: ').concat(t.lighter,";\n  border-right: ").concat(t.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .application-menu-header {\n  background-color: ').concat(t.lighter,";\n  border-bottom-color: ").concat(t.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .application-menu-footer {\n  background-color: ').concat(t.lighter,";\n  border-top-color: ").concat(t.light,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .searchfield-wrapper {\n  background-color: ').concat(t.dark,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header:hover {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header.is-selected {\n  background-color: ').concat(t.darkest,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::before {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-header .icon.plus-minus::after {\n  background-color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane {\n  background-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse .accordion-pane .accordion-header {\n  color: ').concat(t.subtext,';\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded {\n  background-color: ').concat(t.dark," !important;\n  color: ").concat(t.subtext,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused:not(.hide-focus):not(.is-expanded) {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-focused.is-expanded {\n  border-color: transparent !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-selected::before {\n  background-color: ').concat(t.darker," !important;\n  border-color: ").concat(t.darker,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded.is-focused::before {\n  border-color: ').concat(t.contrast,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded + .accordion-pane {\n  background-color: ').concat(t.dark,' !important;\n}\n\nhtml[class*="theme-uplift-"] .application-menu.is-personalizable .accordion.panel.inverse > .accordion-header.is-expanded:hover::before {\n  border-color: ').concat(t.darkest," !important;\n  background-color: ").concat(t.darkest," !important;\n}\n\n.is-personalizable .personalize-header,\n.is-personalizable.tab-container {\n  background-color: ").concat(t.dark," !important;\n}\n\n.is-personalizable .personalize-subheader {\n  background-color: ").concat(t.lighter," !important;\n}\n\n.is-personalizable .personalize-text {\n  color: ").concat(t.contrast," !important;\n}\n\n.is-personalizable .personalize-actionable,\n.is-personalizable .personalize-actionable svg {\n  color: ").concat(t.contrast,";\n  opacity: .8;\n}\n\n.is-personalizable .personalize-actionable:hover:not([disabled]),\n.is-personalizable .personalize-actionable:hover:not([disabled]) svg {\n  color: ").concat(t.contrast,";\n  opacity: 1;\n}\n\n.is-personalizable .personalize-actionable.is-focused:not(.hide-focus),\n.is-personalizable .personalize-actionable:focus:not(.hide-focus) {\n  border-color: ").concat(t.contrast,";\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-actionable.hyperlink:focus:not(.hide-focus)::after {\n  border-color: ").concat(t.contrast,";\n  opacity: 1;\n  box-shadow: 0 0 4px 3px rgba(0, 0, 0, 0.2);\n}\n\n.is-personalizable .personalize-vertical-border {\n  border-color: ").concat(t.light,";\n}\n\n.is-personalizable .personalize-horizontal-bottom-border {\n  border-bottom: 1px solid ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-horizontal-top-border {\n  border-top: 1px solid: ").concat(t.darkest,";\n}\n\n.is-personalizable .personalize-chart-targeted .total.bar {\n  background-color: rgba(255, 255, 255, .8);\n}\n\n.is-personalizable .personalize-chart-targeted .chart-percent-text,\n.is-personalizable .personalize-chart-targeted .label {\n  color: ").concat(t.text,";\n}\n\n.is-personalizable .info-message,\n.is-personalizable .info-message .icon,\n.is-personalizable .info-message p {\n  color: ").concat(t.text," !important;\n}\n\n.is-personalizable .personalize-actionable-disabled,\n.is-personalizable .personalize-actionable-disabled:hover {\n  opacity: .4 !important;\n  cursor: default;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .arc,\n.hero-widget.is-personalizable .hero-header .chart-container .bar,\n.hero-widget.is-personalizable .hero-header .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-content .chart-container .arc,\n.hero-widget.is-personalizable .hero-content .chart-container .bar,\n.hero-widget.is-personalizable .hero-content .chart-container.line-chart .dot,\n.hero-widget.is-personalizable .hero-footer .chart-container .arc,\n.hero-widget.is-personalizable .hero-footer .chart-container .bar,\n.hero-widget.is-personalizable .hero-footer .chart-container.line-chart .dot {\n    stroke: ").concat(t.lighter," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container text,\n.hero-widget.is-personalizable .hero-content .chart-container text,\n.hero-widget.is-personalizable .hero-footer .chart-container text {\n    fill: ").concat(t.text," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-content .chart-container .chart-legend-item-text,\n.hero-widget.is-personalizable .hero-footer .chart-container .chart-legend-item-text {\n  color: ").concat(t.text,";\n  fill: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .chart-container .axis path, .chart-container .axis line,\n.hero-widget.is-personalizable .hero-header .chart-container .axis .tick0 line {\n  stroke: ").concat(t.subtext," !important;\n}\n\n.hero-widget.is-personalizable .hero-header .title,\n.hero-widget.is-personalizable .hero-content .title,\n.hero-widget.is-personalizable .hero-footer .title {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-content .btn-tertiary,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary),\n.hero-widget.is-personalizable .hero-header .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary) .icon\n {\n  color: ").concat(t.subtext,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover,\n.hero-widget.is-personalizable .hero-header .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:hover .icon,\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):hover .icon\n {\n  color: ").concat(t.text,";\n}\n\n.hero-widget.is-personalizable .hero-header .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-header .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-content .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-tertiary:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary).is-open span:focus:not(.hide-focus),\n.hero-widget.is-personalizable .hero-footer .btn-menu:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-tertiary):focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n.header.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.header.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .toolbar [class^='btn']:focus:not(.hide-focus),\n.subheader.is-personalizable .flex-toolbar [class^='btn']:focus:not(.hide-focus) {\n  box-shadow: 0 0 0 2px transparent,\n    0 0 0 1px ").concat(t.subtext,",\n    0 0 2px 1px ").concat(t.subtext,";\n}\n\n/*\n.tooltip.is-personalizable {\n  background-color: ").concat(t.darkest,";\n  border-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable .chart-swatch .swatch-row div {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable,\n.tooltip.is-personalizable p,\n.tooltip.is-personalizable .chart-swatch .swatch-row span,\n.tooltip.is-personalizable .chart-swatch .swatch-row b {\n  color: ").concat(t.tooltipText,";\n}\n.tooltip.is-personalizable.top .arrow::after {\n  border-top-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.right .arrow::after {\n  border-right-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.bottom .arrow::after {\n  border-bottom-color: ").concat(t.darkest,";\n}\n.tooltip.is-personalizable.left .arrow::after {\n  border-left-color: ").concat(t.darkest,";\n}\n*/\n    ")}(t)},setFont:function(t){$("html").addClass("font-".concat(t))},setColors:function(t){return""===t?(this.setColorsToDefault(),this):t?(this.appendStyleSheet(this.getColorStyleSheet(t)),this.settings.colors=t,this.element.triggerHandler("colorschanged",{colors:this.settings.colors.header||this.settings.colors||Z.themeColors().brand.primary.alt.value,isDefault:!1,theme:this.currentTheme||"theme-soho-light"}),this):this},setColorsToDefault:function(){this.settings.colors="";var t=document.getElementById("soho-personalization");t&&t.parentNode.removeChild(t),this.element.triggerHandler("colorschanged",{colors:Z.themeColors().brand.primary.alt.value,isDefault:!0,theme:this.currentTheme||"theme-soho-light"})},getThemeFromStylesheet:function(){var t=$("#stylesheet, #sohoxi-stylesheet"),e="";if(t.length>0){var i=t.attr("href"),n=(e=i.substring(i.lastIndexOf("/")+1)).lastIndexOf("?");n>-1&&(e=e.slice(0,n)),e=e.replace(".min","").replace(".css","")}return e},setTheme:function(t){var e=$("html");if(t)if(this.currentTheme=t,Z.currentTheme.id!==t){["light","dark","high-contrast"].indexOf(t)>-1&&(t+="-theme"),e.removeClass((function(t,e){return e.split(" ").filter((function(t){return t.indexOf("theme")>-1})).join()})).addClass(t),this.blockUi();var i=this,n=$("#stylesheet, #sohoxi-stylesheet"),s=$('<link rel="stylesheet">'),a=n.attr("href");s.on("load",(function(){n.remove(),i.unBlockUi(),i.triggerEvent(t)})).on("error",(function(){i.unBlockUi()}));var r=a?a.substring(0,a.lastIndexOf("/")):"",o=!!a&&a.indexOf(".min")>-1;s.attr({id:n.attr("id"),href:h.stripTags("".concat(r,"/").concat(t).concat(o?".min":"",".css"))}),n.removeAttr("id"),n.before(s),this.settings.theme=t,Z.setTheme(t),this.setColors(this.settings.colors)}else e.hasClass(t)||e.addClass(t)},blockUi:function(){if(this.settings.blockUI){var t="#bdbdbd";switch(Z){case"light":t="#f0f0f0";break;case"dark":t="#313236";break;case"high-contrast":t="#d8d8d8";break;default:t="#f0f0f0"}this.pageOverlay=this.pageOverlay||$('<div class="personalize-overlay"></div>'),this.pageOverlay.css("background",t),$("body").append(this.pageOverlay)}},triggerEvent:function(t){this.element.triggerHandler("themechanged",{colors:this.settings.colors.header||this.settings.colors||Z.themeColors().brand.primary.alt.value,theme:t||"theme-soho-light"}),$("body").trigger("resize")},unBlockUi:function(){var t=this;t.settings.blockUI&&t.pageOverlay&&t.pageOverlay.fadeOut(300,(function(){t.pageOverlay.remove(),t.pageOverlay=void 0}))},updated:function(t){if(!t)return this;var e=C.extend({},this.settings);return this.settings=C.mergeSettings(this.element[0],t,this.settings),this.settingsDidChange(e,"theme")&&this.setTheme(this.settings.theme),this.settingsDidChange(e,"colors")&&this.setColors(this.settings.colors),this.settingsDidChange(e,"font")&&this.setFont(this.settings.font),this},settingsDidChange:function(t,e){return this.settings[e]&&this.settings[e]!==t[e]},teardown:function(){return this.element.off("updated.".concat("personalize")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"personalize")}};var it={theme:"theme-soho-light"};"object"===i(window.SohoConfig)&&"object"===i(window.SohoConfig.personalize)&&(it=window.SohoConfig.personalize);var nt=new et(document.documentElement,it);$.fn.personalize=function(t){return this.each((function(){var e=$.data(this,"personalize");e||(e=$.data(this,"personalize",nt)),e.updated(t)}))},$.fn.disable=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.disable&&e.disable()})),this.prop("disabled",!0),this.attr("disabled",!0).closest(".field").addClass("is-disabled"),this},$.fn.enable=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.enable&&e.enable()})),this.prop({disabled:!1,readonly:!1}),this.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled"),this},$.fn.readonly=function(){return $.each(this.data(),(function(t,e){e instanceof jQuery||e&&e.readonly&&e.readonly()})),this.prop("readonly",!0),this},$.fn.revealText=function(t){if(!this)return this;var e=this;e.addClass("show"===(null==t||null==t?void 0:t.initialState)?"input-show-text":"input-hide-text"),e.addClass("input-hidepass");var i=$('<span class="input-hideshow-text">'.concat(Soho.Locale.translate("show"===(null==t||null==t?void 0:t.initialState)?"Hide":"Show"),"</span>"));e.after(i);var n=function(){if(e.hasClass("input-hide-text"))return e.removeClass("input-hide-text").addClass("input-show-text"),e.attr("type","text"),void i.text(Soho.Locale.translate("Hide"));e.removeClass("input-show-text").addClass("input-hide-text"),e.attr("type","password"),i.text(Soho.Locale.translate("Show"))};return i.on("click",(function(){n()})),e.on("keypress",(function(t){18===t.keyCode&&t.ctrlKey&&n()})),this},$((function(){var t,e;$(".label-text").closest("label, .label").each((function(){e=$("input, textarea, select",this),t=e.attr("class"),$(this).addClass((function(){return"inline".concat(t?" inline-".concat(-1===t.indexOf(" ")?t:t.substr(0,t.indexOf(" "))):"")}))}))})),$((function(){$("input:radio").on("click.radios",(function(){this.focus()}))})),$((function(){var t=function(t,e){for(var i=0,n=t.length;i<n;i++)$(t[i]).parent().addClass(e)};t($(".field > input:checkbox, .field > .inline-checkbox"),"field-checkbox"),t($(".field > input:radio, .field > .inline-radio"),"field-radio")})),$((function(){[].slice.call(document.body.querySelectorAll("label.required .label-text, .label.required .label-text, label:not(.inline).required, .label:not(.inline).required")).forEach((function(t){-1!==t.className.indexOf("accessible")&&(t.querySelector(".required-asterisk")||t.insertAdjacentHTML("beforeend",'<span class="required-asterisk" aria-hidden="true">*</span>'))}));var t=[].slice.call(document.body.querySelectorAll("[data-validate]"));t.forEach((function(t){var e=t.getAttribute("data-validate");e&&e.indexOf("required")>-1&&t.setAttribute("aria-required",!0)})),(t=[].slice.call(document.body.querySelectorAll('input[type="hidden"]'))).forEach((function(t){var e=t.getAttribute("id");if(e){var i=document.body.querySelector('label[for="'.concat(e,'"]'));i&&i.setAttribute("aria-hidden",!0)}}))})),$.fn.highlight=function(t){return this.length&&t&&t.length?this.each((function(){!function t(e,i){var n,s,a,r,o=0;if(3===e.nodeType)n=e.data.toUpperCase().indexOf(i),(n-=e.data.substr(0,n).toUpperCase().length-e.data.substr(0,n).length)>=0&&((s=document.createElement("mark")).className="highlight",(a=e.splitText(n)).splitText(i.length),r=a.cloneNode(!0),s.appendChild(r),a.parentNode.replaceChild(s,a),o=1);else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=t(e.childNodes[l],i);return o}(this,t.toUpperCase())})):this},$.fn.unhighlight=function(){return this.find("mark.highlight").each((function(){var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()})).end()};var st={handle:null,itemsSelector:null,connectWith:!1,isVisualItems:!1,placeholder:null,placeholderCssClass:"arrange-placeholder"};function at(t,e){this.settings=C.mergeSettings(t,e,st),this.element=$(t),this.init()}at.prototype={init:function(){this.isTouch=m.features.touch,this.isIe="ie"===m.browser.name,this.handleEvents()},getElementByTouchInList:function(t,e,i){for(var n=!1,s=$(t),a=0,r=s.length;a<r;a++){var o=$(s[a]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||i<=l.top||i>=l.top+o.outerHeight()||(n=o)}return n},dragTouchElement:function(t,e){var i=t.originalEvent.changedTouches[0];e[0].style.top="".concat(i.pageY-this.offset.y,"px"),e[0].style.left="".concat(i.pageX-this.offset.x,"px")},unbind:function(){return this.items.removeClass("draggable").removeAttr("draggable").off("selectstart.arrange ".concat(this.dragStart," ").concat(this.dragEnd," ").concat(this.dragWhileDragging)),$(this.handle,this.items).removeClass("draggable").off("mousedown.arrange mouseup.arrange touchstart.arrange touchend.arrange"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,st)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"arrange")},getVisualIndex:function(t){var e=this.settings,i=null;if(e.isVisualItems){var n=this.element.children().not('[data-arrange-exclude="true"]');e.itemsSelector&&(n=$(e.itemsSelector,this.element).not('[data-arrange-exclude="true"]')),i=n.index(t)}return i},handleEvents:function(){var t,e,i=this,n=this.settings,s={},a=this.element.children().not('[data-arrange-exclude="true"]'),r=$("<".concat(/^(ul|ol)$/i.test(this.element[0].tagName)?"li":"div",">"));n.itemsSelector&&(a=$(n.itemsSelector,this.element).not('[data-arrange-exclude="true"]'),r=$("<".concat(a.first()[0].tagName," />"))),n.placeholder&&(r=$(n.placeholder)),this.dragStart="dragstart.arrange touchstart.arrange gesturestart.arrange",this.dragEnd="dragend.arrange touchend.arrange touchcancel.arrange gestureend.arrange",this.dragWhileDragging="dragover.arrange dragenter.arrange drop.arrange touchmove.arrange gesturechange.arrange",this.handle=n.handle||this.element.attr("data-arrange-handle"),this.connectWith=this.element.attr("data-arrange-connectWith"),this.placeholders=r,this.isTouch||this.placeholders.addClass("".concat(n.placeholderCssClass," draggable")),$(this.handle,a).addClass("draggable").on("mousedown.arrange touchstart.arrange",(function(){e=!0})).on("mouseup.arrange touchend.arrange",(function(){e=!1})),this.connectWith&&(a=a.add($(this.connectWith).children().not('[data-arrange-exclude="true"]')).data("connectWith",this.connectWith)),this.items=a,this.items.attr("draggable",!0).addClass(this.handle?"":"draggable").add([this,r]).not("a[href], img").on("selectstart.arrange",(function(){return this.dragDrop&&this.dragDrop(),this.isIe})),this.items.add(r).each((function(){$(this).on(i.dragStart,(function(a){if(i.handle&&!e){if(i.isTouch)return;return!1}e=!1,i.dragging=$(this),t=i.dragging.addClass("arrange-dragging").index();var r=n.isVisualItems?i.getVisualIndex(i.dragging):t;$.extend(s,{start:i.dragging,startIndex:r});var o=i.element.triggerHandler("beforearrange",s);if("boolean"==typeof o&&!o||"string"==typeof o&&"false"===o.toLowerCase())i.dragging=null;else if(i.isTouch){var l=i.dragging[0].getBoundingClientRect(),c=a.originalEvent.changedTouches[0];i.offset={x:c.pageX-l.left,y:c.pageY-l.top},i.placeholderTouch=i.dragging.clone().addClass("is-touch").attr("id","arrange-placeholder-touch").insertBefore(i.dragging),i.dragTouchElement(a,i.placeholderTouch)}else{var d=a.originalEvent.dataTransfer;d.effectAllowed="move",d.setData("Text","dummy")}})).on(i.dragEnd,(function(){if(i.dragging){if(i.isTouch&&(i.dragging.css("opacity",1),i.placeholderTouch.remove()),i.placeholders.filter(":visible").after(i.dragging),i.dragging.removeClass("arrange-dragging").show(),i.placeholders.detach(),t!==i.dragging.index()){var e=n.isVisualItems?i.getVisualIndex(i.dragging):i.dragging.index();$.extend(s,{end:i.dragging,endIndex:e}),i.element.triggerHandler("arrangeupdate",s)}i.dragging=null,i.placeholderTouch=null}})).on(i.dragWhileDragging,(function(t){if(i.dragging){var e,o,l=this;if(t.preventDefault(),"drop"===t.type)return t.stopPropagation(),i.dragging.trigger("dragend.arrange"),!1;if(i.isTouch){var c=t.originalEvent.touches[0];l=i.getElementByTouchInList(a,c.pageX,c.pageY)||l}if(l=$(l),i.isTouch||(t.originalEvent.dataTransfer.dropEffect="move"),a.is(l)&&r.index()!==l.index())i.isTouch?i.dragging.css("opacity",0):i.dragging.hide(),r.index()<l.index()?(r.insertAfter(l),e=l.index(),o=n.isVisualItems?i.getVisualIndex(l):e):(r.insertBefore(l),e=r.index(),o=n.isVisualItems?i.getVisualIndex(r):e),$.extend(s,{over:l,overIndex:o}),i.element.triggerHandler("draggingarrange",s),C.fixSVGIcons(l),i.placeholders.not(r).detach();else i.placeholders.is(this)||(i.placeholders.detach(),i.element.append(r));if(!i.isTouch)return!1;i.dragTouchElement(t,i.placeholderTouch)}}))}))}},$.fn.arrange=function(t){return this.each((function(){var e=$.data(this,"arrange");e?e.updated(t):e=$.data(this,"arrange",new at(this,t))}))};var rt={axis:null,clone:!1,cloneCssClass:"is-clone",clonePosIsFixed:!1,cloneAppendTo:null,containment:!1,obstacle:!1,underElements:!1,containmentOffset:{left:0,top:0}};function ot(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,rt),this.init()}ot.prototype={init:function(){this.handleEvents()},finish:function(t,e){var i={top:e,left:t};this.element.off("mouseup.draggable"),$(document).off("mousemove.draggable mouseup.draggable"),this.settings.underElements&&(i.underElements=this.getElementsFromPoint(i.left,i.top)),i.offset=this.offset,i.clone=this.clone,this.element.trigger("dragend",i),this.element.removeClass("is-dragging"),this.clone&&("x"===this.settings.axis&&delete i.top,"y"===this.settings.axis&&delete i.left,this.clone.remove(),this.clone=null),this.obstacle&&(this.obstacle=null),this.upperYLimit&&(this.upperYLimit=null),this.upperXLimit&&(this.upperXLimit=null),$("body").removeClass("disable-select")},move:function(t,e){var i={left:t,top:e};if("x"===this.settings.axis&&delete i.top,"y"===this.settings.axis&&delete i.left,this.settings.containment&&(this.settings.containment instanceof jQuery?this.container=this.settings.containment:"parent"===this.settings.containment?this.container=this.element.parent():"window"===this.settings.containment?this.container=$(window):"container"===this.settings.containment?this.container=this.element.closest(".page-container"):this.container=$(document),this.upperXLimit||(this.upperXLimit=this.container.width()-this.element.outerWidth()+this.settings.containmentOffset.left),this.upperYLimit||(this.upperYLimit=this.container.height()-this.element.outerHeight()+this.settings.containmentOffset.top),i.top>this.upperYLimit&&(i.top=this.upperYLimit),i.left>this.upperXLimit&&(i.left=this.upperXLimit),i.top<0&&(i.top=0),i.left<0&&(i.left=0),"container"===this.settings.containment&&i.left<=1&&(i.left=1)),this.settings.obstacle){var n=this.clone?this.clone.offset():this.element.offset(),s=this.clone?this.clone.outerWidth():this.element.outerWidth(),a=i.left>n.left;if(!this.obstacle){this.obstacle=$(this.settings.obstacle).not(this.element);var r=$(this.obstacle).offset();this.constraints={top:r.top,left:r.left,bottom:r.top+this.obstacle.outerHeight(),right:r.left+this.obstacle.outerWidth()}}!a&&this.originalPos.left>this.constraints.left&&i.left<=this.constraints.right&&(i.left=this.constraints.right),a&&this.originalPos.left+s<=this.constraints.left&&i.left+s>=this.constraints.left&&(i.left=this.constraints.left-this.obstacle.outerWidth())}var o=function(t,e,i){void 0!==e[i]&&(t[0].style[i]="".concat(e[i],"px"))};o(this.clone||this.element,i,"top"),o(this.clone||this.element,i,"left"),this.settings.underElements&&(i.underElements=this.getElementsFromPoint(i.left,i.top)),i.offset=this.offset,i.clone=this.clone,this.element.trigger("drag",i)},getElementsFromPoint:function(t,e){var i=[];if(document.elementsFromPoint)i=document.elementsFromPoint(t,e);else if(document.msElementsFromPoint)i=document.msElementsFromPoint(t,e);else{for(var n,s,a,r,o=999,l=[];(r=document.elementFromPoint(t,e))&&-1===i.indexOf(r)&&null!==r&&o>-1;)o--,i.push(r),l.push({value:r.style.getPropertyValue("pointer-events")||"",priority:r.style.getPropertyPriority("pointer-events")}),r.style.setProperty("pointer-events","none","important");for(n=0,s=i.length;n<s;n++)a=l[n],i[n].style.setProperty("pointer-events",a.value,a.priority)}return i},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},destroy:function(){$.removeData(this.element[0],"drag"),this.element.off("touchstart.draggable MSPointerDown.draggable pointerdown.draggable touchmove.draggable touchend.draggable touchcancel.draggable mousedown.draggable")},handleEvents:function(){var t=this;t.offset=null,t.element.attr("draggable",!m.features.touch),"onpointerdown"in window||"onmspointerdown"in window||t.element.on("touchstart.draggable gesturestart.draggable",(function(e){var i=$(this).position(),n=e.originalEvent;t.offset={x:n.changedTouches[0].pageX-i.left,y:n.changedTouches[0].pageY-i.top},t.originalPos=i,t.element.addClass("is-dragging"),i.offset=t.offset,i.clone=t.clone,t.element.trigger("dragstart",i)})).on("touchmove.draggable gesturechange.draggable",(function(e){e.preventDefault();var i=e.originalEvent;if(!(i.targetTouches.length>1)){var n=i.changedTouches[0].pageX-t.offset.x,s=i.changedTouches[0].pageY-t.offset.y;t.move(n,s)}})).on("touchend.draggable gestureend.draggable touchcancel.draggable",(function(e){e.preventDefault();var i=e.originalEvent.changedTouches[0];t.finish(i.pageX-t.offset.x,i.pageY-t.offset.y)})),t.element.on("mousedown.draggable",(function(e){e.preventDefault();var i=t.settings.clonePosIsFixed?t.element[0].getBoundingClientRect():t.element.position();t.offset={x:e.pageX-i.left,y:e.pageY-i.top},t.originalPos=i,$("body").addClass("disable-select"),$(document).on("mousemove.draggable",(function(e){e.preventDefault(),t.move(e.pageX-t.offset.x,e.pageY-t.offset.y)})),$(document).on("mouseup.draggable",(function(i){i.preventDefault(),t.finish(e.pageX-t.offset.x,i.pageY-t.offset.y)})),t.element.on("mouseup.draggable",(function(e){e.preventDefault(),t.finish(e.pageX-t.offset.x,e.pageY-t.offset.y)})),!t.clone&&t.settings.clone&&(t.clone=t.element.clone(!0),"parent"===t.settings.cloneAppendTo&&(t.settings.cloneAppendTo=t.element.parent()),t.clone.addClass(t.settings.cloneCssClass).appendTo(t.settings.cloneAppendTo||"body")),t.element.addClass("is-dragging"),t.element.trigger("dragstart",[i,t.clone])}))}},$.fn.drag=function(t){return this.each((function(){var e=$.data(this,"drag");e?e.updated(t):e=$.data(this,"drag",new ot(this,t))}))};var lt={bleedFromContainer:!1,callback:null,container:null,parent:null,parentXAlignment:"center",parentYAlignment:"center",placement:"bottom",strategies:["nudge"]},ct=["nudge","clockwise","flip","shrink","shrink-x","shrink-y"],dt=["top","left","right","bottom","center"],ht=["left","center","right"],ut=["top","center","bottom"],pt=["x","y","container","containerOffsetX","containerOffsetY","callback","parent","parentXAlignment","parentYAlignment","useParentWidth","useParentHeight","placement","strategies"];function gt(t){var e=this;return pt.forEach((function(i){if(null!==t[i])return"x"===i||"y"===i?(e.setCoordinate(i,t[i]),void(e["original".concat(i)]=t[i])):void(e[i]=t[i])})),this.modified=!1,this.sanitize()}function ft(t,e){this.settings=C.mergeSettings(t,e,lt),this.element=$(t),this.init()}gt.prototype={isReasonableDefault:function(t,e){return $.inArray(t,e)>-1},sanitize:function(){var t=this;this.bleedFromContainer=!0===this.bleedFromContainer,this.callback="function"==typeof this.callback?this.callback:lt.callback,this.container=this.container instanceof $&&this.container.length?this.container:lt.container,this.containerOffsetX=isNaN(parseInt(this.containerOffsetX,10))?0:this.containerOffsetX,this.containerOffsetY=isNaN(parseInt(this.containerOffsetY,10))?0:this.containerOffsetY,this.parent=this.parent instanceof $&&this.parent.length?this.parent:lt.parent,this.parentXAlignment=this.isReasonableDefault(this.parentXAlignment,ht)?this.parentXAlignment:lt.parentXAlignment,this.parentYAlignment=this.isReasonableDefault(this.parentYAlignment,ut)?this.parentYAlignment:lt.parentYAlignment,this.placement=this.isReasonableDefault(this.placement,dt)?this.placement:lt.placement,this.useParentHeight=!0===this.useParentHeight,this.useParentWidth=!0===this.useParentWidth,$.isArray(this.strategies)&&this.strategies.length||(this.strategies=["nudge"]),this.strategies.forEach((function(e,i){t.strategies[i]=t.isReasonableDefault(e,ct)?e:t.strategies[i]}))},setCoordinate:function(t,e){this.isReasonableDefault(t,["x","y"])&&(isNaN(e)&&(e=0),this[t]=Math.round(e))}},ft.prototype={init:function(){return this.build().handleEvents()},build:function(){this.element.hasClass("placeable")||this.element.addClass("placeable"),this.originalStyles={};var t=this.element[0].style.height,e=this.element[0].style.width;return t&&(this.originalStyles.height=t),e&&(this.originalStyles.width=e),this},handleEvents:function(){var t=this;return this.element.on("place.".concat("place"),(function(e,i,n){t.place(new gt({x:i,y:n}))})).on("updated.".concat("place"),(function(){t.updated()})),this},render:function(t){var e=/(px|%)/i;this.element.offset({left:t.x,top:t.y}),t.height&&(this.element[0].style.height=t.height+(e.test("".concat(t.height))?"":"px")),t.width&&(this.element[0].style.width=t.width+(e.test("".concat(t.width))?"":"px"))},place:function(t){var e=[this.element[0].style.left,this.element[0].style.top];return this.element.trigger("beforeplace",[e])?(t instanceof gt||(t=new gt(t)),null==t.x&&null==t.y?e:(this.clearOldStyles(),t.parent?this.placeWithParent(t):this.placeWithCoords(t))):e},placeWithParent:function(t){if(!t.parent||!t.parent.length)return[void 0,void 0];var e,i=this,n=this.getContainer(t),s=n.length&&n[0]===document.body;m.rtl&&n.length&&(e=u.getDimensions(n[0]),this.element.css({left:"".concat(e.left,"px"),top:"".concat(e.right,"px")}));var a=u.getDimensions(t.parent[0]),r=u.getDimensions(this.element[0]),o=s?$(window).scrollLeft():n.scrollLeft(),l=s?$(window).scrollTop():n.scrollTop();function c(t){var e=function(t){var e,i,n=t.placement,c=t.parentXAlignment,d=t.parentYAlignment;switch(n){case"top":i=a.top-r.height-t.y+(s?l:0);break;case"left":e=a.left-r.width-t.x+(s?o:0);break;case"right":e=a.right+t.x+(s?o:0);break;default:i=a.bottom+t.y+(s?l:0)}if("top"===n||"bottom"===n){var h=Math.round(s?document.body.offsetWidth:null);switch(c){case"left":e=s&&h<Math.round(r.left)+Math.round(r.width)?a.left+t.x+o:a.left-t.x+(s?o:0);break;case"right":e=s&&Math.round(r.right)-Math.round(r.width)<0?a.left-t.x+o:a.right-r.width+t.x+(s?o:0);break;default:e=a.left+(a.width-r.width)/2+t.x+(s?o:0)}}if("right"===n||"left"===n)switch(d){case"top":i=a.top-t.y+(s?l:0);break;case"bottom":i=a.bottom-r.height+t.y+(s?l:0);break;default:i=a.top+(a.height-r.height)/2+t.y+(s?l:0)}return[e,i]}(t);return t.setCoordinate("x",e[0]),t.setCoordinate("y",e[1]),i.render(t),t=i.handlePlacementCallback(t)}return t.useParentWidth&&(t.width=a.width),t.useParentHeight&&(t.height=a.height),(t=c(t)).strategies.forEach((function(e){(t=i.checkBleeds(t)).bleeds&&(t=function(){switch(e){case"nudge":return i.nudge(t);case"clockwise":return i.clockwise(t);case"flip":return(t=i.flip(t)).setCoordinate("x",t.originalx),t.setCoordinate("y",t.originaly),t=c(t);case"shrink":return i.shrink(t);case"shrink-x":return i.shrink(t,"x");case"shrink-y":return i.shrink(t,"y");default:return t}}(),i.render(t))})),t.element=this.element,this.element.trigger("afterplace",[t]),t},placeWithCoords:function(t){return this.render(t),t=this.handlePlacementCallback(t),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.nudge(t)),this.render(t),(t=this.checkBleeds(t)).bleeds&&(t=this.shrink(t)),this.render(t),this.element.trigger("afterplace",[t]),t},handlePlacementCallback:function(t){var e=t.callback||this.settings.callback;return t.element=this.element,e&&"function"==typeof e&&(t=e(t)),this.render(t),t},accountForScrolling:function(t){var e=t.container,i=window.getComputedStyle(this.element[0]).position;if("fixed"===i)return!1;if(e&&e.length||(e=this.element.parents().filter((function(){return"absolute"===window.getComputedStyle(this).position||"fixed"===i}))),!e||!e.length)return!0;if(e[0]===document.body)return!1;var n=window.getComputedStyle(e[0]);return"fixed"!==(i=n.position)&&("absolute"!==i||"hidden"!==n.overflow)},getContainer:function(t){if(t.container instanceof $&&t.container.length)return t.container;var e=this.element.parents(".modal");return e.length?e:$(document.body)},checkBleeds:function(t){var e,i=this.settings.bleedFromContainer,n=this.getContainer(t),s=n.length&&n[0]===document.body,a=this.element[0].getBoundingClientRect(),r={},o=n?n[0].getBoundingClientRect():{},l=s?$(window).scrollLeft():n.scrollLeft(),c=s?$(window).scrollTop():n.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function u(t){switch(t){case"top":return(i?0:o.top)-(s?-1*c:0);case"left":return(i?0:o.left)-(s?-1*l:0);case"right":return(i?h:o.right)-(s?-1*l:0);default:return(i?d:o.bottom)-(s?-1*c:0)}}r.width=a.width,r.height=a.height,r.top=a.top,r.right=a.right,r.bottom=a.bottom,r.left=a.left;var p=u("right");if(r.width>=p){e=r.width-p+20;var g=r.width-e;t.width=g,this.element[0].style.width="".concat(g,"px"),r.width=g}var f=u("bottom");if(r.height>=f){e=r.height-f+20;var m=r.height-e;t.height=m,this.element[0].style.height="".concat(m,"px"),r.height=m}var v=r.right>u("right"),b=r.left<u("left"),y=r.top<u("top"),w=r.bottom>u("bottom");return v||b||y||w?(t.bleeds={},t.bleeds.right=v?r.right-u("right"):null,t.bleeds.left=b?-(r.left-u("left")):null,t.bleeds.top=y?-(r.top-u("top")):null,t.bleeds.bottom=w?r.bottom-u("bottom"):null,t):(t.bleeds=void 0,t)},nudge:function(t){t.nudges||(t.nudges={x:0,y:0});var e=0;return t.bleeds.right&&(e=Math.abs(t.bleeds.right)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x-e),t.nudges.x-=e),t.bleeds.left&&(e=Math.abs(t.bleeds.left)+Math.abs(t.containerOffsetX),t.setCoordinate("x",t.x+e),t.nudges.x+=e),t.bleeds.top&&(e=Math.abs(t.bleeds.top)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y+e),t.nudges.y+=e),t.bleeds.bottom&&(e=Math.abs(t.bleeds.bottom)+Math.abs(t.containerOffsetY),t.setCoordinate("y",t.y-e),t.nudges.y-=e),t.wasNudged=!0,t.bleeds=void 0,t},flip:function(t){if(!t.bleeds[t.placement])return t;if(t.attemptedFlips||(t.attemptedFlips=[]),t.attemptedFlips.push(t.placement),t.attemptedFlips.length>3)return t=this.giveup(t);var e=this.accountForScrolling(t),i=["left","right"].indexOf(t.placement)>-1,n=this.settings.bleedFromContainer,s=this.getContainer(t),a=s.length&&s[0]===document.body,r=s?s[0].getBoundingClientRect():{},o=t.parent[0].getBoundingClientRect(),l=a?$(window).scrollLeft():s.scrollLeft(),c=a?$(window).scrollTop():s.scrollTop(),d=Math.max(document.documentElement.clientHeight,window.innerHeight||0),h=Math.max(document.documentElement.clientWidth,window.innerWidth||0);function u(t){switch(t){case"left":return"right";case"right":return"left";case"top":return"bottom";default:return"top"}}function p(i){var s=0;switch(i){case"left":s=(n?0:r.left)-(e?l:0)-o.left+t.containerOffsetX;break;case"right":s=(n?h:r.right)-(e?l:0)-o.right-t.containerOffsetX;break;case"top":s=(n?0:r.top)-(e?c:0)-o.top+t.containerOffsetY;break;default:s=(n?d:r.bottom)-(e?c:0)-o.bottom-t.containerOffsetY}return Math.abs(s)}function g(e){return $.inArray(e,t.attemptedFlips)>-1}return t.placement=function(e){var n=u(e),s=i?"top":"left",a=u(s),r=p(e),o=p(n);if(!g(n))return r>=o?e:(t.wasFlipped=!0,n);var l=t.originalx;t.originalx=t.originaly,t.originaly=l;var c=p(s),d=p(a);if(!g(s)){if(c>=d)return s;if(!g(a))return a}return e}(t.placement),t},clockwise:function(t){return t},shrink:function(t,e){var i=0,n=0,s=null==e||"x"===e,a=null==e||"y"===e,r=this.accountForScrolling(t),o=u.getDimensions(this.element[0]),l=this.settings.bleedFromContainer,c=this.getContainer(t),d=c?c[0].getBoundingClientRect():{},h=c.length&&c[0]===document.body,p=null===t.parent,g=h?$(window).scrollLeft():c.scrollLeft(),f=h?$(window).scrollTop():c.scrollTop(),m=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=(r?g:0)+(l?0:d.left)+t.containerOffsetX,y=(r?f:0)+(l?0:d.top)+t.containerOffsetY,w=(r?g:0)+(l?v:d.right)-t.containerOffsetX,x=(r?f:0)+(l?m:d.bottom)-t.containerOffsetY,C=w-b,k=x-y;if(!p){var T=u.getDimensions(t.parent[0]),S=T.top-y,A=x-T.bottom,E=T.left-b,D=w-T.right;C=E>D?E:D,k=S>A?S:A}return s&&(o.width>C&&(t.width=C),o.left<b&&(i=b-o.left,t.setCoordinate("x",t.x+i))),a&&(o.height>k&&(t.height=k),o.top<y&&(n=y-o.top,t.setCoordinate("y",t.y+n))),t},giveup:function(t){return t.giveup=!0,t.strategy=this.settings.strategy,t.placement=this.settings.placement,t},clearOldStyles:function(){this.element[0].style.left="",this.element[0].style.top="",this.element[0].style.width="",this.element[0].style.height="";var t=this.originalStyles;return t&&(t.width&&(this.element[0].style.width=t.width),t.height&&(this.element[0].style.height=t.height)),this},setArrowPosition:function(t,e,i){var n=e.parent,s=i.find("div.arrow"),a=e.placement,r={},o=i[0].getBoundingClientRect(),l={},c={},d=!1;if(n&&n.length&&s.length){s[0].removeAttribute("style"),i.removeClass("top right bottom left").addClass(a),n.is(".colorpicker")&&(n=n.next(".trigger")),n.is(".datepicker, .timepicker")&&(n=n.next(".icon")),n.is(".btn-split-menu, .btn-menu, .btn-actions, .btn-filter, .tab, .tab-more")&&(n=n.find(".icon").last()),n.is(".searchfield-category-button")&&(n=n.find(".icon.icon-dropdown")),n.is(".colorpicker-editor-button")&&(n=n.find(".trigger .icon")),n.is(".fontpicker")&&(n=n.find(".icon.icon-dropdown")),n.length||(n=e.parent),r=n.length?n[0].getBoundingClientRect():r,l=s.length?s[0].getBoundingClientRect():l,c={};var h,u,p={};p[(u=a,"right"===u||"left"===u?"margin-top":"margin-left")]=(h=0,"left"!==a&&"right"!==a||(h=r.top+r.height/2-(l.top+l.height/2),c.top=l.top+h,c.bottom=l.bottom+h,(c.top<=o.top||c.bottom>=o.bottom)&&(d=!0)),"top"!==a&&"bottom"!==a||(h=r.left+r.width/2-(l.left+l.width/2),c.left=l.left+h,c.right=l.right+h,(c.left<=o.left||c.right>=o.right)&&(d=!0)),h),d&&(p.display="none"),s.css(p)}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){return this.clearOldStyles(),this.element.removeClass("placeable"),this.element.off("updated.".concat("place"," place.").concat("place")),this.element.trigger("afterteardown"),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"place")}},$.fn.place=function(t){return this.each((function(){var e=$.data(this,"place");e?e.updated(t):e=$.data(this,"place",new ft(this,t))}))};var mt={use:"user-profile",focusable:!1};function vt(t,e){this.settings=C.mergeSettings(t,e,mt),this.element=$(t),this.init()}vt.prototype={init:function(){return this.getExistingUseTag(),this.render().handleEvents()},render:function(){if(this.element.addClass("icon"),!this.element.is("svg"))return this;var t=this.element[0].getElementsByTagName("use")[0];return t?(t.getAttribute("href")!==this.getBasedUseTag()&&t.setAttribute("href",this.getBasedUseTag()),this):this},getBasedUseTag:function(){return q.getBaseURL("#icon-".concat(this.settings.use))},getExistingUseTag:function(){if(!this.element.is("svg"))return this;var t=this.element.children("use");if(!t.length)return this;var e=t.attr("href");!e&&t.attr("xlink:href")&&(e=t.attr("xlink:href"));var i=q.url;return e&&q.element.length&&i.length&&(e=e.replace(i,"")),e=e.replace("#icon-",""),this.settings.use=e,this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("icon"),(function(){t.updated()})),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("icon")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"icon")}},$.fn.icon=function(t){return this.each((function(){var e=$.data(this,"icon");e?e.updated(t):e=$.data(this,"icon",new vt(this,t))}))},function(){function t(t){var e={icon:"user-profile",classes:["icon"]};return"string"==typeof(t=t||$.extend({},e))&&(t=$.extend({},e,{icon:t.replace("icon-","")})),!t.classes&&t.class&&(t.classes=t.class,delete t.class),t.classes||(t.classes=[].concat(e.classes)),"string"==typeof t.classes&&(t.classes=t.classes.split(" ")),-1===t.classes.indexOf("icon")&&t.classes.push("icon"),t.icon||(t.icon=""),t}$.createIcon=function(e){return e=t(e),['<svg class="'.concat(e.classes.join(" "),'" focusable="false" aria-hidden="true" role="presentation">')+'<use href="#icon-'.concat(e.icon,'"></use>')+"</svg>"].join("")},$.createIconElement=function(t){return $($.createIcon(t))},$.createIconPath=function(e){return e=t(e),$.getBaseURL("#icon-".concat(e.icon.replace("icon-","")))},$.fn.changeIcon=function(t){t&&$(this).find("use").attr("href",$.createIconPath({icon:t}))},$.fn.getIconName=function(){var t=$(this),e=t.find("use");return 1===e.length&&e.attr("href")?e.attr("href").substr(e.attr("href").indexOf("#icon-")+6):1===e.length&&e.attr("xlink:href")?e.attr("xlink:href").substr(e.attr("xlink:href").indexOf("#icon-")+6):t.attr("data-icon")}}();var bt={content:null,offset:{top:10,left:10},placement:"top",trigger:"hover",showOnKeyboardFocus:!0,title:null,beforeShow:null,popover:null,closebutton:null,isError:!1,isErrorColor:!1,tooltipElement:null,parentElement:null,keepOpen:!1,extraClass:null,placementOpts:{},maxWidth:null,initializeContent:!0,headerClass:null,delay:500,onHidden:null,attachToBody:!0,attributes:null};function yt(t,e){this.settings=C.mergeSettings(t,e,bt),this.element=$(t),this.init()}yt.prototype={get visible(){return this.tooltip.length&&!1===this.tooltip[0].classList.contains("hidden")&&!1===this.tooltip[0].classList.contains("is-hidden")},get canBeShown(){return!this.reopenDelay&&!u.hasClass(this.element[0],"hidden")&&!u.hasClass(this.element[0],"is-hidden")&&this.element.parents(".hidden, .is-hidden").length<1},get popupmenuAPI(){return this.element.data("popupmenu")},get isFocused(){var t=document.activeElement;return!!this.activeElement.is($(t))||!!(this.tooltip&&this.tooltip.length&&this.tooltip[0].contains(t))},init:function(){this.uniqueId=C.uniqueId(this.element,"tooltip"),this.isTouch=m.features.touch,this.setup(),this.appendTooltip(),"immediate"!==this.settings.trigger&&this.setContent(this.settings.content,!0),this.handleEvents()},setup:function(){this.activeElement=this.settings.parentElement instanceof $&&this.settings.parentElement.length?this.settings.parentElement:this.element,this.descriptionId=$(".tooltip-description").length+1,this.description=this.element.parent().find(".tooltip-description"),!this.description.length&&this.settings.isError&&(this.description=$('<span id="tooltip-description-'.concat(this.descriptionId,'" class="tooltip-description audible"></span>')).insertAfter(this.element)),this.element.is(".dropdown, .multiselect")&&(this.activeElement=this.element.nextAll(".dropdown-wrapper:first").find(">.dropdown"));var t=this.element.attr("title");(!this.settings.popover&&t&&t.length||!this.settings.popover&&this.settings.title)&&(this.settings.content=this.settings.title?this.settings.title:t,this.element.removeAttr("title")),"hover"===this.settings.trigger&&this.isTouch&&this.element.addClass("longpress-target"),this.isPopover=null!==this.settings.content&&"object"===i(this.settings.content)||!0===this.settings.popover,this.settings.closebutton=!(!this.settings.closebutton&&!this.element.data("closebutton")),this.element.data("extraClass")&&this.element.data("extraClass").length&&(this.settings.extraClass=this.element.data("extraClass")),Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes,"trigger"),this.isRTL=B.isRTL(),u.addClass(this.element[0],"has-tooltip")},addAria:function(){this.content&&(this.description.text(this.content),this.content=this.addClassToLinks(this.content,"links-clickable"),this.isPopover||this.element.removeAttr("title").attr("aria-describedby",this.description.attr("id")),this.isPopover&&"click"===this.settings.trigger&&this.element.attr("aria-haspopup",!0))},addClassToLinks:function(t,e){if(t instanceof $&&t.length>0)return t;var i=$("<div/>").html(t);return $("a",i).addClass(e),i.html()},appendTooltip:function(){if(this.tooltip=this.settings.tooltipElement?$(this.settings.tooltipElement):$("#tooltip"),!this.tooltip.length){var t=this.settings.tooltipElement?this.settings.tooltipElement.substring(1,this.settings.tooltipElement.length):"tooltip";this.tooltip=$('<div class="'.concat(this.isPopover?"popover":"tooltip",' bottom is-hidden" role="tooltip" id="').concat(t,'"><div class="arrow"></div><div class="tooltip-content"></div></div>'))}this.tooltip.place({container:this.scrollparent,parent:this.activeElement,placement:this.settings.placement,strategy:"flip"}),$.data(this.tooltip[0],"tooltip",this),this.setTargetContainer()},handleEvents:function(){var t=this,e=t.settings.delay/10;function i(){t.timer&&t.timer.destroy&&t.timer.destroy(!0)}function n(){i(),t.timer=new U({duration:e,timeoutCallback:function(){t.show()}}),G.register(t.timer)}function s(){i(),t.show()}function a(){i(),t.hide()}function r(){t.visible?a():s()}"hover"!==this.settings.trigger||this.settings.isError||((this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("mouseenter.".concat("tooltip"),(function(){t.isTouch||n()})).on("mouseleave.".concat("tooltip"),(function(){t.visible?a():i()})).on("click.".concat("tooltip"),(function(){t.isTouch||a()})).on("longpress.".concat("tooltip"),(function(){s()})).on("updated.".concat("tooltip"),(function(){t.updated()})),this.settings.showOnKeyboardFocus&&(this.element.is(".dropdown, .multiselect, span.longpress-target")?this.activeElement:this.element).on("focus.".concat("tooltip"),(function(){t.isTouch&&!K.pressedKeys.get("Tab")||n()})).on("blur.".concat("tooltip"),(function(){t.settings.keepOpen||a()}))),"click"===this.settings.trigger&&this.element.on("click.".concat("tooltip"),(function(){r()})),"immediate"===this.settings.trigger&&setTimeout((function(){r()}),1),"focus"===this.settings.trigger&&this.element.on("focus.".concat("tooltip"),(function(){s()})).on("blur.".concat("tooltip"),(function(){t.settings.keepOpen||a()})),$(window).on("orientationchange.".concat("tooltip"),(function(){t.visible&&a()}),!1)},setContent:function(t,e){var i=this,n=this.settings.content,s=null==t;function a(){!0!==e&&(i.addAria(),i.render())}if(s&&null==n)return!1;if("function"==typeof n&&(t=n),s&&(t=n),t===this.content)return a(),!0;if(t instanceof $&&t.length)return this.content=t.addClass("hidden"),a(),!0;if("string"==typeof t){if(!t.length)return!1;t=B.translate(t,{showAsUndefined:!0})||t;var r=this.element[0].id;if(0===t.indexOf("#")&&(this.settings.popover||r===t.split("#").pop())){var o=$("".concat(t));return!!o.length&&(this.content=o,a(),!0)}}else{if("function"!=typeof t)return!1;var l=t.call(this.element);if(!l||"string"!=typeof l||!l.length)return!1;t=l}return this.content=h.sanitizeHTML(t),this.content="<p>".concat(this.content,"</p>"),a(),!0},render:function(){return this.isPopover?this.renderPopover():this.renderTooltip()},renderTooltip:function(){var t=this.tooltip[0].querySelectorAll(".tooltip-title")[0],e=this.tooltip[0].querySelectorAll(".tooltip-content")[0],i=this.settings.extraClass,n=this.content,s=this.tooltip[0],a="tooltip is-hidden";i&&(a+=" ".concat(i)),s.setAttribute("class",a),Array.isArray(this.settings.attributes)&&C.addAttributes(this.tooltip,this,this.settings.attributes),t&&(t.style.display="none"),e&&e.previousElementSibling&&!e.previousElementSibling.classList.contains("arrow")&&e.insertAdjacentHTML("beforebegin",'<div class="arrow"></div>');var r="string"==typeof this.content?n:n[0].innerHTML;u.html(e,r,"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>")},renderPopover:function(){var t=this,e=this.settings.extraClass,i=this.tooltip.find(".tooltip-content"),n=this.tooltip[0].querySelector(".tooltip-title"),s=this.content,a="popover is-hidden";e&&(a+=" ".concat(e)),this.tooltip[0].setAttribute("class",a),Array.isArray(this.settings.attributes)&&C.addAttributes(this.tooltip,this,this.settings.attributes);var r="ie"===m.browser.name&&m.browser.isIE11()&&s instanceof $&&s.length&&"hover"===this.settings.trigger;if("string"==typeof s)s=$(s),i.html(s),i.find(".hidden").removeClass("hidden");else if(r){var o=s[0].cloneNode(!0),l=o.id;l&&(o.id="".concat(l,"-").concat(this.uniqueId)),i.html(o.outerHTML)}else i.html(s);var c=i.width();this.settings.placementOpts||(this.settings.placementOpts={}),this.settings.placementOpts.parent||(this.settings.placementOpts.parent=this.element),r||s[0].classList.remove("hidden"),i[0].firstElementChild.classList.remove("hidden");var d=this.settings.placementOpts.parent.width();if(B.isRTL()?this.settings.placementOpts.parentXAlignment=d>c?"left":"right":this.settings.placementOpts.parentXAlignment=d>c?"right":"left",null!==this.settings.title)if(n)n.style.display="",n.childNodes[0].nodeValue=this.settings.title;else{var h=document.createDocumentFragment();n=document.createElement("div"),u.html(n,this.settings.title,"*"),n.classList.add("tooltip-title"),this.settings.headerClass&&u.addClass(n,this.settings.headerClass,"filled"),h.appendChild(n),this.tooltip[0].insertBefore(h,this.tooltip[0].firstChild)}else n&&(n.style.display="none");if(this.settings.closebutton&&n&&!n.firstElementChild){var p=$('<button type="button" class="btn-icon l-pull-right btn-close">'.concat($.createIcon({classes:["icon-close"],icon:"close"}),"<span>Close</span>")+"</button>").on("click",(function(){t.hide(!0)}));n.appendChild(p[0]),Array.isArray(this.settings.attributes)&&C.addAttributes(p,this,this.settings.attributes,"close-btn")}this.settings.initializeContent&&s.initialize()},open:function(){return this.show()},show:function(t,e){var i=this;if((!this.popupmenuAPI||!this.popupmenuAPI.isOpen)&&this.canBeShown){if(this.isInPopup=!1,t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.settings.beforeShow&&!e){var n=function(t){("boolean"!=typeof t||t)&&(i.content=t,i.show({content:t},!0))};return"string"==typeof this.settings.beforeShow?void window[this.settings.beforeShow](n,this.element):void this.settings.beforeShow(n,this.element)}if(!1!==this.setContent(this.content)&&!1!==this.element.triggerHandler("beforeshow",[this.tooltip])){this.tooltip[0].removeAttribute("style"),this.tooltip[0].classList.add(this.settings.placement),this.tooltip[0].classList.add("is-open"),u.addClass(this.element[0],"has-open-tooltip"),(this.settings.isError||this.settings.isErrorColor)&&this.tooltip[0].classList.add("is-error"),this.position(),C.fixSVGIcons(this.tooltip),this.element.trigger("show",[this.tooltip]);var s=this.isTouch?"touchend":"mouseup";if(!i.settings.popover){var a=i.element.closest(".is-personalizable").length>0;i.tooltip[0].classList[a?"add":"remove"]("is-personalizable")}setTimeout((function(){$(document).on("".concat(s,".").concat("tooltip","-").concat(i.uniqueId),(function(t){var e=$(t.target);i.settings.isError||"focus"===i.settings.trigger||e.is(i.element)&&e.is("svg.icon")||$("#editor-popup").length&&$("#colorpicker-menu").length||1===$("#editor-popup").length&&1===e.closest(".popupmenu").length||(0===e.closest(".popover").length&&0===e.closest(".dropdown-list").length&&i.hide(),1===e.closest(".popover").length&&e.closest(".popover").not(".monthview-popup").length&&i.element.prev().is(".datepicker")&&i.hide())})).on("keydown.".concat("tooltip","-").concat(i.uniqueId),(function(t){(27===t.which||i.settings.isError)&&i.hide()})),i.settings.isError&&!i.element.is(":visible, .dropdown")&&i.element.is("[aria-describedby]")&&i.hide(),void 0===window.orientation&&$("body").on("resize.".concat("tooltip"),(function(){i.hide()})),$("body").on("scroll.".concat("tooltip"),(function(){i.hide()})),i.element.closest(".modal-body-wrapper").on("scroll.tooltip",(function(){i.hide()})),i.element.closest(".scrollable").on("scroll.tooltip",(function(){i.hide()})),i.element.closest(".datagrid-wrapper").on("scroll.tooltip",(function(){i.hide()})),i.settings.isError&&i.tooltip.on("click.".concat("tooltip"),(function(){i.hide()})),i.element.trigger("aftershow",[i.tooltip])}),i.settings.delay)}}},setTargetContainer:function(){var t=$("body"),e=!1;this.scrollparent=this.element.closest(".page-container.scrollable"),this.scrollparent.length&&(t=this.scrollparent);var i=this.element.closest(".modal");this.settings.attachToBody||(e=!0,t=i),this.settings.parentElement&&(t=this.settings.parentElement),e?this.tooltip.insertAfter(this.element):t[0].appendChild(this.tooltip[0])},handleAfterPlace:function(t,e){var i=this;this.tooltip.data("place").setArrowPosition(t,e,this.tooltip),setTimeout((function(){i.tooltip.triggerHandler("tooltipafterplace",[e])}))},position:function(){this.setTargetContainer(),this.tooltip[0].classList.remove("is-hidden");var t=this,e=this.isPopover?20:10,i=this.settings.placementOpts||{},n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=this.tooltip[0].getBoundingClientRect(),r=$.extend({},{x:0,y:e,container:this.scrollparent,containerOffsetX:i.containerOffsetX||this.settings.offset.left,containerOffsetY:i.containerOffsetY||this.settings.offset.top,parent:i.parent||this.activeElement,placement:i.placement||this.settings.placement,strategies:["flip","nudge"]},i);return"left"!==r.placement&&"right"!==r.placement||(r.x=e,r.y=0),a.width>=n&&/left|right/g.test(r.placement)||a.height>=s&&/top|bottom/g.test(r.placement)?this.tooltip[0].classList.add("no-arrow"):this.tooltip[0].classList.remove("no-arrow"),this.tooltip.one("afterplace.tooltip",(function(e,i){t.handleAfterPlace(e,i)})),this.tooltip.data("place")||this.tooltip.place(r),this.tooltip.data("place").place(r),this},close:function(){return this.hide()},hide:function(t){this.settings.keepOpen&&!t||!this.visible||(this.isInPopup?this.settings.content.addClass("hidden"):(u.removeClass(this.element[0],"has-open-tooltip"),this.tooltip[0].classList.remove("is-personalizable"),this.tooltip[0].classList.remove("is-open"),this.tooltip[0].classList.add("is-hidden"),this.tooltip[0].style.left="",this.tooltip[0].style.top="",this.tooltip.find(".arrow").removeAttr("style"),this.detachOpenEvents(),0===$(".popover").not(".is-hidden").length&&($(document).off("mouseup.tooltip keydown.tooltip"),$("body").off("resize.tooltip")),this.element.triggerHandler("hide",[this.tooltip]),this.settings.onHidden&&this.settings.onHidden({api:this,elem:this.tooltip})))},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings));var e=this;return"immediate"===e.settings.trigger?setTimeout((function(){e.show()}),100):e.setContent(),this},detachOpenEvents:function(){this.tooltip.off("click.".concat("tooltip")),$(document).off(["keydown.".concat("tooltip","-").concat(self.uniqueId),"mouseup.".concat("tooltip","-").concat(self.uniqueId),"touchend.".concat("tooltip","-").concat(self.uniqueId)].join(" ")),$("body").off(["resize.".concat("tooltip"),"scroll.".concat("tooltip")].join(" ")),this.element.closest(".modal-body-wrapper").off("scroll.".concat("tooltip")),this.element.closest(".scrollable").off("scroll.".concat("tooltip")),this.element.closest(".datagrid-body").off("scroll.".concat("tooltip"))},teardown:function(){return this.timer&&this.timer.destroy&&this.timer.destroy(!0),this.description.remove(),this.descriptionId=void 0,this.activeElement=void 0,this.element.removeAttr("aria-describedby").removeAttr("aria-haspopup"),this.tooltip.hasClass("is-hidden")||this.hide(),this.reopenDelay&&delete this.reopenDelay,this.tooltip&&this.tooltip.length&&(this.tooltip.data("place")&&this.tooltip.data("place").destroy(),this.tooltip.data("tooltip")&&$.removeData(this.tooltip[0],"tooltip")),this.element.off(["mouseenter.".concat("tooltip"),"mouseleave.".concat("tooltip"),"longpress.".concat("tooltip"),"click.".concat("tooltip"),"updated.".concat("tooltip"),"focus.".concat("tooltip"),"blur.".concat("tooltip")].join(" ")),u.removeClass(this.element[0],"has-tooltip"),this.detachOpenEvents(),$(window).off("orientationchange.".concat("tooltip")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tooltip")}},$.fn.tooltip=function(t){return this.each((function(){var e=$.data(this,"tooltip");e?e.updated(t):e=$.data(this,"tooltip",new yt(this,t))}))};var wt=["default","btn","btn-primary","btn-secondary","btn-tertiary","btn-destructive"],xt=["default","btn-icon","btn-menu","btn-actions","btn-toggle","icon-favorite","btn-editor","input"],Ct=["icon-favorite","btn-toggle"],kt={style:wt[0],type:xt[0],toggleOnIcon:null,toggleOffIcon:null,hideMenuArrow:null,replaceText:!1,ripple:!0,validate:!1,attributes:null};function Tt(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,kt),this.init()}Tt.prototype={get tooltipAPI(){return this.element.data("tooltip")},get icon(){return this.element[0].querySelector("svg:not(.ripple-effect):not(.icon-dropdown)")},get disabled(){return this.element.parent().is(".spinbox-wrapper")?this.isDisabled(this.element.parent().find("input")):this.isDisabled(this.element)},set disabled(t){var e=!0===t;this.element[0].disabled=e},init:function(){void 0!==this.settings.buttonsetAPI&&"function"==typeof this.settings.buttonsetAPI.render&&(this.buttonsetAPI=this.settings.buttonsetAPI,delete this.settings.buttonsetAPI),this.getSettingsFromElement(),this.render()},animateWithJS:function(t){var e=t[0].style,i="".concat(parseFloat(e.left)-100,"px"),n="".concat(parseFloat(e.top)-100,"px");t[0].style.opacity="0.4",t.animate({opacity:0,left:i,top:n,width:200,height:200},1e3)},createRipple:function(t){if(!(this.disabled||t&&(void 0!==t.which&&1!==t.which||-1===["click","touchstart"].indexOf(t.type)))){$("svg.ripple-effect",this.element).remove();var e,i,n=this.element.offset();t&&(m.features.touch?(t=t.originalEvent)&&t.touches&&1===t.touches.length&&(e=t.touches[0].pageX-n.left,i=t.touches[0].pageY-n.top):(e=t.pageX-n.left,i=t.pageY-n.top)),e=e<0?this.element.outerWidth()/2:e,i=i<0?this.element.outerHeight()/2:i;var s=$('<svg class="ripple-effect" focusable="false" aria-hidden="true" role="presentation">\n      <circle r="0" class="ripple-circle"></circle>\n    </svg>');if(s[0].style.left="".concat(e,"px"),s[0].style.top="".concat(i,"px"),this.element.prepend(s),!$.fn.cssPropSupport("animation")||m.browser.isSafari&&!m.features.touch||"firefox"===m.browser.name)s.removeClass("is-animation"),this.animateWithJS(s);else $("svg.ripple-effect",this.element).addClass("is-animation");setTimeout((function(){s.remove()}),1e3)}},render:function(){var t=this;this.renderAttributes();var e=this.element[0].classList;wt.indexOf(this.settings.style)>0&&e.add(this.settings.style),xt.indexOf(this.settings.type)>0&&e.add(this.settings.type);var i=this.buttonsetAPI,n=!1;if(i){"modal"===i.settings.style&&(n=!0);["default","btn","btn-modal"].indexOf(this.settings.style)>-1&&(e[n?"remove":"add"]("btn"),e[n?"add":"remove"]("btn-modal"));["btn-primary","btn-modal-primary"].indexOf(this.settings.style)>-1&&(e[n?"remove":"add"]("btn-primary"),e[n?"add":"remove"]("btn-modal-primary"));["btn-secondary","btn-modal-secondary"].indexOf(this.settings.style)>-1&&(e[n?"remove":"add"]("btn-secondary"),e[n?"add":"remove"]("btn-modal-secondary"))}this.settings.isDefault&&(this.settings.style="btn-primary",e.remove("btn-primary"),e.add("btn-modal-primary"),delete this.settings.isDefault),"string"==typeof this.settings.cssClass&&(this.element[0].className+=h.stripHTML(this.settings.cssClass)),this.settings.disabled&&(this.disabled=!0===this.settings.disabled,delete this.settings.disabled);if(this.settings.text){var s=this.element[0].querySelector("span"),a=s instanceof HTMLElement;a||(s=this.element);var r=this.settings.text||$(s).text().trim();r=h.stripHTML(r),a||(this.element[0].innerText="",s=document.createElement("span"),this.element.append($(s)),(this.settings.audible||["btn-icon","btn-actions"].indexOf(this.settings.type)>-1)&&s.classList.add("audible")),s.innerText=r}var o,l=this.icon;if(this.settings.icon?o=this.settings.icon:"btn-toggle"===this.settings.type?o=this.pressed?this.settings.toggleOnIcon:this.settings.toggleOffIcon:"icon-favorite"===this.settings.type?o=this.pressed?"icon-star-filled":"icon-star-outlined":"btn-actions"===this.settings.type&&(o="icon-more"),o&&(o=h.stripHTML(o),l instanceof SVGElement||l instanceof HTMLElement?l.querySelector("use").setAttribute("href","#".concat(o)):(l=$.createIconElement({icon:o.replace("icon-","")}),this.element.prepend($(l)))),this.element.hasClass("btn-menu")&&!this.element.hasClass("btn-icon")&&!this.element.hasClass("btn-actions")){var c=this.element.children("svg.icon"),d=c.find("use"),u=!1;if(c.length>0&&d.length>=1){var p=d.last().attr("href");!p&&d.last().attr("xlink:href")&&(p=d.last().attr("xlink:href")),u=p.indexOf("#icon-dropdown")>-1}u||(c=$.createIconElement({icon:"dropdown",classes:["icon-dropdown"]}),this.element.append(c)),c.hasClass("icon-dropdown")||c.addClass("icon-dropdown"),this.settings.replaceText&&this.element.on("selected.content",(function(t,e){$(this).find("span").text(e.text())})),this.settings.hideMenuArrow&&c.remove()}if(Ct.indexOf(this.settings.type)>-1&&(this.element.on("click.favorite",(function(){t.toggle()})),this.pressed=this.pressed),this.element.hasClass("btn-actions")&&!this.element.parents(".field").length&&!this.element.parents(".toolbar").length&&!this.tooltipAPI){if(!this.element.attr("title")){var g=B.translate("More");return void this.element.attr("title",g).tooltip({content:g})}this.settings.title&&""!==this.element.attr("title")||this.tooltipAPI.destroy()}e[this.settings.ripple?"remove":"add"]("no-ripple"),this.settings.ripple&&this.element.on("touchstart.button click.button",(function(e){t.createRipple(e)})),this.element.data("hidefocus")||this.element.hideFocus()},renderAttributes:function(){Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes)},getSettingsFromElement:function(){var t,e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={},s=this.element.parents(".buttonset, .modal-buttonset");s.length&&(t=s.data("buttonset"))&&(this.buttonsetAPI=t);var a=this.element[0].classList||"";if(wt.forEach((function(t){"default"!==t&&a.contains(t)&&(n.style=t)})),this.buttonsetAPI&&"modal"===this.buttonsetAPI.settings.style){var r={"btn-modal":"btn","btn-modal-primary":"btn-primary","btn-modal-secondary":"btn-secondary"};Object.keys(r).forEach((function(t){a.contains(t)&&(n.style=r[t])}))}xt.forEach((function(t){"default"!==t&&a.contains(t)&&(n.type=t)})),this.settings.disabled||(n.disabled=this.disabled);var o=this.element[0].getAttribute("aria-pressed");void 0!==o&&(n.pressed=!0===o,"icon-favorite"===n.type&&(n.toggleOnIcon="icon-star-filled",n.toggleOffIcon="icon-star-outlined"));var l=this.element[0].id;"string"==typeof l&&l.length&&(n.id=l);var c=this.element[0].title;"string"==typeof c&&c.length&&(n.title=c),a.contains("no-ripple")&&(n.ripple=!1);var d=this.element[0].querySelector("span.audible");return d&&(n.audible=!0),i||Object.keys(n).forEach((function(t){e.settings[t]=n[t]})),n},toData:function(t){var e=this,i={};return Object.keys(this.settings).forEach((function(t){i[t]=e.settings[t]})),i.pressed=this.pressed,t&&(i.element=this.element[0]),i},get pressed(){return-1!==Ct.indexOf(this.settings.type)&&"true"===this.element[0].getAttribute("aria-pressed")},set pressed(t){var e,i=!0===t,n=this.settings.toggleOffIcon&&this.settings.toggleOnIcon,s=$(this.icon);switch(this.element[0].setAttributeNS(null,"aria-pressed","x"),this.element[0].setAttributeNS(null,"aria-pressed",i),this.element[0].classList[i?"add":"remove"]("is-pressed"),this.settings.type){case"icon-favorite":e=i?"icon-star-filled":"icon-star-outlined";break;case"btn-toggle":n&&(e=i?this.settings.toggleOnIcon:this.settings.toggleOffIcon)}0!==s.length&&"string"==typeof e&&(s.changeIcon(e),C.fixSVGIcons(s))},toggle:function(){this.pressed=!this.pressed},isDisabled:function(t){return(t=t instanceof jQuery?t:$(t)).is("[disabled]")&&!t.is('[disabled="false"]')},teardown:function(){this.element.off(["click.".concat("button"),"touchstart.".concat("button")].join(" "));var t=this.tooltipAPI;this.element.hasClass("btn-actions")&&t&&t.destroy();var e=this.element.data("hidefocus");return e&&e.destroy(),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.render(),this},destroy:function(){this.teardown(),this.buttonsetAPI&&delete this.buttonsetAPI,$.removeData(this.element[0],"button")}},$.fn.button=function(t){return this.each((function(){var e=$.data(this,"button");e?e.updated(t):e=$.data(this,"button",new Tt(this,t))}))};var St={buttons:[],detectHTMLButtons:!1,style:"default"};function At(t,e){if(!(t instanceof HTMLElement))throw new Error("ButtonSet component needs an HTMLElement as a base element.");this.element=t,this.settings=C.mergeSettings(t,e,St),this.init()}At.prototype={set disabled(t){t=!0===t,this.element.classList[t?"add":"remove"]("is-disabled"),this.buttons&&this.buttons.forEach((function(e){e.disabled=t}))},init:function(){this.build(),this.render()},build:function(t){var e=this;this.buttons&&t||this.reset(),Array.isArray(this.settings.buttons)&&this.settings.buttons.length?this.settings.buttons.forEach((function(t){e.add(t)})):this.detectHTMLButtons()},render:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.element.classList,n={default:"buttonset",modal:"modal-buttonset"};Object.keys(n).forEach((function(e){var s=n[e];t.settings.style!==e&&i.remove(s)})),i.add(n[this.settings.style]),e||this.buttons.forEach((function(t){t.render()}))},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||"object"!==i(t))throw new Error("Settings object is required to add a new button to the ButtonSet");var n=t.element,s=n instanceof HTMLElement;s||(n=document.createElement("button"));var a=h.stripHTML(t.id);"string"==typeof a&&a.length>0&&(n.id=a);var r=$(n);!e&&s||$(this.element).append(r),t.buttonsetAPI=this,r.button(t);var o=r.data("button");this.buttons.push(o)},remove:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i)throw new Error("No Button API, HTMLElement, or ID string provided");if(void 0===i||"function"!=typeof i.destroy){if(i instanceof HTMLElement?t=i:"string"==typeof i&&(t=$(this.element).find("#".concat(i.replace("#","")))),e=$(t),void 0===(i=$(t).data("button"))||"function"!=typeof i.destroy)throw new Error("The provided Button API did not match a button existing in this ButtonSet.")}else e=i.element;i.destroy(),n&&e.remove(),this.buttons=this.buttons.filter((function(t){return t!==i}))},removeAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.buttons.forEach((function(i){t.remove(i,e)}))},reset:function(){this.buttons=[]},at:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.buttons[t]},detectHTMLButtons:function(){var t=this;this.settings.detectHTMLButtons&&(this.reset(),(C.getArrayFromList(this.element.querySelectorAll("button"))||[]).forEach((function(e){var i=$(e).data("button");i||($(e).button(),i=$(e).data("button"));var n=i.getSettingsFromElement(!0);n.element=e,t.add(n)})))},toData:function(){var t=C.extend({},this.settings);return this.buttons.forEach((function(e){t.buttons.push(e.toData())})),t},teardown:function(t){return this.removeAll(t),this.reset(),this},updated:function(t){var e=this.settings.buttons;return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),Array.isArray(t.buttons)&&e!==t.buttons?(this.settings.buttons=t.buttons,this.teardown(!0),this.init()):(this.render(!0),this.buttons.forEach((function(t){t.updated()}))),this},destroy:function(){this.teardown(!0),$.removeData(this.element,"buttonset")}},$.fn.buttonset=function(t){return this.each((function(){var e=$.data(this,"buttonset");e?e.updated(t):e=$.data(this,"buttonset",new At(this,t))}))};var $t={};function Et(t,e){return this.init(t,e)}Et.prototype={init:function(t,e){if(!this.element&&t instanceof HTMLElement&&(this.element=t),"object"===i(e)){var n=this.settings||$t;this.settings=C.mergeSettings(this.element,e,n)}return this.element.classList.add("hyperlink"),this.focusBehavior||(this.focusBehavior=new v(this.element)),this},handleEvents:function(){return this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return this}},$.fn.hyperlink=function(t){return this.each((function(){var e=$.data(this,"hyperlink");e?e.updated(t):(e=$.data(this,"hyperlink",new Et(this,t))).destroy=function(){this.teardown(),$.removeData(this,"hyperlink")}}))};var Dt={EMPTY_STRING:"",PLACEHOLDER_CHAR:"_",CARET_TRAP:"[]",NON_DIGITS_REGEX:/[^\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/g,DIGITS_REGEX:/[\u0660-\u06690-9\u0966-\u096F\u2E80-\u2FD5\u3190-\u319f\u3400-\u4DBF\u4E00-\u9FCC\uF900-\uFAAD]/,ALPHAS_REGEX:/[\u00C0-\u017Fa-zA-Z]/,ANY_REGEX:/[\u00C0-\u017Fa-zA-Z0-9]/,DEFAULT_API_OPTIONS:{locale:"en-US",pattern:void 0,pipe:void 0}};Dt.LEGACY_DEFS={"#":Dt.DIGITS_REGEX,0:Dt.DIGITS_REGEX,x:Dt.ALPHAS_REGEX,"*":Dt.ANY_REGEX,"?":/./,"~":/[-0-9]/,a:/[APap]/,m:/[Mm]/},Dt.DEFAULT_CONFORM_OPTIONS={caretTrapIndexes:[],guide:!0,previousMaskResult:Dt.EMPTY_STRING,placeholderChar:Dt.PLACEHOLDER_CHAR,placeholder:Dt.EMPTY_STRING,selection:{start:0},keepCharacterPositions:!0};var It={prefix:Dt.EMPTY_STRING,suffix:Dt.EMPTY_STRING,allowThousandsSeparator:!0,symbols:{currency:"$",decimal:".",negative:"-",thousands:","},allowDecimal:!0,decimalLimit:2,locale:"",requireDecimal:!1,allowNegative:!1,allowLeadingZeros:!1,integerLimit:null};function Lt(t){return t.split(Dt.EMPTY_STRING).map((function(t){return Dt.DIGITS_REGEX.test(t)?Dt.DIGITS_REGEX:t}))}function Pt(t,e){var i={any:Dt.ANY_REGEX,digits:Dt.DIGITS_REGEX,alphas:Dt.ALPHAS_REGEX};i[e]||(e="any");for(var n=t.toString().length,s=[];n>0;)s.push(i[e]),n-=1;return s}Dt.numberMask=function(t,e){(e=C.mergeSettings(void 0,e,It)).locale&&e.locale.length||(e.locale=B.currentLocale.name),e.allowLeadingZeroes&&(F("allowLeadingZeros","allowLeadingZeroes","Number Mask"),e.allowLeadingZeros=e.allowLeadingZeroes,e.allowLeadingZeroes=void 0);var i=e.prefix,n=e.suffix,s=e.symbols.decimal,a=e.symbols.thousands,r=i&&i.length||0,o=n&&n.length||0,l=a&&a.length||0;function c(t){"string"!=typeof t&&(t=Dt.EMPTY_STRING);var c=t.length;if(t===Dt.EMPTY_STRING||t[0]===i[0]&&1===c)return i.split(Dt.EMPTY_STRING).concat([Dt.DIGITS_REGEX]).concat(n.split(Dt.EMPTY_STRING));if(t===s&&e.allowDecimal)return i.split(Dt.EMPTY_STRING).concat(["0",s,Dt.DIGITS_REGEX]).concat(n.split(Dt.EMPTY_STRING));var d,h,u,p=t.lastIndexOf(s),g=-1!==p,f=t[0]===e.symbols.negative&&e.allowNegative;if(t.slice(-1*o)===n&&(t=t.slice(0,-1*o)),g?(d=t.slice(t.slice(0,r)===i?r:0,p),h=Lt((h=t.slice(p+1,c)).replace(Dt.NON_DIGITS_REGEX,Dt.EMPTY_STRING))):d=t.slice(0,r)===i?t.slice(r):t,e.integerLimit&&"number"==typeof e.integerLimit){var m="."===a?"[.]":"".concat(a),v=(d.match(new RegExp(m,"g"))||[]).length;d=d.slice(0,e.integerLimit+(f?1:0)+v*l)}d=d.replace(Dt.NON_DIGITS_REGEX,Dt.EMPTY_STRING),e.allowLeadingZeros||(d=d.replace(/^0+(0$|[^0])/,"$1"));var b={maximumFractionDigits:e.decimalLimit,style:"decimal",useGrouping:!0};return u=Lt(d=e.allowThousandsSeparator?function(t,e,i,n){if(""===t||isNaN(t))return t;var s=B.toLocaleString(Number(t),i.locale,n,e);if(i&&i.allowLeadingZeros&&0===t.indexOf("0")){var a="".concat(t).match(/^0*/)[0].length;for(0===s.indexOf("0")&&(s=s.substring(1));a>0;)a-=1,s="0".concat(s)}return s}(d,a,e,b):d),(g&&e.allowDecimal||!0===e.requireDecimal)&&(t[p-1]!==s&&u.push(Dt.CARET_TRAP),u.push(s,Dt.CARET_TRAP),h&&("number"==typeof e.decimalLimit&&(h=h.slice(0,e.decimalLimit)),u=u.concat(h)),!0===e.requireDecimal&&t[p-1]===s&&u.push(Dt.DIGITS_REGEX)),r>0&&(u=i.split(Dt.EMPTY_STRING).concat(u)),f&&(u.length===r&&u.push(Dt.DIGITS_REGEX),u=[/-/].concat(u)),n.length>0&&(u=u.concat(n.split(Dt.EMPTY_STRING))),{mask:u}}return c.instanceOf="createNumberMask",c(t)},Dt.rangeNumberMask=function(t,e){(e=e||{}).delimeter=e.delimeter||"-";var i=B.currentLocale.data.numbers.minusSign,n=function(t){return new RegExp("".concat(t),"g")},s=function(t,e){return(t.match(e)||[]).length},a=t.split(")".concat(e.delimeter,"(")),r=function(t){var a=t.substr(-1),r=s(t,/[\u0028]/g),o=(s(t,/[\u0029]/g),[]);if(1===r){var l=e.allowNegative&&t.substr(1,1)===i;(o=Dt.numberMask(l?t.substr(1):t,e)).splice(0,0,/[\u0028]/g),")"===a?o.push(/[\u0029]/g):a===e.delimeter&&(o.push(/[\u0029]/g),o.push(n("[".concat(e.delimeter,"]"))))}return o};"number"==typeof e.integerLimit&&(e.integerLimit*=2,e.integerLimit+=e.delimeter.length+4);var o,l=[],d=[];if("("===t.substr(0,1)&&a.length)if(2===s(t,/[\u0028]/g)&&2===s(t,/[\u0029]/g)&&1===s(t,n("\\u0029".concat(e.delimeter,"\\u0028")))&&a[1].indexOf(")")!==a[1].length-1){var h=a[1].substr(0,a[1].indexOf(")")+1);l=r("".concat(a[0],")")),d=[n("[".concat(e.delimeter,"]"))].concat(c(r("(".concat(h))))}else(l=r(2===a.length?"".concat(a[0],")"):a[0])).length&&2===a.length&&(o="".concat(a[0],")"),/^\u0028.+\u0029$/g.test(o))&&(d=[n("[".concat(e.delimeter,"]"))].concat(c(r("(".concat(a[1])))));return{mask:[].concat(c(l),c(d))}},Dt.adjustRangeNumber=function(t,e,i){if("rangeNumber"===i.settings.process){var n,s,a,r,o,l,c,d=i&&null!==(n=i.settings)&&void 0!==n&&null!==(s=null==n?void 0:n.patternOptions)&&void 0!==s&&(null==s?void 0:s.delimeter)?i.settings.patternOptions.delimeter:"-",h=e&&(null===(a=e.previousMaskResult)||void 0===a||null==a?void 0:a.substr(-1))===d;e&&1===(null===(r=e.selection)||void 0===r||null==r?void 0:r.start)&&1===(null===(o=e.selection)||void 0===o||null==o?void 0:o.end)&&"("!==t?(t="(".concat(t),e.selection.start++,e.selection.end++):e&&1!==(null===(l=e.selection)||void 0===l||null==l?void 0:l.start)&&1!==(null===(c=e.selection)||void 0===c||null==c?void 0:c.end)&&")"===t.substr(-1)&&1===(t.match(/\u0028/g)||[]).length&&!h&&(t="".concat(t).concat(d,"("),e.selection.start+=2,e.selection.end+=2)}return{rawValue:t,opts:e}};var Mt={format:"M/d/yyyy",symbols:{timeSeparator:":",dayPeriodSeparator:" ",dateSeparator:"/"}},Rt={dd:31,d:31,MMM:void 0,MM:12,M:12,yy:99,yyyy:9999,h:12,hh:12,H:24,HH:24,mm:60,ss:60,a:void 0};function Bt(t){return this.configure(t),this}Dt.dateMask=function(t,e){e=C.mergeSettings(void 0,e,Mt);var i=[],n=Dt.DIGITS_REGEX,s=e.format,a=E.removeDuplicates(s.replace(/[dMyHhmsa]+/g,"")),r=function(t){var e=t.split("").map((function(t){return" "===t&&(t="\\s"),"-"===t&&(t="\\-"),t}));return new RegExp("[(".concat(e.join("|"),")]+"))}(a),o=s.match(/(d{1,2}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|a{1}|z{1, 4}|E{1, 4})/g),l=t.split(r),c=Rt;return o.forEach((function(t,e){var a,r=c[t];if("a"===t||"ah"===t){var d="AM",h="PM";if(B.calendar()){d=B.calendar().dayPeriods[0],h=B.calendar().dayPeriods[1];for(var u=[],p=0;p<d.length;p++)d[p]&&h[p]&&d[p].toLowerCase()===h[p].toLowerCase()?u.push(d[p].toLowerCase()):u.push(d[p].toLowerCase()+(h[p]?h[p].toLowerCase():""));for(var g=0;g<u.length;g++)i.push(new RegExp("[".concat(u[g],"]"),"i"))}else i.push(/[aApP]/,/[Mm]/);if("ah"===t){var f=l[e].replace(d,"").replace(h,"");i=i.concat(Pt(f,"digits"))}}else if(r)if(l[e]){var m=l[e].toString(),v=parseInt(m.substr(0,1),10),b=parseInt(c[t].toString().substr(0,1),10);1===t.length&&v>b||"0"!==m&&1===m.length&&v<=b&&void 0!==l[e+1]&&"HH"!==t.toUpperCase()?i.push(n):i=i.concat(Pt(r,"digits"))}else for(a=r.toString().length;a>0;)i.push(n),a-=1;else i=i.concat(Pt(t,"alphas"));var y=o[e+1];if(void 0!==y){var w=t.toString().length,x=s.indexOf(t)+w,C=s.indexOf(y),k=s.substring(x,C).split(Dt.EMPTY_STRING),T=[Dt.CARET_TRAP].concat(k.concat(Dt.CARET_TRAP));i=i.concat(T)}})),{mask:i,literals:a.split(""),literalRegex:r}},Dt.rangeDateMask=function(t,e){var i=t.split(e.delimeter),n=e.delimeter.split(""),s=Dt.dateMask(i[0],e),a=[];return i[1]&&(a=Dt.dateMask(i[1],e)),{mask:s.mask.concat(n.concat(a.mask)),literals:n,literalRegex:a.literalRegex}},Dt.autocorrectedDatePipe=function(t,e){e.dateFormat||(e.dateFormat=B.calendar().dateFormat.short);var i=[],n=e.dateFormat.split(/[^dMy]+/),s={d:31,M:12,yy:99,yyyy:9999},a={d:1,M:1,yy:0,yyyy:1},r=t.conformedValue.split("");n.forEach((function(t){var n=e.dateFormat.indexOf(t),a=parseInt(s[t].toString().substr(0,1),10);parseInt(r[n],10)>a&&(r[n+1]=r[n],r[n]=0,i.push(n))}));var o=new RegExp("[^".concat(t.placeholderChar,"]")),l=t.placeholder.split(o),c=t.conformedValue.split(/\D/g);return!n.some((function(t,e){var i=l[e].length>t.length?l[e].length:t.length,n=c[e]||"",r=parseInt(n,10);return r>s[t]||n.length===i&&r<a[t]}))&&{value:r.join(""),characterIndexes:i}},Bt.prototype={configure:function(t){if(this.settings||(this.settings={}),!t)return this;if(t.locale&&(this.locale=t.locale),t.pattern)if(Array.isArray(t.pattern)||"function"==typeof t.pattern)this.pattern=t.pattern;else if("string"==typeof t.pattern){var e=C.mergeSettings(void 0,t.definitions||{},Dt.LEGACY_DEFS);this.pattern=this._convertPatternFromString(t.pattern,e)}return t.patternOptions&&(this.patternOptions=t.patternOptions),this},process:function(t,e){if("string"!=typeof t)throw new Error("No string provided");var i={},n={originalValue:t,caretPos:e.selection.start,maskResult:!1};if("function"==typeof this.pattern){e.patternOptions||(e.patternOptions={});var s=C.extend({},this.patternOptions,e.patternOptions,{caretPos:e.selection.start,previousMaskResult:e.previousMaskResult});i=this.pattern(t,s),Array.isArray(i)&&(i={mask:i});var a=this._processCaretTraps(i.mask);i.mask=a.maskWithoutCaretTraps,i.caretTrapIndexes=a.indexes,e.caretTrapIndexes=a.indexes}else i={mask:this.pattern};if(!1===i.mask)return n;try{n=this._conformToMask(t,i,e)}catch(t){return n}if(e.patternOptions&&e.patternOptions.delimeter&&n.conformedValue&&n.conformedValue!==t&&(n.caretPos=n.conformedValue.length),"function"==typeof e.pipe){var r={};try{r=e.pipe(n,e)}catch(t){r=!1}!1===r?(n.pipeResult=!1,n.pipedValue=e.previousMaskResult):C.isString(r)?(n.pipeResult=!0,n.pipedValue=r,n.pipedCharIndexes=[]):n=C.extend({},n,{pipeResult:r.result,pipedValue:r.value,pipedCharIndexes:r.characterIndexes})}return n},_conformToMask:function(t,e,i){(i=C.mergeSettings(void 0,i,Dt.DEFAULT_CONFORM_OPTIONS)).placeholder=this._convertMaskToPlaceholder(e.mask,i.placeholderChar);var n=!1,s=!1===i.guide&&void 0!==i.previousMaskResult,a=t.length,r=i.previousMaskResult.length,o=this.pattern.length,l=i.placeholder.length||0,c=i.placeholderChar,d=i.selection.start,h=Dt.EMPTY_STRING,u=a-r,p=u>0,g=d+(p?-u:0),f=g+Math.abs(u);if(!0===i.keepCharacterPositions&&!p){for(var m=Dt.EMPTY_STRING,v=g;v<f;v++)i.placeholder[v]===c&&(m+=c);t=t.slice(0,g)+m+t.slice(g,a)}for(var b=t.split(Dt.EMPTY_STRING).map((function(t,e){return{char:t,isNew:e>=g&&e<f}})),y=a-1;y>=0;y--){var w=b[y];if(w!==i.placeholderChar){var x=y>=g&&r===o;w===i.placeholder[x?y-u:y]&&b.splice(y,1)}}t:for(var k=0;k<l;k++){var T=i.placeholder[k];if(T===c){if(b.length>0)for(;b.length>0;){var S=b.shift(),A=t.slice(k,k+1);if(S.char===c&&!0!==s){h+=c;continue t}if(e.literalRegex&&e.literalRegex.test(S.char)&&A&&(A===S.char||A===c)){if(p&&e.literals.indexOf(t[k-1])>-1){d++;continue t}var $=new RegExp("(".concat(S.char,")"),"g"),E=i.placeholder.match($).length;t.match($).length<=E&&(h+=S.char);for(var D=i.placeholder.slice(k).indexOf(S.char);D>0;)k++,D--;continue t}if(e.mask[k].test(S.char)){if(!0===i.keepCharacterPositions&&!1!==S.isNew&&i.previousMaskResult!==Dt.EMPTY_STRING&&!1!==i.guide&&p){for(var I=b.length,L=null,P=0;P<I;P++){var M=b[P];if(M.char!==c&&!1===M.isNew)break;if(M.char===c){L=P;break}}null!==L?(h+=S.char,b.splice(L,1)):k--}else h+=S.char;continue t}n=!0}!1===s&&(h+=i.placeholder.substr(k,l));break}h+=T}if(s&&!1===p){for(var R=null,B=0;B<h.length;B++)i.placeholder[B]===c&&(R=B);h=null!==R?h.substr(0,R+1):Dt.EMPTY_STRING}return{caretPos:d,caretTrapIndexes:i.caretTrapIndexes,conformedValue:h,charactersRejected:n,placeholder:i.placeholder,placeholderChar:c,maskResult:!0}},_processCaretTraps:function(t){for(var e=[],i=t.indexOf(Dt.CARET_TRAP);-1!==i;)e.push(i),t.splice(i,1),i=t.indexOf(Dt.CARET_TRAP);return{maskWithoutCaretTraps:t,indexes:e}},_convertMaskToPlaceholder:function(t,e){if(Array.isArray(t)||(t=[]),e||(e=Dt.PLACEHOLDER_CHAR),-1!==t.indexOf(e))throw new Error("".concat("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is:").concat(JSON.stringify(e),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(t)));return t.map((function(t){return t instanceof RegExp?e:t})).join(Dt.EMPTY_STRING)},adjustCaretPosition:function(t){if(0===t.caretPos)return 0;function e(t){return t!==e}var i=t.rawValue.length,n=t.previousMaskResult.length,s=t.placeholder?t.placeholder.length:0,a=t.conformedValue?t.conformedValue.length:0,r=i-n,o=r>0;if(r>1&&!o&&!(0===n))return t.caretPos;var l,c,d=0;if(o&&(t.previousMaskResult===t.conformedValue||t.conformedValue===t.placeholder))d=t.caretPos-r;else{var h=t.conformedValue.toLowerCase(),u=t.rawValue.toLowerCase().substr(0,t.caretPos).split(Dt.EMPTY_STRING).filter((function(t){return-1!==h.indexOf(t)}));c=u[u.length-1];var p=t.previousPlaceholder.substr(0,u.length).split(Dt.EMPTY_STRING).filter(e).length,g=t.placeholder.substr(0,u.length).split(Dt.EMPTY_STRING).filter(e).length!==p,f=void 0!==t.previousPlaceholder[u.length-1]&&void 0!==t.placeholder[u.length-2]&&t.previousPlaceholder[u.length-1]!==t.placeholderChar&&t.previousPlaceholder[u.length-1]!==t.placeholder[u.length-1]&&t.previousPlaceholder[u.length-1]===t.placeholder[u.length-2];!o&&(g||f)&&p>0&&t.placeholder.indexOf(c)>-1&&void 0!==t.rawValue[t.caretPos]&&(l=!0,c=t.rawValue[t.caretPos]);var m=[];t.indexesOfPipedChars&&(m=t.indexesOfPipedChars.map((function(t){return h[t]})));for(var v=m.filter((function(t){return t===c})).length,b=u.filter((function(t){return t===c})).length,y=t.placeholder.substr(0,t.placeholder.indexOf(t.placeholderChar)).split(Dt.EMPTY_STRING).filter((function(e,i){return e===c&&t.rawValue[i]!==e})).length+b+v+(l?1:0),w=0,x=0;x<a;x++){if(d=x+1,h[x]===c&&w++,w>=y)break}}if(o)for(var C=d,k=d;k<=s;k++){if(!t.placeholder)return C;if(t.placeholder[k]===t.placeholderChar&&(C=k),t.placeholder[k]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(k)||k===s)return C}else if(l){for(var T=d-1;T>=0;T--)if(t.conformedValue[T]===c||-1!==t.caretTrapIndexes.indexOf(T)||0===T)return T}else for(var S=d;S>=0;S--)if(t.placeholder[S-1]===t.placeholderChar||-1!==t.caretTrapIndexes.indexOf(S)||0===S)return S},_convertPatternFromString:function(t,e){var i,n,s=[],a=Object.keys(e);for(var r=0;r<t.length;r++)s.push((i=t[r],n=void 0,(n=a.indexOf(i))>-1&&(i=e[a[n]]),i));return s}};var Ot={definitions:void 0,guide:!1,keepCharacterPositions:!1,maskAPI:Bt,locale:null,pattern:void 0,patternOptions:{},placeholderChar:"_",pipe:void 0,process:void 0,processOnBlur:!0,processOnInitialize:!0};function Ft(t,e){return this.element=t,this.settings=C.mergeSettings(this.element,e,Ot),this.init()}Ft.prototype={get type(){return this.element.type},init:function(){this.setLocale()},build:function(){this._replaceLegacySettings();if("string"==typeof this.settings.process)switch(this.settings.patternOptions.locale||(this.settings.patternOptions.locale=this.settings.locale),this.settings.process){case"number":this.settings.pattern=Dt.numberMask,this.element.classList.add("is-number-mask");break;case"rangeNumber":this.settings.pattern=Dt.rangeNumberMask,this.element.classList.add("is-range-number-mask");break;case"date":var t=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions||this.settings.patternOptions.format||(this.settings.patternOptions.format=t.settings.dateFormat)),this.settings.pattern=Dt.dateMask;break;case"rangeDate":var e=$(this.element).data("datepicker");$.fn.datepicker&&$(this.element).data("datepicker")&&(this.settings.patternOptions.format=e.settings.dateFormat),this.settings.pattern=Dt.rangeDateMask;break;default:this.element.classList.remove(["is-number-mask"].join(" "))}return this.mask=new this.settings.maskAPI(this.settings),this.state={previousMaskResult:""},this.handleEvents(),this.settings.processOnInitialize&&this.process(),this},setLocale:function(){var t=this;this.locale=B.currentLocale,this.settings.locale?B.getLocale(this.settings.locale).done((function(e){t.locale=B.cultures[e],t.build()})):this.build()},handleEvents:function(){var t=this;return this.changeEventHandler=function(){t.hasTriggeredChangeEvent=!0},this.element.addEventListener("change",this.changeEventHandler),this.focusEventHandler=function(){t.state.previousMaskResult=t.element.value,t.state.initialValue=t.element.value},this.element.addEventListener("focus",this.focusEventHandler),this.inputEventHandler=function(e){return t.hasTriggeredChangeEvent=!1,t.process(e)},this.element.addEventListener("input",this.inputEventHandler),this.blurEventHandler=function(e){if(!0===this.processingJustHappenedOnInput)return e.preventDefault(),!1;if(t.settings.processOnBlur){if(t.element.readOnly)return e.preventDefault(),!1;!t._hasChangedValue()||!t._isEdgeIE()&&t.hasTriggeredChangeEvent||($(t.element).trigger("change"),t.hasTriggeredChangeEvent=!0)}return delete t.state.initialValue,t.process(e)},this.element.addEventListener("blur",this.blurEventHandler),this},process:function(t){if(!this.settings.pattern)return!0;var e=this.mask,i=this.settings.patternOptions||{},n=".";this.locale&&this.locale.data&&this.locale.data.numbers&&this.locale.data.numbers.decimal&&(n=this.locale.data.numbers.decimal),i.symbols&&i.symbols.decimal&&(n=i.symbols.decimal),e.pattern||e.configure({pattern:this.settings.pattern,patternOptions:i});var s=this.element.value,a=!1;if(t&&"input"===t.type&&"insertText"===t.inputType&&(""===s?(s=this.state.previousMaskResult,a=!0):t.data===n&&s.indexOf(n)>-1&&(a=!0)),s===this.state.previousMaskResult)return a&&(this.element.value="",this.element.value="".concat(s)),!1;var r=this.element.selectionStart||0,o=this.element.selectionEnd||0;this._isAndroid()&&""===this.state.previousMaskResult&&r!==o&&(C.safeSetSelection(s.length,s.length),r=s.length,o=s.length),s=this._getSafeRawValue(s);var l={guide:this.settings.guide,keepCharacterPositions:this.settings.keepCharacterPositions,patternOptions:this.settings.patternOptions,placeholderChar:this.settings.placeholderChar,previousMaskResult:this.state.previousMaskResult,selection:{start:r,end:o}};r!==o&&(l.selection.contents=s.substring(r,o)),"function"==typeof this.settings.pipe&&(l.pipe=this.settings.pipe);var c=Dt.adjustRangeNumber(s,l,this);s=c.rawValue,l=c.opts;var d=e.process(s,l);if(!d.maskResult)return d.maskResult;var h=d.pipedValue?d.pipedValue:d.conformedValue;""!==h&&i&&i.suffix&&h.indexOf(i.suffix)<0&&(h+=this.settings.patternOptions.suffix),l.patternOptions&&l.patternOptions.delimeter&&h&&h!==s&&(s=h);var u={previousMaskResult:this.state.previousMaskResult||"",previousPlaceholder:this.state.previousPlaceholder||"",conformedValue:h,placeholder:d.placeholder,rawValue:s,caretPos:d.caretPos,placeholderChar:this.settings.placeholderChar};d.pipedCharIndexes&&(u.indexesOfPipedChars=d.pipedCharIndexes),d.caretTrapIndexes&&(u.caretTrapIndexes=d.caretTrapIndexes),d.caretPos=e.adjustCaretPosition(u);var p=this.state.previousMaskResult;return this.state.previousMaskResult=h,this.state.previousPlaceholder=d.placeholder,"firefox"===m.browser.name?this.element.value!==h&&(this.element.value=h):this.element.value=h,C.safeSetSelection(this.element,d.caretPos),p!==h&&($(this.element).trigger("write.mask",[h]),d.maskResult)},_isAndroid:function(){return"android"===(m&&m.os&&m.os.name?m.os.name:"")},_isEdgeIE:function(){var t=m&&m.browser&&m.browser.name?m.browser.name:"";return"ie"===t||"edge"===t},_hasChangedValue:function(){return!(this.state&&this.state.previousMaskResult||""===this.state.previousMaskResult)||this.state.previousMaskResult!==this.state.initialValue},_getSafeRawValue:function(t){if(C.isString(t))return t;if(C.isNumber(t))return String(t);if(null==t)return"";throw new Error("".concat('The "value" provided to the Masked Input needs to be a string or a number. The value received was:\n\n').concat(JSON.stringify(t)))},_replaceLegacySettings:function(){var t=["group","number","date","time"];this.settings.patternOptions=this.settings.patternOptions||{},this.settings.patternOptions.symbols=this.settings.patternOptions.symbols||{};var e=this.element.getAttribute("data-mask")||!1;"string"==typeof e&&e.length&&(this.settings.pattern=e);var i=this.element.getAttribute("data-mask-mode")||!1;if(i&&t.indexOf(i)>-1&&(this.settings.mode=i),this.settings.mode&&(-1===t.indexOf(this.settings.mode)&&delete this.settings.mode,"group"===this.settings.mode?this.settings.process=void 0:"date"===this.settings.mode?this.settings.process="date":this.settings.process=this.settings.mode,delete this.settings.mode),"number"===this.settings.process){this.settings.thousandsSeparator&&(this.settings.patternOptions.allowThousandsSeparator=this.settings.thousandsSeparator,delete this.settings.thousandsSeparator);var n=this.element.getAttribute("data-thousands")||!1;if(n&&(this.settings.patternOptions.allowThousandsSeparator="true"===n),"string"==typeof this.settings.pattern){var s=-1!==this.settings.pattern.indexOf("-");s&&(this.settings.patternOptions.allowNegative=s,this.settings.patternOptions.symbols.negative="-");var a=B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",r=this.settings.patternOptions&&this.settings.patternOptions.symbols&&this.settings.patternOptions.symbols.thousands?this.settings.patternOptions.symbols.thousands:a,o=-1!==this.settings.pattern.indexOf(r);this.settings.patternOptions.allowThousandsSeparator=o,o&&(this.settings.patternOptions.symbols.thousands=r);var l="string"==typeof this.settings.patternOptions.symbols.decimal?this.settings.patternOptions.symbols.decimal:".",c=this.settings.pattern.split(l);void 0===this.settings.patternOptions.symbols.decimal&&(this.settings.patternOptions.symbols.decimal=B.currentLocale.data.numbers.decimal),this.settings.patternOptions.integerLimit=c[0].replace(/[^#0]/g,"").length,c[1]&&(this.settings.patternOptions.allowDecimal=!0,this.settings.patternOptions.decimalLimit=c[1].toString().replace(/[^#0]/g,"").length,this.settings.patternOptions.symbols.decimal||(this.settings.patternOptions.symbols.decimal=l))}}var d=this.element.getAttribute("data-must-complete")||!1;d&&(this.settings.mustComplete=d),this.element.getAttribute("data-show-currency")&&(this.settings.showSymbol="currency");var h,u,p=this.settings.showSymbol;if(["currency","percent"].indexOf(p)>-1){h="currency"===(u=this.settings.showSymbol)?{char:B.currentLocale.data.currencySign,format:B.currentLocale.data.currencyFormat}:"percent"===u?{char:B.currentLocale.data.numbers.percentSign,format:B.currentLocale.data.numbers.percentFormat}:{};var g,f,m,v="currency"===p?"":h.char,b=new RegExp(v,"g").exec(h.format),y=-1;if(b&&b.length){if(0===(y=h.format.indexOf(b[0])))m="prefix",g=new RegExp("[^".concat(v,"]\\S"),"g"),f=h.format.replace(g,"");else if(y>0){for(m="suffix",g=new RegExp("\\S[^".concat(v,"]"),"g");/\s/.test(h.format.charAt(y-1));)--y;f=h.format.substr(y).replace(g,"")}"currency"===p&&(f=f.replace("",h.char)),this.settings.patternOptions[m]=f}}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown().init()},teardown:function(){return"number"===this.settings.process&&this.element.classList.remove("is-number-mask"),"rangeNumber"===this.settings.process&&this.element.classList.remove("is-range-number-mask"),this.element.removeEventListener("focus",this.focusEventHandler),delete this.focusEventHandler,this.element.removeEventListener("input",this.inputEventHandler),delete this.inputEventHandler,this.blurEventHandler&&(this.element.removeEventListener("blur",this.blurEventHandler),delete this.blurEventHandler),this.changeEventHandler&&(this.element.removeEventListener("change",this.changeEventHandler),delete this.changeEventHandler),this}},$.fn.maskinput=function(t){return this.each((function(){var e=$.data(this,"mask");e?e.updated(t):(e=$.data(this,"mask",new Ft(this,t))).destroy=function(){this.teardown(),$.removeData(this.element,"mask")}}))},$.fn.maskedinput=$.fn.maskinput,$.fn.mask=$.fn.maskinput;var Nt={menu:null,trigger:"click",autoFocus:!0,mouseFocus:!0,attachToBody:!0,removeOnDestroy:!1,beforeOpen:null,ariaListbox:!1,eventObj:void 0,returnFocus:!0,showArrow:null,triggerSelect:!0,placementOpts:new gt({containerOffsetX:10,containerOffsetY:"ios"===m.os.name?25:15,strategies:["flip","shrink"]}),offset:{x:0,y:0},predefined:$(),duplicateMenu:null,stretchToWidestMenuItem:!1,attributes:null};function zt(t,e){this.settings=C.mergeSettings(t,e,Nt),this.element=$(t),this.init()}zt.prototype={init:function(){this.isFirefox="firefox"===m.browser.name,this.setup(),this.addMarkup(),this.handleEvents(),this.iconFilteringSetup(),"immediate"===this.settings.trigger&&this.open(this.settings.eventObj),this.menu.find(".submenu").length&&this.menu.addClass("has-submenu")},isRTL:function(){return m.rtl},get isOpen(){return u.hasClass(this.element[0],"is-open")},get isFocused(){var t=document.activeElement,e=this.element.is(t),i=this.menu&&this.menu.length&&this.menu[0].contains(t);return!(!e&&!i)},setup:function(){this.element.attr("data-popupmenu")&&!this.settings.menu&&(this.settings.menu=this.element.attr("data-popupmenu").replace(/#/g,"")),this.settings.menuId&&(this.settings.menu=this.settings.menuId,this.settings.menuId=void 0),this.id||(this.id=(parseInt($(".popupmenu-wrapper").length,10)+1).toString()),this.predefinedItems=$().add(this.settings.predefined)},setMenuOrgContainment:function(t){if(t&&t.length){var e=t.parent();e.is("body")||(this.menuOrgContainment={parent:e,index:e.children().index(t)})}},insertAtContainment:function(t,e){var i=function(t){return t&&t.length};if(e=e||this.menuOrgContainment||{},i(t)&&i(e.parent)){var n=e.index,s=e.parent,a=s.children().length;n<0&&(n=Math.max(0,a+1+n)),n<a?s.children().eq(n).before(t):s.append(t)}},addMarkup:function(){var t,e,n;if(!this.menu||!this.menu.length)switch(i(this.settings.menu)){case"string":t=this.settings.menu,this.menu=$("#".concat(this.settings.menu)),this.settings.duplicateMenu&&this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.menu.data("trigger",this.element),n=this.menu.data("trigger")[0].id,e=this.menu.clone(),this.setMenuOrgContainment(e),e.detach().appendTo("body"),e.attr("data-trigger",n),this.menu.attr("data-trigger",n));break;case"object":null===this.settings.menu?this.menu=this.element.next(".popupmenu, .popupmenu-wrapper"):this.menu=$(this.settings.menu),(t=this.menu.attr("id"))&&""!==t||(this.menu.attr("id","popupmenu-".concat(this.id)),t=this.menu.attr("id")),n=this.element.attr("id")}if(this.menu.is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu,this.menu=this.wrapper.children(".popupmenu").first()),this.menu.parent().is(".popupmenu-wrapper")&&(this.preExistingWrapper=!0,this.wrapper=this.menu.parent()),0!==this.menu.length){this.settings.attributes&&(C.addAttributes(this.element,this,this.settings.attributes,"trigger"),C.addAttributes(this.menu,this,this.settings.attributes,"menu")),this.settings.attachToBody&&this.menu.parent().not("body").length>0&&(this.originalParent=this.menu.prev(),this.setMenuOrgContainment(this.menu),this.menu.detach().appendTo("body"),this.settings.duplicateMenu&&this.menu.attr("id","".concat(this.settings.menu,"-original"))),this.menu.is(".popupmenu")||this.menu.addClass("popupmenu").attr("role",this.settings.ariaListbox?"listbox":"menu").attr("aria-labelledby",n),this.menu.data("trigger",this.element),this.wrapper=this.menu.parent(".popupmenu-wrapper"),this.wrapper.length||(this.menu.wrap('<div class="popupmenu-wrapper"></div>'),this.wrapper=this.menu.parent(".popupmenu-wrapper")),this.wrapper.find("svg").each((function(){$(this).data("icon")||$(this).icon()})),0===this.wrapper.parents().filter((function(){var t=this?this.style.overflow:null;return"auto"!==t&&"visible"!==t&&"scroll"!==t})).length&&(this.wrapper[0].style.position="absolute"),this.menu.find(".popupmenu").each((function(t,e){var i=$(e);i.parent().hasClass("wrapper")||i.wrap('<div class="wrapper"></div>')}));var s=!1,a=this.element.parent().attr("class");if(!0===this.settings.showArrow)s=!1;else if(null===this.settings.showArrow){var r=this.element.closest(".toolbar"),o=this.element.closest(".masthead");(this.element.hasClass("btn-menu")||this.element.hasClass("btn-actions")||this.element.hasClass("btn-icon")&&"#icon-more"===this.element.find("use").attr("href")||r.length>0&&!r.is(".formatter-toolbar")||o.length>0||"colorpicker-menu"===this.settings.menu||this.element.is(".searchfield-category-button")||a&&a.indexOf("more")>=0||a&&a.indexOf("btn-group")>=0)&&(s=!0)}if(s){var l=$('<div class="arrow"></div>'),c=this.menu.parent(".popupmenu-wrapper");0===c.find(".arrow").length&&c.addClass("bottom").append(l)}var d=this.element.closest(".field-short").length>0;this.menu[d?"addClass":"removeClass"]("popupmenu-short"),void 0!==a&&this.element.closest(".masthead").not(".search-results .masthead").length>0&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.element.attr("aria-haspopup",!0),this.element.attr("aria-controls",t),this.markupItems(),this.menu.is(".hidden")&&this.menu.removeClass("hidden"),this.settings.stretchToWidestMenuItem&&this.element.width(parseInt(this.getMaxMenuWidth(),10))}},renderItem:function(t){if(void 0===t)return"";var e=this;function i(t){var i="";return t.forEach((function(t){i+=e.renderItem(t)})),i}if(Array.isArray(t)){var n=i(t),s='<ul class="popupmenu">'.concat(n,"</ul>");return E.stripWhitespace(s)}var a="",r="";if(void 0!==t.separator)return t.heading&&(a+='<li class="heading">'.concat(t.heading,"</li>")),"single"===t.nextSectionSelect?r=" single-selectable-section":"multiple"===t.nextSectionSelect&&(r=" multi-selectable-section"),E.stripWhitespace('\n        <li class="separator'.concat(r,'"></li>\n        ').concat(a,"\n      "));if(t.menu){var o="";t.menuId&&(o=' id="'.concat(t.menuId,'"'));var l="";t.hasIcons&&(l+=" has-icons");var c="";return Array.isArray(t.menu)&&(c=i(t.menu)),t.noMenuWrap?c:E.stripWhitespace("\n        <ul".concat(o,' class="popupmenu').concat(l,'">\n          ').concat(c,"\n        </ul>\n      "))}var d="",h="",u="",p="",g="",f="",m="",v="";return t.disabled&&(d+=" is-disabled"),!1===t.visible&&(h+=" hidden"),t.id&&(p=' id="'.concat(t.id,'"')),"single"===t.selectable&&(g+=" is-selectable"),"multiple"===t.selectable&&(g+=" is-multiselectable"),t.icon&&(u='<svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-'.concat(t.icon,'"></use>\n      </svg>')),Array.isArray(t.submenu)&&(f+=" submenu",m+=this.renderItem(t.submenu),v+='<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-dropdown"></use>\n      </svg>'),E.stripWhitespace('<li class="popupmenu-item'.concat(d).concat(h).concat(g).concat(f,'">\n      <a').concat(p,' href="#">').concat(u,"<span>").concat(t.text,"</span>\n        ").concat(v,"\n      </a>\n      ").concat(m,"\n    </li>"))},toData:function(t){var e={},i=[],n=this;(t=t||{}).contextElement||(t.contextElement=this.menu),t.contextElement instanceof HTMLElement&&(t.contextElement=$(t.contextElement)),t.contextElement.is(".popupmenu-wrapper")&&(t.contextElement=t.contextElement.children("ul"));var s=t.contextElement.attr("id");s&&s.length&&(e.menuId="".concat(s));var a,r,o=t.contextElement.hasClass("has-icons");return e.hasIcons=o,t.contextElement.children("li").each((function(t,s){var o=function t(i){var s=$(i),o={};if(!s.hasClass("heading")){if(s.hasClass("separator")){o.separator=!0,s.hasClass("single-selectable-section")&&(a=!0,o.nextSectionSelect="single"),s.hasClass("multi-selectable-section")&&(r=!0,o.nextSectionSelect="multiple");var l=s.next();return l.hasClass("heading")&&(o.heading=l.text().trim()),o}var c=s.children("a"),d=c.children(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),h=c.attr("id");o.text=c.text().trim(),o.disabled=s.hasClass("is-disabled"),o.visible=!s.hasClass("hidden"),"string"==typeof h&&h.length&&(o.id=h),d.length&&d[0]instanceof SVGElement&&(o.icon=d[0].querySelector("use").getAttribute("href").replace("#icon-",""));var u=!a&&!r,p=!n.hasSelectableSeparator(s);o.selectable&&u&&p&&("single"===o.selectable?a=!0:"multiple"===o.selectable&&(r=!0),e.selectable=o.selectable);var g=s.find(".popupmenu");return g.length&&(o.submenu=[],g.first().children().each((function(e,i){var n=t(i);n&&o.submenu.push(n)}))),o}}(s);o&&i.push(o)})),t.noMenuWrap?e=i:e.menu=i,e},markupItems:function(t){var e=this;t?t instanceof HTMLElement&&(t=$(t)):t=this.menu;var i=t.find("li:not(.heading):not(.separator)"),n=!1;t[0].setAttribute("role","menu"),t[0].setAttribute("aria-labelledby",this.element.attr("id")),i.each((function(t,i){var s=$(i).children("a")[0],a=$(s),r=$(i),o=a.children("span")[0],l=r.children("ul")[0],c=r.find(".icon:not(.close):not(.icon-dropdown):not(.image-user-status .icon)"),d=r.children(".wrapper")[0];if(i.setAttribute("role","none"),s){if(s.setAttribute("role",e.settings.ariaListbox?"option":"menuitem"),s.setAttribute("tabindex","-1"),e.settings.attributes&&C.addAttributes(a,e,e.settings.attributes,"option-".concat(function(t){var e=$(t),i=e.parents("li"),n=[];return e.add(i).each((function(t,e){n.push($(e).parent().children("li:not(.heading):not(.separator)").index(e))})),n.join("-")}(i))),r.hasClass("is-disabled")||"true"===s.getAttribute("disabled")||"disabled"===s.getAttribute("disabled")?(r.addClass("is-disabled"),s.setAttribute("aria-disabled","true"),s.setAttribute("disabled",!0)):(r.removeClass("is-disabled"),a.removeAttr("aria-disabled"),s.removeAttribute("disabled")),l instanceof HTMLElement&&l.classList.add("popupmenu"),d instanceof HTMLElement&&(i.className+="".concat(u.hasAnyClass(i)?" ":"","submenu"),(l=$(d).children("ul")[0])instanceof HTMLElement&&l.classList.add("popupmenu")),u.hasClass(i,"submenu")&&(o||(s.innerHTML="<span>".concat(s.innerHTML,"</span>"),o=a.children("span")[0]),0===a.find("svg.arrow").length&&a.append($.createIconElement({classes:["arrow","icon-dropdown"],icon:"dropdown"})),s.setAttribute("aria-haspopup","true")),u.hasClass(i,"is-checked")&&(s.setAttribute("role","menuitemcheckbox"),s.setAttribute("aria-checked",!0),!e.hasSelectableSeparator(i))){var h="is-selectable";e.menu.is(".is-multiselectable")&&(h="is-multiselectable"),e.getAdjacentSelectables(i).addClass(h)}u.hasClass(i,"is-not-checked")&&(i.className=i.className.replace("is-not-checked",""),s.setAttribute("role","menuitemcheckbox"),s.removeAttribute("aria-checked"))}c&&c.length>0&&(n=!0)})),n?t.addClass("has-icons"):t.removeClass("has-icons")},refreshMenuItem:function(t,e,i){if(t&&t instanceof HTMLElement&&e&&$(this.menu)[0].contains(t)){var n,s=t.querySelector("a"),a=t.querySelector(".icon:not(.close):not(.icon-dropdown)");if(e.text&&s.innerText.trim()!==e.text&&(s.innerText="".concat(e.text)),!0===e.disabled?-1===t.className.indexOf("hidden")&&t.classList.add("is-disabled"):t.className.indexOf("is-disabled")>-1&&t.classList.remove("is-disabled"),!0===e.visible?t.className.indexOf("hidden")>-1&&t.classList.remove("hidden"):-1===t.className.indexOf("hidden")&&t.classList.add("visible"),e.icon?a&&((n=a.querySelector("use"))&&n.getAttribute("href").replace("#icon-","")!==e.icon&&a.remove(),n.setAttribute("href","#icon-".concat(e.icon))):a&&a.remove(),e.submenu){t.classList.add("submenu");var r=t.querySelector(".popupmenu");if(r)for(var o=r.children,l=0;l<e.submenu.length;l++)e.submenu[l].isSubmenuItem=!0,this.refreshMenuItem(o.item(l),e.submenu[l],i)}"function"==typeof i&&i.apply(this,[t,e])}},handleEvents:function(){var t=this,e="rightClick"!==this.settings.trigger;function i(t){return t.stopPropagation(),t.preventDefault(),!1}function n(e,i){if(t.keydownThenClick)delete t.keydownThenClick;else{var n=!0===i?0:2;if(!(e.button>n||t.element.is(":disabled"))){["android","ios"].indexOf(m.os.name)>-1&&(t.holdingDownClick=!0),function(e){if(t.element.hasClass("is-disabled"))return e.stopPropagation(),void e.preventDefault();var i="rightClick"===t.settings.trigger;if(e.stopPropagation(),e.preventDefault(),i&&t.menu.hasClass("is-open"))return t.close(),void t.open(e);t.menu.add(t.element).hasClass("is-open")?t.close():t.open(e)}(e)}}}if(!("immediate"===this.settings.trigger)&&(e&&this.element.on("click.popupmenu",(function(t){n(t,!0)})),!e)){this.menu.parent().on("contextmenu.popupmenu",i);-1===["android","ios"].indexOf(m.os.name)?this.element.on("contextmenu.popupmenu",(function(t){i(t),n(t)})):this.element.on("touchstart.popupmenu",(function(t){"ios"===m.os.name&&"INPUT"!==t.target.tagName&&t.preventDefault(),$(t.target).addClass("longpress-target")})).on("touchend.popupmenu",(function(t){$(t.target).removeClass("longpress-target")})).on("longpress.popupmenu",(function(e,i){t.openedWithTouch=!0,n(i)}))}this.menu.off("dragstart.popupmenu").on("dragstart.popupmenu","a",(function(){return!1})),this.element.not(".autocomplete, ul").on("keydown.popupmenu",(function(e){switch(e.which){case 13:case 32:"click"===t.settings.trigger&&(t.keydownThenClick=!0,t.open(e));break;case 121:e.shiftKey&&t.open(e)}})).on("updated.popupmenu",(function(e,i){e.stopPropagation(),t.updated(i)}))},handleKeys:function(){var t=this;this.menu.on("click.popupmenu","li",(function(e){var i=$(this).find("a");t.handleItemClick(e,i)}));var e="li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled):not(.is-placeholder)";this.settings.mouseFocus&&this.menu.on("mouseenter.popupmenu","li",(function(){t.highlight($(this).children("a"))})),setTimeout((function(){$(document).off("keydown.popupmenu.".concat(this.id)).on("keydown.popupmenu.".concat(this.id),(function(i){var n=i.which;if(27===n)return i.stopPropagation(),i.stopImmediatePropagation(),t.close(!0),!1;if(9===n&&(i.stopPropagation(),t.close(!0)),32===n){i.stopPropagation();var s=$(i.target),a=s.find("input:checkbox");if(a.length)return a.trigger("click"),!0;var r=$();if(s.is(".tab")||s.parent().is(".tab")||s.is(".tab-more"))return i.preventDefault(),!0;if(s.is("li")&&(r=s.children("a")),s.is("a")&&(r=s),r.length)return r.trigger("click"),!0}var o=t.menu.find(":focus");o[0]||(o=$(t.menu[0].querySelector(".is-focused a")));var l,c,d,h,u="colorpicker-menu"===t.settings.menu,p=t.element.is(".autocomplete");37!==n||p||(i.stopPropagation(),i.preventDefault(),o.closest(".popupmenu")[0]!==t.menu[0]&&o.closest(".popupmenu").length>0&&(o.closest(".popupmenu").removeClass("is-open").parent().parent().removeClass("is-submenu-open"),t.highlight(o.closest(".popupmenu").parent().prev("a")))),l=function(t){var i;return t.parent().prevAll(e).each((function(){if(!i){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(i=e)}})),i||h(t)},h=function(t){var i=t.parent().prevAll(e).last(),n=i.children("a");return i.is(".is-disabled")||!0===n.prop("disabled")?c(n):n},c=function(t){var i;return t.parent().nextAll(e).each((function(){if(!i){var t=$(this),e=t.children("a");t.is(".is-disabled")||!0===e.prop("disabled")||(i=e)}})),i||h(t)},d=function(t){var i=t.parent().nextAll(e).last(),n=i.children("a");return i.is(".is-disabled")||!0===n.prop("disabled")?l(n):n};for(var g=0,f=t.menu.children(e),m=f.length,v=0,b=0;b<m;b++){var y=f[b];if(0===v&&(v=y.offsetTop),y.offsetTop!==v)break;g++}if(!u&&38===n||u&&n===(B.isRTL()?39:37)){if(i.stopPropagation(),i.preventDefault(),0===o.parent().prevAll(e).length)return void(0===o.length?t.highlight(t.menu.children(e).last().find("a")):t.highlight(d(o)));t.highlight(l(o))}if(u&&38===n&&(i.stopPropagation(),i.preventDefault(),o.parent().prevAll(e).length>0&&t.highlight($(o.parent().prevAll(e)[g-1]).find("a"))),39!==n||p||(i.stopPropagation(),i.preventDefault(),o.parent().hasClass("submenu")&&(t.openSubmenu(o.parent()),t.highlight(o.parent().find(".popupmenu a:first")))),!u&&40===n||u&&n===(B.isRTL()?37:39)&&!p){if(i.stopPropagation(),i.preventDefault(),0===o.parent().nextAll(e).length)return void(0===o.length?t.highlight(t.menu.children(e).first().find("a")):t.highlight(h(o)));t.highlight(c(o))}if(u&&40===n&&(i.stopPropagation(),i.preventDefault(),o.parent().nextAll(e).length>0&&t.highlight($(o.parent().nextAll(e)[g-1]).find("a"))),t.isFirefox&&p&&!/37|39|38|40/.test(n)){t.element.triggerHandler(i),t.element[0].focus();var w=t.element[0].value;t.element[0].value="",t.element[0].value=w}}))}),1)},handleItemClick:function(t,e){var i=e.attr("href"),n=[e];return!(!t&&!e||!e.length)&&(e.parent().is(".submenu, .hidden, .is-disabled")||e[0].disabled?(t.preventDefault(),!1):!(e.find("input[checkbox]").length>0)&&(this.element.hasClass("btn-filter")&&(this.iconFilteringUpdate(e),t.preventDefault()),this.isSelectable(e.parent())&&(n=this.select(e)),e.parent().hasClass("is-toggleable")&&e.parent().toggleClass("is-checked"),t&&this.settings.triggerSelect&&(1===n.length&&n.push(void 0),n.push(!0),this.element.triggerHandler("selected",n)),!(!this.menu.hasClass("is-multiselectable")&&!this.isInMultiselectSection(e))||(this.close(),!!this.element.is(".autocomplete")||(i&&"#"!==i.charAt(0)?("_blank"===e.attr("target")?window.open(i,"_blank"):window.location.href=i,!0):(t&&(t.preventDefault(),t.stopPropagation()),!0)))))},iconFilteringSetup:function(t){if(this.element.hasClass("btn-filter")){var e=this.element.find("svg.icon-dropdown"),i=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),n=i.find("span").text();1===e.length&&this.element.append($.createIconElement({classes:"icon-dropdown",icon:"dropdown"})),e.first().changeIcon(i.find("svg").getIconName()),this.element.find(".audible").text(n)}},iconFilteringUpdate:function(t){if(this.element.hasClass("btn-filter")){var e=t||$("li.is-checked a",this.menu)||$("li:first a",this.menu),i=e.find("span").text();this.element.find(".audible").text(i),this.element.find("svg:not(.ripple-effect):first").changeIcon(e.find("svg").getIconName())}},getPositionFromEvent:function(t){var e=0,i=0;if(t||(t=window.event),!t)return{};if(t.changedTouches){var n=t.changedTouches[0];e=n.pageX,i=n.pageY}else t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);return{x:e,y:i}},position:function(t){var e=this,i=this.element,n=this.isRTL(),s=this.menu.parent(".popupmenu-wrapper"),a=this.getPositionFromEvent(t),r=this.menu[0].offsetWidth;this.menu[0].offsetHeight;if(s.length){var o=this.element[0].offsetWidth;"click"===this.settings.trigger&&o>r&&this.menu.width(o),i.is("svg, .icon")&&i.closest(".tab").length&&(i=i.closest(".tab")),s.find(".arrow").removeAttr("style");var l=$.extend({},this.settings.placementOpts),c=["flip"];c.push("shrink-y"),l.strategies=c,"immediate"===this.settings.trigger&&this.settings.eventObj||"rightClick"===this.settings.trigger?(l.x=m(0,"x")-(n?r:0)+(n?-1:1)*this.settings.offset.x,l.y=m(0,"y")+this.settings.offset.y,0===l.x&&0===l.y&&(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.parentXAlignment=n?"right":"left")):(l.x=this.settings.offset.x||0,l.y=this.settings.offset.y||0,l.parent=this.element,l.placement="bottom",l.strategies.push("nudge"));var d=i.parents(".toolbar"),h=d.length>0,u=i.parents(".title").length>0,p=h&&d.children(".buttonset, .title").length>1,g=i.parents(".pager-pagesize").length>0;i.is(".btn-menu")?g?b():h&&p?u?v():b():v():i.is(".btn-actions")||i.is(".tab-more")?b():i.is(".btn-split-menu, .tab, .searchfield-category-button")&&!i.parent(".pager-pagesize").length&&v(),i.parents(".masthead").length>0&&(l.y+=15);var f=this.element.parents(".page-container:not(.tab-container)");f.length&&(l.container=f.first()),s.one("afterplace.popupmenu",(function(t,i){e.handleAfterPlace(t,i)})),this.wrapperPlace=new ft(s,l),this.wrapperPlace.place(l)}function m(t,e){return a[e="x"===e||"y"===e?e:"x"]}function v(){l.parentXAlignment=n?"right":"left"}function b(){l.parentXAlignment=n?"left":"right"}},handleAfterPlace:function(t,e){var i=this.menu.parent(".popupmenu-wrapper");return this.wrapperPlace.setArrowPosition(t,e,i),e.height<this.menu[0].offsetHeight&&this.menu[0].classList.contains("colorpicker")&&this.menu[0].classList.add("has-scrollbar"),e.height&&(i[0].style.height="",this.menu[0].style.height=e.height+(/(px|%)/i.test("".concat(e.height))?"":"px")),e.width&&(i[0].style.width="",this.menu[0].style.width=e.width+(/(px|%)/i.test("".concat(e.width))?"":"px")),i.triggerHandler("popupmenuafterplace",[e]),e},callSource:function(t,e,i,n){if("function"==typeof this.settings.beforeOpen){var s=this,a=this.menu;if(!(u.isElement(i)&&$(i).is(".popupmenu, .submenu")&&(a=$(i),i.hasClass("is-open")))){var r=function(i){if(a.children().filter((function(t,e){return-1===s.predefinedItems.index(e)})).off().remove(),!1===i)return!1;var n=$(i);a.append(n);var r=a.parent(".wrapper, .popupmenu-wrapper");return r.length||(r=a.wrap('<div class="wrapper">').parent()),r.removeAttr("style"),s.markupItems(a),e&&(a.is(s.menu)?s.open(t,!0):s.openSubmenu(r.parent("li"),!0)),!0},o={};a.is(this.menu)||(o.contextElement=a),o.element=this.element,o.isSubmenu=n,"string"!=typeof this.settings.beforeOpen?this.settings.beforeOpen(r,o):window[this.settings.beforeOpen](r,o)}}},getMaxMenuWidth:function(){if(!(this.menu instanceof $))return 0;var t=!this.isOpen;t&&(this.wrapper.css({left:"-999999px"}),this.menu.addClass("is-open"));var e=this.menu.width();return t&&(this.wrapper.css({left:""}),this.menu.removeClass("is-open")),e},open:function(t,e,i){var n=this;if(this.menu&&this.menu.length){if((this.element.hasClass("autocomplete")||!1!==this.element.triggerHandler("beforeopen",[this.menu]))&&(e||(this.callSource(t,!0),!this.settings.beforeOpen)))if(i||"ios"!==m.os.name){$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).not(this.menu).each((function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}}));var s=this.element.data("tooltip");s&&s.visible&&s.hide();var a=$(".dropdown.is-open");if(a.length>0){var r=a.parent().prev().data("dropdown");r&&r.closeList("cancel")}var o=document.querySelector(".application-menu.is-open");o instanceof HTMLElement&&!o.contains(this.element[0])&&!o.contains(this.menu[0])&&$(document).triggerHandler("dismiss-applicationmenu"),this.element.addClass("is-open"),this.menu.addClass("is-open").attr("aria-hidden","false"),this.element.hasClass("inverse")&&this.menu.parent(".popupmenu-wrapper").addClass("inverse"),this.position(t),C.fixSVGIcons(this.menu),this.element.closest(".header").length>0&&(this.menu.parent()[0].style.zIndex="9001"),this.menu.find("a").each((function(){var t=$(this),e=t.parent();e.hasClass("is-disabled")?(e.addClass("is-disabled"),t.attr("aria-disabled","true"),t.attr("disabled","disabled")):(e.removeClass("is-disabled"),t.removeAttr("aria-disabled"),t.removeAttr("disabled"))})),setTimeout((function(){$(document).on("touchend.popupmenu.".concat(n.id," click.popupmenu.").concat(n.id),(function(t){var e="colorpicker-menu"===n.settings.menu;2!==t.button&&(n.holdingDownClick?delete n.holdingDownClick:$(t.target).is(n.element)&&!e&&"rightClick"!==n.settings.trigger||(0===$(t.target).closest(".popupmenu").length&&n.close(!0,"rightClick"===n.settings.trigger),$(t.target).hasClass("swatch")&&setTimeout((function(){n.close()}),150)))})),void 0===window.orientation&&$("body").on("resize.popupmenu",(function(){n.handleCloseEvent()})),$(window).on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),$(".datagrid-wrapper").on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),$(".scrollable, .modal.is-visible .modal-body-wrapper").on("scroll.popupmenu",(function(){setTimeout((function(){n.close()}),150)})),n.element.triggerHandler("open",[n.menu])}),300),$("iframe").each((function(){var t=$(this);t.ready((function(){try{t.contents().find("body").on("click.popupmenu",(function(){n.close()}))}catch(t){}}))})),this.handleKeys();var l,c,d=0;n.menu.find(".popupmenu").removeClass("is-open"),n.menu.on("mouseenter.popupmenu touchend.popupmenu",".submenu:not(.is-disabled)",(function(t){if(!$(t.target).hasClass("popupmenu")){var e=$(this);l=t.pageX,clearTimeout(n.submenuOpenTimeout),n.submenuOpenTimeout=setTimeout((function(){n.openSubmenu(e)}),300),$(document).on("mousemove.popupmenu.".concat(this.id),(function(t){d=t.pageX}))}})).on("mouseleave.popupmenu",".submenu",(function(){$(document).off("mousemove.popupmenu.".concat(this.id));var t=((c=$(this).find("ul")).parent(".wrapper").length>0?parseInt(c.parent(".wrapper")[0].style.left,10):0)<0,e=d-l<3.5;t&&(e=d-l>=0),e&&(c.removeClass("is-open").removeAttr("style"),c.parent(".wrapper").removeAttr("style"),c.parent().parent().removeClass("is-submenu-open"),c=null),clearTimeout(n.submenuOpenTimeout)})),n.settings.autoFocus&&setTimeout((function(){var t=":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)",e=n.menu.children(t).find(".is-selected").children("a");e.length||(e=n.menu.children(t).first().children("a")),n.highlight(e),n.element.triggerHandler("afteropen",[n.menu])}),1)}else setTimeout((function(){n.open(t,e,!0)}),400)}},handleCloseEvent:function(){this.holdingDownClick||this.close()},openSubmenu:function(t,e){if(!u.hasClass(t,"is-disabled")&&!t[0].disabled){var i=t.children(".wrapper, .popupmenu");i.length&&i.is(".wrapper")&&(i=i.children(".popupmenu"));var n=this.element.triggerHandler("beforeopen",[i]);!1!==n&&(!e&&(n=this.callSource(null,!0,i,!0),this.settings.beforeOpen)||this.showSubmenu(t))}},showSubmenu:function(t){this.element.triggerHandler("show-submenu",[t]);var e=t.children(".wrapper").filter(":first"),i=this.isRTL();if(0===e.length){var n=t.children("ul").filter(":first");n.wrap('<div class="wrapper"></div>'),e=n.parent()}var s,a=e.children(".popupmenu"),r=t.position().left+t.outerWidth();t.parent().find(".popupmenu").removeClass("is-open").removeAttr("style"),e.children(".popupmenu").addClass("is-open"),s=e.outerWidth(),i&&(r=t.position().left-s),e[0].style.left="".concat(r,"px"),e[0].style.top="".concat(parseInt(t.position().top,10)-5,"px");var o=a.outerWidth();if(e.offset().left+o>$(window).width()+$(document).scrollLeft()||i&&e.offset().left<0){if(e[0].style.left="-9999px",o=a.outerWidth(),r=t.position().left-o,i)r=e.closest(".popupmenu").outerWidth()-4;if(e[0].style.left="".concat(r,"px"),(e.offset().left<0||i&&e.offset().left+o>$(window).width()+$(document).scrollLeft())&&(r=t.position().left-o+Math.abs(e.offset().left)+40,i&&(r=t.position().left-o-30),e[0].style.left="".concat(r,"px"),o=a.outerWidth()),e.offset().left+o>$(window).width()+$(document).scrollLeft()||i&&e.offset().left<0)o-=e.offset().left+o-($(window).width()+$(document).scrollLeft()),a[0].style.width="".concat(o,"px")}var l=a.outerHeight(),c=this.settings.placementOpts.containerOffsetY;if(e.offset().top+l>window.innerHeight-c+$(document).scrollTop()){var d=e.offset().top+l-(window.innerHeight+$(document).scrollTop());if(e[0].style.top="".concat(e.position().top-d-c,"px"),e.offset().top+l>window.innerHeight+$(document).scrollTop()){var h=t.parents(".popupmenu-wrapper:first").offset().top;e[0].style.top="".concat(window.innerHeight+$(document).scrollTop()-l-h,"px")}if(e.offset().top-$(document).scrollTop()<0&&(e[0].style.top=0,e[0].style.top="".concat(-1*e.offset().top,"px"),l=a.outerHeight()),e.offset().top+l>window.innerHeight+$(document).scrollTop())l=l-(e.offset().top+l-(window.innerHeight+$(document).scrollTop()))-32,a[0].style.height="".concat(l,"px")}t.parent().find(".is-submenu-open").removeClass("is-submenu-open"),t.addClass("is-submenu-open")},highlight:function(t){if(t&&t.length){var e=t.parent();e.parent().children("li").removeClass("is-focused"),e.addClass("is-focused"),t&&t.focus(),e.closest(".header").scrollTop(0)}},select:function(t){var e=this.menu.is(".is-selectable"),i=this.menu.is(".is-multiselectable"),n=this.isInSingleSelectSection(t),s=this.isInMultiselectSection(t),a=t.parent(),r=[t];return a.hasClass("is-selectable")&&!t.find(".icon").length||e||n?(a.prevUntil(".heading, .separator").add(a.nextUntil(".heading, .separator")).removeClass("is-checked"),a.addClass("is-checked"),r.push("selected"),r):a.hasClass("is-multiselectable")||i||s?a.hasClass("is-checked")?(a.removeClass("is-checked"),r.push("deselected"),r):(a.addClass("is-checked"),r.push("selected"),r):r},getSelected:function(){return this.menu.is(".is-selectable, .is-multiselectable")?this.menu.children(".is-checked").children("a"):$()},isSelectable:function(t){return $(t).is(".is-selectable, .is-multiselectable")||this.hasSelectableSeparator(t)||this.menu.hasClass("is-selectable")||this.menu.hasClass("is-multiselectable")},getSelectableSeparator:function(t){return $(t).prevAll(".separator.single-selectable-section, .separator.multi-selectable-section").first()},hasSelectableSeparator:function(t){var e=this.getSelectableSeparator(t);return e&&e.length},getAdjacentSelectables:function(t){var e=this.getSelectableSeparator(t),i=":not(.heading):not(.separator):not(.submenu)";return e&&e.length?$(e).nextUntil(".separator").filter(i):$(t).parent().children("li".concat(i))},isInSelectableSection:function(t){F("hasSelectableSeparator()","isInSelectableSection()");var e=t.parent().prevAll().filter(".separator").first();return e.hasClass("multi-selectable-section")||e.hasClass("single-selectable-section")},isInSingleSelectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("single-selectable-section")},isInMultiselectSection:function(t){return t.parent().prevAll().filter(".separator").first().hasClass("multi-selectable-section")},detach:function(){$(document).off("touchend.popupmenu.".concat(this.id," click.popupmenu.").concat(this.id," keydown.popupmenu")),$(window).off("scroll.popupmenu orientationchange.popupmenu"),$(".datagrid-wrapper").off("scroll.popupmenu"),$("body").off("resize.popupmenu"),$(".scrollable").off("scroll.popupmenu"),this.menu&&this.menu.length&&this.menu.off("click.popupmenu touchend.popupmenu touchcancel.popupmenu"),$("iframe").each((function(){var t=$(this);try{t.contents().find("body").off("click.popupmenu touchend.popupmenu touchcancel.popupmenu")}catch(t){}}))},close:function(t,e){if(t&&void 0!==t||(t=!1),this.menu&&this.menu.add(this.element).hasClass("is-open")){var i=this.menu.parent(".popupmenu-wrapper"),n=this.menu.find(".popupmenu");if(this.menu.removeClass("is-open").attr("aria-hidden","true"),this.menu[0]&&(this.menu[0].style.height="",this.menu[0].style.width=""),i[0]&&(i[0].style.left="-999px",i[0].style.height="",i[0].style.width=""),this.menu.find(".submenu").off(["mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),this.menu.find(".is-submenu-open").removeClass("is-submenu-open"),this.submenuOpenTimeout&&(clearTimeout(this.submenuOpenTimeout),delete this.submenuOpenTimeout),n[0]&&(n[0].style.left="",n[0].style.top="",n[0].style.height="",n[0].style.width=""),this.menu.find(".is-focused").removeClass("is-focused"),$(document).off(["keydown.popupmenu.".concat(this.id),"click.popupmenu.".concat(this.id),"mousemove.popupmenu.".concat(this.id),"touchend.popupmenu.".concat(self.id)].join(" ")),this.menu.off(["click.popupmenu","touchend.popupmenu","touchcancel.popupmenu","mouseenter.popupmenu","mouseleave.popupmenu"].join(" ")),delete this.keydownThenClick,delete this.holdingDownClick,this.element.is("ul.popupmenu")&&this.element.closest(".popupmenu-wrapper").prev("button").removeClass("is-open"),this.menu.find(".popupmenu.is-open").removeClass("is-open"),this.element.removeClass("is-open").triggerHandler("close",[t]),this.detach(),"immediate"===this.settings.trigger&&this.destroy(),"INPUT"===this.element[0].tagName&&this.openedWithTouch)return this.element.removeClass("longpress-target"),void delete this.openedWithTouch;delete this.openedWithTouch;var s=!1;if(this.element.is(".colorpicker-editor-button")){var a=this.element.data("toolbaritem")||this.element.data("toolbarflexitem"),r=a?a.toolbarAPI:null;r&&r.overflowedItems.forEach((function(t){"colorpicker"===t.type&&(s=!0)}))}e||!this.settings.returnFocus||m.features.touch||s||("function"!=typeof this.settings.returnFocus?document.activeElement&&"INPUT"===document.activeElement.tagName||this.element&&this.element.focus():this.settings.returnFocus(this,{triggerElement:this.element[0],menuElement:this.menu[0]}))}},teardown:function(){if(!this.menu||!this.menu.parent)return this;var t=this.menu.parent(".popupmenu-wrapper");this.ajaxContent&&this.ajaxContent.off().remove(),this.predefinedItems=$();var e=this.menu.parent();e.find(".arrow").remove(),e.off("contextmenu.popupmenu"),this.element.hasClass("btn-actions")&&e.removeClass("bottom"),this.menu.off("dragstart.popupmenu"),!this.preExistingWrapper&&this.menu.parent().is(".popupmenu-wrapper")&&this.menu.unwrap();var i=this.element.parent().children(".searchfield");return i.length?this.menu.insertAfter(i.first()):this.menuOrgContainment?this.insertAtContainment(this.menu):this.menu.insertAfter(this.element),this.menu.find(".submenu").children("a").each((function(t,e){var i=$(e).find("span").text()||$(e).text();$(e).find("span, svg").remove(),$(e).text(i)})),this.menu.find(".submenu").removeClass("submenu"),this.menu.find(".popupmenu").each((function(){var t;(t=$(this)).parent().is(".popupmenu-wrapper, .wrapper")&&t.unwrap()})),this.wrapperPlace&&(this.wrapperPlace.destroy(),delete this.wrapperPlace),t.off().remove(),this.menu&&this.menu.length&&this.menu.data("trigger")&&$.removeData(this.menu[0],"trigger"),this.detach(),this.element.removeAttr("aria-controls").removeAttr("aria-haspopup").off("touchend.popupmenu touchcancel.popupmenu click.popupmenu keydown.popupmenu keypress.popupmenu contextmenu.popupmenu updated.popupmenu"),this},updated:function(t){return this.settings=C.mergeSettings(this.element[0],t,this.settings),this.teardown().init()},destroy:function(){var t;this.menu&&(this.close(),this.teardown(),null===(t=this.menu)||void 0===t||null==t||t.triggerHandler("destroy"),this.settings.removeOnDestroy&&this.menu&&this.menu.length&&(this.menu.off().remove(),delete this.menu),$.removeData(this.element[0],"popupmenu"))}},$.fn.popupmenu=function(t){return this.each((function(){var e=$.data(this,"popupmenu");e?e.updated(t):e=$.data(this,"popupmenu",new zt(this,t))}))};var Ht={appName:"Infor Application Name",content:void 0,copyrightYear:(new Date).getFullYear(),deviceSpecs:!0,productName:void 0,useDefaultCopyright:!0,version:void 0};function qt(t,e){this.settings=C.mergeSettings(t,e,Ht),this.element=$(t),this.init()}qt.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this.element.attr("data-appname");this.isBody=$(this.element).is("body"),this.settings.appName=void 0!==t?t.toString():this.settings.appName;var e=this.element.attr("data-about-content");this.settings.content=void 0!==e?e.toString():this.settings.content;var i=this.element.attr("data-copyright-year");this.settings.copyrightYear=void 0!==i?i.toString():this.settings.copyrightYear;var n=this.element.attr("data-device-specs");n&&(this.settings.deviceSpecs="true"===n);var s=this.element.attr("data-product-name");this.settings.productName=void 0!==s?s.toString():this.settings.productName;var a=this.element.attr("data-use-default");void 0!==a&&(this.settings.useDefaultCopyright="true"===a);var r=this.element.attr("data-version");return this.settings.version=void 0!==r?r.toString():this.settings.version,this.defaultCopyright="".concat(B.translate("AboutText"),' <a class="hyperlink" href="http://www.infor.com" target="_blank">www.infor.com</a>.'),this.defaultCopyright=this.defaultCopyright.replace("{0}",this.settings.copyrightYear),this},build:function(){this.modal=$('<div class="modal about" id="about-modal"></div>'),$('<div class="modal-content"></div>').appendTo(this.modal);var t=$('<div class="modal-header"></div>').appendTo(this.modal.find(".modal-content"));$('<div class="close-container"></div>').append($('<button name="close" type="button" class="btn-icon btn-close hide-focus"></button>').append($.createIconElement({icon:"close",classes:"icon-close"})).append("<span>".concat(B.translate("Close"),"'</span>"))).appendTo(t),$.createIconElement({icon:"logo-trademark",classes:["icon","about-logo"]}).attr({viewBox:"0 0 44 44"}).appendTo(t),this.title=$('<h1 class="title"></h1>').text(this.settings.appName).appendTo(this.modal.find(".modal-header"));var e=$('<div class="modal-body"></div>').appendTo(this.modal.find(".modal-content"));if(this.settings.version||this.settings.productName){var i=this.settings.productName?"".concat(this.settings.productName," ").concat(this.settings.version):"".concat(this.settings.version);$("<p></p>").text(i).appendTo(e)}if(this.settings.content&&$('<div class="additional-content"></div>').html(this.settings.content).appendTo(e),!this.settings.useDefaultCopyright&&this.settings.content||$("<p></p>").html(this.defaultCopyright).appendTo(e),this.settings.deviceSpecs){var n=this.getDeviceSpecs(),s='<span class="ds">'.concat(B.translate("OperatingSystem")," : ").concat(m.devicespecs.os.replace(m.devicespecs.currentOSVersion,"")," ").concat(m.devicespecs.currentOSVersion,'</span><br>\n        <span class="platform">').concat(B.translate("Platform")," : ").concat(n.os,'</span><br>\n        <span class="ds">').concat(B.translate("Mobile")," : ").concat(m.devicespecs.isMobile,'</span><br>\n        <span class="locale">').concat(B.translate("Locale")," : ").concat(B.currentLocale.name,'</span><br>\n        <span class="locale">').concat(B.translate("Language")," : ").concat(B.currentLanguage.name,'</span><br>\n        <span class="browser">').concat(B.translate("Browser")," :"," ".concat(m.devicespecs.browserVersionName)," ").concat(m.devicespecs.currentBrowser," (").concat(m.devicespecs.browserVersion,')</span><br>\n        <span class="locale">').concat(B.translate("BrowserLanguage")," : ").concat(n.locale,'</span><br>\n        <span class="cookiesEnabled">').concat(B.translate("CookiesEnabled")," : ").concat(n.cookiesEnabled,'</span><br>\n        <span class="version">').concat(B.translate("Version")," : ").concat($("html").attr("data-sohoxi-version"),"</span><br>");$("<p".concat(B.isRTL()?' dir="rtl"':"","></p>")).html(s).appendTo(e)}return this.buttons=this.modal.find("button"),this.modal.find(".hide-focus").one("blur",(function(){$(this).removeClass("hide-focus")})),this.element.attr("data-modal","about-modal"),$(".modal-body",this.modal)[0].tabIndex=0,this.modal.appendTo("body"),this.modal.modal({trigger:this.isBody?"immediate":"click",attributes:this.settings.attributes}),this.modal.data("modal").aboutAPI=this,this},getDeviceSpecs:function(){var t,e,i,n="Microsoft Internet Explorer"===navigator.appName?navigator.userLanguage:navigator.language;return{browser:(t=navigator.userAgent,e=[],i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE '".concat(e[1])):"Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" "))),os:navigator.platform,cookiesEnabled:navigator.cookieEnabled,locale:n}},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this},close:function(){if(this.isBody)this.destroy();else{var t=this.modal.data("modal");t&&t.close()}},destroy:function(t){if(this.buttons.off(),this.element.off("open.about"),!0!==t){var e=this.modal.data("modal");e&&(e.element.off("beforeopen.about"),e.aboutAPI=null,e.destroy())}this.element.length>0&&$.removeData(this.element[0],"about")},handleEvents:function(){var t=this;return this.element.on("open.about",(function(e){e.stopPropagation(),t.element.trigger("click")})),this.buttons.filter('[name="done"], [name="close"]').on("click.about",(function(){t.close()})),this.modal.data("modal").element.on("beforeopen.about",(function(){t.modal.find(".modal-body").scrollTop(0)})),this}},$.fn.about=function(t){return this.each((function(){var e=$.data(this,"about");e?e.updated(t):e=$.data(this,"about",new qt(this,t))}))};var Vt={direction:"vertical",distance:"auto",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateOpen=function(t){var e=$.fn.transitionEndName();return t=C.mergeSettings(void 0,t,Vt),this.each((function(){var i,n=this,s=$(this),a="horizontal"===t.direction?"width":"height",r=a.charAt(0).toUpperCase()+a.slice(1),o=isNaN(t.distance)?"auto":"".concat(parseInt(t.distance,10),"px");function l(){i&&clearTimeout(i),s.data("ignore-animation-once")&&$.removeData(s[0],"ignore-animation-once"),s.data("is-animating")&&$.removeData(s[0],"is-animating"),s.off("".concat(e,".animateopen")),n.style.transition="",n.style[a]=o,s.trigger("animateopencomplete")}s.one("animateopenstart.animation",(function(t){t.stopPropagation(),s.off("".concat(e,".animateopen"))})),s.trigger("animateopenstart"),e&&s.one("".concat(e,".animateopen"),l),s.data("is-animating",!0);var c=this.style[a];this.style[a]=o;var d=getComputedStyle(this)[a];this.style[a]=c,this["offset".concat(r)],this.style.transition="".concat(a," ").concat(t.timing,"ms ").concat(t.transition),i=setTimeout(l,t.timing),this.style[a]=d,(s.is(":hidden")||s.is(".no-transition")||s.data("ignore-animation-once"))&&l()}))};var Wt={direction:"vertical",timing:300,transition:"cubic-bezier(.17, .04, .03, .94)"};$.fn.animateClosed=function(t){var e=$.fn.transitionEndName();return t=C.mergeSettings(void 0,t,Wt),this.each((function(){var i,n=this,s=$(this),a="horizontal"===t.direction?"width":"height",r=a.charAt(0).toUpperCase()+a.slice(1);function o(){i&&clearTimeout(i),s.data("ignore-animation-once")&&$.removeData(s[0],"ignore-animation-once"),s.data("is-animating")&&$.removeData(s[0],"is-animating"),s.off("".concat(e,".animatedclosed")),n.style.transition="",n.style[a]="0px",s.trigger("animateclosedcomplete")}s.one("animateclosedstart",(function(t){t.stopPropagation(),s.off("".concat(e,".animatedclosed"))})),s.trigger("animateclosedstart"),e&&s.one("".concat(e,".animatedclosed"),o),s.data("is-animating",!0),this.style[a]=getComputedStyle(this)[a],this["offset".concat(r)],this.style.transition="".concat(a," ").concat(t.timing,"ms ").concat(t.transition),i=setTimeout(o,t.timing),this.style[a]="0px",(s.is(":hidden")||s.is(".no-transition")||s.data("ignore-animation-once"))&&o()}))},$.fn.isAnimating=function(){return this.each((function(){return!0===$(this).data("is-animating")}))};var jt=["classic","plus-minus","chevron"],Ut={allowOnePane:!0,expanderDisplay:jt[0],enableTooltips:!0,rerouteOnLinkClick:!0,source:null};function _t(t){return void 0!==t.displayChevron&&(F("expanderDisplay setting","displayChevron setting"),!1===t.displayChevron?t.expanderDisplay=jt[1]:t.expanderDisplay=jt[0],delete t.displayChevron),t}function Gt(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ut),this.settings=_t(this.settings),this.init()}function Yt(t,e){return!!function(t){return t&&!(t instanceof jQuery)}(t)&&(void 0!==t[e]&&null!==t[e])}function Kt(t,e){return!!function(t,e){return Yt(t,e)&&"function"==typeof t[e]}(t,e)&&(t[e](),!0)}function Xt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[];return"string"==typeof e&&(e=[e]),$.each(t,(function(t,a){$.each($(a).data(),(function(t,r){i.length&&-1===i.indexOf(t)||e.forEach((function(t){(n&&Kt(r,t)||Yt(r,t))&&s.push({elem:$(a),control:r})}))}))})),s}function Qt(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t&&e){var n=(t=$(t)).find("*").add(t).not(i.join(", ")),s=Xt(n,e,void 0,!0);return t.trigger("sift-".concat(e,"-complete"),[s]),t}}Gt.prototype={init:function(t){this.build(t).handleEvents(t).setupTooltips()},build:function(t,e){var i,n,s,a=this,r=this,o=!0;t&&t instanceof jQuery?(i=t.children("a"),s=(n=t.next(".accordion-pane")).children(".accordion-content"),o=!1,this.headers=this.headers.add(t),this.anchors=this.anchors.add(i),this.panes=this.panes.add(n),this.contentAreas=this.contentAreas.add(s)):(this.headers=this.element.find(".accordion-header"),t=this.element.find(".accordion-header"),this.anchors=t.children("a"),i=this.anchors,this.panes=t.next(".accordion-pane"),n=this.panes,this.contentAreas=n.children(".accordion-content"),s=this.contentAreas);var l=!1;if(t.each((function(){var t=$(this),e=!1,i=t.parent(),n=i.is(".accordion");function s(){n||(e?i.addClass("has-icons"):t.addClass("no-icon"))}t.hideFocus(),t.children("a").find("svg").detach().insertBefore(t.children("a"));var a=t.children(".icon, svg");if(a.addClass("icon").attr({role:"presentation","aria-hidden":"true",focusable:"false"}),n&&a.length&&(l=!0),(t.is(".list-item")||!n&&t.find("button").length||!n&&t.find("svg").length)&&(e=!0),t.hasClass("is-disabled")&&t.children("a, button").attr("tabindex","-1"),t.next(".accordion-pane").length){e=!0;var o=t.children(".btn");if(!o.length){o=$('<button class="btn" type="button"></button>');var c="insertBefore";"plus-minus"!==r.settings.expanderDisplay&&n&&(t.addClass("has-chevron"),c="insertAfter"),o[c](t.children("a")),t.data("addedExpander",o)}o.hideFocus(),a.length&&"plus-minus"===r.settings.expanderDisplay&&a.appendTo(o);var d=o.children(".icon, .svg, .plus-minus");if(!d.length){if("classic"===r.settings.expanderDisplay&&n||"chevron"===r.settings.expanderDisplay)d=$.createIconElement({icon:"caret-down",classes:["chevron"]});else{var h=r.isExpanded(t)?" active":"";d=$('<span class="icon plus-minus'.concat(h,'" aria-hidden="true" role="presentation"></span>'))}d.appendTo(o)}var u={role:"presentation","aria-hidden":"true"};d.is("span")||(u.focusable="false"),d.attr(u),d.is(".chevron")&&n?(t.addClass("has-chevron"),o.insertAfter(t.children("a"))):(t.removeClass("has-chevron"),o.insertBefore(t.children("a"))),"plus-minus"===r.settings.expanderDisplay&&n&&(l=!0),s()}else s()})),l&&this.element.addClass("has-icons"),o&&!this.element.data("updating")){var c=t.filter(".is-selected, .is-expanded");c.next(".accordion-pane").addClass("no-transition"),this.settings.allowOnePane?(c=c.first(),this.expand(c)):c.each((function(t){a.expand($(c[t]))})),this.select(c.last()),c.next(".accordion-pane").removeClass("no-transition")}return n.each((function(){var t=$(this),i=t.prev(".accordion-header");i.children("a").attr({"aria-haspopup":"true",role:"button"});var n=t.children(),s=!0;if(n.each((function(t,e){$(e).is(".accordion-header, .accordion-content")&&!$(e).hasClass("filtered")&&(s=!1)})),t[s?"addClass":"removeClass"]("all-children-filtered"),s&&(t.data("ignore-animation-once",!0),r.collapse(i,!1)),!e){var a="0px";r.isExpanded(i)&&(a="auto"),t.attr("style","height: ".concat(a))}})),e||(this.currentlyFiltered=$()),this},handleHeaderClick:function(t,e){if(!e||!e.length||this.isDisabled(e)||this.isFiltered(e)||e.data("is-animating"))t.preventDefault();else{if(!$(t.target).is('[class^="btn"]')){var i=e.children("a");return this.handleAnchorClick(t,i)}t.preventDefault()}},handleAnchorClick:function(t,e){var i,n=this,s=e.parent(".accordion-header"),a=s.next(".accordion-pane"),r=e.attr("ng-reflect-href");if(t&&!r&&t.preventDefault(),!s.length||this.isDisabled(s)||this.isFiltered(s))return!1;if(!1!==this.element.triggerHandler("beforeselect",[e]))return this.originalSelection=e,this.select(e),this.closePopups(t),!(i=e.attr("href"))||""===i||"#"===i||n.settings.rerouteOnLinkClick&&(window.location.href=i,0)?a.length?(n.toggle(s),n.focusOriginalType(s),!0):(this.isControllingDetails?a.length||n.element.trigger("drilldown",[s[0]]):(n.orignalSelection=e,n.focusOriginalType(s)),this.element.trigger("selected",s),!0):(this.element.trigger("followlink",[e]),!0)},closePopups:function(t){$(".popupmenu.is-open").length&&this.element.find('.accordion-header[aria-haspopup="true"]').each((function(){return $(this).data("popupmenu").close(),void 0!==t&&(t.stopPropagation(),t.stopImmediatePropagation()),!1}))},handleExpanderClick:function(t,e){var i=e.parent(".accordion-header");if(i.length&&!this.isDisabled(i)&&!this.isFiltered(i)&&!i.data("is-animating"))return this.originalSelection=e,t&&t.stopPropagation(),this.closePopups(),i.next(".accordion-pane").length?(this.toggle(i),this.select(i),void this.focusOriginalType(i)):this.handleAnchorClick(t,i.children("a"))},handleKeys:function(t){var e=this,i=t.which,n=$(t.target),s=n.parent(),a=s.children('[class^="btn"]').first(),r=s.children("a"),o=document.querySelectorAll(".accordion-pane");function l(t){t||(t=n),e.originalSelection||(e.originalSelection=t)}if(9===i){this.headers.removeClass("is-selected");var d=c(o).filter((function(t){return!t.classList.contains("is-expanded")}));c(o).filter((function(t){return t.classList.contains("is-expanded")})).forEach((function(t){c(t.children).forEach((function(t){$(t).hasClass("is-disabled")||($(t).find("a").removeAttr("tabindex"),$(t).find("button").removeAttr("tabindex"))}))})),d.forEach((function(t){c(t.children).forEach((function(t){$(t).find("a").attr("tabindex","-1"),$(t).find("button").attr("tabindex","-1")}))})),n.is("a")&&a.length?l(a):l(r)}if(32===i){if(t.preventDefault(),n.is('[class^="btn"]')&&(t.stopPropagation(),t.stopImmediatePropagation(),$("html").hasClass("is-firefox")))return;return a.length?(l(a),this.handleExpanderClick(null,n)):(l(r),this.handleAnchorClick(null,n))}return 37===i||38===i?(t.preventDefault(),l(),t.shiftKey?this.ascend(s):this.prevHeader(s)):39===i||40===i?(t.preventDefault(),l(),t.shiftKey?this.descend(s):this.nextHeader(s)):void 0},toData:function(t,e){var i=[];return this.element.children(".accordion-header").each((function(n,s){!function i(n,s,a,r){var o=$(n),l=$(n).next(".accordion-pane"),c=n.classList.contains("accordion-content"),d={index:"".concat(void 0!==a?"".concat(a,"."):"").concat(s),type:c?"content":"header"};e&&(d.element=n),n.getAttribute("id")&&(d.id=n.getAttribute("id")),c?(d.content="".concat(o.html()),d.contentText="".concat(o.text().trim().replace(/\n|\s{2,}/g," "))):d.text=o.children("a, span").text().trim();var h=o.children(".icon");if(h.length&&(d.icon="svg"===h[0].tagName.toLowerCase()?h[0].getElementsByTagName("use")[0].getAttribute("href"):""),o.hasClass("is-disabled")&&(d.disabled=!0),l.length){var u=l.children(".accordion-header, .accordion-content"),p=[];if(u.length){var g=p;t&&(g=r),u.each((function(t,e){i(e,t,d.index,g)})),d.children=p}}r.push(d)}(s,n,void 0,i)})),i},select:function(t){if(t&&t.length){var e=t,i=e.parent();if(t.is(".accordion-header")&&(e=(i=t).children("a")),e.is('[class^="btn"]')&&(e=t.next("a")),!this.isDisabled(i)&&!this.isFiltered(i))this.headers.removeClass("child-selected").removeClass("is-selected"),i.addClass("is-selected"),i.parentsUntil(this.element,".accordion-pane").prev(".accordion-header").addClass("child-selected")}},getSelected:function(){return this.element.find(".is-selected")},isDisabled:function(t){return!!this.element.hasClass("is-disabled")||!!t&&t.hasClass("is-disabled")},isFiltered:function(t){if(!t||!t.length)return!1;var e=t[0].classList;return e.contains("filtered")&&!e.contains("has-filtered-children")},isExpanded:function(t){if(t&&t instanceof Element&&(t=$(t)),t&&t.length)return"true"===t.children("a").attr("aria-expanded")||t.hasClass("is-expanded")},toggle:function(t){var e=this;!t||!t.length||this.isDisabled(t)||this.isFiltered(t)||this.isAnimating||(this.isAnimating=!0,setTimeout((function(){e.isAnimating=!1}),500),this.isExpanded(t)?this.collapse(t):this.expand(t))},expand:function(t,e){if("string"==typeof t&&(t=this.element.find("#".concat(t)).first()),t&&t.length){var i=this,n=t.next(".accordion-pane"),s=t.children("a"),a=$.Deferred();return!1===this.element.triggerHandler("beforeexpand",[s])?a.reject():(this.callSource(s,r)||r.apply(this),a)}function r(){if(!(n=t.next(".accordion-pane"))||!n.length)return a.reject();var r=t.children(".btn");r.length&&(r.children(".plus-minus, .chevron").addClass("active"),r.children(".audible").text(B.translate("Collapse")));var o=t.parentsUntil(i.element).filter(".accordion-pane").prev(".accordion-header").add(t),l=[];i.settings.allowOnePane&&!e&&i.headers&&i.headers.not(o).each((function(){var t=$(this);i.isExpanded(t)&&l.push(i.collapse(t))}));var c=[];function d(t){var e;t&&t.stopPropagation(),n.triggerHandler("afterexpand",[s]),i.element.trigger("afterexpand",[s]),(e=$).when.apply(e,c.concat(l)).done((function(){a.resolve()}))}o&&o.not(t).each((function(){var t=$(this);i.isExpanded(t)||c.push(i.expand(t))})),t.add(n).addClass("is-expanded"),t.children("a").attr("aria-expanded","true"),i.element.trigger("expand",[s]),n.hasClass("no-transition")?d():n.one("animateopencomplete",d).animateOpen()}},expandAll:function(){var t;if(!0!==this.settings.allowOnePane){var e=this,i=$.Deferred(),n=[];return this.headers.each((function(){var t=$(this);e.isExpanded(t)||n.push(e.expand(t))})),(t=$).when.apply(t,n).always((function(){i.resolve()})),i}},collapse:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"==typeof t&&(t=this.element.find("#".concat(t)).first()),t&&t.length){var i=this,n=t.next(".accordion-pane"),s=t.children("a"),a=$.Deferred(),r=this.element.triggerHandler("beforecollapse",[s]);if(!1===r)return a.reject();var o=t.children(".btn");return o.length&&(o.children(".plus-minus, .chevron").removeClass("active"),o.children(".audible").text(B.translate("Expand"))),e&&n.closeChildren(),i.element.trigger("collapse",[s]),n.hasClass("no-transition")?l():n.one("animateclosedcomplete",l).animateClosed(),a}function l(e){e&&e.stopPropagation(),n.triggerHandler("aftercollapse",[s]),i.element.trigger("aftercollapse",[s]),t.add(n).removeClass("is-expanded"),s.attr("aria-expanded","false"),a.resolve()}},collapseAll:function(){var t,e=this,i=$.Deferred(),n=[];return this.headers.each((function(){var t=$(this);e.isExpanded(t)&&n.push(e.collapse(t))})),(t=$).when.apply(t,n).always((function(){i.resolve()})),i},callSource:function(t,e){if(!this.settings.source||"function"!=typeof this.settings.source)return!1;var i=this,n=t.parent(),s=n.next(".accordion-pane"),a={anchor:t,header:n,pane:s};return this.settings.source(a,(function(t,n){!0!==t&&i.updated(n),setTimeout((function(){e.apply(i)}),1)}))},getElements:function(t){var e,i,n,s,a=$(t);return a.is(".accordion-header")&&(e=a,n=a.children('[class^="btn"]'),i=a.children("a")),a.is(".btn")&&(i=(e=(n=a).parent()).children("a")),a.is("a")&&(n=(e=(i=a).parent()).children(".btn")),s=e.next(".accordion-pane"),{header:e,expander:n,anchor:i,pane:s}},prevHeader:function(t,e){var i=this.getElements(t),n=i.header.parent().children(),s=n.index(i.header),a=$(n.get(h.ensureAlphaNumeric(s)-1));if(!n.length||0===s){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);a=n.last()}for(;a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);){if(a.is(":only-child")||a.is(":first-child"))return this.ascend(i.header);a=a.prev()}if(a.is(".accordion-pane")){var r=a.prev(".accordion-header");if(this.isExpanded(r))if(r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r,-1);if(!(a=r).length){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header);for(a=n.last();a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);)a=a.prev()}}this.focusOriginalType(a)},nextHeader:function(t,e){var i=this.getElements(t),n=i.header.parent().children(),s=n.index(i.header),a=$(n.get(h.ensureAlphaNumeric(s)+1));if(!n.length||s===n.length-1){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);a=n.first()}for(;a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);){if(a.is(":only-child")||a.is(":last-child"))return this.ascend(i.header);a=a.next()}if(a.is(".accordion-pane")){var r=a.prev(".accordion-header");if(this.isExpanded(r))if(r.next(".accordion-pane").children(":not(.accordion-content)").length&&!e)return this.descend(r);if(!(a=$(n.get(h.ensureAlphaNumeric(s)+2))).length){if(i.header.parent(".accordion-pane").length)return this.ascend(i.header,-1);for(a=n.first();a.is(".accordion-content")||this.isDisabled(a)||this.isFiltered(a);)a=a.next()}}this.focusOriginalType(a)},ascend:function(t,e){e||(e=0);var i=t.parent(".accordion-pane"),n=i.prev();if(-1===e&&!(n=i.next(".accordion-header")).length)return i.parent(".accordion").length?this.nextHeader(i.prev().children("a"),!0):this.ascend(i.prev(),-1);this.focusOriginalType(n)},descend:function(t,e){e||(e=0);var i=t.next(".accordion-pane"),n=i.children(".accordion-header").first();return-1===e&&(n=i.children(".accordion-header").last()),n.length?this.isExpanded(n)?this.descend(n,-1):void this.focusOriginalType(n):this.focusOriginalType(t)},focusOriginalType:function(t){var e=t.children('[class*="btn"]');this.headers.not(t).removeClass("is-focused"),this.originalSelection.is('[class*="btn"]')&&e.length?e.first()[0].focus():(t.children("a")[0].focus(),t.addClass("is-focused").removeClass("hide-focus"))},filter:function(t){var e=this;if(t){var i=this;this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),this.currentlyFiltered=$();var n=t.not(this.currentlyFiltered),s=$(),a=$();this.headers.add(this.contentAreas).not(n).addClass("filtered"),n.each((function(t,e){var i=$(e).is(".accordion-content"),n=$(e).parents(".accordion-pane");if(i){a.push($(e));var r=$(n[0]).prev(".accordion-header").filter((function(t,e){return-1===s.index(e)}));r.length&&(s=s.add(r))}if(n.length){var o=n.prev(".accordion-header").filter((function(t,e){return-1===n.index(e)}));s=s.add(o)}})),s.addClass("has-filtered-children");var r=this.expand(s,!0);$.when(r).done((function(){e.currentlyFiltered=n,i.build(void 0,!0)}))}},unfilter:function(t){var e=this;if(this.currentlyFiltered.length){t&&t.length||(t=this.currentlyFiltered);var i=$();this.headers.removeClass("filtered has-filtered-children hide-focus"),this.panes.removeClass("all-children-filtered no-transition"),this.contentAreas.removeClass("filtered"),t.each((function(t,e){var n=$(e).parents(".accordion-pane");if(n.length){var s=n.prev(".accordion-header").filter((function(t,e){return-1===i.index(e)}));i=i.add(s)}})),i.removeClass("has-filtered-children");var n=[this.collapse(t),this.collapse(i)];$.when(n).done((function(){e.currentlyFiltered=e.currentlyFiltered.not(t)}))}},disable:function(){this.element.addClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).attr("tabindex","-1")},enable:function(){this.element.removeClass("is-disabled"),this.anchors.add(this.headers.children('[class^="btn"]')).removeAttr("tabindex")},updated:function(t,e){this.element.data("updating",!0),e&&(this.settings=C.mergeSettings(this.element[0],e,this.settings),this.settings=_t(this.settings));var i=$(document.activeElement);return $.contains(this.element[0],i[0])||(i=void 0),t&&t instanceof jQuery?this.teardown(t).init(t):this.teardown().init(),i&&i.length&&i.focus(),$.removeData(this.element[0],"updating"),this},teardown:function(t){var e=!1,i=t;(this.currentlyFiltered&&this.unfilter(this.currentlyFiltered),t&&t instanceof jQuery||(i=this.headers,e=!0),i&&i.length)&&(i.off("touchend.accordion click.accordion focusin.accordion focusout.accordion keydown.accordion mousedown.accordion mouseup.accordion").each((function(){var t=$(this),e=t.children(".icon"),i=t.data("hidefocus");if(i&&i.destroy(),e.length){var n=e.data("icon");n&&n.destroy()}var s=t.data("addedExpander");s&&(s.remove(),$.removeData(this,"addedExpander"))})),i.not(".accordion-content").find("a").off("touchend.accordion keydown.accordion click.accordion"),i.children('[class^="btn"]').off("touchend.accordion click.accordion keydown.accordion"));return e&&(this.element.off("updated.accordion selected.accordion"),delete this.anchors,delete this.headers,delete this.panes,delete this.contentAreas),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"accordion")},handleEvents:function(t){var e=this,i=null,n=t,s=!1;function a(t,i){var n=function(t){var e="Header";return t.is("a")&&(e="Anchor"),t.is("button")&&(e="Expander"),e}(i);return $("body").children().not(".application-menu, .modal-page-container, .page-container").closeChildren(),e["handle".concat(n,"Click")](t,i)}return t&&t instanceof jQuery||(n=this.headers,s=!0),n.on("click.accordion",(function(t){return a(t,$(this))})).on("focusin.accordion",(function(t){var i=$(t.target);e.originalSelection||(e.originalSelection=i),n.not($(this)).removeClass("is-focused"),i.is(":not(.btn)")&&$(this).addClass("is-focused").removeClass("hide-focus")})).on("focusout.accordion",(function(){$.contains(this,i)&&!$(this).is($(i))||$(this).removeClass("is-focused")})).on("keydown.accordion",(function(t){e.handleKeys(t)})).on("mousedown.accordion",(function(t){$(this).addClass("is-focused").removeClass("hide-focus"),i=t.target})).on("mouseup.accordion",(function(){i=null})),n.children('[class^="btn"]').on("click.accordion",(function(t){return a(t,$(this))})).on("keydown.accordion",(function(t){e.handleKeys(t)})),s&&this.element.on("selected.accordion",(function(t){t.stopPropagation()})).on("updated.accordion",(function(t,i){t.stopPropagation(),e.updated(i)})),this},hideTooltip:function(){var t=this,e=window;e.tooltip&&(this.removeTooltipData(e.tooltip),e.tooltip.classList.add("is-hidden"),e.tooltip.classList.remove("content-tooltip")),$("body, .scrollable").off("scroll.spantooltip",(function(){t.hideTooltip()}))},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("spantooltip")&&$.removeData(t[0],"spantooltip")},setupTooltips:function(){if(this.settings.enableTooltips){var t,e=this,i=".accordion-header a span";this.element.off("mouseenter.spantooltip",i).on("mouseenter.spantooltip",i,(function(){var e;(e=this).style.width="auto",e.offsetWidth>e.parentElement.offsetWidth-parseInt($(e).parent().css("padding-left"),10)&&(e.style.width="",t=setTimeout((function(){$(e).tooltip({trigger:"immediate",content:"".concat(e.innerText),extraClass:"tooltip-accordion-style"})}),400))})).off("mouseleave.spantooltip click.spantooltip",i).on("mouseleave.spantooltip click.spantooltip",i,(function(){var i;(i=this).style.width="auto",i.offsetWidth>i.parentElement.offsetWidth-parseInt($(i).parent().css("padding-left"),10)&&(i.style.width="",e.hideTooltip(),clearTimeout(t))}))}}},$.fn.accordion=function(t){return this.each((function(){var e=$.data(this,"accordion");e?e.updated(t):e=$.data(this,"accordion",new Gt(this,t))}))};var Jt=[".expandable-area",".accordion","[soho-busyindicator]",".busy-indicator-container"],Zt=[];$.fn.destroy=function(){return Qt($(this),"destroy")},$.fn.closeChildren=function(){return Qt($(this),"close",Jt)},$.fn.handleResize=function(){return Qt($(this),"handleResize",Zt)};var te={trigger:null,bottomBorder:!1,animationSpeed:300,attributes:null};function ee(t,e){this.settings=C.mergeSettings(t,e,te),this.element=$(t),this.init()}ee.prototype={init:function(){this.setup().build().handleEvents()},setup:function(){return this.id=this.element.attr("id"),this.id&&void 0!==this.id||(this.id="expandable-area-".concat($("body").find(".expandable-area").index(this.element))),this.element.prev(".expandable-area-trigger").length>0&&(this.expander=this.element.prev(".expandable-area-trigger"),this.settings.trigger=this.expander.attr("id")||"expandable-area-trigger-".concat($("body").find(".expandable-area").index(this.element))),this.header=this.settings.trigger?this.element:this.element.children(".expandable-header"),this.footer=this.element.children(".expandable-footer"),this.content=this.element.children(".expandable-pane"),this.isCard=this.element.is(".card, .widget"),this},build:function(){var t,e,i=this,n=this.element.hasClass("is-expanded");return(this.expander||this.header).attr({"aria-expanded":"".concat(n),"aria-controls":"".concat(this.id,"-content")}),this.header.attr({id:"".concat(this.id,"-header")}),this.content.attr({id:"".concat(this.id,"-content"),role:"region","aria-labelledby":"".concat(this.id,"-header")}),this.isCard||this.footer.length||this.settings.trigger||(this.footer=$('<div class="expandable-footer"></div>').appendTo(this.element)),this.expander=(t=this,!0===this.isCard?((e=t.header.find("expandable-expander")).length||(e=$("".concat('<a href="#" target="_self" role="button" class="btn-expander"><svg class="chevron icon" focusable="false" aria-hidden="true" role="presenation"><use href="#icon-caret-down"></use></svg><span class="audible">').concat(B.translate("ShowMore"),"</span>")+"</a>").appendTo(t.header)),e):((e=t.footer.find(".expandable-expander")).length||(e=$("".concat('<a href="#" target="_self" role="button" class="expandable-expander hyperlink"><span data-translated="true">').concat(B.translate("ShowMore"),"</span>")+"</a>").prependTo(t.footer)),e)),this.expander.attr("href","#").hideFocus(),this.expander.attr("role","button"),0===this.expander.length&&(this.expander=$("#".concat(this.settings.trigger))),this.settings.bottomBorder&&this.element.addClass("has-bottom-border"),n&&(this.content.addClass("no-transition"),this.element.one("afterexpand.expandable-area",(function(){i.content.removeClass("no-transition")})),this.open()),n||(this.content.addClass("no-transition"),this.element.one("aftercollapse.expandable-area",(function(){i.content.removeClass("no-transition")})),this.close()),this.resize(),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.header,this,this.settings.attributes,"header",!0),C.addAttributes(this.content,this,this.settings.attributes,"content",!0),C.addAttributes(this.expander,this,this.settings.attributes,"expander",!0),C.addAttributes(this.footer,this,this.settings.attributes,"footer",!0),this},isDisabled:function(){return this.element.hasClass("is-disabled")},isExpanded:function(){return this.element.is(".is-expanded")},toggleExpanded:function(){this.isExpanded()?this.close():this.open()},open:function(){var t=this;!1!==this.element.triggerHandler("beforeexpand",[this.element])&&(this.element.addClass("is-expanded"),(this.expander||this.header).attr("aria-expanded","true"),this.expander.addClass("active"),this.element.triggerHandler("expand",[this.element]),this.expander.find('span[data-translated="true"]').text(B.translate("ShowLess")?B.translate("ShowLess"):"Show Less"),this.isCard&&this.expander.find(".icon").addClass("active"),this.content[0]&&(this.content[0].style.display="block"),this.content.one("animateopencomplete",(function(){t.element.triggerHandler("afterexpand",[t.element])})).animateOpen({timing:this.settings.animationSpeed}),this.applyIE11Fix())},close:function(){var t=this;!1!==this.element.triggerHandler("beforecollapse",[this.element])&&(this.expander.removeClass("active"),this.element.triggerHandler("collapse",[this.element]),this.expander.find('span[data-translated="true"]').text(B.translate("ShowMore")?B.translate("ShowMore"):"Show More"),this.isCard&&this.expander.find(".icon").removeClass("active"),this.content.one("animateclosedcomplete",(function(){t.element.removeClass("is-expanded"),(t.expander||t.header).attr("aria-expanded","false"),t.element.triggerHandler("aftercollapse",[t.element]),t.content[0].style.display="none"})).animateClosed({timing:this.settings.animationSpeed}),this.applyIE11Fix())},applyIE11Fix:function(){var t=this,e=$("html").hasClass("ie11");setTimeout((function(){e&&t.element.hasClass("is-expanded")?t.element.css("min-height",t.element.children(".expandable-pane").outerHeight(!0)+t.element.children(".expandable-footer").outerHeight(!0)):e&&!t.element.hasClass("is-expanded")&&t.element.css("min-height","auto")}),300)},resize:function(){var t=this;$("body").on("resize.expandablearea",(function(){t.applyIE11Fix()}))},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},destroy:function(){(this.expander||this.header).removeAttr("aria-controls").removeAttr("aria-expanded"),this.header.children("a").off(),this.header.off(),this.header.removeAttr("id"),this.content.removeAttr("id").removeClass("no-transition"),$.removeData(this.element[0],"expandablearea")},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this},handleEvents:function(){var t=this;return this.expander.on("click.expandablearea",(function(e){t.isDisabled()||(e.preventDefault(),t.toggleExpanded())})),this}},$.fn.expandablearea=function(t){return this.each((function(){var e=$.data(this,"expandablearea");e?e.updated(t):e=$.data(this,"expandablearea",new ee(this,t))}))};var ie=setTimeout;function ne(t){return Boolean(t&&void 0!==t.length)}function se(){}function ae(t){if(!(this instanceof ae))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],he(t,this)}function re(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,ae._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void le(e.promise,t)}oe(e.promise,n)}else(1===t._state?oe:le)(e.promise,t._value)}))):t._deferreds.push(e)}function oe(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof ae)return t._state=3,t._value=e,void ce(t);if("function"==typeof i)return void he((n=i,s=e,function(){n.apply(s,arguments)}),t)}t._state=1,t._value=e,ce(t)}catch(e){le(t,e)}var n,s}function le(t,e){t._state=2,t._value=e,ce(t)}function ce(t){2===t._state&&0===t._deferreds.length&&ae._immediateFn((function(){t._handled||ae._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)re(t,t._deferreds[e]);t._deferreds=null}function de(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function he(t,e){var i=!1;try{t((function(t){i||(i=!0,oe(e,t))}),(function(t){i||(i=!0,le(e,t))}))}catch(t){if(i)return;i=!0,le(e,t)}}ae.prototype.catch=function(t){return this.then(null,t)},ae.prototype.then=function(t,e){var i=new this.constructor(se);return re(this,new de(t,e,i)),i},ae.prototype.finally=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))},ae.all=function(t){return new ae((function(e,i){if(!ne(t))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var s=n.length;function a(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,(function(e){a(t,e)}),i)}n[t]=r,0==--s&&e(n)}catch(t){i(t)}}for(var r=0;r<n.length;r++)a(r,n[r])}))},ae.allSettled=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var s=n.length;function a(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if("function"==typeof r)return void r.call(i,(function(e){a(t,e)}),(function(i){n[t]={status:"rejected",reason:i},0==--s&&e(n)}))}n[t]={status:"fulfilled",value:i},0==--s&&e(n)}for(var r=0;r<n.length;r++)a(r,n[r])}))},ae.resolve=function(t){return t&&"object"==typeof t&&t.constructor===ae?t:new ae((function(e){e(t)}))},ae.reject=function(t){return new ae((function(e,i){i(t)}))},ae.race=function(t){return new ae((function(e,i){if(!ne(t))return i(new TypeError("Promise.race accepts an array"));for(var n=0,s=t.length;n<s;n++)ae.resolve(t[n]).then(e,i)}))},ae._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){ie(t,0)},ae._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var ue=["startsWith","contains","keyword","wordStartsWith","phraseStartsWith"];var pe={caseSensitive:!1,filterMode:ue[3],searchableTextCallback:void 0};function ge(t){this.settings=C.mergeSettings(void 0,t,pe),this.init()}ge.prototype={init:function(){for(var t,e,i,n=[{setting:this.settings.filterMode,limits:ue,preset:pe.filterMode}],s=0;s<n.length;s++)t=n[s].setting,e=n[s].limits,i=n[s].preset,-1===$.inArray(t,e)&&(t=i);return this.settings.filterMode===ue[0]&&F("wordStartsWith (filter)","startsWith (filter)"),this},filter:function(t,e){if(!t)return!1;if(!($.isArray(t)||t instanceof jQuery))return!1;if(!e||"string"!=typeof e||!e.length)return!1;var n=this,s=[],a=!1;function r(t){var e,i,s,a=!0;if("function"==typeof n.settings.searchableTextCallback)return n.settings.searchableTextCallback(t);"string"==typeof t?e=t:t instanceof $?e=$(t).text():t instanceof HTMLElement?(a=!1,e=t.innerText):(i=t,s="",Object.keys(i).forEach((function(t){var e=s.length?" ":"";s+="".concat(e).concat(i[t])})),e=s);var r=e;return a&&(r=h.sanitizeHTML(e)),r}return this.settings.caseSensitive||(e=e.toLowerCase()),$.isArray(t)||(t instanceof jQuery||"object"===i(t))&&(t=$.makeArray(t),a=!0),t.forEach((function(t){var i=r(t);n.settings.caseSensitive||(i=i.toLowerCase().trim());var a=!1;if(["startsWith","wordStartsWith"].indexOf(n.settings.filterMode)>-1&&(a=function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)if(0===i[n].indexOf(e))return!0;return 0===t.indexOf(e)||e.indexOf(" ")>0&&t.indexOf(e)>0}(i,e)),"phraseStartsWith"===n.settings.filterMode&&0===i.indexOf(e)&&(a=!0),"contains"===n.settings.filterMode&&i.indexOf(e)>=0&&(a=!0),"keyword"===n.settings.filterMode)for(var o=e.split(" "),l=0;l<o.length;l++){var c=o[l];if(i.indexOf(c)>=0){a=!0;break}}null===n.settings.filterMode&&(a=!0),a&&s.push(t)})),a&&(s=$(s)),!(!a&&!s.length)&&s},updated:function(t){return this.settings=C.mergeSettings(void 0,t,this.settings),this.teardown().init()},teardown:function(){return this},destroy:function(){return this.teardown()}};var fe={compile:function t(e,n,s,a){var r,o=t,l="";function c(t,e){return t=t[(e=e.pop?e:e.split(".")).shift()]||"",0 in e?c(t,e):t}n=Array.isArray(n)?n:n?[n]:[],n=a?0 in n?[]:[1]:n;var d=function(){var t="",a=0,d=void 0,h="object"===i(n[r])?n[r]:{};(h=C.extend({},s,h))[""]={"":n[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(e,n,s,r,u,p,g){a?t+=a&&!u||a>1?e:n:(l+=n.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(t,e,i,n,s,a){return e?c(h,e):n?c(h,a):s?o(c(h,a),h):i?"":new Option(c(h,a)).innerHTML})),d=p),u?--a||(g=c(h,g),/^f/.test(i(g))?l+=g.call(h,t,(function(t){return o(t,h)})):l+=o(t,g,h,d),t=""):++a}))};for(r=0;r<n.length;r++)d();return l}},me={source:[],sourceArguments:{},template:void 0,filterMode:"wordStartsWith",caseSensitive:!1,delay:300,width:null,offset:null,autoSelectFirstItem:!1,highlightMatchedText:!0,highlightCallback:function(t,e){var i=t,n=!1;if("string"==typeof e.alias&&void 0!==t[e.alias]&&(n=!0,i=t[e.alias]),"contains"===e.filterMode)i=i.replace(new RegExp("("+E.escapeRegExp(e.term)+")","ig"),"<i>$1</i>");else if("keyword"===e.filterMode)for(var s=e.term.split(" "),a=0;a<s.length;a++){var r=s[a];r&&(i=i.replace(new RegExp("("+E.escapeRegExp(r)+")","ig"),"<i>$1</i>"))}else{var o=i,l="".concat(o);e.caseSensitive||(l=B.toLowerCase(l));var c=E.escapeRegExp(e.term),d=l.indexOf(c);d>0?i=o.substr(0,d)+"<i>"+o.substr(d,c.length)+"</i>"+o.substr(c.length+d):0===d&&(i="<i>"+o.substr(0,c.length)+"</i>"+o.substr(c.length))}return n?t[e.alias]=i:t=i,t},resultIteratorCallback:function(t,e){var i="string"==typeof t,n={highlightTarget:"label",index:e,listItemId:"ac-list-option".concat(e)};return i?n.label=t:n=C.extend({},n,t),n.hasValue=void 0!==t.value,n.hasValue&&(n.value=t.value),n},clearResultsCallback:void 0,displayResultsCallback:void 0,searchableTextCallback:function(t){return"string"==typeof t?t:t.label}};function ve(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,me),this.init()}ve.prototype={init:function(){var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"));var e={filterMode:this.settings.filterMode,caseSensitive:this.settings.caseSensitive,highlightMatchedText:this.settings.highlightMatchedText,searchableTextCallback:this.settings.searchableTextCallback};this.listFilter?this.listFilter.updated(e):this.listFilter=new ge(e),this.addMarkup(),this.handleEvents()},get isFocused(){var t=document.activeElement,e=this.element[0],i=this.list;return!!(e.isEqualNode(t)||i&&i.length&&i[0].contains(t))},addMarkup:function(){this.element.addClass("autocomplete").attr({role:"combobox",autocomplete:"off"}),C.addAttributes(this.element,this,this.settings.attributes)},isLoading:function(){return this.element.hasClass("is-loading")&&this.element.hasClass("is-blocked")},openList:function(t,e){var i=this;if(!this.element.is("[disabled], [readonly]")&&!this.isLoading()){if(!this.element.hasClass("searchfield"))if(!1===this.element.triggerHandler("beforeopen.autocomplete",{elem:this.element,value:this.element.val()}))return;var n=this;this.settings.caseSensitive||(t=B.toLowerCase(t)),this.list=$("#autocomplete-list"),0===this.list.length&&(this.list=$('<ul id="autocomplete-list" aria-expanded="true"></ul>').appendTo("body")),C.addAttributes(this.list,this,this.settings.attributes,"list"),n.settings.attributes&&setTimeout((function(){i.list.find("li a").each((function(t){var e=$(this);C.addAttributes(e,n,n.settings.attributes,"list-option".concat(t))}))})),this.list[0].style.height="auto",this.list[0].style.width="".concat(this.element.outerWidth(),"px"),this.list.addClass("autocomplete"),this.list.empty(),this.settings.width&&(this.list[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px"));var s=$(this.element.attr("data-tmpl"));this.tmpl=$(s).length?$(s).text():"string"==typeof s?s:$(this.settings.template).length?$(this.settings.template).text():"string"==typeof this.settings.template?this.settings.template:'<li id="{{listItemId}}" data-index="{{index}}" {{#hasValue}}data-value="{{value}}"{{/hasValue}} role="listitem">\n <a href="#" tabindex="-1">\n   <span>{{{label}}}</span>\n </a>\n</li>';var a=this.listFilter.filter(e,t),r=[];!1!==a&&a.forEach((function(e,i){"string"==typeof e&&(e={label:e,value:e});var s=C.extend(!0,{},e);if(s=n.settings.resultIteratorCallback(s,i),n.settings.highlightMatchedText){var a={filterMode:n.settings.filterMode,caseSensitive:n.settings.caseSensitive,term:t};s.highlightTarget&&(a.alias=s.highlightTarget),n.settings.displayResultsCallback||(s=n.settings.highlightCallback(s,a))}r.push(s)})),this.currentDataSet=r,"function"!=typeof this.settings.displayResultsCallback?this.handleListResults(t,e,r):this.settings.displayResultsCallback(r,(function(){n.element.trigger("listopen",[r])}),t)}},handleListResults:function(t,e,i){var n=this;i.forEach((function(t){if(void 0!==fe){var e=fe.compile(n.tmpl,t);u.append(n.list,e,"*")}})),this.element.trigger("beforepopulated",[i]);var s={menuId:"autocomplete-list",ariaListbox:!0,mouseFocus:!1,trigger:"immediate",attachToBody:!0,autoFocus:!1,returnFocus:!1,triggerSelect:!1,placementOpts:{parent:this.element,callback:function(t){return!0===t.wasFlipped&&(n.list.add(n.element).addClass("is-ontop"),t.y+=1),t}}};if(this.previouslyOpened){var a=this.element.data("popupmenu");a&&a.position()}else this.element.addClass("is-open").popupmenu(s).one("close.autocomplete",(function(){n.closeList(!0)}));var r=n.list.find("li"),o=$(r[0]).find("span").outerWidth()+20;if(o>parseInt(this.element.outerWidth(),10)){for(var l=0;l<r.length;l++)r.width(o+"px");this.maxWidth=o}if(n.settings.autoSelectFirstItem&&n.list.children().filter(":not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)").first().addClass("is-selected"),this.noSelect=!0,this.element.trigger("populated",[i]).focus(),!this.previouslyOpened){n.list.on("touchend.".concat("autocomplete"," click.").concat("autocomplete"),"a",(function(t){n.select(t)})).on("focusout.".concat("autocomplete"),(function(){n.checkActiveElement()}));var c=n.list.find("a").on("focus.".concat("autocomplete"," touchend.").concat("autocomplete"),(function(){n.highlight($(this),c)}));if(this.settings.offset){var d=this.list.parent()[0];this.settings.offset.left&&(d.style.left="".concat(parseInt(d.style.left,10)+this.settings.offset.left,"px")),this.settings.offset.top&&(d.style.top="".concat(parseInt(d.style.top,10)+this.settings.offset.top,"px"))}}var h=C.getArrayFromList(document.querySelectorAll("#ac-is-arialive"));h&&h.forEach((function(t){t.parentNode.removeChild(t)})),u.append(n.list.parent(".popupmenu-wrapper"),'<span id="ac-is-arialive" aria-live="polite" class="audible">'.concat($.trim(this.list.find(">li:first-child").text()),"</span>"),"<div><span><a><small><img><svg><i><b><use><br><strong><em>"),this.noSelect=!0,this.previouslyOpened=!0,this.element.trigger("listopen",[i])},closeList:function(t){if(this.list)if(this.list.off(["click.".concat("autocomplete"),"keydown.".concat("autocomplete"),"touchend.".concat("autocomplete"),"focusout.".concat("autocomplete")].join(" ")),this.list.find("a").off("focus.".concat("autocomplete"," touchend.").concat("autocomplete")),this.element.trigger("listclose"),"function"!=typeof this.settings.clearResultsCallback){var e=this.element.data("popupmenu");e&&(t||e.close(),$("#autocomplete-list").parent(".popupmenu-wrapper").remove(),$("#autocomplete-list").remove(),this.element.add(this.list).removeClass("is-open is-ontop"),delete this.previouslyOpened)}else this.settings.clearResultsCallback()},listIsOpen:function(){return this.list instanceof $&&this.list.length&&this.list.is(":visible")},handleAutocompleteKeydown:function(t){if(this.isLoading())return t.preventDefault(),!1;if(!this.listIsOpen())return null;function e(t){t.removeClass("is-selected is-focused")}function i(t){t.addClass("is-selected").find("a").focus()}var n=this.list.find("li:not(.separator):not(.hidden):not(.heading):not(.group):not(.is-disabled)"),s=function(t){var e=t.filter(".is-selected");return 0===e.length&&(e=t.filter(".is-focused")),e}(n);return 40===t.keyCode&&this.listIsOpen()&&s.length&&(this.noSelect=!0,e(s),i(n.eq(n.index(s)+1)),t.preventDefault(),t.stopPropagation()),38===t.keyCode&&this.listIsOpen()&&s.length&&(this.noSelect=!0,e(s),i(n.eq(n.index(s)-1)),t.preventDefault(),t.stopPropagation()),9!==t.keyCode&&13!==t.keyCode||!this.listIsOpen()||(s.length?(t.stopPropagation(),t.preventDefault(),this.noSelect=!0,this.select(s)):this.closeList()),null},handleAutocompleteInput:function(t){var e=this;return e.isLoading()?(t.preventDefault(),!1):(this.getDataFromSource().done((function(t,i){e.currentDataSet=i,e.openList(t,i)})),null)},checkActiveElement:function(){var t=this;setTimeout((function(){var e=document.activeElement;t.listIsOpen()&&$.contains(t.list[0],e)||t.element.is(e)||t.element.trigger("safe-blur")}),0)},getDataFromSource:function(){var t=this;if(t.isLoading())return!1;var e,n=this.element,s=$.Deferred();function a(e,i,n){return t.lastTerm!==e?s.reject(e):(t.element.triggerHandler("complete"),t.element.trigger("requestend",[e,i]),!1===n?s.reject(e):s.resolve(h.stripTags(e),i))}return clearTimeout(this.loadingTimeout),this.loadingTimeout=setTimeout((function(){if(!t.isLoading()&&t.isFocused)if(""!==(e=n.val())){var r=i(t.settings.source);if(t.element.triggerHandler("start"),t.element.trigger("requeststart",[e]),t.lastTerm=e,"function"===r)t.settings.source(e,a,t.settings.sourceArguments);else if("object"===r){var o=$.isArray(t.settings.source)?t.settings.source:[t.settings.source];a(e,o,!0)}else if(t.settings.source)if("keyword"===t.settings.filterMode){var l=[],c=function(t){if(0===l.length)l=t;else for(var e=0;e<t.length;e++){for(var i=t[e],n=!1,s=0;s<l.length;s++)for(var a=l[s],r=0;r<Object.getOwnPropertyNames(a).length;r++){if(i[Object.getOwnPropertyNames(i)[r]]===a[Object.getOwnPropertyNames(a)[r]]){n=!0;break}}n||l.push(i)}},d=function(t){c(t),a(e,l,!0)},h=e.split(" ");""===h[h.length-1]&&h.splice(-1,1);for(var u=0;u<h.length;u++){var p=h[u];if(p.length>0){var g=t.settings.source.toString(),f=$.getJSON(g+p);u<h.length-1?f.done(c).fail(c):f.done(d).fail(d)}}}else{var m=t.settings.source.toString();$.getJSON(m+e).done((function(t){a(e,t,!0)})).fail((function(){a(e,[],!1)}))}else s.reject(e)}else t.element.data("popupmenu")&&t.element.data("popupmenu").close()}),t.settings.delay),s},resetFilters:function(){this.openList("",this.currentDataSet)},handleAutocompleteFocus:function(){this.noSelect?this.noSelect=!1:this.element.select()},highlight:function(t,e){var i=this.element.val(),n=t.text().trim();t.find(".display-value").length>0&&(n=t.find(".display-value").text().trim()),e&&e.length&&e.parent("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),this.noSelect=!0,this.element.val(n).focus(),i!==n&&this.element.triggerHandler("change")},select:function(t,e){var n,s,a={},r=!1;t instanceof $.Event?(r=!0,n=$(t.currentTarget)):n=t,n.is("li")&&(s=n,n=n.children("a"));var o=(s=n.parent("li")).attr("data-index"),l=s.attr("data-value");if(this.element.attr("aria-activedescendant",s.attr("id")),e&&e.length||(e=this.currentDataSet),o)a=e[parseInt(o,10)];else if(l)for(var c,d=0;d<e.length;d++)(c="object"===i(e[d])&&void 0!==e[d].value?e[d].value.toString():e[d].toString())===l&&("object"===i(e[d])&&(a=e[d]),a.value=c);return a.value&&0!==!a.value.length||(a.value=n.text().trim()),this.highlight(n),this.noSelect=!0,a.label=h.stripHTML(a.label),a.highlightTarget||(a.highlightTarget="label",a.index=parseInt(o,10),a.listItemId="ac-list-option"+a.index,a.hasValue=!0),this.element.trigger("selected",[n,a]),r&&t.preventDefault(),this.closeList(),this.element.focus(),a},handleAfterListOpen:function(){var t=this;return this.element.offset().left>this.list.offset().left&&this.list.width(this.list.width()+1),this.list.on("keydown.".concat("autocomplete"),(function(e){"Enter"===e.key&&t.handleAutocompleteKeydown(e)})),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t&&t.source&&(this.settings.source=t.source),this.teardown().init(),this},enable:function(){this.element.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0)},teardown:function(){var t=this.element.data("popupmenu");return t&&t.destroy(),this.element.off(["focus.".concat("autocomplete"),"focusout.".concat("autocomplete"),"input.".concat("autocomplete"),"keydown.".concat("autocomplete"),"listopen.".concat("autocomplete"),"requestend.".concat("autocomplete"),"resetfilter.".concat("autocomplete"),"updated.".concat("autocomplete")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"autocomplete")},handleEvents:function(){var t=this;this.element.on("updated.".concat("autocomplete"),(function(){t.updated()})).on("keydown.".concat("autocomplete"),(function(e){t.handleAutocompleteKeydown(e)})).on("input.".concat("autocomplete"),(function(e){t.handleAutocompleteInput(e)})).on("focus.".concat("autocomplete"),(function(){t.handleAutocompleteFocus()})).on("focusout.".concat("autocomplete"),(function(){t.checkActiveElement()})).on("listopen.".concat("autocomplete"),(function(){t.handleAfterListOpen()})).on("resetfilter.".concat("autocomplete"),(function(){t.resetFilters()}))}},$.fn.autocomplete=function(t){return this.each((function(){var e=$.data(this,"autocomplete");if("string"==typeof e){var i="".concat(e),n=C.extend({},t,{source:i||t.source});e=$.data(this,"autocomplete",new ve(this,n))}else e?e.updated(t):e=$.data(this,"autocomplete",new ve(this,t))}))};var be=[!1,"mobile",!0],ye={resultsCallback:void 0,allResultsCallback:void 0,showAllResults:!0,showGoButton:!1,goButtonCopy:void 0,goButtonAction:void 0,categories:void 0,categoryMultiselect:!1,showCategoryText:!1,source:void 0,template:void 0,clearable:!1,collapsible:be[0],collapseSize:void 0};function we(t,e){this.element=$(t),this.toolbarParent&&!this.isContainedByFlexToolbar&&void 0!==e&&(void 0===e.clearable&&(e.clearable=!0),void 0===e.collapsible&&(e.collapsible=!0)),this.settings=C.mergeSettings(t,e,ye),this.init()}we.prototype={get toolbarParent(){var t=this.element.parents(".toolbar"),e=this.element.parents(".flex-toolbar");if(!(t.add(e).length<1))return e.length>0?e.first()[0]:t.first()[0]},get buttonsetElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".buttonset")},get titleElem(){if(this.toolbarParent)return this.toolbarParent.querySelector(".title")},get containmentParent(){var t=this.element.closest(".module-tabs");return t.length?t.first()[0]:this.toolbarParent},get input(){return this.element[0]},get categoryButton(){return this.wrapper.find(".searchfield-category-button")},get isCollapsible(){return!1!==this.settings.collapsible},get isCurrentlyCollapsible(){return!0===this.settings.collapsible||"mobile"===this.settings.collapsible&&this.shouldBeFullWidth()},get isContainedByFlexToolbar(){return!!this.containmentParent&&this.containmentParent.className.indexOf("flex-toolbar")>-1},get toolbarFlexItem(){var t;return this.isContainedByFlexToolbar&&(t=$(this.element).data("toolbarflexitem")),t},get autocompleteAPI(){return $(this.element).data("autocomplete")},get isContextSearch(){return this.wrapper[0].className.indexOf("context")>-1},init:function(){this.coerceBooleanSettings(),this.build(),this.setupEvents()},build:function(){this.id||(this.id=C.uniqueId(this.element,"searchfield")),this.label=this.element.prev("label, .label"),this.inlineLabel=this.element.closest("label"),this.isInlineLabel=this.element.parent().is(".inline");var t=this.element.attr("data-autocomplete");t&&"source"!==t&&(this.settings.source=t,this.element.removeAttr("data-autocomplete"),$.removeData(this.element,"autocomplete")),this.settings.source&&(this.autocomplete=this.element.data("autocomplete"),this.autocomplete?this.autocomplete.updated(this.settings):(this.element.autocomplete(this.settings),this.autocomplete=this.element.data("autocomplete"))),this.element.attr("autocomplete","off");var e=this.element.attr("placeholder")||this.element.prev("label, .label").text().trim();e&&""!==e||(e=B.translate("Keyword")),this.element.attr({"aria-label":e}),this.wrapper=this.element.parent(".searchfield-wrapper"),this.wrapper&&this.wrapper.length||(this.isInlineLabel?this.wrapper=this.inlineLabel.addClass("searchfield-wrapper"):this.wrapper=this.element.wrap('<span class="searchfield-wrapper"></span>').parent()),this.checkContents();var i="remove";this.settings.collapsible&&this.settings.collapseSize&&(i="add"),this.wrapper[0].classList[i]("has-custom-collapse-size"),this.toolbarParent&&(this.label.prependTo(this.wrapper),this.setInitalWidth());for(var n,s=["context","alternate"],a=0;a<s.length;a++)this.element.hasClass(s[a])&&(n=s[a],this.wrapper.addClass(n),this.element.removeClass(n));!0===this.settings.collapsibleOnMobile&&(this.settings.collapsible=be[1]),this.wrapper[0].classList[!0==!this.settings.collapsible?"add":"remove"]("non-collapsible"),this.wrapper[0].classList[this.toolbarParent?"add":"remove"]("toolbar-searchfield-wrapper"),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),this.toolbarParent&&!this.isContainedByFlexToolbar&&this.element.add(this.wrapper).addClass("no-transition no-animation");var r=this.wrapper.find(".icon:not(.icon-dropdown)");if(r&&r.length||(r=$.createIconElement("search")),r[this.wrapper.hasClass("context")||this.wrapper.hasClass("has-categories")?"insertBefore":"insertAfter"](this.element).icon(),this.hasCategories()){this.wrapper.addClass("has-categories"),this.categoryButton.length||$('<button type="button" class="btn searchfield-category-button"></button>').insertBefore(this.element),r.appendTo(this.categoryButton),r=this.categoryButton,this.settings.showCategoryText&&this.wrapper.addClass("show-category");var o=r.find(".icon-dropdown");if(o.length||(o=$.createIconElement({classes:"icon-dropdown",icon:"dropdown"}).icon()),o.appendTo(r),this.categoryButton.data("popupmenu"))this.setCategories(this.settings.categories);else{this.list=this.wrapper.find("ul.popupmenu"),this.list&&this.list.length||(this.list=$('<ul class="popupmenu"></ul>'));var l=this.settings.categoryMultiselect?"is-multiselectable":"is-selectable";this.list.addClass(l);var c="is-selectable";this.settings.categoryMultiselect||(c="is-multiselectable"),this.list.removeClass(c),this.setCategories(this.settings.categories),this.list.insertAfter(this.element);var d=this;this.categoryButton.popupmenu({menu:this.list,offset:{y:10},returnFocus:function(){d.isFocused&&d.element.focus()}})}this.setCategoryButtonText()}this.isContainedByFlexToolbar?(this.collapseButton&&this.collapseButton.length||(this.collapseButton=$('\n          <button class="btn-secondary collapse-button" type="button">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n              <use href="#icon-exit-fullview"></use>\n            </svg>\n            <span class="audible">'.concat(B.translate("Collapse"),"</span>\n          </button>\n        "))),this.wrapper[0].classList.add("has-collapse-button"),this.element.after(this.collapseButton)):this.wrapper[0].classList.remove("has-collapse-button");var h=this.wrapper.next(".go-button");h.length||(h=this.wrapper.find(".go-button")),h.length&&(this.settings.showGoButton=!0,this.goButton=h,this.element.after(this.goButton)),this.settings.showGoButton?(this.goButton&&this.goButton.length||(this.goButton=$('\n          <button class="btn-secondary go-button">\n            <span>'.concat(this.settings.goButtonCopy||B.translate("Go",{showBrackets:!1}),"</span>\n          </button>\n        "))),this.goButton[0].setAttribute("id",C.uniqueId(this.goButton,"searchfield-go-button-")),this.wrapper.addClass("has-go-button"),this.element.after(this.goButton)):this.wrapper.removeClass("has-go-button"),this.settings.clearable&&this.makeClearable();var u=this,g=new U({duration:1,updateCallback:function(){},timeoutCallback:function(){u.calculateSearchfieldWidth()}});return G.register(g),(!1===this.settings.collapsible||"mobile"===this.settings.collapsible&&p.isAbove("phone-to-tablet"))&&this.expand(!0),this},simpleAdjustOnBreakpoint:function(){this.shouldBeFullWidth()?this.isFocused||this.wrapper[0].classList.remove("is-open"):this.wrapper[0].classList.add("is-open")},adjustOnBreakpoint:function(){if(this.shouldBeFullWidth()){if(this.wrapper.removeAttr("style"),this.input.removeAttribute("style"),this.isFocused){if(this.appendToParent(),this.calculateOpenWidth(),this.setOpenWidth(),this.isExpanded)return;return void this.expand(!0)}return this.isCurrentlyCollapsible&&this.isExpanded&&this.collapse(),this.isContainedByFlexToolbar&&this.wrapper[0].classList.remove("is-open"),void this.setInitalWidth()}this.appendToButtonset(),this.isFocused||"mobile"===this.settings.collapsible?this.isExpanded||this.expand(!0):(this.isExpanded&&this.collapse(),this.setInitalWidth())},saveFocus:function(){this.isFocused&&(this.focusElem=document.activeElement)},restoreFocus:function(){if(this.focusElem){var t=this,e=new U({duration:1,updateCallback:function(){},timeoutCallback:function(){t.focusElem&&(t.focusElem.focus(),delete t.focusElem)}});G.register(e)}},appendToParent:function(){this.containmentParent&&!this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper=this.wrapper.prev(),$(this.containmentParent).find(".buttonset").prepend(this.wrapper),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},appendToButtonset:function(){this.containmentParent&&this.wrapper.parent().is($(this.containmentParent))&&(this.isContainedByFlexToolbar||(this.saveFocus(),this.elemBeforeWrapper instanceof $&&this.elemBeforeWrapper.length?(this.wrapper.insertAfter(this.elemBeforeWrapper),this.elemBeforeWrapper=null):this.wrapper.prependTo($(this.buttonsetElem)),$(this.toolbarParent).triggerHandler("scrollup"),C.fixSVGIcons(this.wrapper),this.restoreFocus()))},shouldBeFullWidth:function(){var t=this.wrapper.closest(".header"),e=!1;return t.length&&(e=t.width()<p.phone),e||p.isBelow("phone-to-tablet")},shouldExpandOnMobile:function(){return!0!==this.settings.collapsible&&("mobile"===this.settings.collapsible||this.shouldBeFullWidth())},coerceBooleanSettings:function(){this.settings=C.coerceSettingsToBoolean(this.settings,["showAllResults","categoryMultiselect","showCategoryText","clearable"])},hasCategories:function(){return this.settings.categories&&$.isArray(this.settings.categories)&&this.settings.categories.length>0},hasGoButton:function(){return this.settings.showGoButton&&this.goButton&&this.goButton.length},setupEvents:function(){var t=this,e=this;return e.element.on("updated.".concat(this.id),(function(t,i){e.updated(i)})).on("focus.".concat(this.id),(function(t){e.handleFocus(t)})).on("blur.".concat(this.id),(function(t){e.isContainedByFlexToolbar&&e.handleSafeBlur(t)})).on("click.".concat(this.id),(function(t){e.handleClick(t)})).on("keydown.".concat(this.id),(function(t){e.handleKeydown(t)})).on("beforeopen.".concat(this.id),(function(t,i){e.handlePopupBeforeOpen(t,i)})).on("safe-blur.".concat(this.id),(function(){e.handleSafeBlur()})).on("listclose.".concat(this.id),(function(){e.handleSafeBlur()})).on("input.".concat(this.id),(function(){e.checkContents()})),e.wrapper.on("mouseenter.".concat(this.id),(function(){$(this).addClass("is-hovered")})).on("mouseleave.".concat(this.id),(function(){$(this).removeClass("is-hovered")})),this.hasCategories()&&this.categoryButton.on("selected.".concat(this.id),(function(t,i){e.handleCategorySelected(t,i)})).on("focus.".concat(this.id),(function(t){e.handleCategoryFocus(t)})).on("blur.".concat(this.id),(function(){e.handleSafeBlur()})).on("close.".concat(this.id),(function(){e.handleSafeBlur()})).on("beforeopen.".concat(this.id),(function(t,i){e.handlePopupBeforeOpen(t,i)})),e.hasGoButton()&&e.goButton.on("click.".concat(this.id),(function(t){return e.handleGoButtonClick(t)})).on("click.".concat(this.id),(function(t){return e.handleGoButtonFocus(t)})).on("blur.".concat(this.id),(function(){return e.handleSafeBlur()})),this.isCollapsible?(this.wrapper.on("focusin.".concat(this.id),(function(t){e.handleFocus(t)})).on("focusout.".concat(this.id),(function(t){e.handleBlur(t)})).on("keydown.".concat(this.id),(function(t){e.handleKeydown(t)})).on("collapse.".concat(this.id),(function(){e.collapse()})),$("body").on("resize.".concat(this.id),(function(){e.adjustOnBreakpoint()})),e.adjustOnBreakpoint()):($("body").on("resize.".concat(this.id),(function(){e.simpleAdjustOnBreakpoint()})),e.simpleAdjustOnBreakpoint()),this.collapseButton&&this.collapseButton.length&&this.collapseButton.on("keydown.".concat(this.id),(function(t){e.collapseResponsive(t)})).on("click.".concat(this.id),(function(t){e.collapseResponsive(t)})).on("blur.".concat(this.id),(function(){return e.handleSafeBlur()})),this.toolbarParent&&$(this.toolbarParent).on("navigate.".concat(this.id),(function(){!e.isFocused&&e.isCurrentlyCollapsible&&e.collapse()})).on("rendered.".concat(this.id),(function(){e.element.removeClass("no-transition no-animation"),e.wrapper.removeClass("no-transition no-animation")})),e.element.on("beforepopulated.".concat(this.id),(function(t,i){i.length>0?e.settings.showAllResults&&e.addMoreLink():e.addNoneLink()})),e.settings.clearable&&(e.element.on("cleared.".concat(this.id),(function(){e.autocomplete&&e.autocomplete.closeList()})),e.xButton.on("blur.".concat(this.id),(function(t){e.handleSafeBlur(t)}))),e.element.on("listopen.".concat(this.id),(function(){var i=$("#autocomplete-list");e.wrapper.addClass("popup-is-open"),e.element.on("selected.".concat(t.id),(function(t,i,n){if(i.hasClass("more-results")){var s=e.settings.allResultsCallback;s&&"function"==typeof s&&s(n)}})),i.find(".more-results, .no-results").on("focus.".concat(t.id),(function(){var t=$(this);i.find("li").removeClass("is-selected"),t.parent("li").addClass("is-selected"),e.element.val("")}))})).on("listclose.".concat(this.id),(function(){var i=$("#autocomplete-list");e.element.off("selected.".concat(t.id)),i.off("focus.".concat(t.id))})),this},setAsActive:function(t,e){var i=this;if(t||!this.wrapper.hasClass("active")){this.addDocumentDeactivationEvents();var n=["has-focus","active"];(this.isCurrentlyCollapsible||this.isContainedByFlexToolbar)&&(this.expand(!0),this.isContainedByFlexToolbar&&n.push("is-open")),n.forEach((function(t){i.wrapper[0].classList.add(t)})),this.toolbarParent&&this.toolbarParent.classList.add("searchfield-active"),this.isExpanded||!0===e&&this.element.focus()}},get isFocused(){var t=document.activeElement;if(this.wrapper[0].contains(t))return!0;if(this.autocomplete){var e=this.autocomplete.list;if(e&&e[0].contains(t))return!0}if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)return!0;return!!(this.xButton&&this.xButton.length&&this.xButton.has(t).length)},hasFocus:function(){return F("isFocused","hasFocus"),this.isFocused},handleFocus:function(){this.setAsActive(!0)},handleBlur:function(){this.handleSafeBlur()},handleSafeBlur:function(){var t=this;this.blurTimer&&this.blurTimer.destroy(!0),this.blurTimer=new U({duration:1,updateCallback:function(){},timeoutCallback:function(){t.isFocused||(t.wrapper[0].classList.remove("has-focus","active"),t.removeDocumentDeactivationEvents(),t.clearResponsiveState(),t.isCurrentlyCollapsible?t.collapse():t.isContainedByFlexToolbar&&t.wrapper[0].classList.remove("is-open"))}}),G.register(this.blurTimer)},clearResponsiveState:function(){this.toolbarParent&&this.toolbarParent.classList.remove("searchfield-active")},handleClick:function(){this.setAsActive()},addDocumentDeactivationEvents:function(){if(!0!==this.hasDeactivationEvents){var t=this;$(document).on("click.".concat(this.id),(function(e){t.handleOutsideClick(e)})).on("keydown.".concat(this.id),(function(e){t.handleOutsideKeydown(e)})),this.hasDeactivationEvents=!0}},removeDocumentDeactivationEvents:function(){$(document).off("click.".concat(this.id," keydown.").concat(this.id)),this.hasDeactivationEvents=!1},handleOutsideClick:function(t){var e=t.target;this.isSearchfieldElement(e)||this.handleSafeBlur()},handleKeydown:function(t){var e=t.which,i=t.key;if(27===e&&m.browser.isIE11()&&t.preventDefault(),t.ctrlKey&&8===e&&this.element.val(""),9===e&&this.handleSafeBlur(),this.isContainedByFlexToolbar){["ArrowUp","Up","ArrowDown","Down"].indexOf(i)>-1&&this.collapse()}},handleOutsideKeydown:function(t){var e=t.which,i=t.target;9!==e||this.isSearchfieldElement(i)||this.handleSafeBlur()},handlePopupBeforeOpen:function(t,e){if(this.isCollapsible&&(this.isExpanding||!this.isExpanded)||!e)return!1;var i=this.wrapper.hasClass("context")?"addClass":"removeClass",n=this.wrapper.hasClass("alternate")?"addClass":"removeClass";return e[i]("context"),e[n]("alternate"),!!this.isExpanded||(this.categoryButton.focus(),!1)},handleGoButtonClick:function(t){var e=this.settings.goButtonAction;if("function"==typeof e){var i,n=this.element.val();return this.hasCategories()&&(i=this.getCategoryData()),e(t,n,i)}},handleGoButtonFocus:function(){this.setAsActive(!0)},setCategoryButtonText:function(t){if(this.settings.showCategoryText&&this.categoryButton.length){var e="",i=this.wrapper.find(".btn"),n=i.find("span");if(n&&n.length||(n=$('<span class="category"></span>').insertAfter(i.find(".icon").first())),n.empty(),"string"==typeof t&&t.length)n.text(t.trim());else{var s=this.getSelectedCategories();s.length&&(e=s.length>1?"".concat(s.length," ").concat(B.translate("Selected")):s.text().trim(),n.text(e))}}},isSearchfieldElement:function(t){if($.contains(this.wrapper[0],t))return!0;if(this.categoryButton&&this.categoryButton.length&&this.categoryButton.data("popupmenu").menu.has(t).length)return!0;return!1},getFillSize:function(t,e){var i,n,s;function a(t){if(!t)return 0;if(!isNaN(parseInt(t,10)))return parseInt(t,10);if(t instanceof jQuery){if(!t.length)return 0;t.is(".title")&&(t=t.next(".buttonset")),t=t[0]}return t}function r(t,e){if(!isNaN(t))return null==t?0:t;e&&"string"==typeof e||(e="left");var i,n=["left","right"];return-1===$.inArray(e,n)&&(e=n[0]),(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t.getBoundingClientRect()),i[e]}if(t=a(t),e=a(e),i=r(t),n=r(e,(s="left",(t===e||$(e).length&&$(e).is(".buttonset"))&&(s="right"),s)),!i&&!n)return 280;var o=n-i;return o<=280?280:o>=450?450:o},setClosedWidth:function(){return this.setInitalWidth()},setOpenWidth:function(){var t=0;if(this.wrapper[0]&&(this.wrapper[0].style.width=this.openWidth),this.hasCategories()){var e=window.getComputedStyle(this.categoryButton[0]);t+=this.categoryButton.width()+(parseInt(e.paddingLeft,10)+parseInt(e.paddingRight,10))+2*parseInt(e.borderLeftWidth,10)}if(this.hasGoButton()){var i=window.getComputedStyle(this.goButton[0]);t+=this.goButton.width()+(parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10))+2*parseInt(i.borderLeftWidth,10)}t>0&&(this.input.style.width="calc(100% - ".concat(t,"px)")),delete this.openWidth},calculateOpenWidth:function(){var t,e=this.element.parents(".toolbar").children(".buttonset"),i=this.wrapper.next();if(e.length){if(i.is(".title")&&(i=e),this.shouldBeFullWidth())return t="100%",$(this.toolbarParent).closest(".header").length&&(t="calc(100% - 40px)"),$(this.toolbarParent).closest(".tab-container.module-tabs").length&&(t="calc(100% - 1px)"),void(this.openWidth=t);var n=e.offset().left+10,s=i;s.length||(s=e.offset().left+10+e.outerWidth(!0)),t=this.getFillSize(n,s),this.openWidth="".concat(t-6,"px")}},calculateSearchfieldWidth:function(){var t,e="100%",i=0;this.element[0].getAttribute("style")&&this.element[0].removeAttribute("style");var n=window.getComputedStyle(this.element[0]);n.width&&!this.isContextSearch&&(e=n.width),this.hasCategories()&&(i+=this.categoryButton.outerWidth(!0)),this.hasGoButton()&&(i+=this.goButton.outerWidth(!0)),i>0&&(t="calc(".concat(e," - ").concat(i,"px)")),t&&(this.element[0].style.width=t)},handleCategorySelected:function(t,e){this.element.trigger("selected",[e]),this.settings.showCategoryText&&(this.setCategoryButtonText(t,e.text().trim()),this.calculateSearchfieldWidth(),this.settings.categoryMultiselect||this.setAsActive(!0,!0))},handleCategoryFocus:function(){this.saveFocus(),this.setAsActive(!0)},getCategories:function(){return this.list.children("li:not(.separator)")},getSelectedCategories:function(){return this.getCategories().filter(".is-checked")},getCategoryData:function(t){var e=this.getCategories(),i=[];return e.each((function(){var e=this.classList.contains("is-checked");if(!0!==t||!1!==e){var n={name:this.innerText,checked:e};this.id&&(n.id=this.id);var s=this.getAttribute("data-value");void 0!==s&&(n.value=s),i.push(n)}})),i},updateCategories:function(t){this.settings.categories=t,this.setCategories(this.settings.categories)},setCategories:function(t){this.list.empty();var e=this,n=["string","number"],s=!1;t.forEach((function(t){if("string"==typeof t&&(t={name:t}),t.name){var a="";"string"==typeof t.id&&t.id.length&&(a=' id="'.concat(t.id,'"'));var r="";n.indexOf(i(t.value))>-1&&(r=' data-value="'.concat(t.value,'"'));var o="";!0===t.checked&&!0!==s&&(o=' class="is-checked"',e.settings.categoryMultiselect||(s=!0)),e.list.append("<li".concat(o).concat(a).concat(r,'><a href="#">').concat(t.name,"</a></li>"))}}));var a=this.categoryButton.data("popupmenu");a&&"function"==typeof a.updated&&a.updated()},expand:function(t){var e=this,i=this;return new ae((function(n){if(i.isExpanded||i.isExpanding||i.isCollapsing)n();else{var s=!i.shouldBeFullWidth();i.isExpanding=!0,s||i.appendToParent(),i.wrapper.removeAttr("style"),i.input.removeAttribute("style");var a=0;i.buttonsetElem&&(a=parseInt(window.getComputedStyle(i.buttonsetElem).width,10));var r={buttonset:a+280};e.isContainedByFlexToolbar&&!p.isAbove("phone-to-tablet")||e.wrapper[0].classList.add("is-open"),e.calculateOpenWidth(),e.setOpenWidth(),(!t||"ios"===m.os.name||i.isFocused&&document.activeElement!==i.input)&&(i.focusElem&&(i.focusElem=i.input),i.input.focus());var o=[];r&&o.push(r),i.element.trigger("beforeexpand"),$(i.toolbarParent).triggerHandler("recalculate-buttons",o);var l=new U({duration:10,updateCallback:function(){},timeoutCallback:function(){$(i.toolbarParent).triggerHandler("recalculate-buttons",o),i.element.trigger("expanded"),delete i.isExpanding,i.isExpanded=!0,!i.isCurrentlyCollapsible||i.isFocused||i.focusElem||i.handleSafeBlur()}});G.register(l)}}))},collapse:function(){var t=this,e=this;return new ae((function(i){if(e.isExpanded||!e.isExpanding||e.isCollapsing){e.isCollapsing=!0,e.wrapper.removeAttr("style"),e.appendToButtonset(),e.checkContents(),e.toolbarParent&&e.setInitalWidth(),e.clearResponsiveState(),e.wrapper[0].classList.remove("active","is-open"),m.browser.isIE11&&e.wrapper[0].classList.remove("is-open"),!t.isContainedByFlexToolbar&&t.isFocused||e.wrapper[0].classList.remove("has-focus"),e.categoryButton&&e.categoryButton.length&&e.categoryButton.data("popupmenu").close(!1,!0),e.element.trigger("beforecollapse"),delete e.isExpanded,delete e.isExpanding;var n=new U({duration:10,updateCallback:function(){},timeoutCallback:function(){delete e.isCollapsing,$(e.toolbarParent).triggerHandler("recalculate-buttons"),e.element.trigger("collapsed"),i()}});G.register(n)}else i()}))},collapseResponsive:function(t){if(this.previouslyCollapsedByKey&&"click"===t.type)delete this.previouslyCollapsedByKey;else{var e=this,i=1;t&&!t.key&&(i=0,this.toolbarFlexItem&&this.toolbarFlexItem.focused&&(i=1)),"keydown"===t.type&&(this.previouslyCollapsedByKey=!0),this.collapse().then((function(){e.wrapper.trigger("collapsed-responsive",[i])}))}},get hasText(){return""!==(this.input.value?this.input.value.trim():"")},checkContents:function(){return this.wrapper[0].classList[this.hasText?"add":"remove"]("has-text")},setInitalWidth:function(){var t;this.settings.collapsible&&!this.shouldBeFullWidth()&&this.hasText&&(this.settings.collapseSize&&(t="function"==typeof this.settings.collapseSize?this.settings.collapseSize(this):parseInt(this.settings.collapseSize,10)),isNaN(t)?this.wrapper[0]&&(this.wrapper[0].style.width=""):this.wrapper[0]&&(this.wrapper[0].style.width="".concat(t,"px")))},addMoreLink:function(){var t=$("#autocomplete-list"),e=this.element.val();if(!($(".more-results",t).length>0)){var i=$('<li class="separator" role="presentation"></li>').appendTo(t),n=$('<li role="presentation"></li>').appendTo(t);this.moreLink=$('<a href="#" class="more-results" tabindex="-1" role="menuitem"></a>').html("<span>".concat(B.translate("AllResults"),' "').concat(h.ensureAlphaNumericWithSpaces(e),'"</span>')).appendTo(n),this.autocomplete.maxWidth&&i.width("".concat(this.autocomplete.maxWidth,"px"))}},addNoneLink:function(){var t=$("#autocomplete-list");if(!($(".no-results",t).length>0)){var e=$('<li role="presentation" class="is-placeholder"></li>').appendTo(t);this.noneLink=$('<a href="#" class="no-results" disabled="disabled" tabindex="-1" role="menuitem" aria-disabled="true"></a>').html("<span>".concat(B.translate("NoResults"),"</span>")).appendTo(e)}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings),Object.prototype.hasOwnProperty.call(t,"collapseSize")&&void 0===t.collapseSize&&(this.settings.collapseSize=t.collapseSize)),this.teardown().init()},disable:function(){this.wrapper.addClass("is-disabled"),this.element.prop("disabled",!0)},enable:function(){this.wrapper.removeClass("is-disabled"),this.element.prop("disabled",!1)},teardown:function(){return this.element.off(["updated.".concat(this.id),"focus.".concat(this.id),"blur.".concat(this.id),"click.".concat(this.id),"keydown.".concat(this.id),"beforeopen.".concat(this.id),"input.".concat(this.id),"listopen.".concat(this.id),"listclose.".concat(this.id),"safe-blur.".concat(this.id),"selected.".concat(this.id),"populated.".concat(this.id),"cleared.".concat(this.id)].join(" ")),this.wrapper.off(["mouseenter.".concat(this.id),"mouseleave.".concat(this.id),"focusin.".concat(this.id),"focusout.".concat(this.id),"keydown.".concat(this.id),"collapse.".concat(this.id)].join(" ")),this.toolbarParent&&$(this.toolbarParent).off("navigate.toolbarsearchfield"),this.goButton&&this.goButton.length&&(this.goButton.off("click.".concat(this.id," blur.").concat(this.id)).remove(),delete this.goButton),this.categoryButton&&this.categoryButton.length&&(this.categoryButton.off().remove(),delete this.categoryButton),this.collapseButton&&this.collapseButton.length&&(this.collapseButton.off().remove(),delete this.collapseButton,delete this.previouslyCollapsedByKey),this.removeDocumentDeactivationEvents(),$("body").off("resize.".concat(this.id)),this.autocomplete&&this.autocomplete.destroy(),this.wrapper.hasClass("context")&&this.element.addClass("context"),this.element.next(".icon").remove(),this.element.parent().hasClass("searchfield-wrapper")&&(this.element.parent().find("ul").remove(),this.element.parent().find(".icon").remove()),this.xButton&&this.xButton.length&&(this.xButton.off("blur.".concat(this.id)),this.xButton.remove()),this},makeClearable:function(){this.element.clearable(),this.wrapper.addClass("has-close-icon-button"),this.xButton=this.wrapper.children(".icon.close"),this.xButton[0].setAttribute("tabindex","-1"),C.addAttributes(this.xButton,this,this.settings.attributes,"btn-close",!0)},clear:function(){this.xButton&&this.xButton.click()},destroy:function(){this.teardown(),$.removeData(this.element[0],"searchfield")}},$.fn.searchfield=function(t){return this.each((function(){var e=$.data(this,"searchfield");e?e.updated(t):e=$.data(this,"searchfield",new we(this,t))}))};var xe={breakpoint:"phone-to-tablet",dismissOnClickMobile:!1,filterable:!1,filterMode:"contains",openOnLarge:!1,triggers:[".application-menu-trigger"],onExpandSwitcher:null,onCollapseSwitcher:null};function Ce(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,xe),this.init()}Ce.prototype={get searchfieldAPI(){if(this.searchfield&&this.searchfield.length)return this.searchfield.data("searchfield")},init:function(){this.setup().handleEvents()},setup:function(){this.hasTrigger=!1,this.isAnimating=!1,this.element.find(".application-menu-footer").length&&this.element.addClass("has-menu-footer"),this.hasTriggers()||(this.triggers=$()),this.menu=this.element;var t=this.element.attr("data-open-on-large");this.settings.openOnLarge=void 0!==t?"true"===t:this.settings.openOnLarge;var e=this.element.attr("data-breakpoint");this.settings.breakpoint=void 0!==p[e]?e:this.settings.breakpoint,this.modifyTriggers(this.settings.triggers,!1,!0),this.scrollTarget=this.menu.parents(".header");var i=this.menu.prevAll(".masthead"),n=this.menu.prevAll(".module-tabs");i.length>0&&(this.scrollTarget=i,this.menu.addClass("short")),n.length>0&&(this.scrollTarget=n),this.element.find(".application-menu-switcher-panel .accordion").accordion(),this.accordion=this.menu.find(".accordion").last(),this.accordion.addClass("panel").addClass("inverse");var s=this.accordion.data("accordion");if(s||(this.accordion.accordion(),s=this.accordion.data("accordion")),this.accordionAPI=s,this.searchfield=this.element.find(".searchfield, .searchfield-wrapper"),this.settings.filterable&&"function"==typeof $.fn.searchfield){this.searchfield.length?this.searchfield.is(".searchfield-wrapper")&&(this.searchfield=this.searchfield.children(".searchfield")):this.searchfield=$('<input id="application-menu-searchfield" class="searchfield" placeholder="Search" />').prependTo(this.element),this.element.addClass("has-searchfield");var a=this;this.searchfield.searchfield({clearable:!0,filterMode:this.settings.filterMode,source:function(t,e,i){e(t,a.accordion.data("accordion").toData(!0,!0),i)},searchableTextCallback:function(t){return t.text||t.contentText||""},resultIteratorCallback:function(t){return t.highlightTarget="text",t},clearResultsCallback:function(){a.searchfieldAPI&&!a.searchfieldAPI.isFocused&&a.accordionAPI.unfilter()},displayResultsCallback:function(t,e,i){return a.filterResultsCallback(t,e,i)}}),this.searchfield.on("cleared.".concat("applicationmenu"),(function(){a.accordionAPI.unfilter()}))}this.isOpen()?this.openMenu(!1,!1,!0):this.adjustHeight();var r=this.element.find(".application-menu-switcher-trigger");r.length>0&&(this.switcherTrigger=r,this.switcherPanel=r.next(".expandable-area"),this.switcherPanel.data("expandablearea")||this.switcherPanel.expandablearea({trigger:r}));return this},getAdjacentContainerElement:function(){var t=this.element.next(".page-container");return t.length||(t=$("body")),t},handleTriggerEvents:function(){var t=this;this.triggers.length&&this.triggers.off("click.applicationmenu").on("click.applicationmenu",(function(e){return!$(e.currentTarget).find(".icon.app-header").hasClass("go-back")&&(!t.isAnimating&&(t.menu.hasClass("is-open")?t.closeMenu(!0):t.openMenu(void 0,!0),!0))})),$(document).on("keydown.applicationmenu",(function(e){t.handleKeyDown(e)}))},handleKeyDown:function(t){return!(121===t.which&&!t.shiftKey)||(t.preventDefault(),this.isOpen()?(this.closeMenu(!0),this.triggers.length&&this.triggers.eq(0).focus()):this.openMenu(),!1)},notify:function(t,e){if(t&&void 0!==t&&(t instanceof HTMLElement&&(t=$(t)),t.is("a"))){var i=t.find(".tag");if(e&&void 0!==e&&0!==parseInt(e,10))return i.length||(i=$('<span class="tag"></span>').appendTo(t)),i.text(e.toString()),i;i.length&&i.remove()}},adjustHeight:function(){var t=this.scrollTarget.is(".is-sticky"),e=this.scrollTarget.outerHeight(!0)-(t?0:$(window).scrollTop());this.scrollTarget.prev().is(".masthead")&&(e+=this.scrollTarget.prev().outerHeight(!0)),this.menu[0].style.height=e>0?"calc(100% - ".concat(e,"px)"):"100%"},toggleScrollClass:function(){if("ie"===m.browser.name&&"11"===m.browser.version){var t=this.element[0];t&&t.classList.contains("has-menu-footer")&&(t.scrollHeight>t.clientHeight?t.classList.add("has-scrollbar"):t.classList.remove("has-scrollbar"))}},isLargerThanBreakpoint:function(){return p.isAbove(this.settings.breakpoint)},isOpen:function(){return this.menu[0].classList.contains("is-open")},testWidth:function(){if(this.isOpen()){if(p.isAbove(this.settings.breakpoint))return void this.element[0].classList.remove("show-shadow");if(this.element[0].classList.add("show-shadow"),this.isAnimating)return;this.userOpened||this.closeMenu()}else p.isBelow(this.settings.breakpoint)||this.userClosed||!this.settings.openOnLarge||this.isAnimating||this.openMenu(!0)},openMenu:function(t,e,i){if(!0!==this.isAnimating){var n=this,s=$.fn.transitonEndName;if(i||(this.isAnimating=!0),this.adjustHeight(),this.triggers.each((function(){var t=$(this);t.attr({"aria-expanded":!0}),(t.parents(".header").length>0||t.parents(".masthead").length>0)&&(t.find(".icon.app-header").removeClass("go-back"),t.trigger("icon-change"))})),i||(this.menu.off("".concat(s,".applicationmenu")),this.menu[0].style.display="",this.menu[0].offsetHeight,this.menu.addClass("is-open"),m.features.touch&&$("body").addClass("is-open-touch")),p.isBelow(this.settings.breakpoint)&&this.menu.addClass("show-shadow"),t&&!0===t||this.menu.find(".is-selected > a").focus(),"ios"===m.os.name)this.getAdjacentContainerElement().addClass("ios-click-target");i?a():(this.menu.one("".concat(s,".applicationmenu"),a),this.timeout=setTimeout(a,300)),setTimeout((function(){$(document).on("click.applicationmenu",(function(t){$(t.target).parents(".application-menu").length<1&&!n.isLargerThanBreakpoint()&&n.closeMenu(!0)}))}),0)}function a(){null!==n.timeout&&(clearTimeout(n.timeout),n.timeout=null),e&&(n.userOpened=!0,n.userClosed=void 0),i||(n.isAnimating=!1,n.element.trigger("applicationmenuopen"),$("body").triggerHandler("resize")),n.toggleScrollClass(),n.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}},closeMenu:function(t){if(!0!==this.isAnimating){var e=this,i=$.fn.transitionEndName();if(this.isAnimating=!0,this.triggers.each((function(){var t=$(this);t.attr({"aria-expanded":!1}),(t.parents(".header").length>0||t.parents(".masthead").length>0)&&(t.find(".icon.app-header").removeClass("close"),t.find(".icon.app-header"))})),"ios"===m.os.name)this.getAdjacentContainerElement().removeClass("ios-click-target");this.menu.one("".concat(i,".applicationmenu"),n),this.timeout=setTimeout(n,300),this.menu.removeClass("is-open show-shadow").find("[tabindex]"),$(document).off("click.applicationmenu"),m.features.touch&&$("body").removeClass("is-open-touch")}function n(){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.menu.off("".concat(i,".applicationmenu")),e.menu[0].style.display="none",e.isAnimating=!1,t&&(e.userOpened=void 0,e.userClosed=!0),e.element.trigger("applicationmenuclose"),$("body").triggerHandler("resize")}},hasTriggers:function(){return void 0!==this.triggers&&this.triggers instanceof $&&this.triggers.length},modifyTriggers:function(t,e,i){var n=this;if(t&&t.length){var s=$();$.each(t,(function(t,e){s=s.add($(e))})),this.triggers=this.triggers[e?"not":"add"](s),this.handleTriggerEvents(),this.triggers.each((function(t,e){var i,s=$(e);s.attr("aria-controls","application-menu"),s.attr("aria-expanded","".concat(n.isOpen()));var a=null===(i=e.textContent)||void 0===i||null==i?void 0:i.length,r=s.find(".audible");if(!a){var o=B.translate("AppMenuTriggerTextAlt");r.length?r.text(o):e.insertAdjacentHTML("beforeend",'<span class="audible">'.concat(o,"</span>"))}})),i&&!0===i||this.updated()}},filterResultsCallback:function(t,e){if(!t)return this.accordionAPI.unfilter(),void e();var i=$(t.map((function(t){return t.element})));this.accordionAPI.filter(i,!0),this.element.triggerHandler("filtered",[t]),e()},handleSearchfieldInputEvent:function(){if(this.searchfield&&this.searchfield.length){var t=this.searchfield.val();if(!t||""===t){var e=this.accordion.find(".has-filtered-children");this.accordionAPI.headers.removeClass("filtered has-filtered-children"),this.accordionAPI.collapse(e),this.accordionAPI.updated(),this.element.triggerHandler("filtered",[[]])}}},handleDismissOnClick:function(){this.settings.dismissOnClickMobile&&(this.userOpened=!1,this.isLargerThanBreakpoint()||this.closeMenu())},closeSwitcherPanel:function(){if(this.switcherPanel){var t=this.switcherPanel.data("expandablearea");if(t&&(t.close(),this.settings.dismissOnClickMobile)){if(this.userOpened=!1,this.isLargerThanBreakpoint())return;this.closeMenu()}}},teardown:function(){if(this.menu.off("animateopencomplete animateclosedcomplete").removeClass("short").removeAttr("style"),$(window).off("scroll.applicationmenu"),$("body").off("resize.applicationmenu"),$(document).off(["click.applicationmenu","open-applicationmenu","close-applicationmenu","dismiss-applicationmenu","keydown.applicationmenu"].join(" ")),this.element.find(".expandable-area").off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","keydown.".concat("applicationmenu","-switcher")].join(" ")),this.accordion.off(["blur.applicationmenu","selected.applicationmenu","followlink.applicationmenu","afterexpand.applicationmenu","aftercollapse.applicationmenu"].join(" ")),this.element.find(".application-menu-toolbar").off("click.".concat("applicationmenu")),this.accordionAPI&&"function"==typeof this.accordionAPI.destroy&&(this.isFiltered&&this.accordionAPI.collapse(),this.accordionAPI.destroy()),this.switcherPanel&&(this.switcherPanel.off(["beforeexpand.applicationmenu","aftercollapse.applicationmenu","afterexpand.".concat("applicationmenu")].join(" ")),delete this.switcherTrigger,delete this.switcherPanel),this.searchfield&&this.searchfield.length){this.searchfield.off(["input.applicationmenu","cleared.".concat("applicationmenu")].join(" "));var t=this.searchfield.data("searchfield");t&&t.destroy()}return this.hasTriggers()&&this.triggers.off("click.applicationmenu"),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element[0],"applicationmenu")},handleEvents:function(){var t=this,e=this;return this.handleTriggerEvents(),this.menu.on("notify.applicationmenu",(function(t,i,n){e.notify(i,n)})).on("updated.applicationmenu",(function(){e.updated()})),"ie"===m.browser.name&&"11"===m.browser.version&&e.element.find(".expandable-area").on("beforeexpand.applicationmenu",(function(){e.element[0].classList.remove("has-scrollbar")})).on("aftercollapse.applicationmenu",(function(){e.toggleScrollClass()})),this.accordion.on("blur.applicationmenu",(function(){e.closeMenu()})).on("selected.applicationmenu",(function(){e.handleDismissOnClick()})).on("followlink.applicationmenu",(function(){e.handleDismissOnClick()})).on("afterexpand.applicationmenu aftercollapse.applicationmenu",(function(){e.toggleScrollClass()})),this.switcherPanel&&this.switcherPanel.on("beforeexpand.applicationmenu",(function(){var i=t.element.height();e.element.addClass("has-open-switcher"),e.switcherPanel.find(".content").height(i-71),e.settings.onExpandSwitcher&&e.settings.onExpandSwitcher(e,e.element,e.settings),e.element.on("keydown.".concat("applicationmenu","-switcher"),(function(t){var i=t.key;"Escape"===i&&e.element[0].classList.contains("has-open-switcher")&&(t.preventDefault(),e.closeSwitcherPanel()),"Tab"===i&&(e.keyboardChangedFocus=!0)})),e.switcherPanel.one("afterexpand.".concat("applicationmenu"),(function(){var i;t.keyboardChangedFocus||((i=u.focusableElems(e.switcherPanel[0]))[0].classList.remove("hide-focus"),i[0].focus())}))})).on("aftercollapse.applicationmenu",(function(){t.element.removeClass("has-open-switcher"),t.settings.onCollapseSwitcher&&t.settings.onCollapseSwitcher(t,t.element,t.settings),t.element.off("keydown.".concat("applicationmenu","-switcher")),t.switcherPanel.off("afterexpand.".concat("applicationmenu")),delete t.keyboardChangedFocus})),this.element.find(".application-menu-toolbar").on("click.".concat("applicationmenu"),"button",(function(e){e.defaultPrevented||t.handleDismissOnClick()})),$(document).on("open-applicationmenu",(function(){e.openMenu(void 0,!0)})).on("close-applicationmenu",(function(){e.closeMenu()})).on("dismiss-applicationmenu",(function(){e.handleDismissOnClick()})),$(window).on("scroll.applicationmenu",(function(){e.adjustHeight()})),$("body").on("resize.applicationmenu",(function(){e.testWidth(),e.toggleScrollClass()})),!0===this.settings.filterable&&this.searchfield&&this.searchfield.length&&this.searchfield.on("input.applicationmenu",(function(t){e.handleSearchfieldInputEvent(t)})),this.settings.openOnLarge&&this.isLargerThanBreakpoint()&&(this.menu.addClass("no-transition"),$(".page-container").addClass("no-transition")),this.testWidth(),setTimeout((function(){e.menu.removeClass("no-transition"),$(".page-container").removeClass("no-transition")}),800),this}},$.fn.applicationmenu=function(t){return this.each((function(){var e=$.data(this,"applicationmenu");return e?e.updated(t):e=$.data(this,"applicationmenu",new Ce(this,t)),e}))};var ke={dataset:[],selectable:!1,paging:!1,pagerSettings:{pagesize:25,pagesizes:[10,25,50,75],showFirstButton:!1,showLastButton:!1},attributes:null};function Te(t,e){return e?(e.dataset&&(t.dataset=e.dataset),e.pagesize&&(F("`pagerSettings.pagesize` setting","`pagesize` setting"),t.pagerSettings.pagesize=e.pagesize,delete t.pagesize),e.pagesizes&&(F("`pagerSettings.pagesizes` setting","`pagesizes` setting"),t.pagerSettings.pagesizes=e.pagesizes,delete t.pagesizes),t):t}function Se(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,ke),this.settings=Te(this.settings,e),this.init()}Se.prototype={get pagerAPI(){return this.element.data("pager")},init:function(){return this.selectedRows=[],this.handlePaging(),this.build().handleEvents()},build:function(){return this.settings.paging&&this.element.empty(),this.render(),this},handleEvents:function(){var t=this,e=this;return this.element.on("click.".concat("blockgrid"),".block",(function(t){var i=$(t.currentTarget),n=$(t.target),s=n.is(".checkbox-label")||n.is(".checkbox");setTimeout((function(){e.select(i,s)}),0),t.stopPropagation(),t.preventDefault()})),this.element.on("focus.".concat("blockgrid"),".checkbox",(function(t){$(t.currentTarget).parent().addClass("has-focus")})),this.element.on("blur.".concat("blockgrid"),".checkbox",(function(t){$(t.currentTarget).parent().removeClass("has-focus")})),this.element.on("keypress.".concat("blockgrid"),".block",(function(t){if(32===t.which){var i=$(t.target);e.select(i,!1)}})),this.element.on("updated.".concat("blockgrid"),(function(){e.updated()})),this.pagerAPI&&this.element.on("page.".concat("blockgrid"),(function(){t.previousFocusedElement=!0,t.build()})).on("pagesizechange.".concat("blockgrid"),(function(){t.previousFocusedElement=!0,t.build()})),this},handlePaging:function(){if(this.settings.paging){var t=C.extend({},this.settings.pagerSettings,{componentAPI:this,dataset:this.settings.dataset});this.element.addClass("paginated"),this.element.pager(t)}},selectBlock:function(t,e){return z(this.select,this.selectBlock).apply(this,[t,e])},select:function(t,e){var i=this.element.find(".block"),n=this.element.find(".checkbox"),s=t.find(".checkbox"),a=s.is(":checked"),r="",o=Number(s.data("idx"));if("single"===this.settings.selectable&&(this.selectedRows=[],i.removeClass("is-selected").removeAttr("aria-selected"),n.prop("checked",!1)),"multiple"===this.settings.selectable&&a||"mixed"===this.settings.selectable&&e&&a){t.removeClass("is-selected").removeAttr("aria-selected"),s.prop("checked",!1);for(var l=0;l<this.selectedRows.length;l++)o===this.selectedRows[l].idx&&this.selectedRows.splice(l,1);this.element.triggerHandler("deselected",[{selectedRows:this.selectedRows,action:"deselect"}])}else{if(!1===this.settings.selectable||"mixed"===this.settings.selectable&&!e||(a||(t.addClass("is-selected").attr("aria-selected","true"),s.prop("checked",!0)),this.selectedRows.push({idx:o,data:this.settings.dataset[o],elem:t}),r=a?"deselected":"selected"),"mixed"===this.settings.selectable&&!e){var c=t.hasClass("is-activated");return i.removeClass("is-activated"),void(c?(t.removeClass("is-activated"),this.element.triggerHandler("deactivated",[{row:o,item:this.settings.dataset[o]}])):(t.addClass("is-activated"),this.element.triggerHandler("activated",[{row:o,item:this.settings.dataset[o]}])))}this.element.triggerHandler(a?"deselected":"selected",[{selectedRows:this.selectedRows,action:r}])}},render:function(){var t=this,e=this.settings,i=B?B.translate("Select"):"Select",n="",s=e.dataset;if(this.pagerAPI){var a=this.pagerAPI.state;if(a.pages>1){var r=a.activePage>0?a.activePage-1:0,o=a.pagesize*r,l=a.pagesize*(r+1);if((s=s.slice(o,l)).length!==e.dataset.length)for(var c=0;c<s.length&&!s[c].id;c++)s[c].id=o+c}}var d=[];this.selectedRows.forEach((function(t){d.push(t.idx)}));for(var h=0;h<s.length;h++){var u=s[h],p="mixed"===e.selectable?"0":"-1",g="",f="";d.indexOf(u.id)>-1&&(g=" is-selected",f=" checked");var m=u.imgAlt||u.imageAlt||"".concat(u.maintxt||u.title," ").concat(B.translate("Image"));n+='<div class="block is-selectable'.concat(g,'" role="listitem" tabindex="0">\n        <input type="checkbox" aria-hidden="true" role="presentation" class="checkbox" id="checkbox').concat(h,'" tabindex="').concat(p,'" data-idx="').concat(u.id||h,'"').concat(f,'>\n        <label for="checkbox').concat(h,'" class="checkbox-label">\n          <span class="audible">').concat(i,'</span>\n        </label>\n        <img alt="').concat(m,'" src="').concat(u.img||u.image,'" class="image-round">\n        <p> ').concat(u.maintxt||u.title," <br> ").concat(u.subtxt||u.subtitle," </p>\n      </div>")}if(this.element.attr("role","list").append(n),e.attributes)for(var v=0;v<s.length;v++){var b=this.element.find("#checkbox".concat(v)),y=this.element.find('.checkbox-label[for="checkbox'.concat(v,'"]'));C.addAttributes(b,this,e.attributes,"blockgrid-checkbox".concat(v)),C.addAttributes(y,this,e.attributes,"blockgrid-checkbox-label".concat(v))}this.previousFocusedElement&&setTimeout((function(){t.element.find(".block").first().focus(),delete t.previousFocusedElement}),0)},renderBlock:function(){return z(this.render,this.renderBlock).apply(this)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=Te(this.settings,t),this.teardown(),this.init(),this},teardown:function(){return this.element.off("updated.".concat("blockgrid")),this.element.off("click.".concat("blockgrid")),this.element.empty(),this.selectedRows=[],this},destroy:function(){this.teardown(),$.removeData(this.element[0],"blockgrid")}},$.fn.blockgrid=function(t){return this.each((function(){var e=$.data(this,"blockgrid");e?e.updated(t):e=$.data(this,"blockgrid",new Se(this,t))}))};var Ae={attributes:null,callback:void 0,content:"",current:!1,disabled:!1,href:void 0,id:void 0};function $e(t){return this.settings=C.mergeSettings(null,t,Ae),this.init()}$e.prototype={init:function(){return this.settings.element instanceof HTMLElement&&this.getSettingsFromElement(),this.settings.callback="function"==typeof this.settings.callback?this.settings.callback:null,this.settings.content="string"==typeof this.settings.content?h.stripHTML(this.settings.content):"",this.settings.current=!0===this.settings.current,this.settings.disabled=!0===this.settings.disabled,this.settings.id="string"==typeof this.settings.id?h.stripHTML(this.settings.id):void 0,this.settings.href="string"==typeof this.settings.href?h.stripHTML(this.settings.href):void 0,this},render:function(){var t,e,i=this.element;return i||(i=document.createElement("li"),this.settings.href?(t=document.createElement("a"),i.appendChild(t)):(e=document.createElement("span"),i.appendChild(e)),this.element=i),i.classList.add("breadcrumb-item"),i},refresh:function(){var t=this.element,e=t.querySelector("a"),i=t.querySelector("span:not(.audible)"),n=e?$(e):void 0;if(this.disabled=this.settings.disabled,this.current=this.settings.current,(e||t).id="string"==typeof this.settings.id?this.settings.id:"",(e||i||t).innerHTML="string"==typeof this.settings.content?this.settings.content:"",e){if("string"==typeof this.settings.href){var s="string"==typeof this.settings.href?h.stripHTML(this.settings.href):void 0;e.href=s,e.setAttribute("href",s)}else e.href=void 0,e.removeAttribute("href");n.hyperlink()}return i&&i.parentNode.isEqualNode(t)&&i.classList.add("breadcrumb-text"),Array.isArray(this.settings.attributes)&&C.addAttributes(n||$(t),this,this.settings.attributes),t},checkFocus:function(){var t=this.a;if(t){var e=this.overflowed;(m.browser.isIE11||m.browser.isEdge)&&(e=!1),t.tabIndex=e||this.disabled?-1:0,t.setAttribute("tabindex",t.tabIndex)}},get a(){return this.element.querySelector("a")},set current(t){var e=!0===t;this.settings.current=e,this.element.classList[e?"add":"remove"]("current")},get current(){return this.settings.current},set disabled(t){var e=!0===t;this.settings.disabled=e,this.element.classList[e?"add":"remove"]("is-disabled");var i=this.a;i&&(i.disabled=e,e?(i.setAttribute("disabled",e),i.setAttribute("aria-disabled",e)):(i.removeAttribute("disabled"),i.removeAttribute("aria-disabled")))},get disabled(){var t,e=null===(t=this.a)||void 0===t||null==t?void 0:t.getAttribute("disabled"),i=this.element.getAttribute("is-disabled");return e||i},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){var t=this.element,e=t.querySelector("a"),i=t.querySelector("span"),n=(e||i||t).getBoundingClientRect(),s=this.element.parentNode.getBoundingClientRect();return m.rtl?s.right<n.right:s.left>n.left},callback:function(t){if("function"!=typeof this.settings.callback)return!1;for(var e=this.settings.callback,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];var a=e.apply(this,[t].concat(n));return a||t.preventDefault(),a},get index(){for(var t=this.element,e=0;null!==t.previousSibling;)t=t.previousSibling,e++;return e},getSettingsFromElement:function(){var t=this.settings.element,e=t.querySelector("a");function i(t){return t=t.replace('<span class="audible">Current</span>',""),h.stripHTML(t)}e?(this.settings.content=i(e.innerHTML),this.settings.href=e.href,this.settings.id=e.id):(this.settings.content=i(t.innerHTML),t.id&&(this.settings.id=t.id));var n=!0===t.classList.contains("current"),s=e&&!0===e.classList.contains("current");this.settings.current=n||s,this.settings.disabled=!0===t.classList.contains("is-disabled"),this.element=t,this.fromElement=!0,delete this.settings.element},destroy:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.element&&this.element.parentNode){if(!this.fromElement){var e=this.a;if(e){var i=$(e);i.off(),i.data("hyperlink").destroy()}}!t&&this.fromElement||(this.element.parentNode.removeChild(this.element),delete this.element)}}};var Ee=["default","alternate"],De={breadcrumbs:[],style:Ee[0],truncate:!0};function Ie(t,e){if(!(t instanceof HTMLElement))throw new Error("`element` argument must be of type `HTMLElement`");return this.element=t,this.settings=C.mergeSettings(t,e,De),this.init(),this}Ie.prototype={init:function(){var t=this;Array.isArray(this.breadcrumbs)||(this.breadcrumbs=[]);var e=this.element.querySelector("ol"),i=C.getArrayFromList(this.element.querySelectorAll("li"));e&&(this.list=e),i.length&&i.forEach((function(e){t.add({element:e})})),Array.isArray(this.settings.breadcrumbs)||(this.settings.breadcrumbs=[]),this.settings.breadcrumbs.forEach((function(e){t.add(e)})),this.element.classList.contains(Ee[1])&&(this.settings.style=Ee[1]),-1===Ee.indexOf(this.settings.style)&&(this.settings.style=Ee[0]),this.render()},render:function(){var t;this.list?(this.teardownEvents(),this.teardownBreadcrumbs()):(this.list=document.createElement("ol"),this.element.appendChild(this.list));var e=document.createDocumentFragment();if(this.breadcrumbs.forEach((function(t){if(!t.fromElement||!t.element){var i=t.render();e.appendChild(i)}})),this.canDetectResize){if(!this.overflowBtn){var i=document.createElement("div"),n=document.createElement("button"),s=document.createElement("ul"),a=document.createElement("span");i.classList.add("breadcrumb-overflow-container"),n.classList.add("btn-actions"),n.classList.add("overflow-btn"),a.innerText="More Breadcrumbs",a.classList.add("audible"),n.insertAdjacentHTML("afterbegin",$.createIcon({icon:"more"})),n.appendChild(a),i.appendChild(n),i.appendChild(s),this.overflowContainerElem=i,this.overflowBtn=n,this.overflowMenu=s}this.element.insertBefore(this.overflowContainerElem,this.list),$(this.overflowBtn).popupmenu({menu:$(this.overflowMenu),beforeOpen:function(t){var e="";this.overflowed.forEach((function(t,i){var n="",s="";t.settings.disabled&&(n=" is-disabled",s=" disabled");var a='<li class="'.concat(n,'">\n          <a href="#" data-breadcrumb-index="').concat(i,'"').concat(s,">").concat(t.settings.content||"","</a>\n        </li>");e+=a})),t(e)}.bind(this)})}null!==(t=e.childNodes)&&void 0!==t&&(null==t?void 0:t.length)&&this.list.appendChild(e),this.list.setAttribute("aria-label","Breadcrumb"),this.element.classList.add("breadcrumb"),this.list.classList.add("breadcrumb-list"),this.refresh(),this.handleEvents()},add:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw new Error("Settings for a new breadcrumb item must be provided.");this.breadcrumbs.forEach((function(e){if(t.id&&e.id===t.id)throw new Error("New breadcrumbs must have a unique ID attribute.")}));var n=new $e(t);this.breadcrumbs.push(n),i&&this.settings.breadcrumbs.push(t),e&&(this.render(),!0===n.settings.current&&this.makeCurrent(n))},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getBreadcrumbItemAPI(t);n.api.destroy(!0),this.breadcrumbs.splice(n.i,1),i&&this.settings.breadcrumbs.splice(n.i,1),e&&this.render()},removeAll:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.breadcrumbs.forEach((function(t){t.destroy(!0)})),this.breadcrumbs=[],e&&(this.settings.breadcrumbs=[]),t?this.render():this.refresh()},makeCurrent:function(t){var e=this.getBreadcrumbItemAPI(t);this.breadcrumbs.forEach((function(t){var i=t.element;t.current=i.isEqualNode(e.api.element)}))},get current(){var t,e;return this.breadcrumbs.forEach((function(i){!t&&i.current&&(e=(t=i).element)})),e},set disabled(t){var e=!0===t;this.element.classList[e?"add":"remove"]("is-disabled"),this.breadcrumbs.forEach((function(t){t.disabled=e}))},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},get overflowed(){return this.breadcrumbs.filter((function(t){return t.overflowed}))},get canDetectResize(){return this.settings.truncate&&m.features.resizeObserver},handleEvents:function(){var t=this,e=this;$(this.list).on("click.".concat("breadcrumb"),"li",(function(e){var i=t.getBreadcrumbItemAPI(e.currentTarget);if(i&&i.api){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];i.api.callback(e,s)}})),this.canDetectResize&&(this.previousSize=this.list.getBoundingClientRect(),this.ro=new ResizeObserver((function(){t.detectCheck&&t.detectCheck.destroy(!0),t.detectCheck=new U({duration:1,timeoutCallback:function(){var t=e.list.getBoundingClientRect();t.width!==e.previousSize.width&&(e.previousSize=t,e.refresh(),delete e.detectCheck)}}),G.register(t.detectCheck)})),this.ro.observe(this.list)),this.overflowBtn&&$(this.overflowBtn).on("selected.".concat("breadcrumb"),(function(e){var i=arguments.length<=1?void 0:arguments[1],n=i[0].getAttribute("data-breadcrumb-index"),s=t.overflowed[Number(n)];$(s.a).trigger("click")})),this.hasEvents=!0},getBreadcrumbItemAPI:function(t){var e,i,n,s=!1;if(t instanceof $e?(e=t,i=t.element,n=this.breadcrumbs.indexOf(t)):t instanceof HTMLAnchorElement?i=t.parentNode:t instanceof HTMLLIElement?i=t:!isNaN(t)&&t>-1&&(s=!0,n=t,e=this.breadcrumbs[n],i=e.element),!i||e||n||this.breadcrumbs.forEach((function(t,s){t.element.isEqualNode(i)&&(e=t,n=s)})),!e){var a=s?n:i;throw new Error("No matching Breadcrumb was found by ".concat(s?"at index ":" with matching HTML List Item",' "').concat(a,'"'))}return{api:e,li:i,i:n}},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.teardownEvents(),this.breadcrumbs.forEach((function(t){t.refresh()})),this.element.classList["alternate"===this.settings.style?"add":"remove"]("alternate"),this.canDetectResize?this.element.classList[this.overflowed.length?"add":"remove"]("truncated"):(this.element.classList.remove("truncated"),this.element.classList.add("no-truncate")),this.breadcrumbs.forEach((function(t){t.checkFocus()})),t&&this.handleEvents()},teardown:function(){if(this.teardownEvents(),this.teardownBreadcrumbs(),this.breadcrumbs=[],this.overflowContainerElem){var t=$(this.overflowBtn).data("popupmenu");t&&t.destroy(),this.overflowContainerElem.parentNode&&this.element.removeChild(this.overflowContainerElem)}return this},teardownEvents:function(){this.hasEvents&&(this.ro&&(this.ro.disconnect(),delete this.ro),this.overflowBtn&&$(this.overflowBtn).off(["beforeopen.".concat("breadcrumb"),"selected.".concat("breadcrumb")].join(" ")),$(this.list).off(),$(this.element).off(),delete this.hasEvents)},teardownBreadcrumbs:function(){this.breadcrumbs.forEach((function(t){t.destroy()}))},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init(),this},destroy:function(){this.teardown(),$.removeData(this.element,"breadcrumb")}},$.fn.breadcrumb=function(t){return this.each((function(){var e=$.data(this,"breadcrumb");e?e.updated(t):e=$.data(this,"breadcrumb",new Ie(this,t))}))};var Le={blockUI:!0,text:null,displayDelay:1e3,timeToComplete:0,transparentOverlay:!1,overlayOnly:!1,attributes:null};function Pe(t,e){this.settings=C.mergeSettings(t,e,Le),this.element=$(t),this.init()}Pe.prototype={init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.setup().handleEvents()},setup:function(){var t=this.element.attr("data-block-ui"),e=this.element.attr("data-display-delay"),i=this.element.attr("data-completion-time");this.blockUI=void 0!==t?t:this.settings.blockUI,this.settings.overlayOnly||(this.loadingText=this.settings.text?this.settings.text:B.translate("Loading"),this.label&&this.label.text(this.loadingText));var n=void 0!==e&&!isNaN(e)&&parseInt(e,10)>20,s=!isNaN(this.settings.displayDelay)&&this.settings.displayDelay>=20?this.settings.displayDelay:20;return this.delay=n?e:s,this.completionTime=void 0===i||isNaN(i)?this.settings.timeToComplete:parseInt(i,10),this},activate:function(){var t=this;if(!t.isActive()){if(this.container)return t.closeTimeout&&clearTimeout(t.closeTimeout),this.label.remove(),this.settings.overlayOnly||(this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container),this.element.is("input, .dropdown, .multiselect, .busy-xs, .busy-sm")&&this.label.addClass("audible")),void this.container.removeClass("is-hidden").trigger("afterstart");this.container=$('<div class="busy-indicator-container is-hidden"></div>').attr({"aria-live":"polite",role:"status"}),this.loader=$('<div class="busy-indicator active"></div>').appendTo(this.container),this.settings.overlayOnly||($('<div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div>').appendTo(this.loader),this.label=$("<span>".concat(this.loadingText,"</span>")).appendTo(this.container));var e="";if(this.blockUI)this.settings.transparentOverlay&&(e=" transparent"),this.originalPositionProp=this.element[0].style.position,"absolute"!==window.getComputedStyle(this.element[0],null).getPropertyValue("position")&&(this.element[0].style.position="relative"),this.overlay=$('<div class="overlay busy is-hidden'.concat(e,'"></div>')).appendTo(this.element),this.container.addClass("blocked-ui");if(this.label&&this.element.is(".busy-xs, .busy-sm")&&this.label.addClass("audible"),this.element.is("input, .dropdown, .multiselect")){var i;if(this.element.addClass("is-loading"),this.blockUI&&this.element.addClass("is-blocked"),this.label&&this.label.addClass("audible"),this.element.is("input"))i=this.element,this.container.insertAfter(this.isInlineLabel?this.inlineLabel:this.element);else i=this.element.data("dropdown").pseudoElem,this.container.appendTo(i.parent());this.overlay&&this.overlay.insertAfter(this.container);for(var n=i.position(),s=i.outerHeight(),a=i.outerWidth(),r=this.container.add(this.overlay),o=function(t,e,i){t.style[e]="".concat(i,"px")},l=0,c=r.length;l<c;l++)o(r[l],"left",n.left),o(r[l],"top",n.top),o(r[l],"bottom",n.bottom),o(r[l],"right",n.right),o(r[l],"height",s),o(r[l],"width",a)}else this.container.appendTo(this.element);setTimeout((function(){t.container&&t.container.removeClass("is-hidden"),t.overlay&&t.overlay.removeClass("is-hidden"),t.blockUI&&t.addScrollParent()}),t.delay),this.element.trigger("afterstart"),$.fn.cssPropSupport("animation")||(t.isAnimating=!0,t.animateWithJS()),this.completionTime>0&&setTimeout((function(){t.element.trigger("complete")}),t.completionTime),C.addAttributes(this.container,this,this.settings.attributes),C.addAttributes(this.container.find(".busy-indicator.active"),this,this.settings.attributes,"busyindicator"),C.addAttributes(this.container.find("span"),this,this.settings.attributes,"text"),C.addAttributes(this.overlay,this,this.settings.attributes,"overlay")}},close:function(t){var e=this;e.isActive()&&(this.removeScrollParent(),t&&(this.element.removeClass("is-loading"),this.element.removeClass("is-blocked")),this.container&&this.container.addClass("is-hidden"),this.overlay&&this.overlay.addClass("is-hidden"),e.closeTimeout=setTimeout((function(){clearTimeout(e.closeTimeout),e.container&&e.container.remove(),e.container=void 0,e.loader=void 0,e.label=void 0,e.overlay&&(e.overlay.remove(),e.element[0].style.position=e.originalPositionProp,e.originalPositionProp=void 0),e.overlay=void 0,e.element.trigger("aftercomplete.busyindicator"),e.element.off("complete.busyindicator")}),600))},animateWithJS:function(){var t=this,e=this.container.find(".bar.one"),i=this.container.find(".bar.two"),n=this.container.find(".bar.three"),s=this.container.find(".bar.four"),a=this.container.find(".bar.five"),r=0;setInterval((function(){t.isAnimating?(1===(r+=1)&&e.addClass("half"),13===r&&(e.removeClass("half").addClass("full"),i.addClass("half")),26===r&&(e.removeClass("full").addClass("half"),i.removeClass("half").addClass("full"),n.addClass("half")),39===r&&(e.removeClass("half"),i.removeClass("full").addClass("half"),n.removeClass("half").addClass("full"),s.addClass("half")),51===r&&(i.removeClass("half"),n.removeClass("full").addClass("half"),s.removeClass("half").addClass("full"),a.addClass("half")),64===r&&(n.removeClass("half"),s.removeClass("full").addClass("half"),a.removeClass("half").addClass("full")),77===r&&(s.removeClass("half"),a.removeClass("full").addClass("half")),90===r&&a.removeClass("half"),103===r&&(r=0)):clearInterval(null)}),10)},addScrollParent:function(){var t=this;if(this.blockUI){var e=this.element[0];this.scrollParent=$(this.getScrollParent(e));var i=this.scrollParent[0],n=i?i.offsetHeight:0,s="absolute"===window.getComputedStyle(this.overlay[0],null).getPropertyValue("position");if(n&&this.container&&n<=e.offsetHeight){var a=window.innerHeight||document.documentElement.clientHeight,r=n/2-58,o=function(){if(s&&t.element.is(i)){var n=e.scrollTop;t.overlay.css({top:n}),t.container.css({top:r+n})}else if(C.isInViewport(i)&&((h=i).scrollHeight>h.clientHeight&&h.clientHeight<a-60))t.container[0].offsetHeight&&t.container.css({top:r+i.scrollTop});else{var o=0,l=0,c=e.getBoundingClientRect();if(c.top<0){var d=c.height+c.top;o=d>a?a:d,l=c.top}else o=a-c.top;t.container.css({top:(o-85)/2-l})}var h};o(),this.scrollParent.off("scroll.parent.busyindicator").on("scroll.parent.busyindicator",(function(){t.container&&o()}))}}},removeScrollParent:function(){this.scrollParent&&(this.scrollParent.off("scroll.parent.busyindicator"),delete this.scrollParent)},getScrollParent:function(t){var e=["overflow","overflow-x","overflow-y"],i=function(t){return e.reduce((function(e,i){return e+function(t,e){return getComputedStyle(t,null).getPropertyValue(e)}(t,i)}),0)},n=/(auto|scroll)/,s=function(t){return n.test(i(t))};return function(t){for(var e=!1,i=t;!e&&i&&i.tagName&&"body"!==i.tagName.toLowerCase();){if(s(i)){e=!0;break}i=i.parentNode}return e?i:null}(t)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.setup()},isActive:function(){return!!this.container&&this.container.children(".busy-indicator").is(".active")},destroy:function(){this.removeScrollParent(),this.close(!0),this.element.off("start.busyindicator complete.busyindicator afterstart.busyindicator aftercomplete.busyindicator updated.busyindicator"),$.removeData(this.element[0],"busyindicator")},handleEvents:function(){var t=this;return this.element.on("start.busyindicator",(function(e){e.stopPropagation(),t.activate()})).on("afterstart.busyindicator",(function(){t.element.on("complete.busyindicator",(function(e){e.stopPropagation(),t.close(!0)}))})).on("updated.busyindicator",(function(){t.close(!0),t.updated()})),this}},$.fn.busyindicator=function(t){return this.each((function(){var e=$.data(this,"busyindicator");e?e.updated(t):e=$.data(this,"busyindicator",new Pe(this,t))}))};var Me={tooltip:{}};Me.isIE="ie"===m.browser.name,Me.isIEEdge="edge"===m.browser.name,Me.tooltipSize=function(t){return u.html(this.tooltip.find(".tooltip-content"),t,"*"),{height:this.tooltip.outerHeight(),width:this.tooltip.outerWidth()}},Me.formatToSettings=function(t,e){var i=t.data?t.data:t,n=e.formatter&&".0f"!==e.formatter?d3.format(e.formatter)(i.percent):"".concat(isNaN(i.percentRound)?0:i.percentRound,"%");return"value"===e.show?e.formatter?d3.format(e.formatter)(i.value):i.value:"label"===e.show?i.name:"label (percent)"===e.show?"".concat(i.name," (").concat(n,")"):"label (value)"===e.show?"".concat(i.name," (").concat(e.formatter?d3.format(e.formatter)(i.value):i.value,")"):"percent"===e.show?n:"function"==typeof e.show?e.show(i):i.value},Me.appendTooltip=function(t){var e=this;this.tooltip=$("#svg-tooltip"),0===this.tooltip.length&&(t=t?" ".concat(t):"",this.tooltip=$('<div id="svg-tooltip" class="tooltip right is-hidden'.concat(t,'">\n      <div class="arrow"></div>\n        <div class="tooltip-content">\n          <p><b>32</b> Element</p>\n        </div>\n      </div>')).appendTo("body"),this.isTouch&&(this.tooltip[0].style.pointerEvents="auto",this.tooltip.on("touchend.svgtooltip",(function(){e.hideTooltip()}))))},Me.hideTooltip=function(){var t=this;d3.select("#svg-tooltip").classed("is-personalizable",!1).classed("is-hidden",!0).style("left","-999px"),$("body, .scrollable").off("scroll.chart-tooltip",(function(){t.hideTooltip()}))},Me.removeTooltip=function(){this.tooltip&&this.tooltip.remove&&this.tooltip.remove()},Me.colorRange=function(){var t=Z.themeColors().palette;return Z.uplift?[t.azure[80].value,t.turquoise[40].value,t.amethyst[60].value,t.graphite[40].value,t.amber[40].value,t.emerald[70].value,t.ruby[60].value,t.azure[30].value,t.amber[70].value,t.graphite[60].value,t.turquoise[60].value,t.emerald[90].value,t.amethyst[30].value,t.azure[50].value,t.ruby[30].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[80].value,t.graphite[20].value,t.amber[90].value]:[t.azure[70].value,t.turquoise[30].value,t.amethyst[30].value,t.graphite[60].value,t.amber[50].value,t.emerald[60].value,t.ruby[60].value,t.azure[30].value,t.amber[90].value,t.turquoise[80].value,t.ruby[20].value,t.graphite[50].value,t.emerald[50].value,t.azure[50].value,t.amethyst[80].value,t.emerald[30].value,t.turquoise[50].value,t.amber[70].value,t.graphite[20].value,t.azure[20].value]},Me.colorNameRange=function(){return Z.uplift?["azure08","turquoise04","amethyst06","graphite04","amber04","emerald07","ruby06","azure03","amber07","graphite06","turquoise06","emerald09","amethyst03","azure05","ruby03","amethyst08","emerald03","turquoise08","graphite02","amber09"]:["azure07","turquoise03","amethyst03","graphite06","amber05","emerald06","ruby06","azure03","amber09","turquoise08","ruby02","graphite05","emerald05","amethyst03","azure05","amethyst08","emerald03","turquoise06","amber07","graphite02"]},Me.chartColor=function(t,e,i){var n=Me.colorRange(),s=i&&i.color?i.color:null;if(s){if("error"===s)return Z.themeColors().status.danger.value;if("alert"===s)return Z.themeColors().status.warning.value;if("alertYellow"===s)return Z.themeColors().status.caution.value;if("good"===s)return Z.themeColors().status.success.value;if("neutral"===s)return Z.themeColors().palette.graphite[30].value;if(s&&0===s.indexOf("#"))return i.color}return/^(pie|donut)$/.test(e)?n[t]:/^(bar-single|column-single)$/.test(e)?n[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?n[t]:""},Me.chartColorName=function(t,e,i){var n=i&&i.color?i.color:null;if(n){if("error"===n)return"alert01";if("alert"===n)return"alert02";if("alertYellow"===n)return"alert03";if("good"===n)return"alert04";if("neutral"===n)return"graphite03";if(n&&0===n.indexOf("#"))return i.color}return/^(pie|donut)$/.test(e)?this.colorNameRange()[t]:/^(bar-single|column-single)$/.test(e)?this.colorNameRange()[0]:/^(bar|bar-stacked|bar-grouped|bar-normalized|line|scatterplot|column-stacked|column-grouped|column-positive-negative)$/.test(e)?this.colorNameRange()[t]:""},Me.showTooltip=function(t,e,i,n,s){var a,r,o=this;t<0&&(t=2),this.tooltip[0].style.left="".concat(t,"px"),this.tooltip[0].style.top="".concat(e,"px"),u.html(this.tooltip.find(".tooltip-content"),i,"*"),this.tooltip.removeClass("bottom top left right").addClass(n),this.tooltip.css("max-width",(null==s||null===(a=null==s?void 0:s.tooltip)||void 0===a||null==a?void 0:a.maxWidth)||""),this.tooltip.find(".arrow").css("left",(null==s||null===(r=null==s?void 0:s.arrow)||void 0===r||null==r?void 0:r.left)||""),this.tooltip.removeClass("is-hidden"),$("body").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){o.hideTooltip()})),$(".scrollable").off("scroll.chart-tooltip").on("scroll.chart-tooltip",(function(){o.hideTooltip()}))},Me.addLegend=function(t,e,i,n){var s;if(0!==t.length){var a=t[0].display&&"twocolumn"===t[0].display,r=a?$('<div class="chart-legend '.concat(t[0].placement?"is-".concat(t[0].placement):"is-bottom",'"></div>')):$('<div class="chart-legend"></div>');"pie"!==e&&"donut"!==e||!i.showMobile||(r=$('<div class="chart-legend"><div class="container"></div></div>'));var o,l=0;for(s=0;s<t.length;s++)o=t[s].name?6*t[s].name.length:6,l=t[s].name&&o>l?o:l;var c=(l+=55)/$(n).width()*100;for(s=0;s<t.length;s++){var d,u;if(t[s].name){var p="";(a||t[s].display&&"block"===t[s].display)&&(p+=" lg"),"column-positive-negative"===i.type&&t[s].option&&(p+=" ".concat(t[s].option));var g='<span class="chart-legend-item'.concat(p,'" tabindex="0"></span>'),f=Me.chartColor(s,e||(1===t.length?"bar-single":"bar"),t[s]),m=Me.chartColorName(s,e||(1===t.length?"bar-single":"bar"),t[s]),v="";"#"===m.substr(0,1)?(v=$('<span class="chart-legend-color"></span>'),t[s].pattern||v.css("background-color",f)):v=$('<span class="chart-legend-color '.concat(t[s].pattern?"":m,'"></span>')),"scatterplot"===e&&(v=$('<span class="chart-legend-color"></span>'));var b=$('<span class="chart-legend-item-text">'.concat(h.stripTags(t[s].name),"</span>"));if(t[s].pattern&&(v.append('<svg width="12" height="12"><rect height="12" width="12" mask="url(#'.concat(t[s].pattern,')"/></svg>')),v.find("rect").css("fill",f)),t[s].percent){var y=$('<span class="chart-legend-percent"></span>').text(t[s].percent);b.append(y)}t[s].display&&"block"===t[s].display&&(g='<span class="chart-legend-item'.concat(p,'" tabindex="0"></span>')),a&&(g=c>45&&"right"!==i.legendPlacement?'<span class="chart-legend-item'.concat(p,'" tabindex="0"></span>'):'<span class="chart-legend-item'.concat(p,' is-two-column" tabindex="0" ></span>')),(g=$(g)).append(v,b),C.addAttributes(g,t[s],null===(d=t[s])||void 0===d||null===(u=null==d?void 0:d.data)||void 0===u||null==u?void 0:u.attributes,"legend"),"pie"!==e&&"donut"!==e||!i.showMobile?r.append(g):r.find(".container").append(g),(t[s].display&&"block"===t[s].display||a&&c>45&&"right"!==i.legendPlacement)&&g.css({float:"none",display:"block",margin:"0 auto",width:"".concat(l,"px")}),"scatterplot"===e&&(self.svg=d3.select(v[0]).append("svg").attr("width","24").attr("height","24").append("path").attr("class","symbol").attr("transform","translate(10, 10)").attr("d",d3.symbol().size("80").type((function(){return d3.symbols[s]}))).style("fill",f)),innerWidth<=480&&t[s].data&&t[s].data.legendAbbrName&&b.replaceWith('<span class="chart-legend-item-text">'.concat(t[s].data.legendAbbrName,"</span>")),innerWidth>=481&&innerWidth<=768&&t[s].data&&t[s].data.legendShortName&&b.replaceWith('<span class="chart-legend-item-text">'.concat(t[s].data.legendShortName,"</span>"))}}r instanceof $&&(r.on("click.chart",".chart-legend-item",(function(){Me.handleElementClick(this,t,i)})).on("keypress.chart",".chart-legend-item",(function(e){13!==e.which&&32!==e.which||Me.handleElementClick(this,t,i)})),$(n).append(r))}},Me.handleElementClick=function(t,e,i){var n,s,a=$(null==i||null===(n=null==i?void 0:i.svg)||void 0===n||null==n?void 0:n.node()).closest(".chart-container").data("chart"),r=null==a||null==a?void 0:a.initialSelectCall,o=$(t).index(),l=e[o];if("radar"===i.type&&(s=d3.select(i.svg.selectAll(".chart-radar-area").nodes()[o])),"pie"===i.type||"donut"===i.type)s=d3.select(i.svg.selectAll(".slice").nodes()[o]);else if(/positive-negative/.test(i.type))s=!l.option||l.option&&"target"===l.option?i.svg.select(".target-bar"):i.svg.select(".bar.".concat(l.option));else if(-1!==["column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type))if(i.isGrouped||i.isSingle)s=i.svg.select(".series-".concat(o));else if(i.isStacked&&!i.isSingle){s=d3.select(i.svg.selectAll("bar"===i.type||"bar-stacked"===i.type||"bar-normalized"===i.type?".series-group":".g").nodes()[o]).select(".bar")}-1!==["radar","pie","donut","column","bar","bar-stacked","bar-grouped","bar-normalized","column-grouped","column-stacked","column-positive-negative","positive-negative"].indexOf(i.type)&&(Me.clickedLegend=!0,s.dispatch("click")),l.selectionObj&&Me.selectElement(d3.select(l.selectionObj.nodes()[o]),l.selectionInverse,l.data,void 0,i.dataset,r)},Me.selected=[],Me.clearSelected=function(t){if(t){var e=function(t){Object.prototype.hasOwnProperty.call(t,"selected")&&delete t.selected};!function t(i){Array.isArray(i)&&i.forEach((function(i){e(i),i.data&&t(i.data)})),e(i)}(t)}},Me.selectElement=function(t,e,i,n,s,a){var r=t.node()&&t.classed("is-selected");Me.clearSelected(s),r||(i.selected=!0);var o=[{elem:t.nodes(),data:r?{}:i}];e.classed("is-selected",!1).classed("is-not-selected",!r),t.classed("is-not-selected",!1).classed("is-selected",!r),Me.selected=$.isEmptyObject(o[0].data)?[]:o,a||$(n).triggerHandler("selected",[o])},Me.setSelectedElement=function(t){var e,i=t.dataset,n=/positive-negative/.test(t.type),s=/^(bar|bar-stacked|bar-grouped|bar-normalized)$/.test(t.type),a="pie"===t.type||"donut"===t.type,r=/^(column|column-grouped|column-stacked|column-positive-negative|positive-negative)$/.test(t.type),o=t.svg,l=t.isSingle,c=t.isGrouped,d=t.isStacked,h="selected"===t.task,u=d3.select(t.selector),p=u.classed("positive"),g=t.svg.selectAll(".axis.x .tick"),f=t.svg.selectAll(".axis.y .tick"),m=t.svg.selectAll(".bartext.positive, .target-bartext.positive"),v=t.svg.selectAll(".bartext.negative, .target-bartext.negative"),b=t.svg.selectAll(".target-bartext.positive, .target-bartext.negative"),y=d3.select(t.selector.parentNode),w=parseInt(y.node()?y.attr("data-group-id"):0,10),x=[],C=[];if(i=d||a?i||null:i&&i[w]?i[w].data||i[w]:null,g.style("font-weight","normal"),f.style("font-weight","normal"),m.style("font-weight","normal"),v.style("font-weight","normal"),o.selectAll(".is-selected").classed("is-selected",!1),Me.clearSelected(t.dataset),a&&o.selectAll(".is-not-selected").classed("is-not-selected",!1),n&&Object.prototype.hasOwnProperty.call(t.dataset[0],"targetBarsSelected")&&delete t.dataset[0].targetBarsSelected,h)if(o.selectAll(".bar, .target-bar").style("opacity",.6),Me.clickedLegend&&!a)n?(t.isTargetBar?(t.svg.selectAll(".target-bar").classed("is-selected",!0).style("opacity",1),b.style("font-weight","bolder"),t.dataset[0].targetBarsSelected=!0):(t.svg.selectAll(p?".bar.positive, .target-bar.positive":".bar.negative, .target-bar.negative").classed("is-selected",!0).style("opacity",1),(p?m:v).style("font-weight","bolder")),o.selectAll(".bar").each((function(t,e){var n=d3.select(this);if(n.classed("is-selected")){var s=i?i[e]:t;s.selected=!0,C.push({elem:n.node(),bardata:s})}})),x=C):(r||s)&&(c||l?t.svg.selectAll(".series-"+t.i).classed("is-selected",!0).style("opacity",1):y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each((function(i,n){var a=d3.select(this);(e=t.dataset)||(e=i),s&&!d?c?e=t.dataset[n].data[t.i]:(e[n][t.i]&&(e=e[n][t.i]),e[t.i]&&e[t.i][n]&&(e=e[t.i][n]),e[n]&&e[n][t.i]&&(e=e[n][t.i])):d&&!l?(e[w]&&e[w].data[n]&&(e=e[w].data[n]),s&&(t.dataset[w].selected=!0)):(e[n].data[t.i]&&(e=e[n].data[t.i]),e[t.i]&&e[t.i].data[n]&&(e=e[t.i].data[n]),e[n]&&e[n].data[t.i]&&(e=e[n].data[t.i])),e.selected=!0,C.push({elem:a.node(),data:e})})),x=C);else if(l&&d&&r)e=i[0]&&i[0].data?i[0].data:t.d,u.classed("is-selected",!0).style("opacity",1),x.push({elem:u.nodes(),data:e[t.i]});else if(!l&&!c||d||!r&&!s){if(r||s)o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat(t.i+2,")")).style("font-weight","bolder"),o.selectAll(".bar:nth-child(".concat(t.i+1,")")).classed("is-selected",!0).style("opacity",1),o.selectAll(".bar.is-selected").each((function(e,n){var a=d3.select(this),r=e;i&&(r=s&&d&&void 0!==i[n][t.i]?i[n][t.i]:i[n].data[t.i]),r.selected=!0,C.push({elem:a.node(),data:r})})),x=C;else if(a){o.selectAll(".slice").classed("is-selected",!1).classed("is-not-selected",!0).attr("transform","");var k=i&&i[0]&&i[0].data?i[0].data[t.i]:t.d?t.d.data:t.d;(k=k||{}).selected=!0,u.classed("is-selected",!0).classed("is-not-selected",!1).attr("transform","scale(1.025, 1.025)"),x.push({elem:u.nodes(),data:k,index:t.i})}}else{if(o.selectAll("".concat(r?".axis.x":".axis.y"," .tick:nth-child(").concat((c?w:t.i)+2,")")).style("font-weight","bolder"),u.classed("is-selected",!0).style("opacity",1),n){var T=t.isTargetBar?t.i:t.i-t.dataset[0].data.length;o.select(".target-bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),o.select(".bar.series-".concat(T)).classed("is-selected",!0).style("opacity",1),d3.select(o.selectAll(".bartext").nodes()[T]).style("font-weight","bolder"),d3.select(o.selectAll(".target-bartext").nodes()[T]).style("font-weight","bolder")}(c||n||r)&&((!n&&!r||r&&c)&&y.classed("is-selected",!0).selectAll(".bar").classed("is-selected",!0).style("opacity",1),y.selectAll(".bar").each((function(t,e){var n=d3.select(this);if(n.classed("is-selected")){var s=i?i[e]:t;s.selected=!0,C.push({elem:n.node(),data:s})}})),c?x.push({groupIndex:w,groupElem:y.nodes()[0],groupItems:C}):x=C)}else o.selectAll(".bar, .target-bar").style("opacity",1),m.style("font-weight","bolder"),v.style("font-weight","bolder"),a&&u.classed("is-selected",!1).style("stroke","#fff").style("stroke-width","1px").attr("transform","");Me.clickedLegend&&(Me.clickedLegend=!1),Me.selected=x,t.isTrigger&&$(t.container).triggerHandler(h?"selected":"unselected",[x])},Me.setSelected=function(t,e,i){if(t){var n,s,a,r,o,l=0,c=C.equals,d=i.isPie?i.svg.node().nextSibling:i.svg.node().parentNode.nextSibling,h=d3.select(d),u=h.node()&&h.classed("chart-legend"),p=function(e){var r=!!e;(e=r?d3.select(e):i.svg).selectAll(".bar").each((function(e,o){e&&l<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&c(t.data,i.chartData[e.index].data[o])||t.elem&&$(this).is(t.elem))&&(l++,s=d3.select(this),n=o,r&&!i.isStacked&&(a=!0))}))};i.isGrouped||i.isStacked&&!i.isSingle?(i.chartData.forEach((function(e,o){l<1&&(r=$(i.svg.select('[data-group-id="'+o+'"]').node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===o||t.data&&c(t.data,e)||t.elem&&r.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(l++,s=i.svg.select('[data-group-id="'+o+'"]').select(".bar"),n=o,i.isStacked&&!i.isGrouped&&(a=!0)))})),l<1&&(o=i.svg.selectAll(".series-group")).nodes().length&&o.each((function(){p(this)}))):p(),l>0&&(e||!s.classed("is-selected"))&&(a?u&&$(h.selectAll(".chart-legend-item").nodes()[n]).trigger("click.chart"):s.on("click").call(s.node(),s.datum(),n))}},Me.labelsColide=function(t){var e=t.selectAll(".x text"),i=!1;return e.each((function(t,n){var s,a=this.getBoundingClientRect();e.each((function(t,e){n!==e&&(s=this.getBoundingClientRect(),!(a.right<s.left||a.left>s.right||a.bottom<s.top||a.top>s.bottom)&&(i=!0))}))})),i},Me.applyAltLabels=function(t,e,i,n,s){(n?t.selectAll(n):t.selectAll(".x text")).each((function(t,n){var a=e[n]?e[n][i]:"";a=a||(s?d3.select(this).text().substring(0,1):"".concat(d3.select(this).text().substring(0,6),"...")),d3.select(this).text(a)}))},Me.triggerContextMenu=function(t,e,i){d3.event.preventDefault(),d3.event.stopPropagation(),d3.event.stopImmediatePropagation();var n=$.Event("contextmenu");n.target=e,n.pageX=d3.event.pageX,n.pageY=d3.event.pageY,$(t).trigger(n,[e,i])},Me.calculateTextRenderWidth=function(t,e){var i;e=C.mergeSettings(void 0,e,{soho:"700 12px arial",uplift:"600 14px arial"});var n=((null==Z||null===(i=null==Z?void 0:Z.currentTheme)||void 0===i||null==i?void 0:i.id)||"").match(/soho|uplift/);n=n?n[0]:"soho",this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var s=this.canvas.getContext("2d");return s.font=e[n],s.measureText(t).width},Me.calculatePercentage=function(t,e){return 100*t/e},Me.getPercentage=function(t,e){return t*e/100},Me.trimText=function(t,e){return t.length<=e?t:"".concat(t.substr(0,e),"...")},Me.getLabel=function(t,e){var i=t.name;return e.xxsmall||e.xsmall||e.small?i=t.shortName||t.abbrName||t.name:e.medium&&(i=t.abbrName||t.name),i},Me.wrap=function(t,e,i){i||(i=1.27),e||(i=60),t.each((function(){var t=d3.select(this),n=t.text().split(/\s+/).reverse(),s="",a=[],r=0;if(!(n.length<=1))for(var o=i,l=t.attr("y"),c=t.attr("x"),d=parseFloat(t.attr("dy")),h=t.text(null).append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(d,"em"));s=n.pop();)a.push(s),h.text(a.join(" ")),h.node().getComputedTextLength()>e&&(a.pop(),h.text(a.join(" ")),a=[s],h=t.append("tspan").attr("x",c).attr("y",l).attr("dy","".concat(++r*o+d,"em")).text(s))}))};var Re={dataset:[],animate:!1,redrawOnResize:!0,format:{ranges:null,difference:null}};function Be(t,e){this.settings=C.mergeSettings(t,e,Re),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Be.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t=this,e=this.settings.dataset[0],n=this.element.closest(".is-personalizable").length>0;this.element.addClass("bullet-chart");var s=0,a=[],r=e.data[0]?e.data[0].tooltip:[],o=!1,l=this.element.parent(),c=30,d=35,h=35,u=40,p=l.width()-u-d,g=l.height()-c-h-30;g=g<0?50:g;var f=d3.select(this.element[0]).append("svg").attr("width",p+u+d).attr("height",g+c+h).append("g").attr("transform","translate(".concat(u,",").concat(c,")"));for(var m=function(i,n,s){function a(t,e,i){var n=t(e,i);return void 0!==n?n:e}return e.format&&"function"==typeof e.format[i]?a(e.format[i],n,s):e.format&&"string"==typeof e.format[i]?d3.format(e.format[i])(n):t.settings.format&&"function"==typeof t.settings.format[i]?a(t.settings.format[i],n,s):t.settings.format&&"string"==typeof t.settings.format[i]?d3.format(t.settings.format[i])(n):n},v=function(t,e){return m("ranges",t,e)},b=function(t){return m("difference",t)},y=1===e.data.length,w=function(l){var c=t.settings.animate?400:0,d=t,h=e.data[l],u=h.ranges.slice().sort(d3.descending),g=h.markers?h.markers.slice().sort(d3.descending):[],m=h.measures?h.measures.slice().sort(d3.descending):[],w=h.ranges.slice().sort(d3.ascending),x=h.markers?h.markers.slice().sort(d3.ascending):[],k=h.measures?h.measures.slice().sort(d3.ascending):[],T=y?"":"-group".concat(l);0===g.length&&(g=m,x=k,o=!0);var S=f.append("g").attr("class","bullet").attr("transform","translate(0, ".concat(70*l,")"));S.append("g").append("text").attr("class","title").attr("dy","-10px").text((function(){return h.title})).call((function(t){var i=t._groups[0][0];C.addAttributes($(i),e,e.attributes,"title".concat(T))})).append("tspan").attr("class","subtitle").attr("dx","15px").text((function(){return h.subtitle})).call((function(t){var i=t._groups[0][0];C.addAttributes($(i),e,e.attributes,"subtitle".concat(T))}));var A=Math.max(u[0],g[0],m[0]),E=Math.min(w[0],x[0],k[0]);E=E<0?E:0;var D,I,L=d3.scaleLinear().domain([E,A]).range([0,p]).nice(),P=(I=(D=L)(0),function(t){return Math.abs(D(t)-I)}),M=S.selectAll("rect.range").data(u);M.enter().append("rect").call((function(t){t._groups.forEach((function(t){t.forEach((function(t,i){C.addAttributes($(t),e,e.attributes,"range".concat(i).concat(T))}))}))})).attr("class",(function(t,e){return"range s".concat(e)})).attr("data-idx",l).attr("width",0).attr("x",(function(t){return L(t<0?t:0)})).style("fill",(function(t,i){return e.barColors?e.barColors[i]:""})).attr("height",20).on("click.".concat(d.namespace),(function(){var t=d3.select(this);d.element.trigger("selected",[t,e.data[t.attr("data-idx")]])})).on("mouseenter.".concat(d.namespace),(function(t,o){var c=d3.select(this),d=e.data[c.attr("data-idx")],h=this.getBoundingClientRect(),u="<p>".concat(v(t,o),"</p>"),p=function(){var t=Me.tooltipSize(u),e=h.left+h.width-t.width/2,i=h.top-t.height+$(window).scrollTop()-5;""!==u&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[n?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(e,i,u,"top"))};if(d.tooltip&&d.tooltip[o]&&(u=d.tooltip[d.tooltip.length-o-1]),r&&"function"==typeof r&&!a[o]){u="";var g=!0;s=setInterval((function(){g&&(g=!1,r((function(t){u=t,a[l]=t}))),""!==u&&(clearInterval(s),p())}),10)}else r="object"===i(r)?"":r,u=a[l]||r||u||"",p()})).on("mouseleave.".concat(d.namespace),(function(){clearInterval(s),Me.hideTooltip()})).on("contextmenu.".concat(d.namespace),(function(t){Me.triggerContextMenu(d.element,d3.select(this).nodes()[0],t)})).merge(M).transition().duration(c).attr("width",P);var R=S.selectAll("rect.measure").data(m);R.enter().append("rect").call((function(t){t._groups.forEach((function(t){t.forEach((function(t,i){C.addAttributes($(t),e,e.attributes,"measure".concat(i).concat(T))}))}))})).attr("class",(function(t,e){return"measure s".concat(e)})).attr("width",0).attr("height",3).attr("x",(function(t){return L(t<0?t:0)})).style("fill",(function(t,i){return e.lineColors?e.lineColors[i]:""})).attr("y",8.5).merge(R).transition().duration(c).attr("width",P);var B=1===g.length,O=S.selectAll("line.marker").data(g);O.enter().append("line").call((function(t){t._groups.forEach((function(t){t.forEach((function(t,i){var n=B?"marker".concat(T):"marker".concat(i).concat(T);C.addAttributes($(t),e,e.attributes,n)}))}))})).attr("class",o?"hidden":"marker").attr("x1",0).attr("x2",0).style("stroke",(function(t,i){return e.markerColors?e.markerColors[i]:""})).attr("y1",20/6).attr("y2",100/6).merge(O).transition().duration(c).attr("x1",L).attr("x2",L).attr("y1",20/6).attr("y2",100/6);var F=(g[0]>m[0]?"-":"+")+Math.abs(g[0]-m[0]);0!==Math.abs(g[0]-m[0])&&O.enter().append("text").call((function(t){var i=t._groups[0][0];C.addAttributes($(i),e,e.attributes,"difference".concat(T))})).attr("class","inverse").attr("text-anchor","middle").attr("y",14).attr("dx",Me.isRTL?"-20px":"20px").attr("x",0).text(b(F)).merge(O).transition().duration(c).attr("x",(function(){var t=0;return S.selectAll(".measure").each((function(e){var i=P(e),n=L(e);i>t&&(t=i),n>t&&(t=n)})),Me.isRTL?-t:t})).style("opacity",1);var N=S.selectAll("g.tick").data(L.ticks(8)).enter().append("g").attr("class","tick").attr("transform","translate(0,0)").style("opacity",0);N.append("line").attr("y1",20).attr("y2",Math.round(140/4.7)),N.append("text").attr("text-anchor","middle").attr("dy","1.1em").attr("y",Math.round(140/4.7)).attr("class",(function(t){return t<0?"negative-value":"positive-value"})).text((function(t,e){return v(t,e)})),N.transition().duration(c).attr("transform",(function(t){return"translate(".concat(L(t),",0)")})).style("opacity",1),Me.isRTL&&Me.isIE&&f.selectAll("text").attr("transform","scale(-1, 1)")},x=0;x<e.data.length;x++)w(x);return Me.appendTooltip(),this.element.trigger("rendered"),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".range").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("bullet-chart"),$.removeData(this.element[0],"bullet"),$.removeData(this.element[0],"chart"))}};var Oe={dataset:[]};function Fe(t,e){this.settings=C.mergeSettings(t,e,Oe),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Fe.prototype={init:function(){return this.build().handleEvents(),this},build:function(){var t=this,e=this.settings.dataset[0];0===this.settings.dataset.length&&((e={}).data=[{name:{text:B?B.translate("NoData"):"No Data Available"},completed:{value:0}}]);var i=e.data[0],n="completion-target"===this.settings.type,s="targeted-achievement"===this.settings.type;this.element.addClass("completion-chart").addClass("".concat("targeted-achievement"===this.settings.type?" chart-targeted-achievement":"")).attr("role","image"),i.total=$.extend({},{value:100},i.total);var a,r=function(t){return void 0===t},o=function(t,e){var i=e?0:"";return r(t)?i:t},l=function(t,e){return e=e||i,Math.round(t/o(e.total.value,!0)*100)},c=function(t){return B.formatNumber(t/100,{style:"percent",maximumFractionDigits:0})},d=function(t,e){var n=t.toString();return-1!==n.indexOf("%")?function(t,e){return t/100*o((e=e||i).total.value,!0)}(n.replace(/%/g,""),e):t},h=function(t,e,i){var n=l(e,i),s=(n=n<0?0:n)>100?100:n;t[0].style.width="".concat(s,"%"),0===s&&(t[0].className+="is-empty")},p=function(t,e,i){var n=i?t._value:t.value;return t&&!r(n)&&t.format?function(t,e,i){return".0%"===e?c(l(t,i)):d3.format(e||"m")(t)}(d(n,e),t.format,e):t?d(n,e):0},g=this,f=$.extend({},{show:!1,color1:"",color2:"inverse"},i.percentText);r(f.color)||""!==f.color1||(f.color1=f.color);var m,v={body:$('<div class="total bar" />')},b=function(t){var e={};return(t=t||i).info&&!r(t.info.color)&&0===i.info.color.indexOf("#")&&(e.info=!0),t.completed&&!r(t.completed.color)&&0===t.completed.color.indexOf("#")&&(e.completed=!0),t.remaining&&!r(t.remaining.color)&&0===t.remaining.color.indexOf("#")&&(e.remaining=!0),t.targetline&&!r(t.targetline.color)&&0===t.targetline.color.indexOf("#")&&(e.targetline=!0),e}();if(n||s){var y=function(t){var e="",n={};return(t=t||i).total.difference&&(n.value=t.total.value-t.completed.value,n.format=i.total.format),e=(t.total.textOnly?"":p(t.total.difference?n:t.total))+(t.total.text||""),e=s&&t.remaining?(t.remaining.textOnly?"":p(t.remaining))+(t.remaining.text||""):e}();v.body.addClass("chart-completion-target".concat(s?" chart-targeted-achievement":"")),v.label='<span class="label">\n        <span class="name">'.concat(o(i.name.text)," ").concat(i.completed.color&&"error"===i.completed.color?$.createIcon({icon:"error",classes:"icon-error"}):"",'</span>\n        <span class="l-pull-right total value">').concat(y,"</span>\n      </span>")}else{v.body.addClass("chart-completion");var w=o(i.name.text),x=o(i.completed.color),k=o(i.info.color),T=i.info.color&&!b.info?k:"",S=o(i.info.text);b.completed||(T=x);var A="";i.info.color&&b.info&&(A=k),b.completed&&(A=x);var E=i.info&&!r(i.info.value)?o(i.info.value):p(i.completed);v.label='<b class="label name">'.concat(w,'</b>\n      <b class="label info ').concat(T,' colored">\n      <span class="value ').concat(T,'" ').concat(A?'style="color:'.concat(A):"",'">').concat(E,'</span>\n      <span class="text ').concat(T,'" ').concat(A?'style="color:'.concat(A):"",'">').concat(S,"</span>\n      </b>")}return i.remaining?v.remaining="".concat('<div class="target remaining bar').concat(b.remaining?"":" ".concat(o(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,";background-color:").concat(i.remaining.color,';"'):"",'">').concat(s?"":"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.remaining?"":" ".concat(o(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(p(i.remaining),"</span><br />")+'<span class="text'.concat(b.remaining?"":" ".concat(o(i.remaining.color)),'"').concat(b.remaining?' style="color:'.concat(i.remaining.color,';"'):"",'">').concat(o(i.remaining.text),"</span>")+"</span>","</div>"):v.remaining='<div class="target remaining bar" style="opacity: 0"></div>',i.completed&&s&&(m=m||i,f._value=m.completed?m.completed.value:0,f.percent=l(o(f._value,!0),m),f.format=".0%",f._text=void 0!==f.text?f.text:void 0!==f.value?c(f.value):p(f,m,!0),f.color=f[f.percent>55?"color2":"color1"],b.percentText=0===f.color.indexOf("#"),v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(o(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",'"></div>').concat(f.show?'<div class="chart-percent-text'.concat(b.percentText||""===f.color?"":" ".concat(f.color),'"').concat(b.percentText?' style="color:'.concat(f.color,';"'):"",">").concat(f._text,"</div>"):"",'<span class="completed-label"').concat(n||s?"":' class="audible"',">")+'<span class="text">'.concat(o(i.completed.text),"</span>")+"</span>"),(i.completed.text||i.completed.format&&!s)&&this.element.addClass("chart-completion-target-padding"),i.completed&&!s&&(v.completed="".concat('<div class="completed bar').concat(b.completed?"":" ".concat(o(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,";background-color:").concat(i.completed.color,';"'):"",">")+"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.completed?"":" ".concat(o(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(p(i.completed),"</span><br />")+'<span class="text'.concat(b.completed?"":" ".concat(o(i.completed.color)),'"').concat(b.completed?' style="color:'.concat(i.completed.color,';"'):"",'">').concat(o(i.completed.text),"</span>")+"</span></div>"),i.targetline&&(v.targetline="".concat('<div class="target-line targetline bar').concat(b.targetline?"":" ".concat(o(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,";background-color:").concat(i.targetline.color,';"'):"",'">')+"<span".concat(n||s?"":' class="audible"',">")+'<span class="value'.concat(b.targetline?"":" ".concat(o(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(p(i.targetline),"</span><br />")+'<span class="text'.concat(b.targetline?"":" ".concat(o(i.targetline.color)),'"').concat(b.targetline?' style="color:'.concat(i.targetline.color,';"'):"",'">').concat(o(i.targetline.text),"</span>")+"</span></div>"),u.append(v.body,(v.remaining||"")+(v.completed||"")+(v.targetline||""),"<a><use><svg><div><span><br>"),u.append(this.element,v.label+v.body.prop("outerHTML"),"<a><use><svg><div><span><br>"),a={name:$(".name",t.element),info:{value:$(".info .value",t.element),text:$(".info .text",t.element)},plainInfo:{value:$(">.value",t.element),text:$(">.text",t.element)},completed:{bar:$(".completed.bar",t.element),value:$(".completed .value",t.element),text:$(".completed .text, .completed-label .text",t.element)},remaining:{bar:$(".remaining.bar",t.element),value:$(".remaining .value",t.element),text:$(".remaining .text",t.element)},targetline:{bar:$(".targetline",t.element),value:$(".targetline .value",t.element),text:$(".targetline .text",t.element)},total:{bar:$(".total.bar",t.element),value:$(".total.value",t.element)},percentText:$(".chart-percent-text",t.element)},function(){if(e.attributes){var t=function(t,i){return C.addAttributes(t,e,e.attributes,i)};t(a.name,"name"),t(a.info.value,"info-value"),t(a.info.text,"info-text"),t(a.plainInfo.value,"info-value"),t(a.plainInfo.text,"info-text"),t(a.completed.bar,"completed-bar"),t(a.completed.value,"completed-value"),t(a.completed.text,"completed-text"),t(a.remaining.bar,"remaining-bar"),t(a.remaining.value,"remaining-value"),t(a.remaining.text,"remaining-text"),t(a.targetline.bar,"targetline-bar"),t(a.targetline.value,"targetline-value"),t(a.targetline.text,"targetline-text"),t(a.total.bar,"total-bar"),t(a.total.value,"total-value"),t(a.percentText,"percent-text")}}(),function(t){t=t||i,a.name.data("jsonData",{name:t.name}),a.info.value.add(a.info.text).data("jsonData",{info:t.info}),a.completed.bar.add(a.completed.value).add(a.completed.text).data("jsonData",{completed:t.completed}),a.remaining.bar.add(a.remaining.value).add(a.remaining.text).data("jsonData",{remaining:t.remaining}),a.targetline.bar.add(a.targetline.value).add(a.targetline.text).data("jsonData",{targetline:t.targetline}),a.total.bar.add(a.total.value).data("jsonData",{total:t.total}),a.percentText.data("jsonData",{percentText:t.percentText})}(),function(t){var e;(t=t||i).completed&&(e=d(t.completed.value,t),h(a.completed.bar,e,t)),t.remaining&&(e=d(t.completed.value,t)+d(t.remaining.value,t),h(a.remaining.bar,e,t),n&&!s&&setTimeout((function(){var t=$(".remaining",g.element),e=$(".total",g.element),i=$(".completed .value",g.element)[0].getBoundingClientRect(),n=t.find(".value")[0].getBoundingClientRect();t.add(e)[i.right>n.left-20?"addClass":"removeClass"]("overlap")}),500)),t.targetline&&(e=d(t.targetline.value,t),function(t,e){var i=e>100?100:e<0?0:e;t[0].style.left="".concat(i,"%")}(a.targetline.bar,e))}(),this},handleEvents:function(){var t=this;return this.element.on("updated.".concat("completion-chart"),(function(){t.updated()})),this},updated:function(t){var e=t.type||this.settings.type;return this.settings=t,this.settings.type=e,t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("completion-chart")),this},destroy:function(){this.element.empty().removeClass("completion-chart"),Me.removeTooltip(),this.teardown(),$.removeData(this.element[0],"completion-chart"),$.removeData(this.element[0],"chart")}};var Ne={dataset:[],colors:null,isDots:!1,isPeakDot:!1,isMinMax:!1,isMedianRange:!1};function ze(t,e){this.settings=C.mergeSettings(t,e,Ne),this.element=$(t),this.init()}ze.prototype={init:function(){if(!this.settings.colors){var t=Z.themeColors().palette;this.settings.colors=[],this.settings.colors[0]=t.azure[Z.uplift?"80":"70"].value,this.settings.colors[1]=t.slate[40].value,this.settings.colors[2]=t.slate[30].value,this.settings.colors[3]=t.slate[20].value}return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.sparklineColors=d3.scaleOrdinal().range(this.settings.colors),this.build().handleEvents()},build:function(){var t,e,n,s=this,a=this,r=this.element.closest(".is-personalizable").length>0,o=[],l=[],c=a.settings.tooltip,d=0,h=0,u=0,p=this.calculateAspectRatioFit({srcWidth:385,srcHeight:65,maxWidth:this.element.width(),maxHeight:600}),g=p.width>300?4:3,f=a.settings.dataset;for(n=0;n<f.length;n++)h=d3.min([d3.min(f[n].data),h]),d=d3.max([d3.max(f[n].data),d]),u=d3.max([f[n].data.length,u]);var m=p.width,v=p.height,b=d3.scaleLinear().domain([0,u]).range([10,m-10]),y=d3.scaleLinear().domain([h,d]).range([v-10,10]),w=d3.line().x((function(t,e){return b(e)})).y((function(t){return y(t)}));Me.appendTooltip();var x=d3.select(this.element[0]).append("svg").attr("height",v).attr("width",m);if(a.settings.isMedianRange){d=d3.max(f[0].data),h=d3.min(f[0].data);var k=m-45,T=d3.median(f[0].data),S=d-h,A=d3.scaleLinear().domain([h,d]).range([0,v]),E=v-A(T>S?T:S),D=v-A(T<S?T:S);x.append("g").attr("class","medianrange").attr("transform",(function(){return"translate(".concat(10,",").concat(E,")")})).append("rect").attr("width",k).attr("height",D).style("opacity","0.06").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=f[0];C.addAttributes($(t),e,e.attributes,"medianrange")}))}))})).on("mouseenter.".concat(a.namespace),(function(){var e=this.getBoundingClientRect(),s='<p class="sparkline-tooltip">'+B.translate("Median")+": <b>"+T+"</b><br>"+B.translate("Range")+": <b>"+S+"</b>"+(a.settings.isPeakDot?"<br>"+B.translate("Peak")+": <b>"+d+"</b>":"")+"</p>",l=function(){var t=Me.tooltipSize(s),i=e.left+(e.width-t.width)/2,n=e.top-t.height-5;""!==s&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[r?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(i,n,s,"top"))};if(c&&"function"==typeof c&&!o[n]){s="";var h=!0;t=setInterval((function(){h&&(h=!1,c((function(t){s=t,o[n]=t}))),""!==s&&(clearInterval(t),l())}),10)}else c="object"===i(c)?"":c,s=o[n]||c||f[0].tooltip||s||"",l()})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(t),Me.hideTooltip()}))}var I=function(){var t=f[n];x.append("g").append("path").attr("d",w(t.data)).attr("stroke",a.settings.isMinMax?"#999999":s.sparklineColors(n)).attr("class","team connected-line").call((function(e){e._groups.forEach((function(e){e.forEach((function(e){C.addAttributes($(e),t,t.attributes,"connected-line")}))}))}))};for(n=0;n<f.length;n++)I();return h=d3.min(f[0].data),x.selectAll(".point").data(f[0].data).enter().append("circle").attr("r",(function(t){return a.settings.isMinMax&&d===t||a.settings.isMinMax&&h===t?g+1:a.settings.isDots||a.settings.isPeakDot&&d===t?g:0})).attr("class",(function(t){return a.settings.isPeakDot&&d===t&&!a.settings.isMinMax?"point peak":a.settings.isMinMax&&d===t?"point max":a.settings.isMinMax&&h===t?"point min":"point"})).style("fill",(function(t){return a.settings.isPeakDot&&d===t&&!a.settings.isMinMax?"#ffffff":a.settings.isMinMax&&d===t?"#56932E":a.settings.isMinMax&&h===t?"#941E1E":a.sparklineColors(0)})).style("stroke",(function(t){return a.settings.isPeakDot&&d===t&&!a.settings.isMinMax?a.sparklineColors(0):a.settings.isMinMax&&d===t||a.settings.isMinMax&&h===t?"none":"#ffffff"})).style("cursor","pointer").attr("cx",(function(t,e){return b(e)})).attr("cy",(function(t){return y(t)})).call((function(t){t._groups.forEach((function(t){t.forEach((function(t,e){var i=f[0];C.addAttributes($(t),i,i.attributes,"point-".concat(e))}))}))})).on("mouseenter.".concat(a.namespace),(function(t){var s=this.getBoundingClientRect(),o="<p>".concat(f[0].name?"".concat(f[0].name,"<br> ").concat(a.settings.isMinMax&&d===t?"".concat(B.translate("Highest"),": "):a.settings.isMinMax&&h===t?"".concat(B.translate("Lowest"),": "):a.settings.isPeakDot&&d===t?"".concat(B.translate("Peak"),": "):""):"","<b>").concat(t,"</b></p>"),u=function(){var t=Me.tooltipSize(o),e=s.left-t.width/2+6,i=s.top-t.height-8;""!==o&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[r?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(e,i,o,"top"))};if(c&&"function"==typeof c&&!l[n]){o="";var p=!0;e=setInterval((function(){p&&(p=!1,c((function(t){o=t,l[n]=t}))),""!==o&&(clearInterval(e),u())}),10)}else c="object"===i(c)?"":c,o=l[n]||c||f[0].tooltip||o||"",u();d3.select(this).attr("r",a.settings.isMinMax&&d===t||a.settings.isMinMax&&h===t?g+2:g+1)})).on("mouseleave.".concat(a.namespace),(function(t){clearInterval(e),Me.hideTooltip(),d3.select(this).attr("r",a.settings.isMinMax&&d===t||a.settings.isMinMax&&h===t?g+1:g)})).on("contextmenu.".concat(a.namespace),(function(t){var e={value:t,name:f[0].name||""};a.settings.isMinMax&&d===t&&(e.highest=!0),a.settings.isMinMax&&h===t&&(e.lowest=!0),a.settings.isPeakDot&&d===t&&(e.peak=!0),Me.triggerContextMenu(a.element,d3.select(this).nodes()[0],e)})),this.element.trigger("rendered",x),this},calculateAspectRatioFit:function(t){var e=Math.min(t.maxWidth/t.srcWidth,t.maxHeight/t.srcHeight);return{width:t.srcWidth*e,height:t.srcHeight*e}},handleEvents:function(){var t=this;return this.element.on("updated.".concat("sparkline"),(function(e,i){t.updated(i)})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.element.empty(),this.teardown().init()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".medianrange").off(e(["mouseenter","mouseleave"])),this.element.find(".point").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("sparkline"),$.removeData(this.element[0],"sparkline"),$.removeData(this.element[0],"chart"))}};var He={title:null,info:null,icon:null,button:null,height:null,color:"slate",attributes:null};function qe(t,e){this.settings=C.mergeSettings(t,e,He),this.element=$(t),this.init()}qe.prototype={init:function(){this.setup().build()},setup:function(){return this.element.addClass("empty-message"),this},build:function(){var t,e=this.settings,i="small"===e.height;if(null!=e&&null!==(t=null==e?void 0:e.button)&&void 0!==t&&(null==t?void 0:t.isPrimary)&&(this.settings.color="azure"),e.icon&&!i&&$('<div class="empty-icon">\n          <svg class="icon-empty-state is-'.concat(this.settings.color,'" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#').concat(e.icon,'"></use>\n          </svg></div>')).appendTo(this.element),e.title&&("[NoData]"===e.title&&(e.title=B?B.translate("NoData"):"No Data Available"),$('<div class="empty-title">'.concat(e.title,"</div>")).appendTo(this.element)),e.info&&!i&&$('<div class="empty-info">'.concat(e.info,"</div>")).appendTo(this.element),e.button&&!i){var n='<div class="empty-actions">\n          <button type="button" class="'.concat(e.button.isPrimary?"btn-primary":"btn-secondary"," ").concat(e.button.cssClass,' hide-focus" id="').concat(e.button.id,'">\n            <span>').concat(e.button.text,"</span>\n          </button>\n        </div>");$(n).appendTo(this.element),e.button.click&&this.element.on("click","button",e.button.click)}return C.addAttributes(this.element,this,e.attributes,"",!0),C.addAttributes(this.element.find(".empty-actions button"),this,e.attributes,"btn",!0),this},updated:function(t){this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),this.build()},destroy:function(){$.removeData(this.element[0],"emptymessage"),this.element.empty(),this.element.removeClass("empty-message")}},$.fn.emptymessage=function(t){return this.each((function(){var e=$.data(this,"emptymessage");e?e.updated(t):e=$.data(this,"emptymessage",new qe(this,t))}))};var Ve={dataset:[],isArea:!1,isBubble:!1,isScatterPlot:!1,showLegend:!0,hideDots:!1,animate:!0,redrawOnResize:!0,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function We(t,e){this.settings=C.mergeSettings(t,e,Ve),this.element=$(t),this.init()}We.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,n,s,a=this,r=this.settings,o=this.element.closest(".is-personalizable").length>0,l="line-chart";if(l+=r.isBubble?" bubble":"",l+=r.isScatterPlot?" scatterplot":"",this.element.addClass(l),0===r.dataset.length)return a.element.emptymessage(r.emptyMessage),this;var c,d={radius:5,radiusOnHover:7,strokeWidth:2,class:"dot"};r.isBubble&&(d.radius=0,d.radiusOnHover=0,d.strokeWidth=0),r.isScatterPlot&&(d.radius=0,d.strokeWidth=50),$.extend(!0,d,r.dots),a.dots=d,this.isRTL=B.isRTL();var h,p,g=[],f=r.tooltip,m={},v={atLeastOne:!1},b=["left","top","right","bottom"];if(r.axisLabels&&$.extend(!0,m,r.axisLabels),!$.isEmptyObject(m))for(h=0,p=b.length;h<p;h++){var y=m[b[h]];y&&"string"==typeof y&&""!==$.trim(y)&&(v[b[h]]=!0,v.atLeastOne=!0)}var w="",x=0,k=r.dataset,T=r.hideDots,S=this.element.parent(),A=!!$(".widget-chart-action",S).length,E=S.width()<450,D=function(t){return void 0!==t&&"function"!=typeof t&&null!==t?"boolean"==typeof t?t?"-45":null:t:null},I={large:D(null===(t=r.xAxis)||void 0===t||null==t?void 0:t.rotate),small:D(null===(e=r.xAxis)||void 0===e||null==e?void 0:e.rotateOnSmallView)},L=!!I.large;L&&(I.use=I.large),E&&I.small&&(L=!0,I.use=I.small),A&&(r.fitHeight=!1);var P=function(t,e){return d3.max(t.data,(function(t){return e?t.value[e]:t.value}))};if(L){k[0].data.forEach((function(t){t.name.length>w.length&&(w=t.name)}));var M=Math.abs(I.use);M=isNaN(M)?0:M,x=w.length*(M>50?5:2)}var R={top:v.top?A?15:40:A?5:30,right:v.right?65:55,bottom:v.bottom?L?60:50:x+35,left:v.left?75:65},O=C.getParentAvailableHeight(a.element[0]),F=r.fitHeight?O:parseInt(S.height(),10),N=S.width()-R.left-R.right,z=F-R.top-R.bottom-30;A&&(z-=42),a.svg=d3.select(this.element[0]).append("svg").attr("width",N+R.left+R.right).attr("height",z+R.top+R.bottom).append("g").attr("transform","translate(".concat(R.left,",").concat(R.top,")"));var H=k[0].data.map((function(t){return t.name})),q={};k[0]&&k[0].valueFormatterString&&$.extend(!0,q,k[0].valueFormatterString);var V,W=function(t,e){return!$.isEmptyObject(q)&&t?d3.format(t)("0.0%"===t?e/100:e):e},j={name:"Name",value:{x:"Value.x",y:"Value.y",z:"Value.z"}};k[0]&&k[0].labels&&$.extend(!0,j,k[0].labels);var U=(r.xAxis&&r.xAxis.scale?r.xAxis.scale:d3.scaleLinear()).range([0,N]),_=d3.scaleLinear().range([z,0]),G=d3.scaleLinear().range([1,25]);V=r.isBubble?{x:k.map((function(t){return P(t,"x")})),y:k.map((function(t){return P(t,"y")})),z:k.map((function(t){return P(t,"z")}))}:r.isScatterPlot?{x:k.map((function(t){return P(t,"x")})),y:k.map((function(t){return P(t,"y")}))}:k.map((function(t){return P(t)}));var Y,K,X=d3.max(k.map((function(t){return t.data.length}))),Q=X<=1?X:X-1,J=U.domain(r.xAxis&&r.xAxis.domain?r.xAxis.domain:[0,r.isBubble||r.isScatterPlot?d3.max(V.x):Q]),Z=_.domain([0,d3.max(r.isBubble||r.isScatterPlot?V.y:V)]).nice(),tt=G.domain([0,d3.max(r.isBubble?V.z:V)]).nice(),et=Q;(r.xAxis&&r.xAxis.ticks&&(et="auto"===r.xAxis.ticks?Math.max(N/85,2):r.xAxis.ticks,(r.isBubble||r.isScatterPlot&&E)&&(et=Math.round(Q/2))),E)&&(null!==(Y=r.xAxis)&&void 0!==Y&&(null==Y?void 0:Y.numTicksOnSmallView)&&(et=null===(K=r.xAxis)||void 0===K||null==K?void 0:K.numTicksOnSmallView));var it,nt=d3.axisBottom(J).ticks(et).tickPadding(10).tickSize(r.isBubble||r.isScatterPlot?-(z+10):0).tickFormat((function(t,e){var i,n;return"function"==typeof(null===(i=r.xAxis)||void 0===i||null==i?void 0:i.formatter)?r.xAxis.formatter(t,e):"auto"===(null===(n=r.xAxis)||void 0===n||null==n?void 0:n.ticks)?H[t]:r.isBubble||r.isScatterPlot?t:H[t]})),st=d3.axisLeft(Z).ticks(8).tickSize(-(N+20)).tickPadding(a.isRTL?-18:20);if(null!==(n=r.yAxis)&&void 0!==n&&(null==n?void 0:n.formatter)&&st.tickFormat((function(t,e){return"function"==typeof r.yAxis.formatter?r.yAxis.formatter(t,e):t})),null!==(s=r.yAxis)&&void 0!==s&&(null==s?void 0:s.ticks)&&st.ticks(r.yAxis.ticks.number,r.yAxis.ticks.format),v.atLeastOne){var at=a.svg.append("g").attr("class","axis-labels"),rt={top:"translate(".concat(N/2,",").concat(-10,")"),right:"translate(".concat(N+28,",").concat(z/2,")rotate(90)"),bottom:"translate(".concat(N/2,",").concat(z+40,")"),left:"translate(".concat(-40,",").concat(z/2,")rotate(-90)")},ot={top:"rotate(0deg) scaleX(-1) translate(-".concat(N/2,"px, ").concat(-10,"px)"),right:"rotate(90deg) scaleX(-1) translate(-".concat(z/2+5,"px, -").concat(N+28,"px)"),bottom:"rotate(0deg) scaleX(-1) translate(-".concat(N/2,"px, ").concat(z+40,"px)"),left:"rotate(90deg) scaleX(-1) translate(-".concat(z/2-5,"px, ",55,"px)")};for(h=0,p=b.length;h<p;h++)v[it=b[h]]&&at.append("text").attr("class","axis-label-".concat(it)).attr("text-anchor","middle").attr("transform",a.isRTL?"":rt[it]).style("font-size","1.25em").style("transform",a.isRTL?ot[it]:"").text(m[it])}if(a.svg.append("g").attr("class","x axis").attr("transform","translate(0,".concat(z,")")).call(nt),a.svg.append("g").attr("class","y axis").call(st),a.svg.selectAll(".tick line").attr("x1","-10"),r.isBubble||r.isScatterPlot){a.svg.selectAll(".x.axis .tick line, .y.axis .tick line").style("opacity",0);var lt=a.svg.select(".x.axis .tick line");lt.attr("x2","-10"),(!r.xAxis||r.xAxis&&!r.xAxis.hideLine)&&lt.style("opacity",1),(!r.yAxis||r.yAxis&&!r.yAxis.hideLine)&&a.svg.select(".y.axis .tick line").style("opacity",1)}a.isRTL&&(a.svg.selectAll("text").attr("transform","scale(-1, 1)"),a.svg.selectAll(".y.axis text").style("text-anchor","end")),L&&a.svg.selectAll(".x.axis .tick text").attr("y",0).attr("x",(function(){return-(this.getBBox().width+10)})).attr("dy","1em").attr("transform","rotate(".concat(I.use,")")).style("text-anchor","start"),r.xAxis&&r.xAxis.formatText&&a.svg.selectAll(".x.axis .tick text").each((function(t){var e=d3.select(this),i=d3.select(this).text(),n=r.xAxis.formatText(i,t);u.html(e.node(),n,"<tspan><text><glyph>")}));var ct=d3.line().x((function(t,e){var i;return J("function"==typeof(null===(i=r.xAxis)||void 0===i||null==i?void 0:i.parser)?r.xAxis.parser(t,e):r.isBubble||r.isScatterPlot?t.value.x:e)})).y((function(t){return Z(r.isBubble||r.isScatterPlot?t.value.y:t.value)}));k.forEach((function(t,e){var n=a.svg.append("g").attr("data-group-id",e).attr("class","line-group");if(r.isArea){var s=d3.area().x((function(t,e){return J(e)})).y0(z).y1((function(t){return Z(r.isBubble||r.isScatterPlot?t.value.y:t.value)}));n.append("path").datum(t.data).attr("fill",(function(){return Me.chartColor(e,"line",t)})).style("opacity",".2").attr("class","area").attr("d",s).call((function(e){e._groups.forEach((function(e){e.forEach((function(e){C.addAttributes($(e),t,t.attributes,"area")}))}))}))}var l=n.append("path").datum(t.data).attr("d",ct(t.data)).attr("stroke",(function(){return r.isBubble||r.isScatterPlot?"":Me.chartColor(e,"line",t)})).attr("stroke-width",2).attr("fill","none").attr("class","line").call((function(e){e._groups.forEach((function(e){e.forEach((function(e){C.addAttributes($(e),t,t.attributes,"line")}))}))})).on("click.".concat(a.namespace),(function(){Me.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),t,a.element,k,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(){Me.triggerContextMenu(a.element,d3.select(this).nodes()[0],t)})),u=l.node().getTotalLength();l.attr("stroke-dasharray","".concat(u," ").concat(u)).attr("stroke-dashoffset",u).transition().duration(r.animate?600:0).ease(d3.easeCubic).attr("stroke-dashoffset",0);var p=function(e,n){var s,a=e.getBoundingClientRect(),l="<p><b>".concat(n.name," </b> ").concat((s=n.value,d3.format(r.formatterString||",")(s)),"</p>"),u=function(){var t=Me.tooltipSize(l),e=a.left-t.width/2+6,i=a.top-t.height-18;e=r.isBubble||r.isScatterPlot?a.left+a.width/2-t.width/2:e,""!==l&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[o?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(e,i,l,"top"))};if(r.isBubble||r.isScatterPlot){for(var p in l='<div class="chart-swatch line"><div class="swatch-caption"><span class="indicator-box"></span>\n            <b>'.concat(n.name,"</b></div>"),n)if(n.hasOwnProperty(p))if("object"!==i(n[p]))j[p]&&(l+="".concat('<div class="swatch-row"><span>').concat(j[p],"</span>")+"<b>".concat(t.name,"</b>")+"</div>");else{var m=n[p];for(var v in m)m.hasOwnProperty(v)&&j[p]&&(l+="".concat('<div class="swatch-row"><span class="text-capitalize">').concat(j[p][v],"</span>")+"<b>".concat(W(q[v],m[v]),"</b>")+"</div>")}l+="</div>"}if(f&&"function"==typeof f&&!g[h]){l="";var b=!0;c=setInterval((function(){b&&(b=!1,f((function(t){l=t,g[h]=t}))),""!==l&&(clearInterval(c),u())}),10)}else{f="object"===i(f)?"":f,l=g[h]||f||n.tooltip||t.tooltip||l||"",u();for(var y=document.querySelectorAll("#svg-tooltip .swatch-caption span"),w=0;w<y.length;w++)y[w].style.backgroundColor=Me.chartColor(r.isBubble||r.isScatterPlot?n.lineIdx:w,"line",n)}d3.select(this).attr("r",(function(t){return r.isBubble?2+tt(t.value.z):d.radiusOnHover}))};T||(r.isScatterPlot||n.selectAll("circle").data(t.data).enter().append("circle").attr("class",d.class).call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"dot")}))}))})).attr("cx",(function(t,e){return r.xAxis&&r.xAxis.parser?J(r.xAxis.parser(t,e)):J(r.isBubble||r.isScatterPlot?t.value.x:e)})).attr("cy",(function(t){return Z(r.isBubble||r.isScatterPlot?0:t.value)})).attr("r",d.radius).style("stroke-width",d.strokeWidth).style("fill",(function(){return Me.chartColor(e,"line",t)})).style("opacity",r.isBubble||r.isScatterPlot?".7":"1").on("mouseenter.".concat(a.namespace),(function(t){t.lineIdx=e,p(this,t)})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(c),Me.hideTooltip(),d3.select(this).attr("r",(function(t){return r.isBubble?tt(t.value.z):d.radius}))})).on("click.".concat(a.namespace),(function(t){Me.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),t,a.element,k,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(t){Me.triggerContextMenu(a.element,d3.select(this).nodes()[0],t)})),r.isScatterPlot&&n.selectAll(".symbol").data(t.data).enter().append("path").attr("class","symbol").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"symbol")}))}))})).attr("transform",(function(t){return"translate(".concat(J(t.value.x),",").concat(Z(t.value.y),")")})).attr("d",d3.symbol().size(d.strokeWidth).type((function(){return d3.symbols[e]}))).style("opacity",0).style("fill",(function(){return Me.chartColor(e,"line",t)})).on("mouseenter.".concat(a.namespace),(function(t){t.lineIdx=e,p(this,t)})).on("mouseleave.".concat(a.namespace),(function(){clearInterval(c),Me.hideTooltip(),d3.select(this).attr("r",(function(){return d.radius}))})).on("click.".concat(a.namespace),(function(t){Me.selectElement(d3.select(this.parentNode),a.svg.selectAll(".line-group"),t,a.element,k,a.initialSelectCall)})).on("contextmenu.".concat(a.namespace),(function(t){Me.triggerContextMenu(a.element,d3.select(this).nodes()[0],t)})),r.isBubble&&n.selectAll("circle").attr("cy",(function(t){return Z(t.value.y)})).transition().duration(r.animate?750:0).ease(d3.easeCubic).attr("r",(function(t){return tt(t.value.z)})),r.isScatterPlot&&n.selectAll(".symbol").transition().duration(r.animate?750:0).ease(d3.easeCubic).style("opacity",1))})),a.svg.selectAll(".y.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")}));var dt=k.map((function(t){return{color:t.color,name:t.name,selectionObj:a.svg.selectAll(".line-group"),selectionInverse:a.svg.selectAll(".line-group"),data:t}}));return r.showLegend&&Me.addLegend(dt,r.isScatterPlot?"scatterplot":"line",r,this.element),Me.appendTooltip(),Me.setSelected=function(t,e){var i,n,s,r=0,o=C.equals,l=function(e,l,c,d){c?(s=a.svg.select('[data-group-id="'.concat(l,'"]')).select(".dot:nth-child(".concat(d+2,")")),("number"==typeof t.groupIndex&&void 0!==t.fieldName&&void 0!==t.fieldValue&&t.groupIndex===l&&t.fieldValue===c[t.fieldName]||void 0!==t.index&&"number"==typeof t.groupIndex&&t.groupIndex===l&&t.index===d||t.elem&&$(s.node()).is(t.elem)||t.data&&o(t.data,c))&&(r++,n=c,i=a.svg.select('[data-group-id="'.concat(l,'"]')))):(s=a.svg.select('[data-group-id="'.concat(l,'"]')),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===e[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===l||t.elem&&$(s.node()).is(t.elem)||t.data&&o(t.data,e))&&(r++,n=e,i=s))};k.forEach((function(t,e){r<1&&t&&t.data&&(t.data.forEach((function(i,n){r<1&&i&&l(t,e,i,n)})),r<1&&l(t,e))})),r>0&&(e||!i.classed("is-selected"))&&Me.selectElement(i,a.svg.selectAll(".line-group"),n,a.element,k,a.initialSelectCall)},this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,i=this,n=0,s=function(s,a,r){s.selected&&n<1&&(n++,t=d3.select(i.svg.selectAll(".line-group").nodes()[r]),e=a)};this.settings.dataset.forEach((function(t,e){t&&s(t,t,e)})),this.settings.dataset.forEach((function(t,e){(t||t.data)&&t.data.forEach((function(i){s(i,t,e)}))})),n>0&&(i.initialSelectCall=!0,Me.selectElement(t,i.svg.selectAll(".line-group"),e,i.element,i.settings.dataset,i.initialSelectCall)),i.initialSelectCall=!1},setTextValues:function(){var t,e,i,n,s,a,r,o,l=this,c=this,d={el:this.element[0].querySelector(".line-chart .axis.y")},h={el:d.el.querySelector(".tick line")},u=[].slice.call(d.el.querySelectorAll(".tick text")),p=null===(t=this.settings)||void 0===t||null===(e=null==t?void 0:t.axisLabels)||void 0===e||null==e?void 0:e.left,g="string"==typeof p&&""!==p.trim(),f={maxWidth:this.element.width(),boxWidth:g?23:43,transMatrix:null===(i=this.svg)||void 0===i||null===(n=null==i?void 0:i.node())||void 0===n||null===(s=null==n?void 0:n.transform)||void 0===s||null===(a=null==s?void 0:s.baseVal)||void 0===a||null===(r=null==a?void 0:a.consolidate())||void 0===r||null==r?void 0:r.matrix};if(f.transY=(null===(o=f.transMatrix)||void 0===o||null==o?void 0:o.f)||30,f.customCss=function(){return{tooltip:{maxWidth:"".concat(f.maxWidth,"px")},arrow:{left:l.isRTL?"calc(100% - 20px)":"20px"}}},d.width=d.el.getBBox().width,h.width=h.el.getBBox().width,f.xDiff=d.width-h.width,u.forEach((function(t,e){var i=t.textContent,n=Me.calculateTextRenderWidth(i),s=t.parentNode;if(n>=f.boxWidth){f.elem=t,m.browser.isIE11()?t.textContent=Me.trimText(i,5):(t.classList.add("hidden"),d3.select(s).append("foreignObject").attr("overflow","visible").attr("width","".concat(f.boxWidth)).attr("height","16").attr("class","foreign-object tick-y".concat(e)).attr("x","-".concat(f.boxWidth+(l.isRTL?12:16))).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml">'.concat(i,"</div>")),f.elem=s.querySelector(".text")),d3.select(f.elem).on("mouseover.".concat(c.namespace),(function(){var t,e,s,a,r=(t=this.getBoundingClientRect(),e=Math.ceil(n/f.maxWidth),s=t.left,a=t.top,s=s<0?30:s,a=(a<0?30:a)-36,e>1&&(a-=.5*(e-1)*33),l.isRTL&&(s=t.left-n+5),{x:s,y:a});Me.showTooltip(r.x,r.y,i,"top",f.customCss())})).on("mouseout.".concat(l.namespace),(function(){return Me.hideTooltip()}))}})),!g){d.width=d.el.getBBox().width,h.width=h.el.getBBox().width,f.xDiff=d.width-h.width;var v=[{min:0,max:23,val:62},{min:23,max:26,val:65},{min:26,max:30,val:67},{min:30,max:32,val:69},{min:32,max:34,val:70},{min:34,max:38,val:71},{min:38,max:42,val:73},{min:42,max:47,val:77},{min:47,max:55,val:78}].filter((function(t){return f.xDiff>=t.min&&f.xDiff<t.max}));v.length&&(f.newX=v[0].val,d3.select(this.svg.node()).attr("transform","translate(".concat(f.newX,",").concat(f.transY,")")),m.browser.isIE11()&&this.isRTL&&d3.selectAll(".line-chart .axis.y .tick text").attr("x",f.boxWidth+3))}},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},width:0,getSelected:function(){return Me.selected},setSelected:function(t,e){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};Me.setSelected(t,e,i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout((function(){return e()}),300):e()},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),t&&t.dataset&&(this.settings.dataset=t.dataset),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".line-group .line").off(e(["click","contextmenu"])),this.element.find(".line-group .symbol").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),this.dots&&this.element&&(this.element.find(".line-group .".concat(this.dots.class)).off(e(["mouseenter","mouseleave","click","contextmenu"])),delete this.dots),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("line-chart"),$.removeData(this.element[0],"line"),$.removeData(this.element[0],"chart"))}};var je={dataset:[],isStacked:!1,showLegend:!0,animate:!0,format:null,redrawOnResize:!0,ticks:9,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ue(t,e){this.settings=C.mergeSettings(t,e,je),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ue.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this},build:function(){var t,e=this,i=this.element.closest(".is-personalizable").length>0,n=function(t){return d3.format(e.settings.formatterString||",")(t)},s=this.settings.dataset;if(this.dataset=s,0===s.length)return e.element.emptymessage(e.settings.emptyMessage),this;var a=this.element.parent(),r=B.isRTL(),o="column-positive-negative"===this.settings.type||"positive-negative"===this.settings.type,l=1===s.length;this.isSingle=l;var d=!(l||!l&&e.settings.isStacked);this.isGrouped=d;var h,p,g,f,m,v,b,y,w,x,k=40,T=40,S=l&&void 0===s[0].name?e.settings.isStacked?20:50:35,A=45,E=C.getParentAvailableHeight(e.element[0]),D=this.settings.fitHeight?E:parseInt(a.height(),10),I=a.width()-A-T-10,L=D-k-S-(l&&void 0===s[0].name?e.settings.isStacked||o?30:0:40),P=d3.min(s,(function(t){return d3.min(t.data,(function(t){return t.value}))})),M=d3.max(s,(function(t){return d3.max(t.data,(function(t){return t.value}))}));o&&(h=d3.min(s,(function(t){return d3.min(t.data,(function(t){return t.target}))})),p=d3.max(s,(function(t){return d3.max(t.data,(function(t){return t.target}))})),P=d3.min([P,h]),M=d3.max([M,p]),m={target:null,positive:null,negative:null},y={target:"Target",positive:"Positive",negative:"Negative"},v={target:"neutral",positive:"good",negative:"error"},b={},s[0]&&(s[0].attributes&&$.extend(!0,m,s[0].attributes),s[0].colors&&$.extend(!0,v,s[0].colors),s[0].legends&&$.extend(!0,y,s[0].legends),s[0].patterns&&$.extend(!0,b,s[0].patterns)),w=[],$.each(y,(function(t,e){var i={name:e,color:v[t],pattern:b[t],option:t};m[t]&&(i.data={attributes:m[t]}),w.push(i)}))),this.element.addClass("column-chart");var R=[],O=e.settings.tooltip,F=d3.scaleBand().range([0,I]).round(!0).padding("column-grouped"===this.settings.type?.1:0),N=d3.scaleBand(),z=d3.scaleLinear().range([L,0]),H=null,q=null;if(e.settings.isStacked){var V={y1:[],y2:[]};t=l?s[0].data.map((function(t,e){var i=0;return 0===e?(V.y1.push(t.value),V.y2.push(0)):(i=V.y1[0]+V.y2[0],V.y1[0]=t.value,V.y2[0]=i),[$.extend({},t,{y0:i,y:t.value,x:t.name,color:t.color,pattern:t.pattern,parentName:t.name,tooltip:t.tooltip})]})):s.map((function(t,e){return t.data.map((function(i,n){var s=0;return 0===e?(V.y1.push(i.value),V.y2.push(0)):(s=V.y1[n]+V.y2[n],V.y1[n]=i.value,V.y2[n]=s),$.extend({},i,{y0:s,y:i.value,x:i.name,color:i.color,pattern:i.pattern,parentName:t.name,tooltip:t.tooltip})}))})),d3.stack()(t),H=d3.scaleBand().domain(d3.range(t[0].length)).rangeRound([0,I],.05),l&&e.settings.isStacked&&H.paddingInner(.095),q=d3.scaleLinear().domain([0,d3.max(t,(function(t){return d3.max(t,(function(t){return t.y0+t.y}))}))]).range([0,L])}var W=s[0].data.map((function(t){return t.name})),j=d3.axisBottom(F).tickSize(0).tickPadding(12),U=d3.axisLeft(z).tickSize(-I).tickPadding(r?-12:12).ticks(e.settings.ticks||9,d3.format(e.settings.format||"s"));e.settings.yAxis&&(e.settings.yAxis.formatter&&U.tickFormat((function(t,i){return"function"==typeof e.settings.yAxis.formatter?e.settings.yAxis.formatter(t,i):t})),e.settings.yAxis.ticks&&e.settings.yAxis.ticks.number>1&&e.settings.yAxis.ticks.format&&U.ticks(e.settings.yAxis.ticks.number,e.settings.yAxis.ticks.format));var _=d3.select(this.element[0]).append("svg").attr("width",I+A+T).attr("height",L+k+S).append("g").attr("transform","translate(".concat(A,",").concat(k,")"));this.svg=_;var G,Y=s.map((function(t){return t.name})),K=s.map((function(t){return d3.max(t.data,(function(t){return o?t.target:t.value}))}));if(e.settings.isStacked&&(G=t.map((function(t){return d3.max(t,(function(t){return t.y+t.y0}))}))),l&&(Y=s[0].data.map((function(t){return t.name}))),o&&(P+=P/z.ticks().length,K[0]+=K[0]/(z.ticks().length/2)),function(){if(e.settings.isStacked&&l)g=s[0].data;else for(var t,i=s.length-1;i>-1;i--)t=s[i].data.map((function(t){return t})),$.extend(!0,g,t),g=$.map(g,(function(t){return t}))}(),e.settings.isStacked&&!l&&(f=Y.map((function(t,e){return s[e]}))),F.domain(e.settings.isStacked?W:Y),N.domain(W).rangeRound([0,l||e.settings.isStacked?I:F.bandwidth()]),z.domain([P<0?P:e.settings.minValue||0,d3.max(e.settings.isStacked?G:K)]).nice(),(!l||l&&!e.settings.isStacked)&&_.append("g").attr("class","x axis").attr("transform","translate(0,".concat(L+(o?10:0),")")).call(j),_.append("g").attr("class","y axis").call(U),r&&P<0){var X,Q=0;_.selectAll(".axis.y text").attr("class",(function(t){return X=d3.select(this).text().length,Q=X>Q?X:Q,t<0?"negative-value":"positive-value"})).attr("x",(function(t){return Q*(t<0?9:5)}))}var J,Z,tt=[];s.forEach((function(t){tt.push($.extend({},t,{values:t.data}))})),l&&(tt=[],Y=s[0].data.forEach((function(t){tt.push(t)})));var et=tt[0]&&tt[0].values?tt[0].values.length:0,it=I/tt.length>35*(et+1),nt=function(t){return Me.chartColor(0,"",{color:t})},st=function(t,i){var n;t.empty()?i():(n=t.size(),t.on("end.".concat(e.namespace),(function(){0===--n&&i()})))},at=function(i){var s;if(i=o&&i,l||o){var a=i?"target-bar":"bar";if(s=e.svg.selectAll("rect.".concat(a)).data(e.settings.isStacked?t:tt).enter().append("rect").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,a)}))}))})).attr("class",(function(t,e){var n="bar series-".concat(e);return o&&(n=(i?"target-bar series-".concat(e):n)+(t.value>0?" positive":" negative")),n})).attr("width",Math.min.apply(null,[N.bandwidth()-2,35])).attr("x",(function(t){return e.settings.isStacked?H(0):N(t.name)+(N.bandwidth()-35)/2})).attr("y",(function(){return z(0)>L?L:z(0)})).attr("height",(function(){return 0})).attr("mask",(function(t){return o?i?b.target?"url(#".concat(b.target,")"):null:t.value<0?b.negative?"url(#".concat(b.negative,")"):null:b.positive?"url(#".concat(b.positive,")"):null:null})).style("fill",(function(t){return o?nt(i?v.target:t.value<0?v.negative:v.positive):null})),o){_.selectAll(i?".target-bartext":".bartext").data(tt).enter().append("text").attr("class",(function(t){return(i?"target-bartext":"bartext")+(t.value>0?" positive":" negative")})).attr("text-anchor","middle").attr("x",(function(t){return(N(t.name)+N.bandwidth()/2)*(r?-1:1)})).attr("y",(function(t){return i?z(t.target)-6:z(t.value>0?0:t.value)+12})).style("opacity",0).style("fill",(function(t){return i?"":t.value<0?nt(v.negative):nt(v.positive)})).style("font-weight","bold").text((function(t){return n(i?t.target:t.value)}))}s.transition().duration(e.settings.animate?1e3:0).call(st,(function(){_.selectAll(".target-bartext, .bartext").transition().duration(e.settings.animate?300:0).style("opacity",1)})).attr("y",(function(t){var n=e.settings.isStacked?L-q(t[0].y)-q(t[0].y0):t.value<0?z(0):z(t.value);return i?z(t.target):t.value<0?n:n>L-3?L-2:n})).attr("height",(function(t){var n;return n=e.settings.isStacked?q(t[0].y):t.value<0?L-z(0)-(L-z(t.value)):L-z(t.value)-(L-z(0)),n=t.value<0?n:n<3?2:n>L?L-z(t.value):n,i?L-z(t.target)-(L-z(0)):n}))}else{(s=_.selectAll(".x-value").data(e.settings.isStacked?t:tt).enter().append("g").attr("class","series-group g").attr("data-group-id",(function(t,e){return e})).attr("transform",(function(t){var i=F(e.settings.isStacked?W[0]:t.name),n=F.bandwidth();(!e.settings.isStacked&&it&&n>35*tt.length*2&&(i+=n/2/tt.length/2),e.isGrouped&&!e.settings.isStacked)&&(2===t.data.length?n<120?i-=13.5:i=F(t.name):i-=35/(n>150?2:4));if(e.settings.isStacked&&I<290&&n<40){var s,a,r=(null===(s=tt[0])||void 0===s||null===(a=null==s?void 0:s.data)||void 0===a||null==a?void 0:a.length)||0;i=(I-n*r)/r/2}return"translate(".concat(i,",0)")})).selectAll("rect").data((function(t){return e.settings.isStacked?t:t.values})).enter().append("rect").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"bar")}))}))})).attr("class",(function(t,e){return"series-".concat(e," bar")})).attr("width",Math.min.apply(null,[N.bandwidth()-2,35])).attr("x",(function(t,i){var n=Math.min.apply(null,[N.bandwidth()-2,35]);return e.settings.isStacked?H(i):N.bandwidth()/2+(n+2)*i-(1===tt[0].values.length||5===tt[0].values.length||4===tt[0].values.length?n/2:0)})).attr("y",(function(){return z(0)>L?L:z(0)})).attr("height",(function(){return 0}))).transition().duration(e.settings.animate?600:0).attr("y",(function(t){var i=e.settings.isStacked?L-q(t.y)-q(t.y0):t.value<0?z(0):z(t.value);return t.value<0?i:i>L-3?L-2:i})).attr("height",(function(t){var i;return i=e.settings.isStacked?q(t.y):t.value<0?L-z(0)-(L-z(t.value)):L-z(t.value)-(L-z(0)),t.value<0?i:i<3?2:i>L?L-z(t.value):i}))}return s};o&&(J=at(!0));var rt=at();if(o&&(Z=d3.selectAll([].concat(c(J.nodes()),c(rt.nodes())))),o||(e.settings.isStacked?e.settings.isStacked&&!l?rt.style("fill",(function(){var t=d3.select(this.parentNode).attr("data-group-id");return Me.chartColor(t,"bar",s[t])})).attr("mask",(function(){var t=d3.select(this.parentNode).attr("data-group-id");return s[t].pattern?"url(#".concat(s[t].pattern,")"):null})):e.settings.isStacked&&l&&rt.style("fill",(function(t,e){return Me.chartColor(e,"bar",t[0])})).attr("mask",(function(t){return t[0].pattern?"url(#".concat(t[0].pattern,")"):null})):rt.style("fill",(function(t,e){return l?Me.chartColor(e,"column-single",s[0].data[e]):Me.chartColor(e,"bar",g[e])})).attr("mask",(function(t,e){return l?s[0].data[e].pattern?"url(#".concat(s[0].data[e].pattern,")"):null:g[e].pattern?"url(#".concat(g[e].pattern,")"):null}))),$.extend(Me.settings,{svg:_,chartType:"Column",isSingle:l,isGrouped:d,isStacked:e.settings.isStacked}),(o?Z:rt).on("mouseenter.".concat(e.namespace),(function(a,r){var c,d,h,u,p,f,m,w=this,C=$(this),k="",T=d3.event.pageY,S=function(t,e){return t&&e?"".concat('<svg width="12" height="12"><rect style="fill: ').concat(e,'" mask="url(#').concat(t,')" height="12" width="12" />')+"</svg>":""},A=function(t){f=Me.tooltipSize(k),c=C[0].getBoundingClientRect().left-f.width/2+C.attr("width")/2,e.settings.isStacked?d=C[0].getBoundingClientRect().top-f.height-10:(d=T-Me.tooltip.outerHeight()-25,s.length>1&&(c=w.parentNode.getBoundingClientRect().left-f.width/2+w.parentNode.getBoundingClientRect().width/2,t?(d+=Me.tooltip.outerHeight()+50)>w.parentNode.getBoundingClientRect().bottom+10&&(d=w.parentNode.getBoundingClientRect().bottom+10):d=w.parentNode.getBoundingClientRect().top-Me.tooltip.outerHeight()+25)),""!==k&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[i?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(c,d,k,t?"bottom":"top"))},E=function(){"string"==typeof k?k=function(t,e,i){if(null==i?i=/{{(\w+)}}/g:"string"==typeof i&&(i=new RegExp(i,"g")),"string"==typeof t&&"function"==typeof e&&i instanceof RegExp)for(var n=9999;i.test(t)&&n>0;)t=t.replace(i,(function(t,i){return e(t,i)})),n--;return t}(k,(function(t,e){var i=n(a[e]);return isNaN(i)?a[e]:i})):"number"==typeof k&&(k=k.toString())},D=function(t){k="";var e={index:r,data:a},i=function(t){"string"!=typeof t&&"number"!=typeof t||(k=t,E(),R[r]=k)},n=!0;x=setInterval((function(){n&&(n=!1,t(i,e)),""!==k&&(clearInterval(x),A())}),10)};if(e.settings.isStacked){if(l)k="<p><b>".concat(n(a[0].value),"</b> ").concat(a[0].name,"</p>");else{for(k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(t[0][r].name,"</b></div>"),h=t.length-1,u=0;h>=u;h--)p=Me.chartColor(h,"bar",s[h]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(s[h].pattern?"transparent":p,';">').concat(S(s[h].pattern,p),"</div>")+"<span>".concat(t[h][r].parentName,"</span><b>").concat(n(t[h][r].value),"</b>")+"</div>";k+="</div>"}f=Me.tooltipSize(k),c=C[0].getBoundingClientRect().left-f.width/2+C.attr("width")/2,d=C[0].getBoundingClientRect().top-f.height-10}else{if(o)k="".concat('<div class="chart-swatch"><div class="swatch-caption"><b>').concat(a.name,"</b></div>")+'<div class="swatch-row">'+'<div style="background-color:'.concat(b.target?"transparent":nt(v.target),';">').concat(S(b.target,nt(v.target)),"</div>")+"<span>".concat(y.target,"</span><b>").concat(n(a.target),"</b>")+'</div><div class="swatch-row">'+'<div style="background-color:'.concat(a.value<0?b.negative?"transparent":nt(v.negative):b.positive?"transparent":nt(v.positive),';">').concat(a.value<0?S(b.negative,nt(v.negative)):S(b.positive,nt(v.positive)),"</div>")+"<span>".concat(y[a.value<0?"negative":"positive"],"</span><b>").concat(n(a.value),"</b>")+"</div></div>";else if(1===s.length)k="<p><b>".concat(n(a.value),"</b> ").concat(a.name,"</p>");else{var I=d3.select(this.parentNode).datum().values;for(k='<div class="chart-swatch">',h=0,u=I.length;h<u;h++)p=Me.chartColor(h,"bar",g[h]),k+="".concat('<div class="swatch-row"><div style="background-color:').concat(g[h].pattern?"transparent":p,';">').concat(S(g[h].pattern,p),"</div>")+"<span>".concat(I[h].name,"</span><b>").concat(n(I[h].value),"</b>")+"</div>";k+="</div>",m=I.length>6}f=Me.tooltipSize(k),c=C[0].getBoundingClientRect().left-f.width/2+C.attr("width")/2,d=T-Me.tooltip.outerHeight()-25,s.length>1&&(c=this.parentNode.getBoundingClientRect().left-f.width/2+this.parentNode.getBoundingClientRect().width/2,d=this.parentNode.getBoundingClientRect().top-Me.tooltip.outerHeight()+25)}O&&"function"==typeof O&&void 0===a.tooltip&&!R[r]?D(O):(k=R[r]||O||k||"",R[r]||!1===a.tooltip||void 0===a.tooltip||null===a.tooltip||("function"==typeof a.tooltip?D(a.tooltip):(k=a.tooltip.toString(),E(),R[r]=k)),"string"==typeof k&&""!==k&&A(m))})).on("mouseleave.".concat(e.namespace),(function(){clearInterval(x),Me.hideTooltip()})).on("click.".concat(e.namespace),(function(t,i,n){var s=this&&d3.select(this).classed("target-bar"),a=this&&d3.select(this).classed("is-selected"),r=parseInt(d3.select(this.parentNode).attr("data-group-id"),10);if(s)for(var o=d3.selectAll(".bar").nodes(),l=o.length,c=0;c<l;c++){var h=o[c];if(d3.select(h).classed("is-selected")){a=!1;break}}Me.setSelectedElement({task:a?"unselected":"selected",container:e.element,selector:this,isTrigger:!e.initialSelectCall&&!a,isTargetBar:s,triggerGroup:d,d:t,i:i,type:e.settings.type,dataset:e.dataset,isSingle:e.isSingle,isGrouped:e.isGrouped,isStacked:e.settings.isStacked,svg:e.svg,clickedLegend:!0===n}),a&&!e.initialSelectCall&&e.element.triggerHandler("selected",[d3.select(this).nodes(),{},d?r:i])})).on("contextmenu.".concat(e.namespace),(function(t){Me.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),e.settings.isGrouped=d,e.settings.isSingle=l,e.settings.svg=this.svg,e.settings.showLegend)if(l&&s[0].name)Me.addLegend(s,"column-single",e.settings,e.element);else if(o)Me.addLegend(w,e.settings.type,e.settings,e.element);else if(e.settings.isStacked&&l)Me.addLegend(g,e.settings.type,e.settings,e.element);else if(!l){var ot=e.settings.isStacked?f:g;ot=ot.map((function(t){var e;return!t.attributes||null!==(e=t.data)&&void 0!==e&&(null==e?void 0:e.attributes)||(t.data?t.data.attributes=t.attributes:t.data={attributes:t.attributes}),t})),Me.addLegend(ot,e.settings.type,e.settings,e.element)}return e.settings.xAxis&&e.settings.xAxis.formatText&&e.svg.selectAll(".x.axis .tick text").each((function(t){var i=d3.select(this),n=d3.select(this).text(),s=e.settings.xAxis.formatText(n,t);u.html(i.node(),s,"<tspan>")})),Me.isRTL&&Me.isIE&&(_.selectAll("text").attr("transform","scale(-1, 1)"),_.selectAll(".y.axis text").style("text-anchor","start"),o&&_.selectAll(".negative-value").style("text-anchor","end")),_.selectAll(".y.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")})),Me.appendTooltip(),Me.labelsColide(_)&&Me.applyAltLabels(_,tt,"shortName"),Me.labelsColide(_)&&Me.applyAltLabels(_,tt,"abbrName"),Me.labelsColide(_)&&(Me.applyAltLabels(_,tt,null,null,!0),o&&_.selectAll(".target-bartext, .bartext").attr("x",(function(){return+d3.select(this).attr("x")-(r?-6:6)}))),Me.setSelected=function(t,i){var n,a,r,o,c,h=0,u=C.equals,p=_.node().parentNode.nextSibling,g=d3.select(p),f=g.node()&&g.classed("chart-legend"),m=function(i,o){var c=!!i;i=c?d3.select(i):_,o=void 0!==o?o:0,i.selectAll(".bar").each((function(i,d){i&&h<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===(l&&e.settings.isStacked?i[0][t.fieldName]:i[t.fieldName])||void 0!==t.index&&t.index===d||t.data&&u(t.data,s[o].data[d])||t.elem&&$(this).is(t.elem))&&(h++,a=d3.select(this),n=d,c&&!e.settings.isStacked&&(r=!0))}))};d||e.settings.isStacked&&!l&&!d?(s.forEach((function(i,s){h<1&&(o=$(_.select('[data-group-id="'.concat(s,'"]')).node()),(void 0!==t.groupName&&void 0!==t.groupValue&&t.groupValue===i[t.groupName]||void 0!==t.groupIndex&&t.groupIndex===s||t.data&&u(t.data,i)||t.elem&&o.is(t.elem))&&void 0===t.fieldName&&void 0===t.fieldValue&&void 0===t.index&&(h++,a=_.select('[data-group-id="'.concat(s,'"]')).select(".bar"),n=s,e.settings.isStacked&&!d&&(r=!0)))})),h<1&&(c=_.selectAll(".series-group")).nodes().length&&c.each((function(t,e){m(this,e)}))):m(),h>0&&(i||!a.classed("is-selected"))&&(r?f&&$(g.selectAll(".chart-legend-item")[0][n]).trigger("click.chart"):a.on("click.".concat(e.namespace)).call(a.node(),a.datum(),n))},this.setInitialSelected(),this.element.trigger("rendered"),this},setInitialSelected:function(){var t,e,i,n,s=this,a=/positive-negative/.test(s.settings.type),r=s.svg.node().parentNode.nextSibling,o=d3.select(r),l=o.node()&&o.classed("chart-legend"),c=!1,d=0,h=function(i){(i=i?d3.select(i):s.svg).selectAll(".bar").each((function(i,n){i&&((s.isSingle&&s.settings.isStacked?i[0]:i).selected&&d<1&&(d++,e=d3.select(this),t=n))}))};if(a){var u=function(e){c=!0,t=e,d++};if(s.dataset[0].targetBarsSelected)u(0);else{var p={selected:0,i:-1};s.dataset[0].data.forEach((function(t,e){t.selected&&(p.selected++,p.i=e)})),p.selected>1&&(p.elem=s.svg.select(".target-bar.series-".concat(p.i)),u(p.elem.classed("positive")?1:2))}}c||!s.isGrouped&&(!s.settings.isStacked||s.isSingle||s.isGrouped)?h():(s.dataset.forEach((function(i,a){i.selected&&d<1&&(d++,e=s.svg.select('[data-group-id="'.concat(a,'"]')).select(".bar"),t=a,!s.settings.isStacked||s.isSingle||s.isGrouped||(n=!0))})),d<1&&function(){var e=s.svg.selectAll(".series-group");if(e.nodes().length){var n={groups:[],itemsInGroup:0};if(e.each((function(t,e){var s;h(this),((i=Array.isArray(t))||null!=t&&(null==t?void 0:t.data)&&Array.isArray(null==t||null==t?void 0:t.data))&&(n.itemsInGroup=(i?t:t.data).length,d>0&&n.groups.push({i:e,totalSel:(s=i?t:t.data,s.reduce((function(t,e){return e.selected?t+1:t}),0))}))})),n.gLen=n.groups.length,!c&&(i&&n.gLen&&n.groups[0].totalSel>1||n.gLen===e.size()&&!i)){var a=n.groups.filter((function(t){return(null==t||null==t?void 0:t.totalSel)>1})).length;c=i?!!a:!a,i&&(t=n.groups[0].i)}}}()),d>0&&(n||c?l&&(this.initialSelectCall=!0,$(o.node()).find(".chart-legend-item").eq(t).trigger("click.chart")):(this.initialSelectCall=!0,e.on("click.".concat(s.namespace)).call(e.node(),e.datum(),t))),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return Me.selected},setSelected:function(t,e){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:!1,isGrouped:!1,isSingle:!1};Me.setSelected(t,e,i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build()},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".target-bartext, .bartext").off("end.".concat(self.namespace)),this.element.find(".bar, .target-bar").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("column-chart"),$.removeData(this.element[0],"column"),$.removeData(this.element[0],"chart"))}};var _e={dataset:[],isStacked:!0,isNormalized:!1,isGrouped:!1,showLegend:!0,animate:!0,longText:!1,format:null,redrawOnResize:!0,tooltip:null,useLogScale:!1,ticks:null,showLines:!0,labelFactor:1.27,wrapWidth:60,fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ge(t,e){this.settings=C.mergeSettings(t,e,_e),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ge.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.initialSelectCall=!1,this.settings.localeInfo&&d3.formatDefaultLocale(this.settings.localeInfo),this.build().handleEvents(),"initial"===this.settings.animate&&(this.settings.animate=!1),this.element.trigger("rendered",[this.svg]),this},build:function(){var t,e,i,n,s,a,r,o,l,c,d=this,h=this.settings,u=this.element.parent(),p=this.element.closest(".is-personalizable").length>0,g=!!h.formatterString,f=function(t){return d3.format(d.settings.formatterString||",")(t)},m=[],v=[],b=h.tooltip,y=0,w=30,x=u.width()<450,k=h.dataset;this.isRTL=B.isRTL(),this.dataset=k;var T=window.innerWidth;this.viewport={xxsmall:T<=380,xsmall:T>=381&&T<=450,small:T>=451&&T<=480,medium:T>=481&&T<=992,large:T>992};var A={top:20,left:30,right:30,bottom:1===k.length?5:30};if(h.isGrouped&&1===k.length&&(A.bottom=30,y=2),this.element.addClass("bar-chart"),h.isGrouped&&this.element.addClass("bar-chart-grouped"),h.isStacked&&this.element.addClass("bar-chart-stacked"),0===k.length)return d.element.emptymessage(h.emptyMessage),this;var E=k.map((function(t){return{name:t.name,color:t.color,pattern:t.pattern,attributes:t.attributes}}));this.ellipsis={use:!1,percentageWidth:25,threshold:12},this.viewport.xxsmall?(this.ellipsis.percentageWidth=37,this.ellipsis.threshold=10):this.viewport.xsmall?(this.ellipsis.percentageWidth=28,this.ellipsis.threshold=10):this.viewport.small&&(this.ellipsis.percentageWidth=35);var D={y1:[],y2:[]};k=k.map((function(t,e){return t.data.map((function(t,i){var n=0;return 0===e?(D.y1.push(t.value),D.y2.push(0)):(n=D.y1[i]+D.y2[i],D.y1[i]=t.value,D.y2[i]=n),$.extend({},t,{y0:n,y:t.value,x:Me.getLabel(t,d.viewport),color:t.color,pattern:t.pattern})}))})),t=0,e="",k=k.map((function(i,n){if(!h.isStacked&&E[n]){var s=Me.getLabel(E[n],d.viewport),a=s.length;e=a>t?s:e,t=a>t?a:t}return i.map((function(i){if(h.isStacked){var n=i.x.length;e=n>t?i.x:e,t=n>t?n:t}return $.extend({},i,{x:i.y,y:i.x,x0:i.y0,color:i.color,pattern:i.pattern})}))}));var I=C.getParentAvailableHeight(d.element[0]),L=h.fitHeight?I:parseInt(u.height(),10),P=L-A.top-A.bottom-30,M=L-A.bottom-(h.isStacked?0:15),R=parseInt(u.width(),10)-A.left,O=Me.calculateTextRenderWidth(e);O<200&&(O+=26),Me.calculatePercentage(O,R)>55&&(O=Me.getPercentage(R,this.ellipsis.percentageWidth),this.ellipsis.use=!0),d.svg=d3.select(this.element[0]).append("svg").attr("width",R).attr("height",M).append("g").attr("class","group").attr("transform","translate(".concat(O,",").concat(A.top,")"));var F=d3.min(k,(function(t){return d3.min(t,(function(t){return h.isStacked?t.x+t.x0:t.x}))})),N=d3.max(k,(function(t){return d3.max(t,(function(t){return h.isStacked?t.x+t.x0:t.x}))}));if(h.isStacked&&h.isNormalized){var z=[];k.forEach((function(t){t.forEach((function(t,e){z[e]=(void 0===z[e]?0:z[e])+t.x}))})),k.forEach((function(t){t.forEach((function(t,e){var i=z[e]/100;t.x/=i,t.x0/=i}))})),N=100}var H,q=R-O-A.left;H=h.useLogScale?d3.scaleLog().domain([F>0?F:1,N]).range([1,q]).nice():d3.scaleLinear().domain([F<0?F:0,N]).range([0,q]).nice(),h.isStacked?(i=k[0].map((function(t){return t.y})),l=.32):(i=E.map((function(t){return t.name})),function(){for(var t,e=k.length-1;e>-1;e--)t=k[e].map((function(t){return t})),$.extend(!0,m,t),m=$.map(m,(function(t){return t}))}(),n=0,s=m.length,l=(a=P/i.length)/s,o=a-(r=s>1?a-.6*l:w),w=r/s,l=0);var V=d3.scaleBand().domain(i).rangeRound([0,P]).padding(l,l),W=d3.axisBottom().scale(H).tickSize(-P);x&&W.ticks(O<100?5:3),h.isStacked&&h.isNormalized&&W.tickFormat((function(t){return"".concat(t,"%")})),h.useLogScale&&(W.ticks(10,",.1s"),!1===h.showLines&&W.tickSize(0)),h.ticks&&!h.useLogScale&&(d.viewport.small?W.ticks(h.ticks.smallNumber,h.ticks.format):d.viewport.medium?W.ticks(h.ticks.mediumNumber,h.ticks.format):d.viewport.large&&W.ticks(h.ticks.largeNumber,h.ticks.format));var j=d3.axisLeft().scale(V).tickPadding(15).tickSize(0);d.svg.append("g").attr("class","axis x").attr("transform","translate(0,".concat(P,")")).call(W),d.svg.append("g").attr("class","axis y").call(j);var U=d.svg.selectAll("g.group").data(k).enter().append("g").attr("class","series-group").attr("data-group-id",(function(t,e){return e}));if(h.isGrouped=d.svg.selectAll(".series-group").nodes().length>1&&!h.isStacked||h.isGrouped&&1===k.length,h.isSingle=1===d.svg.selectAll(".series-group").nodes().length&&h.isStacked,U.selectAll("rect").data((function(t,e){return t.forEach((function(t){t.index=e,h.isStacked||(t.gindex=n++)})),t})).enter().append("rect").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"bar")}))}))})).attr("class",(function(t,e){return"bar series-".concat(e)})).style("fill",(function(t,e){return h.isStacked?1===E.length?Me.chartColor(e,"bar-single",t):Me.chartColor(t.index,"bar",E[t.index]):Me.chartColor(e,"bar",m[e])})).attr("mask",(function(t,e){return 1===k.length&&k[0][e].pattern?"url(#".concat(k[0][e].pattern,")"):h.isStacked&&E[t.index].pattern?"url(#".concat(E[t.index].pattern,")"):!h.isStacked&&m[e]&&m[e].pattern?"url(#".concat(m[e].pattern,")"):""})).attr("x",(function(t){return h.useLogScale?0:h.isStacked&&!h.isSingle?H(t.x0)+1:H(0)+1})).attr("y",(function(t){return h.isStacked?V(t.y):(a-r)/2+(t.gindex*w+t.gindex*y)+t.index*o})).attr("height",(function(){return h.isStacked?V.bandwidth():w})).attr("width",0).on("mouseenter.".concat(d.namespace),(function(t,e){var i,n,s,a=0,r=[],o="",l=d3.select(this.parentNode).datum(),d=Math.round(l.length/2),u=d3.select(this),y=function(t,e){return t&&e?'<svg width="12" height="12"><rect mask="url(#'.concat(t,')" height="12" width="12" /></svg>'):""},w=function(t,e,i){var n=Me.tooltipSize(o),s=t+parseFloat(u.attr("width"))/2-n.width/2,a=i?e:e-n.height-13;""!==o&&(Me.tooltip&&Me.tooltip.length&&Me.tooltip[p?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(s,a,o,i?"bottom":"top"))},x=function(){"string"==typeof o?o=function(t,e,i){if(null==i?i=/{{(\w+)}}/g:"string"==typeof i&&(i=new RegExp(i,"g")),"string"==typeof t&&"function"==typeof e&&i instanceof RegExp)for(var n=9999;i.test(t)&&n>0;)t=t.replace(i,(function(t,i){return e(t,i)})),n--;return t}(o,(function(e,i){var n=f(t[i]);return isNaN(n)?t[i]:n})):"number"==typeof o&&(o=o.toString())};if(1===k.length)o="<p><b>".concat(t.y," </b>").concat(t.x,"</p>");else{if(o='<div class="chart-swatch">',h.isStacked)for(i=0,n=k.length;i<n;i++){a=0,s=Me.chartColor(i,"bar",E[i]);for(var C=0,T=k.length;C<T;C++)a+=k[C][e].x,r[C]=k[C][e].x;o+='<div class="swatch-row">\n                  <div class="swatch-color">'.concat(y(E[i].pattern,s),"</div>\n                  <span>").concat(E[i].name,"</span>\n                  <b> ").concat(g?f(r[i]):"".concat(Math.round(r[i]/a*100),"%")," </b>\n                </div>")}else for(d>1&&(u=d3.select(this.parentNode).select(".series-".concat(d))),i=0,n=l.length;i<n;i++)s=Me.chartColor(i,"bar",m[i]),o+='<div class="swatch-row">\n                    <div class="swatch-color">'.concat(y(m[i].pattern,s),"</div>\n                  <span>").concat(l[i].name,"</span><b>").concat(f(l[i].value),"</b>\n                </div>");o+="</div>"}a>0&&(o='<span class="chart-tooltip-total"><b>'.concat(a,"</b> ").concat(B.translate("Total"),"</span>").concat(o));var S=u.nodes()[0].getBoundingClientRect().top+$(window).scrollTop(),A=u.nodes()[0].getBoundingClientRect().left+$(window).scrollLeft(),D=!h.isStacked&&l.length>6;if(b&&"function"==typeof b&&!v[e]){o="";var I=!0;c=setInterval((function(){I&&(I=!1,b((function(t){o=t,v[e]=t}))),""!==o&&(clearInterval(c),w(A,S,D))}),10)}else if(o=v[e]||b||o||"",v[e]||!1===t.tooltip||void 0===t.tooltip||null===t.tooltip||("function"==typeof t.tooltip?function(i){o="";var n={index:e,data:t},s=function(t){"string"!=typeof t&&"number"!=typeof t||(o=t,x(),v[e]=o)},a=!0;c=setInterval((function(){a&&(a=!1,i(s,n)),""!==o&&(clearInterval(c),w())}),10)}(t.tooltip):(o=t.tooltip.toString(),x(),v[e]=o)),"string"==typeof o&&""!==o&&w(A,S,D),h.isStacked)for(i=0,n=k.length;i<n;i++){s=Me.chartColor(i,"bar",E[i]);var L=$("#svg-tooltip").find(".swatch-row").eq(i);E[i].pattern||L.find("div").css("background-color",s),L.find("rect").css("fill",s)}else for(i=0,n=l.length;i<n;i++){s=Me.chartColor(i,"bar",m[i]);var P=$("#svg-tooltip").find(".swatch-row").eq(i);m[i].pattern||P.find("div").css("background-color",s),P.find("rect").css("fill",s)}})).on("mouseleave.".concat(d.namespace),(function(){clearInterval(c),Me.hideTooltip()})).on("click",(function(t,e){var i=this&&d3.select(this).classed("is-selected");parseInt(d3.select(this.parentNode).attr("data-group-id"),10);Me.setSelectedElement({task:i?"unselected":"selected",container:d.element,selector:this,isTrigger:!d.initialSelectCall&&!i,triggerGroup:h.isGrouped,d:t,i:e,type:h.type,dataset:h.dataset,isSingle:d.isSingular,isGrouped:h.isGrouped,isStacked:h.isStacked,svg:d.svg,clickedLegend:h.clickedLegend}),i&&!d.initialSelectCall&&d.element.triggerHandler("selected",[d3.select(this).nodes(),{},e])})).on("contextmenu.".concat(d.namespace),(function(t){Me.triggerContextMenu(d.element,d3.select(this).nodes()[0],t)})),d.svg.selectAll(".axis.y text").attr("x",(function(){return d.isRTL?15:-15})),d.svg.selectAll(".axis.x text").attr("class",(function(t){return t<0?"negative-value":"positive-value"})),d.isRTL&&(Me.isIE||Me.isIEEdge)&&(d.svg.selectAll("text").attr("transform","scale(-1, 1)"),d.svg.selectAll(".y.axis text").style("text-anchor","start")),x&&h.useLogScale){var _=d3.selectAll(".x .tick text"),G=!1;_.attr("class",(function(t,e){var i=Math.round(_.size()/2);e>=i&&!G&&t.toString().startsWith("1")&&(G=!0,i=t),0!==e&&e!==_.size()-1&&(h.useLogScale?t!==i:e!==i)&&d3.select(this).remove()}))}if(d.svg.selectAll(".x.axis .tick").attr("class",(function(t){return"tick".concat(0===t?" tick0":"")})),d.svg.selectAll(".bar").transition().duration(h.animate?600:0).attr("width",(function(t){var e=H(t.x),i=H(0);return!isNaN(e)&&S.isFinite(e)||(e=0),!isNaN(i)&&S.isFinite(i)||(i=0),Math.abs(e-i)})).attr("x",(function(t){return h.useLogScale?0:h.isStacked&&!h.isSingle?H(t.x0)+1:t.x<0?H(t.x)+1:H(0)+1})),h.svg=d.svg,h.showLegend){var Y=h.isStacked?E:m;Y=Y.map((function(t){var e;return!t.attributes||null!==(e=t.data)&&void 0!==e&&(null==e?void 0:e.attributes)||(t.data?t.data.attributes=t.attributes:t.data={attributes:t.attributes}),t})),Me.addLegend(Y,h.type,h,this.element)}return Me.appendTooltip(),this.setInitialSelected(),this.setTextValues(),this.element.trigger("rendered"),this},setTextValues:function(){var t,e=this,i=null===(t=this.settings)||void 0===t||null==t?void 0:t.dataset;if(i&&(!i||i.constructor===Array)){var n,s,a,r,o,l,c=this.element[0].querySelectorAll(".bar-chart .axis.y .tick text"),d={};if(this.ellipsis.use)d.maxWidth=this.element.width(),d.transX=(null===(n=this.svg)||void 0===n||null===(s=null==n?void 0:n.node())||void 0===s||null===(a=null==s?void 0:s.transform)||void 0===a||null===(r=null==a?void 0:a.baseVal)||void 0===r||null===(o=null==r?void 0:r.consolidate())||void 0===o||null===(l=null==o?void 0:o.matrix)||void 0===l||null==l?void 0:l.e)||1,d.customCss=function(){return{tooltip:{maxWidth:"".concat(d.maxWidth,"px")},arrow:{left:e.isRTL?"calc(100% - 20px)":"20px"}}};var h=function(t,i){var n;if(e.ellipsis.use){if("..."===(n=Me.trimText(t.name,e.ellipsis.threshold)).substr(-3)){var s=Me.calculateTextRenderWidth(t.name),a=Me.calculateTextRenderWidth(n),r=c[i].parentNode;m.browser.isIE11()||(n=t.name,c[i].classList.add("hidden"),d3.select(r).append("foreignObject").attr("overflow","visible").attr("width","".concat(d.transX)).attr("height","16").attr("class","foreign-object tick-y".concat(i)).attr("x","-".concat(d.transX)).attr("y","-1em").attr("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility").html('<div class="text ellipsis" resizeable="false" xmlns="http://www.w3.org/1999/xhtml">'.concat(t.name,"</div>"))),d3.select(r).on("mouseover.".concat(e.namespace),(function(){var i,n,o,l,c=(i=r.getBoundingClientRect(),n=Math.ceil(s/d.maxWidth),o=d.transX-a,l=i.top,o=(o<0?30:o)+20,l=(l<0?30:l)-36,n>1&&(l-=.5*(n-1)*33),e.isRTL&&(o=i.left-s+d.transX),{x:o,y:l});Me.showTooltip(c.x,c.y,t.name,"top",d.customCss())})).on("mouseout.".concat(e.namespace),(function(){return Me.hideTooltip()}))}}else n=Me.getLabel(t,e.viewport);return n};this.settings.isGrouped?i.forEach((function(t,e){c[e].textContent=h(t,e)})):i.forEach((function(t){var e=Object.keys(t).map((function(t){return t}));Object.keys(t).map((function(e){return t[e]})).forEach((function(t,i){t&&t.constructor===Array&&t.forEach((function(t,n){"attributes"!==e[i]&&(c[n].textContent=h(t,n))}))}))}))}},setInitialSelected:function(){var t,e,i,n=this,s=n.svg.node().parentNode.nextSibling,a=d3.select(s),r=a.node()&&a.classed("chart-legend"),o=!1,l=0,c=function(i){(i=i?d3.select(i):n.svg).selectAll(".bar").each((function(i,n){i&&i.selected&&l<1&&(l++,e=d3.select(this),t=n)}))};n.settings.isGrouped||n.settings.isStacked&&!n.settings.isSingle?(n.settings.dataset.forEach((function(s,a){s.selected&&l<1&&(l++,e=n.svg.select('[data-group-id="'.concat(a,'"]')).select(".bar"),t=a,n.settings.isStacked&&!n.settings.isGrouped&&(i=!0))})),l<1&&function(){var e=n.svg.selectAll(".series-group");if(e.nodes().length){var i,s={groups:[],itemsInGroup:0};if(e.each((function(t,e){var i;c(this),Array.isArray(t)&&(s.itemsInGroup=t.length,l>0&&s.groups.push({i:e,d:t,totalSel:(i=t,i.reduce((function(t,e){return e.selected?t+1:t}),0))}))})),s.gLen=s.groups.length,!o&&n.settings.isGrouped&&s.gLen===e.size()&&1===(null===(i=s.groups[0])||void 0===i||null==i?void 0:i.totalSel)){o=!0;for(var a=0,r=s.groups[0].d;a<r;a++)if(s.groups[0].d[a].selected){t=a;break}}}}()):c(),l>0&&(i||o?r&&(this.initialSelectCall=!0,$(a.node()).find(".chart-legend-item").eq(t).trigger("click.chart")):(this.initialSelectCall=!0,e.on("click").call(e.node(),e.datum(),t))),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return Me.selected},setSelected:function(t,e){var i={svg:this.svg,chartData:this.settings.dataset,isStacked:this.settingsisStacked,isGrouped:this.settings.isGrouped,isSingle:this.settings.isSingle};Me.setSelected(t,e,i)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){var t=this,e=function(){t.width!==t.element.width()&&(t.width=t.element.width(),t.element.is(":visible")&&t.updated())};this.element.closest(".homepage").length?setTimeout((function(){return e()}),300):e()},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".group .series-group .bar").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("bar-chart"),$.removeData(this.element[0],"bar"),$.removeData(this.element[0],"chart"))}};var Ye={dataset:[],isDonut:!1,redrawOnResize:!0,hideCenterLabel:!1,showLines:!0,showLinesMobile:!1,lines:{show:"value",formatter:".0f"},showLegend:!0,legendPlacement:"right",legend:{show:"label (percent)",formatter:".0f"},showTooltips:!0,tooltip:{show:"label (value)",formatter:".0f"},fitHeight:!0,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Ke(t,e){this.settings=C.mergeSettings(t,e,Ye),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Ke.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.isFirefox="firefox"===m.browser.name,0===this.settings.dataset.length?(this.element.emptymessage(this.settings.emptyMessage),this):(this.initialSelectCall=!1,this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this)},build:function(){var t=this,e=this.settings;t.svg=d3.select(this.element[0]).append("svg"),t.mainGroup=t.svg.append("g"),t.mainGroup.append("g").attr("class","slices"),t.mainGroup.append("g").attr("class","labels"),t.mainGroup.append("g").attr("class","lines"),this.element.addClass("chart-pie"),e.showMobile&&(e.legendPlacement="bottom"),e.legendPlacement&&this.element.addClass("has-".concat(e.legendPlacement,"-legend"));var i=parseInt(this.element.width(),10),n=parseInt(this.element.height(),10),s={height:n,width:i};s.isSmallView=s.width<360;var a="bottom"===e.legendPlacement&&s.isSmallView&&!e.showMobile;a&&(this.element.closest(".widget-content").css({height:"","min-height":""}),n=parseInt(this.element.height(),10),s.height=n),!a&&e.fitHeight&&s.isSmallView&&(n=C.getParentAvailableHeight(t.element[0]),s.height=n),("label"===e.lines.show&&"bottom"===e.legendPlacement||"label"===e.lines.show&&"false"===e.showLegend)&&t.mainGroup.attr("transform","translate(".concat(.67777*s.width,", ").concat(s.height/2,")")),"right"===e.legendPlacement&&(s.width=.75*i),e.showMobile&&(s.height=.8*n,this.element.addClass("is-mobile"));var r=0;if(a){r=35,this.element.closest(".widget-content").css({height:"auto","min-height":"auto"});var o=s.height-(23+25*Math.round(e.dataset[0].data.length/2));this.element.closest(".auto-height ").length&&(o+=78),e.fitHeight&&(o-=C.getSiblingsHeight(t.element[0])),$(this.svg.node()).css({"min-height":o}),s.height=parseInt(this.element.height(),10)+r}s.radius=Math.min(s.width,s.height)/2,t.dims=s,t.pie=d3.pie().sort(null).value((function(t){return t.value})),t.arc=d3.arc().outerRadius(.75*s.radius).innerRadius(e.isDonut?.5*s.radius:0),t.outerArc=d3.arc().innerRadius(.75*s.radius).outerRadius(.75*s.radius+20),t.svg.attr("width","right"===e.legendPlacement?"75%":"100%").attr("height",e.showMobile?"80%":"100%"),t.mainGroup.attr("transform","translate(".concat(s.width/2,",").concat((s.height-r)/2,")")),s.isSmallView&&(a||(t.svg.attr("height","".concat(s.height,"px")),this.element.css({height:"auto"})),e.fitHeight||(this.element.closest(".widget-content").css({height:""}),this.element.css({height:"auto"}))),s.center={x:s.width/2,y:s.height/2},t.key=function(t){return t.data.name};var l=!e.dataset||0===e.dataset.length;this.chartData=l?[]:e.dataset[0].data,this.sum=d3.sum(this.chartData,(function(t){return t.value}));var c=this.chartData.map((function(e){return e.value/t.sum*100})),d=this.roundLargestRemainer(c);this.chartData=this.chartData.map((function(e,i){return e.percent=e.value/t.sum,e.percentRound=d[i],e}));var h=0;if(this.chartData.map((function(t){h+=t.percentRound})),l||0===h||isNaN(h)){var u=Z.themeColors().palette;this.chartData.push({data:{},color:u.slate[30].value,name:"Empty-Pie",value:100,percent:1,percentRound:100})}if(t.updateData(t.chartData),e.showTooltips&&Me.appendTooltip("is-pie"),e.showLegend){var p=t.chartData.map((function(t){var i=Me.formatToSettings(t,e.legend);return e.legendFormatter&&(i="".concat(t.name," (").concat(d3.format(e.legendFormatter)(t.value),")")),"Empty-Pie"===t.name&&(i=""),{name:i,display:"twocolumn",placement:e.legendPlacement,color:t.color,data:t}}));e.svg=t.svg,Me.addLegend(p,"pie",e,this.element);var g=r>0?"addClass":"removeClass";this.element.find(".chart-legend")[g]("adjusted-height")}return this.setInitialSelected(),this.addCenterLabel(),this.element.trigger("rendered"),this},randomize:function(t){var e=this;this.chartData=this.chartData.map((function(e){return e.value=t?0:Math.random(),e})),this.sum=d3.sum(this.chartData,(function(t){return t.value}));var i=this.chartData.map((function(t){return t.value/e.sum*100})),n=this.roundLargestRemainer(i);return this.chartData=this.chartData.map((function(t,i){return t.percent=t.value/e.sum,t.percentRound=n[i],t})),this.chartData},addCenterLabel:function(){if(this.settings.isDonut&&!this.settings.hideCenterLabel){var t=this.settings.dataset[0].centerLabel,e=this.svg.selectAll(".slices");if(e.append("text").attr("dy",".35em").style("text-anchor","middle").attr("class","chart-donut-text").html(t),Me.isIE&&!Me.isIEEdge)if(C.isHTML(t)){var i=e.select(".chart-donut-text"),n=document.createElement("text");n.innerHTML=t,Array.prototype.slice.call(n.childNodes).forEach((function(t){i.append("tspan").attr("style",t.getAttribute&&t.getAttribute("style")).attr("x",t.getAttribute&&t.getAttribute("x")).attr("dy",t.getAttribute&&t.getAttribute("dy")).text(t.textContent)}))}else e.select(".chart-donut-text").text(t)}},updateData:function(t){var e,i,n,s=this,a=this.element.closest(".is-personalizable").length>0,r=!s.settings.dataset||0===s.settings.dataset.length,o=s.svg.select(".slices").selectAll("path.slice").data(s.pie(t),s.key),l={str:null,isTooltip:(null===(e=s.settings.tooltip)||void 0===e||null==e?void 0:e.formatter)&&s.settings.tooltip.formatter!==Ye.tooltip.formatter,isLines:(null===(i=s.settings.lines)||void 0===i||null==i?void 0:i.formatter)&&s.settings.lines.formatter!==Ye.lines.formatter};l.isTooltip?l.str=s.settings.tooltip.formatter:l.isLines&&(l.str=s.settings.lines.formatter);if(s.isRTL=B.isRTL(),o.enter().insert("path").style("fill",(function(t,e){return Me.chartColor(e,"pie",t.data)})).attr("class","slice").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.data.attributes)}))}))})).on("contextmenu.".concat(s.namespace),(function(t){Me.triggerContextMenu(s.element,d3.select(this).nodes()[0],t)})).on("click.".concat(s.namespace),(function(t,e){clearTimeout(n);var i=this&&d3.select(this).classed("is-selected");Me.setSelectedElement({task:i?"unselected":"selected",container:s.element,selector:i?".chart-container .is-selected":this,isTrigger:!s.initialSelectCall&&!i,d:t.data,i:e,type:s.settings.type,dataset:s.settings.dataset,svg:s.svg}),i&&!s.initialSelectCall&&s.element.triggerHandler("selected",[d3.select(this).nodes(),{},e])})).on("mouseenter.".concat(s.namespace),(function(t,e){if(s.settings.showTooltips){var i=function(t){var e,i=document.body;if(s.isFirefox&&0===s.settings.dotSize){var n=d3.select(t);n.attr("r",2),e=t.getBoundingClientRect(),n.attr("r",s.settings.dotSize)}else e=t.getBoundingClientRect();return{top:e.top+i.scrollTop,left:e.left+i.scrollLeft}}(s.svg.selectAll("circle").nodes()[e]),r=s.midAngle(t),o=r<=Math.PI/4&&r>=0||r>7*Math.PI/4,c=r<=3*Math.PI/4&&r>=Math.PI/4,d=r<=5*Math.PI/4&&r>=3*Math.PI/4,h=r<=7*Math.PI/4&&r>=5*Math.PI/4,u="",p=Me.formatToSettings(t,s.settings.tooltip),g={value:l.str&&!l.isTooltip?d3.format(l.str)(t.value):p,percent:l.str?d3.format(l.str)(t.data.percent):"".concat(isNaN(t.data.percentRound)?0:t.data.percentRound,"%")};-1===(u=(u=(u=(u=(u=t.data.tooltip||g.value).replace("{{percent}}","".concat(g.percent))).replace("{{value}}",t.value)).replace("%percent%","".concat(g.percent))).replace("%value%",t.value)).indexOf("<b>")&&(u=(u=u.replace("(","<b>")).replace(")","</b>")),null!=n&&clearTimeout(n),n=setTimeout((function(){!function(){if(""!==u){var t=Me.tooltipSize(u),e=i.left,n=i.top;Me.tooltip&&Me.tooltip.length&&(o||c||d||h)&&Me.tooltip[a?"addClass":"removeClass"]("is-personalizable"),o&&(e-=t.width/2,n-=t.height-5,Me.showTooltip(e,n,u,"top")),c&&(n-=t.height/2,Me.showTooltip(e,n,u,"right")),d&&(e-=t.width/2,Me.showTooltip(e,n,u,"bottom")),h&&(e-=t.width-5,n-=t.height/2,Me.showTooltip(e,n,u,"left"))}}()}),300)}})).on("mouseleave.".concat(s.namespace),(function(){clearTimeout(n),Me.hideTooltip()})).merge(o).transition().duration(s.settings.animationSpeed).attrTween("d",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){return s.arc(e(t))}})),o.exit().remove(),!r){var c=s.element.parent().width()<520,d=s.settings.showLines;if(!s.settings.showLinesMobile&&d&&(d=!c),s.settings.dotSize=d?2:0,d){var h=s.svg.select(".labels").selectAll("text").data(s.pie(t),s.key);h.enter().append("text").attr("dy",".35em").text((function(t){return c?t.data.shortName:Me.formatToSettings(t,s.settings.lines)})).merge(h).transition().duration(s.settings.animationSpeed).attrTween("transform",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t),n=s.outerArc.centroid(i);return n[0]=s.dims.radius*(s.midAngle(i)<Math.PI?1:-1),n[0]-=s.midAngle(i)<Math.PI?20:-20,"translate(".concat(n,")")}})).styleTween("text-anchor",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t);return s.isRTL?s.midAngle(i)>Math.PI?"start":"end":s.midAngle(i)<Math.PI?"start":"end"}})),h.exit().remove();var u=s.svg.select(".lines").selectAll("polyline").data(s.pie(t),s.key);u.enter().append("polyline").merge(u).transition().duration(s.settings.animationSpeed).attrTween("points",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t),n=s.outerArc.centroid(i);return n[0]=.85*s.dims.radius*(s.midAngle(i)<Math.PI?1:-1),[s.outerArc.centroid(i),s.outerArc.centroid(i),n]}})),u.exit().remove()}var p=s.svg.select(".lines").selectAll("circle").data(s.pie(t),s.key);p.enter().append("circle").attr("class","circles").attr("r",s.settings.dotSize).merge(p).transition().duration(s.settings.animationSpeed).attrTween("transform",(function(t){this.current=this.current||t;var e=d3.interpolate(this.current,t);return this.current=e(0),function(t){var i=e(t);return"translate(".concat(s.outerArc.centroid(i)," )")}})),p.exit().remove()}},setInitialSelected:function(){var t,e=this,i=0;this.svg.selectAll(".slice").each((function(n,s){n&&n.data&&n.data.selected&&i<1&&(i++,e.initialSelectCall=!0,(t=d3.select(this)).on("click.".concat(e.namespace)).call(t.node(),t.datum(),s))})),this.initialSelectCall=!1},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return Me.selected},setSelected:function(t,e){var i,n,s=this,a=0,r=C.equals;this.svg.selectAll(".slice").each((function(e,o){e&&e.data&&a<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===e.data[t.fieldName]||void 0!==t.index&&t.index===o||t.data&&r(t.data,s.chartData[o].data)||t.elem&&$(this).is(t.elem))&&(a++,i=d3.select(this),n=o)})),a>0&&(e||!i.classed("is-selected"))&&i.on("click.".concat(s.namespace)).call(i.node(),i.datum(),n)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.element.empty(),this.build().element.trigger("rendered",[this.svg])},roundLargestRemainer:function(t){for(var e=0,i=0,n=0,s=[],a=0;a<t.length;a++)e+=parseInt(t[a],10),s[a]=a;var r=100-e;s.sort((function(e,i){return n=t[e]-parseInt(t[e],10),t[i]-parseInt(t[i],10)-n})),t.sort((function(t,e){return n=t-parseInt(t,10),e-parseInt(e,10)-n}));for(var o=0;o<t.length;o++)i=o,t[o]=i<r?parseInt(t[o],10)+1:parseInt(t[o],10);for(var l=[],c=0;c<t.length;c++)l[s[c]]=t[c];return l},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".slice").off(e(["mouseenter","mouseleave","click","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},midAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("pie-chart"),$.removeData(this.element[0],"pie"),$.removeData(this.element[0],"chart"))}};var Xe={dataset:[],redrawOnResize:!0,margin:{top:0,right:0,bottom:0,left:0},levels:4,maxValue:0,labelFactor:1.27,wrapWidth:60,opacityArea:.2,dotRadius:3,opacityCircles:0,strokeWidth:1,roundStrokes:!0,showCrosslines:!0,showAxisLabels:!0,colors:null,showTooltips:!0,tooltip:{show:"value",formatter:".0%"},axisFormatter:".0%",showLegend:!0,legendPlacement:"right",emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Qe(t,e){this.settings=C.mergeSettings(t,e,Xe),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}Qe.prototype={init:function(){return this.namespace=C.uniqueId({classList:[this.settings.type,"chart"]}),this.width=0,this.setupColors().build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.updateData(this.settings.dataset),this.setInitialSelected(),this},setupColors:function(){return this.settings.colors&&!this.useBuiltInColors||(this.settings.colors=Me.colorRange(),this.useBuiltInColors=!0),this},updateData:function(t){var e=this,i=this.settings,n=this.element.closest(".is-personalizable").length>0;if(this.element.addClass("chart-radar"),0!==t.length){var s,a=this.element.parent(),r={w:a.width(),h:a.height(),extra:.957};if("right"===i.legendPlacement&&(r.w*=.75),Z.uplift&&r.w>=420&&(r.extra-=.12),i.showLegend&&r.w<420&&!i.margin.bottom)s=r.w>405?5:r.w>390?3:r.w>350?.9:.5,r.h-=(420-r.w)*s;r.transform={x:r.w/2+(i.margin.left+i.margin.right)/2,y:r.h/2*r.extra+(i.margin.top+i.margin.bottom)/2};var o,l=d3.scaleOrdinal(i.colors),c=Math.max(i.maxValue,d3.max(t,(function(t){return d3.max(t.data.map((function(t){return t.value})))}))),d=t[0].data.map((function(t){return function(t){var e=328,i=469,n="";return r.w<=e?n=t.shortName||t.abbrName||t.name||"":r.w>=e+1&&r.w<=i?n=t.abbrName||t.name||"":r.w>i&&(n=t.name||""),n}(t)})),h=d.length,u=2*Math.PI/h,p=Math.min(r.w/3,r.h/3)*r.extra,g=d3.scaleLinear().range([0,p]).domain([0,c]),f=this.element[0];d3.select(f).select("svg").remove();var m=d3.select(f).append("svg").attr("width",r.w+(i.margin.left+i.margin.right)).attr("height",r.h+(i.margin.top+i.margin.bottom)).attr("class","chart-radar");this.svg=m;var v=m.append("g").attr("transform","translate(".concat(r.transform.x,",").concat(r.transform.y,")"));if(i.opacityCircles>0){var b=v.append("defs").append("filter").attr("id","glow");b.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var y=b.append("feMerge");y.append("feMergeNode").attr("in","coloredBlur"),y.append("feMergeNode").attr("in","SourceGraphic")}var w=v.append("g").attr("class","chart-radar-axis-wrapper");w.selectAll(".levels").data(d3.range(1,i.levels+1).reverse()).enter().append("circle").attr("class","chart-radar-grid-circle").attr("r",(function(t){return p/i.levels*t})).style("fill-opacity",i.opacityCircles).style("filter",i.opacityCircles>0?"url(#glow)":""),i.showAxisLabels&&w.selectAll(".axis-label").data(d3.range(1,i.levels+1).reverse()).enter().append("text").attr("class","axis-label").attr("x",4).attr("y",(function(t){return-t*p/i.levels})).attr("dy","0.4em").style("font-size",Z.uplift?"12px":"10px").attr("fill","#737373").text((function(t){var e=Math.round(10*c)/10;return i.axisFormatter.indexOf("%")>-1?d3.format(i.axisFormatter)(e*t/i.levels):d3.format(i.axisFormatter)(t/i.levels)}));var x=w.selectAll(".axis").data(d).enter().append("g").attr("class","axis");i.showCrosslines&&x.append("line").attr("x1",0).attr("y1",0).attr("x2",(function(t,e){return g(1.05*c)*Math.cos(u*e-Math.PI/2)})).attr("y2",(function(t,e){return g(1.05*c)*Math.sin(u*e-Math.PI/2)})).attr("class","chart-radar-crossline").style("stroke-width","1px"),x.append("text").attr("class","legend").style("font-size",Z.uplift?"14px":"12px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",(function(t,e){return g(c*i.labelFactor)*Math.cos(u*e-Math.PI/2)})).attr("y",(function(t,e){return g(c*i.labelFactor)*Math.sin(u*e-Math.PI/2)})).text((function(t){return t})),this.element[r.w<420?"addClass":"removeClass"]("is-small"),r.w>456&&m.selectAll(".chart-radar-axis-wrapper .axis .legend").each((function(){Me.wrap(d3.select(this),i.wrapWidth,i.labelFactor)}));var k=d3.lineRadial().curve(d3.curveBasisClosed).radius((function(t){return g(t.value)})).angle((function(t,e){return e*u}));i.roundStrokes&&k.curve(d3.curveCardinalClosed);var T=v.selectAll(".radarWrapper").data(t.map((function(t){return t.data}))).enter().append("g").attr("class","chart-radar-wrapper");if(T.append("path").attr("class","chart-radar-area").call((function(e){e._groups.forEach((function(e){e.forEach((function(e,i){var n=t[i];C.addAttributes($(e),n,n.attributes,"area")}))}))})).attr("d",(function(t){return k(t)})).style("fill",(function(t,e){return l(e)})).style("fill-opacity",i.opacityArea).on("click.".concat(e.namespace),(function(t,n){clearTimeout(o);var s=d3.select(this),a=s.classed("is-selected");m.selectAll(".is-selected").classed("is-selected",!1),m.selectAll(".is-not-selected").classed("is-not-selected",!1),Me.clearSelected(i.dataset),a||(m.selectAll(".chart-radar-area").classed("is-not-selected",!0),s.classed("is-selected",!0).classed("is-not-selected",!1),s.style("fill-opacity",i.opacityArea),i.dataset[n].selected=!0);var r={elem:s.nodes(),data:t,index:n};e.element.triggerHandler(a?"deselected":"selected",r),Me.selected=a?[]:r})).on("contextmenu.".concat(e.namespace),(function(t){Me.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),T.append("path").attr("class","chart-radar-stroke").call((function(e){e._groups.forEach((function(e){e.forEach((function(e,i){var n=t[i];C.addAttributes($(e),n,n.attributes,"stroke")}))}))})).attr("d",(function(t){return k(t)})).style("stroke-width","".concat(i.strokeWidth,"px")).style("stroke",(function(t,e){return l(e)})).style("fill","none").style("filter",i.opacityCircles>0?"url(#glow)":""),T.selectAll(".chart-radar-circle").data((function(t){return t})).enter().append("circle").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"circle")}))}))})).attr("class","chart-radar-circle").attr("r",i.dotRadius).attr("cx",(function(t,e){return g(t.value)*Math.cos(u*e-Math.PI/2)})).attr("cy",(function(t,e){return g(t.value)*Math.sin(u*e-Math.PI/2)})).style("fill",(function(){return l($(this.parentNode).index()-1)})).style("fill-opacity",.6),v.selectAll(".radar-circle-wrapper").data(t.map((function(t){return t.data}))).enter().append("g").attr("class","radar-circle-wrapper").selectAll(".radar-invisible-circle").data((function(t){return t})).enter().append("circle").call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var e=t.__data__;C.addAttributes($(t),e,e.attributes,"invisible-circle")}))}))})).attr("class","radar-invisible-circle").attr("r",1.5*i.dotRadius).attr("cx",(function(t,e){return g(t.value)*Math.cos(u*e-Math.PI/2)})).attr("cy",(function(t,e){return g(t.value)*Math.sin(u*e-Math.PI/2)})).style("fill","none").style("pointer-events","all").on("mouseenter.".concat(e.namespace),(function(t){if(i.showTooltips){var e=$(this).offset(),s=Me.formatToSettings(t,i.tooltip);-1===s.indexOf("<b>")&&(s=(s=s.replace("(","<b>")).replace(")","</b>"));var a=Me.tooltipSize(s),r=e.left,l=e.top;r-=a.width/2-6,l-=a.height+6,null!=o&&clearTimeout(o),o=setTimeout((function(){Me.tooltip&&Me.tooltip.length&&Me.tooltip[n?"addClass":"removeClass"]("is-personalizable"),Me.showTooltip(r,l,s,"top")}),300)}})).on("mouseleave.".concat(e.namespace),(function(){clearTimeout(o),Me.hideTooltip()})).on("contextmenu.".concat(e.namespace),(function(t){Me.triggerContextMenu(e.element,d3.select(this).nodes()[0],t)})),i.showTooltips&&Me.appendTooltip("is-pie"),i.showLegend){i.legendPlacement&&this.element.addClass("has-".concat(i.legendPlacement,"-legend"));var S=i.dataset.map((function(t,e){var n={name:t.name,display:"twocolumn",placement:i.legendPlacement,color:l(e)};return t.attributes&&(n.data={attributes:t.attributes}),n}));i.svg=e.svg,Me.addLegend(S,"pie",i,this.element)}}else e.element.emptymessage(i.emptyMessage)},setInitialSelected:function(){var t=this.settings;if(Array.isArray(t.dataset))for(var e=0,i=t.dataset.length;e<i;e++)if(t.dataset[e].selected){var n=this.svg.selectAll(".chart-radar-area").nodes(),s=d3.select(n[e]);this.svg.selectAll(".is-selected").classed("is-selected",!1),this.svg.selectAll(".is-not-selected").classed("is-not-selected",!1),this.svg.selectAll(".chart-radar-area").classed("is-not-selected",!0),s.classed("is-selected",!0).classed("is-not-selected",!1),s.style("fill-opacity",t.opacityArea);break}},handleEvents:function(){var t=this;return this.element.on("updated.".concat(this.namespace),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat(this.namespace),(function(){t.handleResize()})),this.element.on("resize.".concat(this.namespace),(function(){t.handleResize()}))),$("html").on("themechanged.".concat(this.namespace),(function(){t.updated()})),this},getSelected:function(){return Me.selected},setSelected:function(t,e){var i,n,s=0,a=this;this.svg.selectAll(".chart-radar-area").each((function(e,r){var o=a.settings.dataset[r];o&&o.data&&s<1&&(void 0!==t.fieldName&&void 0!==t.fieldValue&&t.fieldValue===o[t.fieldName]||void 0!==t.index&&t.index===r||t.elem&&$(this).is(t.elem))&&(s++,i=d3.select(this),n=r)})),s>0&&(e||!i.classed("is-selected"))&&i.on("click.".concat(a.namespace)).call(i.node(),i.datum(),n)},toggleSelected:function(t){this.setSelected(t,!0)},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset?(this.element.find(".chart-legend").remove(),this.settings.dataset=t.dataset,this.updateData(this.settings.dataset),this):(this.element.empty(),this.setupColors().build())},teardown:function(){var t=this,e=function(e){return"".concat(e.join(".".concat(t.namespace," ")),".").concat(t.namespace)};return this.element&&(this.element.find(".chart-radar-area").off(e(["click","contextmenu"])),this.element.find(".radar-invisible-circle").off(e(["mouseenter","mouseleave","contextmenu"])),this.element.off(e(["updated","resize"]))),$("body").off("resize.".concat(this.namespace)),$("html").off("themechanged.".concat(this.namespace)),delete this.namespace,this},destroy:function(){this.teardown(),Me.removeTooltip(),this.element&&(this.element.empty().removeClass("radar-chart"),$.removeData(this.element[0],"radar"),$.removeData(this.element[0],"radar"))}},$.fn.chart=function(t){var e=null;switch(this.empty(),t.type){case"targeted-achievement":case"completion":case"completion-target":if(e=this.data(t.type))return e.updated(t),this;var i=new Fe(this,t);this.data("completion-chart",i),this.data("chart",i),this.data(t.type,i);break;case"bullet":if(e=this.data("bullet"))return e.updated(t),this;var n=new Be(this,t);this.data("bullet",n),this.data("chart",n);break;case"radar":if(e=this.data("radar"))return e.updated(t),this;var s=new Qe(this,t);this.data("radar",s),this.data("chart",s);break;case"sparkline":if(e=this.data("sparkline"))return e.updated(t),this;var a=new ze(this,t);this.data("sparkline",a),this.data("chart",a);break;case"sparkline-dots":if(t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var r=new ze(this,t);this.data("sparkline",r),this.data("chart",r);break;case"sparkline-peak":if(t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var o=new ze(this,t);this.data("sparkline",o),this.data("chart",o);break;case"sparkline-dots-n-peak":if(t.isPeakDot=!0,t.isDots=!0,e=this.data("sparkline"))return e.updated(t),this;var l=new ze(this,t);this.data("sparkline",l),this.data("chart",l);break;case"sparkline-minmax":if(t.isMinMax=!0,e=this.data("sparkline"))return e.updated(t),this;var c=new ze(this,t);this.data("sparkline",c),this.data("chart",c);break;case"sparkline-medianrange":if(t.isMedianRange=!0,e=this.data("sparkline"))return e.updated(t),this;var d=new ze(this,t);this.data("sparkline",d),this.data("chart",d);break;case"sparkline-medianrange-n-peak":if(t.isMedianRange=!0,t.isPeakDot=!0,e=this.data("sparkline"))return e.updated(t),this;var h=new ze(this,t);this.data("sparkline",h),this.data("chart",h);break;case"line":if(e=this.data("line"))return e.updated(t),this;var u=new We(this,t);this.data("line",u),this.data("chart",u);break;case"area":if(t.isArea=!0,e=this.data("line"))return e.updated(t),this;var p=new We(this,t);this.data("line",p),this.data("chart",p);break;case"bubble":if(t.isBubble=!0,e=this.data("line"))return e.updated(t),this;var g=new We(this,t);this.data("line",g),this.data("chart",g);break;case"scatterplot":if(t.isScatterPlot=!0,e=this.data("line"))return e.updated(t),this;var f=new We(this,t);this.data("line",f),this.data("chart",f);break;case"column":case"column-grouped":case"positive-negative":case"column-positive-negative":if(e=this.data("column"))return e.updated(t),this;var m=new Ue(this,t);this.data("column",m),this.data("chart",m);break;case"column-stacked":if(t.isStacked=!0,e=this.data("column"))return e.updated(t),this;var v=new Ue(this,t);this.data("column",v),this.data("chart",v);break;case"bar":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var b=new Ge(this,t);this.data("bar",b),this.data("chart",b);break;case"bar-stacked":if(t.isStacked=!0,e=this.data("bar"))return e.updated(t),this;var y=new Ge(this,t);this.data("bar",y),this.data("chart",y);break;case"bar-normalized":if(t.isNormalized=!0,e=this.data("bar"))return e.updated(t),this;var w=new Ge(this,t);this.data("bar",w),this.data("chart",w);break;case"bar-grouped":if(t.isStacked=!1,t.isGrouped=!0,e=this.data("bar"))return e.updated(t),this;var x=new Ge(this,t);this.data("bar",x),this.data("chart",x);break;case"pie":if(e=this.data("pie"))return e.updated(t),this;var C=new Ke(this,t);this.data("pie",C),this.data("chart",C);break;case"donut":if(t.isDonut=!0,e=this.data("pie"))return e.updated(t),this;var k=new Ke(this,t);this.data("pie",k),this.data("chart",k);break;default:e=null}return this};var Je={isToday:function(t){var e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},firstDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.getDay(),n=new Date(t),s=i>=e?i-e:6-i;return n.setDate(t.getDate()-s),n.setHours(0,0,0,0),n},lastDayOfWeek:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.firstDayOfWeek(t,e);return i.setDate(i.getDate()+6),i.setHours(23,59,59,999),i},dateDiff:function(t,e,i){var n=new Date;return Math.round((e-t)/(36e5*(i?1:Math.abs(n.getTimezoneOffset()))))}},Ze={addCalculatedFields:function(t,e,i,n){var s=function(t,i){return B.formatDate(t,C.extend(!0,{locale:e.name},i))},a={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:e.name},r=function(t){var i=B.parseDate(t,a);return B.isIslamic(e.name)&&(i=new Date(i[0],i[1],i[2],i[3],i[4],i[5],i[6])),i},o=function(t){return B.translate(t,{locale:e.name,language:i})};t.color=this.getEventTypeColor(t,n),t.duration=Math.abs(Je.dateDiff(new Date(t.ends),new Date(t.starts),!1));var l=new Date,c=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),d=new Date(t.starts),h=Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u="".concat(d.getDate(),"-").concat(d.getMonth()+1,"-").concat(d.getFullYear()),p="".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear());t.durationUnits=o(t.duration>1?"Days":"Day"),t.daysUntil=t.starts?Je.dateDiff(h,c):0;var g,f,m=(new Date(t.ends)-new Date(t.starts))/36e5;if(t.durationHours=m>0&&m<.5?1:Math.round(m),t.isDays=!0,c>h&&u!==p&&(t.daysUntil=1),void 0===t.isAllDay&&(t.isAllDay=!0),t.durationHours<24&&(t.isDays=!1,t.isAllDay=!1,t.durationUnits=o(t.durationHours>1?"Hours":"Hour")),"true"===t.isAllDay.toString()){t.duration=(g=new Date(t.starts),f=new Date(t.ends),Math.abs(Math.round((f-g)/864e5))||1),t.durationUnits=o(t.duration>1?"Days":"Day"),t.isDays=!0,delete t.durationHours}if(t.starts){var v=r(t.starts);t.startsLocale=s(v),B.isIslamic(e.name)&&(t.startsLocale=s(B.gregorianToUmalqura(v))),t.startsHourLocale=s(v,{date:"hour"}),Array.isArray(v)?t.startsHour=parseFloat(v[3]+v[4]/60):t.startsHour=parseFloat(v.getHours()+v.getMinutes()/60)}if(t.ends){var b=r(t.ends);t.endsLocale=s(b),B.isIslamic(e.name)&&(t.endsLocale=s(B.gregorianToUmalqura(b))),t.endsHourLocale=s(b,{date:"hour"}),Array.isArray(b)?t.endsHour=parseFloat(b[3]+b[4]/60):t.endsHour=parseFloat(b.getHours()+b.getMinutes()/60)}if(t.eventTypes=n,t.isAllDay=t.isAllDay.toString(),"false"===t.isAllDay.toString()&&delete t.isAllDay,!t.isAllDay&&t.durationHours>=24&&(t.isAllDay=!1,t.durationUnits=o("Hours"),t.isDays=!1,delete t.duration),t.starts&&t.ends){var y=this.timeDiffInSeconds(r(t.starts),r(t.ends));t.durationInTime=this.timeBySeconds(y)}else t.durationInTime&&delete t.durationInTime;return t},timeDiffInSeconds:function(t,e){var i=Math.abs(e.getTime()-t.getTime());return Math.ceil(i/1e3)},timeBySeconds:function(t){return t=Number(t),{days:Math.floor(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(t%3600/60),seconds:Math.floor(t%60)}},formateTimeString:function(t,e,i){if(t.durationInTime){var n=function(t){return B.translate(t,{locale:e.name,language:i})},s=t.durationInTime,a="";if(s.days){var r=n(s.days>1?"Days":"Day");a+="".concat(s.days," ").concat(r)}if(s.hours){var o=n(s.hours>1?"Hours":"Hour");s.days&&(a+="".concat(s.minutes||s.seconds?", ":" ".concat(n("And")," "))),a+="".concat(s.hours," ").concat(o)}if(s.minutes){var l=n(s.minutes>1?"Minutes":"Minute");(s.days||s.hours)&&(a+="".concat(s.seconds?", ":" ".concat(n("And")," "))),a+="".concat(s.minutes," ").concat(l)}if(s.seconds){var c=n(s.seconds>1?"Seconds":"Second");a+="".concat(s.days||s.hours||s.minutes?" ".concat(n("And")," "):""),a+="".concat(s.seconds," ").concat(c)}""!==a&&(t.duration="",t.durationUnits="",t.durationHours=a)}},getEventTypeColor:function(t,e){var i,n="azure";if(!t.type&&!t.color)return n;if("#"===(null===(i=t.color)||void 0===i||null==i?void 0:i.substr(0,1)))return t.color;var s=e.filter((function(e){return e.id===t.type}));return 1===s.length?n=s[0].color||"azure":n},cleanEventData:function(t,e,i,n,s,a,r){var o={pattern:"yyyy-MM-ddTHH:mm:ss.SSS",locale:n.name},l=function(t){return B.formatDate(t,o)},c=function(t,e){return B.parseDate(t,C.extend(!0,{locale:n.name},e))},d="on"===t.isAllDay||"true"===t.isAllDay||t.isAllDay,h=i,u=i;if(t.startsLocale&&t.endsLocale&&(h=new Date(c(t.startsLocale)),u=new Date(c(t.endsLocale))),"string"!=typeof t.starts||t.startsLocale||(h=new Date(t.starts)),"string"!=typeof t.ends||t.endsLocale||(u=new Date(t.ends)),B.isValidDate(h)||(h=i),B.isValidDate(u)||(u=i),d)h.setHours(0,0,0,0),t.starts=l(new Date(h)),u.setHours(23,59,59,999),t.ends=l(new Date(u)),t.duration=t.starts===t.ends?1:null,t.isAllDay=!0;else{if(h===u)u.setHours(u.getHours()+parseInt(t.durationHours,10)),t.ends=l("safari"===m.browser.name?u:u.toISOString()),t.duration=null;else if(t.endsHourLocale&&t.startsHourLocale){var p=c(t.startsHourLocale,{date:"hour"}),g=c(t.endsHourLocale,{date:"hour"});h.setHours(p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()),u.setHours(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds()),"safari"===m.browser.name?(t.starts=l(h),t.ends=l(u)):(t.starts=l(h.toISOString()),t.ends=l(u.toISOString())),t.duration=Je.dateDiff(new Date(t.starts),new Date(t.ends))}else t.ends=l(new Date(u));t.starts=l(new Date(h)),t.isAllDay=!1}if(void 0===t.comments&&e&&(t.comments=B.translate("NoCommentsEntered",{locale:n.name,language:s}),t.noComments=!0),!t.subject&&e&&(t.subject=B.translate("NoTitle",{locale:n.name,language:s})),t.type||(t.type=r[0].id),void 0===t.id&&e){var f=0===a.length?0:parseInt(a[a.length-1].id,10);t.id=(f+1).toString()}"NewEvent"===t.title&&(t.title=B.translate("NewEvent",{locale:n.name,language:s}))}},ti=["default","neutral","secondary","error","alert","good","info"],ei={audibleContent:void 0,clickable:!1,clickHandler:void 0,content:" ",disabled:!1,dismissible:!1,dismissHandler:void 0,href:void 0,id:void 0,parent:void 0,style:ti[0],value:void 0};function ii(t,e){var i;if(this.settings=C.mergeSettings(t,e,ei),t instanceof HTMLElement?t.querySelector(".tag-content")?i=t:((i=document.createElement("span")).className+="".concat(t.className),t.id&&t.id.length?(i.id=t.id,t.removeAttribute("id")):"string"==typeof this.settings.id&&this.settings.id.length&&(i.id=this.settings.id,delete this.settings.id),t.insertAdjacentElement("beforebegin",i),i.appendChild(t),i.classList.add("tag"),t.className="",t.classList.add("tag-content")):((i=document.createElement("span")).classList.add("tag"),this.settings&&this.settings.parent instanceof HTMLElement&&this.settings.parent.appendChild(i),"string"==typeof this.settings.id&&this.settings.id.length&&(i.id=this.settings.id,delete this.settings.id)),t){var n=t.querySelector(".audible");n&&i.insertAdjacentElement("afterbegin",n)}this.element=i,this.getSettingsFromElement(),this.init()}ii.prototype={init:function(){this.render(),this.handleEvents()},get contentElement(){return this.element.querySelector(".tag-content")},render:function(){var t=this.element.classList,e=C.getArrayFromList(this.element.classList),i=this.settings.style;e.forEach((function(e){ti.indexOf(e)>-1&&t.remove(e)})),-1===this.element.className.indexOf(i)&&"default"!==i&&t.add(i),this.settings.disabled&&t.add("is-disabled");var n="";this.settings.audibleContent&&(n='<span class="audible">'.concat(h.stripHTML(this.settings.audibleContent),"</span>"));var s="span",a="",r="",o="",l=this.settings.href&&this.settings.href.length;(l||this.originallyAnchor)&&(s="a",this.settings.disabled&&(o=' tabIndex="-1"')),l&&(a=' href="'.concat(this.settings.href,'"')),(this.settings.clickable||"function"==typeof this.settings.clickHandler)&&(t.add("is-linkable"),r='<button class="btn-linkable" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("caret-right"),"\n      </button>"));var c="<".concat(s,' class="tag-content"').concat(a).concat(o,">").concat(h.sanitizeHTML(this.settings.content),"</").concat(s,">"),d="";this.settings.dismissible&&(t.add("is-dismissible"),d='<button class="btn-dismissible" focusable="false" tabIndex="-1">\n        '.concat($.createIcon("close"),'\n        <span class="audible">').concat(B.translate("Close"),"</span>\n      </button>")),this.element.innerHTML="".concat(n).concat(c).concat(r).concat(d),$(this.element).hideFocus()},get dismissibleBtn(){return this.element.querySelector(".btn-dismissible")},getSettingsFromElement:function(){var t=this.element.className,e="";ti.forEach((function(i){t.indexOf(i)>-1&&(e=i)})),e&&(this.settings.style=e),this.settings.disabled=this.disabled;var i=this.dismissibleBtn,n=this.element.className.indexOf("is-dismissible")>-1;(i||n)&&(this.settings.dismissible=!0);var s=this.element.querySelector("a"),a=this.element.className.indexOf("is-linkable")>-1,r=this.element.querySelector(".btn-linkable");if(s||a||r){this.originallyAnchor=!0;var o=s.getAttribute("href");o&&o.length&&(o=h.stripTags(o),this.settings.href=o)}(a||r)&&(this.settings.clickable=!0);var l=this.element.querySelector(".audible");l instanceof HTMLElement&&(this.settings.audibleContent=h.stripHTML(l.innerText));var c=this.contentElement;c&&(this.settings.content=h.sanitizeHTML(c.innerText))},remove:function(){var t=this.element,e=t.parentNode;this.settings.parentAPI&&(e=this.settings.parentAPI.element),$(e).triggerHandler("beforetagremove",[this]),this.destroy(),t.remove(),$(e).triggerHandler("aftertagremove",[this])},dismiss:function(t){if(!this.disabled){this.remove(t),"function"==typeof this.settings.dismissHandler&&this.settings.dismissHandler(this);var e=this.settings.parentAPI;e&&e.focusPreviousElement(this.element)}},get disabled(){return this.element.className.indexOf("is-disabled")>-1},disable:function(){this.disabled||("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=-1),this.settings.disabled=!0,this.element.classList.add("is-disabled"))},enable:function(){this.disabled&&("A"===this.contentElement.tagName&&(this.contentElement.tabIndex=0),this.settings.disabled=!1,this.element.classList.remove("is-disabled"))},teardown:function(){var t=$(this.element);t.off(["focusin.tag","focusout.tag","keydown.tag","click.tag"].join(" "));var e=this.dismissibleBtn;e&&e.parentNode.removeChild(e);var i=t.data("hidefocus");return i&&"function"==typeof i.destroy&&i.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ei)),this.teardown().init()},destroy:function(){this.teardown(),$.removeData(this.element,"tag")},handleEvents:function(){var t=this;$(this.element).on("focusin.tag",(function(){t.element.classList.add("is-focused")})).on("focusout.tag",(function(){t.element.classList.remove("is-focused")}));var e=this;$(this.element).on("click.tag","a, .btn-linkable",(function(t){var i;return"function"==typeof e.settings.clickHandler&&(i=e.settings.clickHandler(e)),!(!1===i||e.settings.href&&"#"===e.settings.href)||(t.preventDefault(),!1)})),this.settings.dismissible&&($(this.element).on("click.tag",".btn-dismissible",(function(e){t.dismiss(e)})),$(this.element).on("keydown.tag","a",(function(e){8===e.keyCode&&t.dismiss(e)})))}};var ni={tags:[]};function si(t,e){var i=this;if(!(t instanceof HTMLElement))throw new Error("TagList base element must be defined");this.settings=C.mergeSettings(t,e,ni),this.element=t;var n=C.getArrayFromList(this.element.querySelectorAll(".tag"));n.length&&(this.settings.tags=[],n.forEach((function(t){i.settings.tags.push(new ii(t))}))),this.init()}si.prototype={get length(){return this.tags.length},get elements(){return this.tags.map((function(t){return t.element}))},init:function(){var t=this;this.tags=[],Array.isArray(this.settings.tags)&&this.settings.tags.forEach((function(e){t.add(e)})),this.render()},getTargetProp:function(){return"content"},add:function(t){var e,i=this;if(!t)throw new Error("No object was provided");if(Array.isArray(t)){var n=[];return t.forEach((function(t){n.push(i.add(t))})),n}if(A.isEmpty(t))throw new Error("Provided object has no unique keys to use for creation of a Tag.");return t instanceof ii?(e=t,t.settings.parentAPI=this):(t.parent=this.element,t.parentAPI=this,e=new ii(void 0,t)),-1===this.tags.indexOf(e)&&this.tags.push(e),e},remove:function(t,e){t instanceof ii&&(t=t.settings);var i,n=this.getTargetProp(t),s=this.tags.filter((function(e){return e.settings[n]===t[n]||(i=e,!1)}));return s.length<this.tags.length&&(this.tags=s),e&&i.remove(),i},removeAll:function(){this.tags.forEach((function(t){t.remove()})),this.tags=[]},render:function(){this.tags.forEach((function(t){t.render()})),this.element.classList[this.tags.length?"remove":"add"]("empty")},focusByIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.elements,i=0,n=e.length;t<i&&(t=i),t>n&&(t=n);var s=e[t],a=s.querySelector("a");return a&&a.focus(),s},focusPreviousElement:function(t){if(!(t instanceof HTMLElement))throw new Error("".concat(t," is not an HTMLElement"));var e=this.elements.indexOf(t);if(!(e>-1))throw new Error("".concat(t," does not exist within this TagList"));return this.focusByIndex(e-1)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings),Array.isArray(t.tags)&&(this.settings.tags=t.tags)),this.removeAll(),this.init()},destroy:function(){this.tags.forEach((function(t){t.remove()})),delete this.tags,$(this.element).data("taglist")&&$.removeData(this.element,"taglist")}};var ai=["none","all","group"],ri={closeOnSelect:!0,cssClass:null,filterMode:"contains",maxSelected:void 0,moveSelected:"none",moveSelectedToTop:void 0,multiple:!1,noSearch:!1,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,showSearchUnderSelected:!1,source:void 0,sourceArguments:{},reload:"none",empty:!1,delay:300,maxWidth:null,placementOpts:null,onKeyDown:null,tagSettings:{},tagListMaxHeight:120,allTextString:null,selectedTextString:null,selectAllFilterOnly:!0,attributes:null};function oi(t,e){this.settings=C.mergeSettings(t,e,ri),this.element=$(t),this.init()}oi.prototype={get value(){var t=this.settings.reload,e=this.settings.multiple;if("typeahead"===t)return e?this.selectedValues:this.element.val();for(var i,n=[],s=this.element[0].options,a=0;a<s.length;a++)(i=s[a]).selected&&n.push(i.value||i.text);return e||1!==n.length?n:n[0]},get overflowed(){if(!this.isMobile()||this.isMobile()&&!this.isOpen()){var t=this.pseudoElem.find("span").css("max-width","");if(Math.round(t.width())>Math.round(this.pseudoElem.width()))return t.css("max-width","100%"),!0}return!1},get isFocused(){var t=document.activeElement,e=this.pseudoElem.length&&this.pseudoElem.is($(t)),i=this.list&&this.list.length&&this.list[0].contains(t),n=this.tagListAPI&&this.tagListAPI.element.contains(t);return!!(e||i||n)},get isShortField(){return this.element.closest(".field-short").length>0||this.element.closest(".form-layout-compact").length>0},get selectedValues(){return this.selectedOptions.map((function(t){return t.value}))},get selectedOptions(){return C.getArrayFromList(this.element[0].querySelectorAll("option")).filter((function(t){return t.selected}))},init:function(){var t=this,e=this.element.attr("id");e=e?h.stripTags(e):"",this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.timer=null,this.filterTerm="",e||(e=C.uniqueId(this.element,"dropdown"),u.setAttribute(this.element[0],"id",e),u.setAttribute(this.element.parent().find("label").first()[0],"for",e)),"ios"!==m.os.name&&"android"!==m.os.name||(this.settings.noSearch=!0),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled");var i=this.element[0].classList;0===i.length&&(this.element[0].classList="dropdown");var n=i.contains("dropdown-xs")?"dropdown input-xs":i.contains("dropdown-sm")?"dropdown input-sm":i.contains("dropdown-lg")?"dropdown input-lg":"dropdown",s=this.element.attr("style");this.isHidden=s&&s.indexOf("display: none")>=0;var a=this.isInlineLabel?this.inlineLabel:this.element;this.wrapper=a.next(".dropdown-wrapper"),this.isWrapped=this.wrapper.length>0,this.isWrapped||(this.wrapper=$('<div class="dropdown-wrapper"></div>').insertAfter(a)),this.isWrapped?(this.pseudoElem=this.wrapper.find(".".concat(n)),this.trigger=this.wrapper.find(".trigger")):this.pseudoElem=$("div#".concat(e,"-shdo")),i.contains("text-align-reverse")?n+=" text-align-reverse":i.contains("text-align-center")&&(n+=" text-align-center"),this.label=$('label[for="'.concat(h.stripTags(e),'"]')),this.pseudoElem.length?this.pseudoElem[0].setAttribute("class",n):this.pseudoElem=$('<div class="'.concat(n,'">')),this.isWrapped||this.pseudoElem.append($("<span></span>"));var r=u.getAttributes(this.element[0]),o=this.getDataAttributes(r,["data-validate"]);this.pseudoElem.attr(o.obj).attr({role:"button","aria-haspopup":"listbox"}),this.settings.attributes&&C.addAttributes(this.pseudoElem,this,this.settings.attributes,"dropdown",!0),function(t){var e=t.element.prop("disabled"),i=t.element.prop("readonly");e?t.disable():i?t.readonly():t.enable()}(this),this.isWrapped||this.wrapper.append(this.pseudoElem,this.trigger),this.icon=this.wrapper.find(".icon"),this.icon.length||(this.icon=$.createIconElement("dropdown"),this.wrapper.append(this.icon)),this.element.prop("multiple")&&!this.settings.multiple&&(this.settings.multiple=!0),this.settings.multiple&&!this.element.prop("multiple")&&this.element.prop("multiple",!0),this.settings.showTags&&(this.settings.showSearchUnderSelected=!0,this.pseudoElem[0].classList.add("has-tags"),this.renderTagList());var l=this.element.attr("data-source");l&&"source"!==l&&(this.settings.source=l);var c=this.element.attr("data-maxselected");function d(t,e){switch(t){case!e||"true":return"all";case!!e&&"false":return"none";default:return ai.indexOf(t)>-1?t:"none"}}c&&!isNaN(c)&&(this.settings.maxSelected=parseInt(c,10)),void 0!==this.settings.moveSelectedToTop&&(this.settings.moveSelected=this.settings.moveSelectedToTop);var p=this.element.attr("data-move-selected");this.settings.moveSelected=p?d(p,!0):d(this.settings.moveSelected),this.settings.reloadSourceOnOpen&&(this.settings.reload="open",delete this.settings.reloadSourceOnOpen);var g=this.element.attr("data-close-on-select");g&&!this.settings.closeOnSelect&&(this.settings.closeOnSelect="true"===g);var f=this.element.attr("data-no-search");f&&!this.settings.noSearch&&(this.settings.noSearch="true"===f);for(var v=["-xs","-sm","-mm","-md","-lg"],b=this.element.attr("class"),y=null,w=0;w<v.length;w++)y=v[w],b.match(y)&&this.pseudoElem.addClass("dropdown".concat(y));return this.dataset=[],this.listfilter=new ge({filterMode:this.settings.filterMode}),this.setListIcon(),this.setDisplayedValues(),this.setInitial(),this.setWidth(),setTimeout((function(){t.toggleTooltip()}),0),this.element.triggerHandler("rendered"),this.handleEvents()},renderTagList:function(){var t=this;function e(e){t.settings.dismissHandler&&t.settings.dismissHandler(e);var i=t.selectedOptions.filter((function(t){return h.stripHTML(t.value)===e.settings.value}));i.length&&t.deselect(i[0]),t.tagListAPI.element.classList[t.selectedOptions.length?"remove":"add"]("empty"),t.isOpen()&&t.updateList()}var i=this.toTagData();i.forEach((function(i){i.dismissHandler=e,t.settings.clickHandler&&(i.clickHandler=t.settings.clickHandler),t.isDisabled()&&(i.disabled=!0)}));var n=this.pseudoElem.children("span")[0];this.tagListAPI?this.tagListAPI.updated({tags:i}):(this.tagListAPI=new si(n,{tags:i}),n.classList.add("tag-list")),this.tagListAPI.element.classList[this.selectedOptions.length?"remove":"add"]("empty"),isNaN(this.settings.tagListMaxHeight)||(n.classList.add("scrollable"),n.style.maxHeight=i.length?"".concat(this.settings.tagListMaxHeight,"px"):"");var s=n.scrollHeight>n.clientHeight;this.pseudoElem[0].classList[s?"add":"remove"]("has-scrollbar"),this.isOpen()&&this.position()},inputTimer:function(){if(this.inputTimeout)return!1;var t=this;return this.inputTimeout=setTimeout((function(){clearTimeout(t.inputTimeout),t.inputTimeout=null}),100),!0},setWidth:function(){var t=this.element[0].style;t.width&&(this.pseudoElem[0].style.width=t.width),"absolute"===t.position&&(this.pseudoElem[0].style.position="absolute",this.pseudoElem[0].style.left=t.left,this.pseudoElem[0].style.top=t.top,this.pseudoElem[0].style.bottom=t.bottom,this.pseudoElem[0].style.right=t.right)},setItemIcon:function(t){if(!t.icon)return t.isIcon=!1,t.html="",void this.listIcon.items.push(t);"object"===i(t.icon)&&(t.obj=t.icon,t.icon=t.icon.icon,t.obj.color?0===t.obj.color.indexOf("#")?t.specColor=t.obj.color:t.classList=" ".concat(t.obj.color):t.obj.class&&(0===t.obj.class.indexOf("#")?t.specColor=t.obj.class:t.classList=" ".concat(t.obj.class)),t.obj.colorOver?0===t.obj.colorOver.indexOf("#")?t.specColorOver=t.obj.colorOver:t.classListOver=" ".concat(t.obj.colorOver):t.obj.classOver&&(0===t.obj.classOver.indexOf("#")?t.specColorOver=t.obj.classOver:t.classListOver=" ".concat(t.obj.classOver))),t.isIcon=t.icon&&t.icon.length,t.classList&&t.classList.length&&(t.isClassList=!0),t.classListOver&&t.classListOver.length&&(t.isClassListOver=!0),t.html=$.createIcon({icon:t.isIcon?t.icon:"",class:"listoption-icon".concat(t.isClassList?" ".concat(t.classList):"")}),"swatch"===t.icon&&(t.isSwatch=!0,t.html='<span class="swatch '.concat(t.isClassList?t.classList:"",'"></span>')),this.listIcon.items.push(t)},setListIcon:function(){var t=this,e=!t.settings.multiple&&t.element.find("[data-icon]").length>0,i=e?this.element.find("option"):[];if(t.listIcon={hasIcons:e,items:[]},e){var n=0;i.each((function(e){var i=$(this).attr("data-icon"),s=null;"string"==typeof i&&i.length&&(s=0!==i.indexOf("{")?i:$.fn.parseOptions(this,"data-icon"),t.setItemIcon({html:"",icon:s}),t.listIcon.items[e]&&t.listIcon.items[e].isIcon&&n++)})),e=n>0}e&&(t.pseudoElem.prepend($.createIcon({icon:"",class:"listoption-icon"})),t.listIcon.pseudoElemIcon=t.pseudoElem.find("> .listoption-icon"),t.listIcon.idx=-1),t.listIcon.hasIcons=e},toggleTooltip:function(){this.overflowed?this.setTooltip():this.tooltipApi&&this.removeTooltip()},setTooltip:function(){var t=this,e=$(this.element[0].selectedOptions),i=this.getOptionText(e);this.tooltipApi=this.pseudoElem.find("span").tooltip({content:h.escapeHTML(i),parentElement:this.pseudoElem,trigger:this.isMobile()?"immediate":"hover"}).on("blur.dropdowntooltip",(function(){t.removeTooltip()})).data("tooltip")},removeTooltip:function(){this.tooltipApi&&(this.tooltipApi.element.off("blur.dropdowntooltip"),this.tooltipApi.destroy(),this.tooltipApi=null)},setItemIconOverColor:function(t){var e=this;if(e.listIcon.hasIcons){var i=t?t.find(".listoption-icon"):null;e.list.find("li").each((function(n){var s=$(this),a=s.find(".listoption-icon"),r=e.listIcon.items[n];r&&(s.is(".is-focused")&&r.isClassListOver&&a.removeClass(r.classListOver).addClass(r.classList),i&&s.is(t)&&r.isClassListOver&&(i.removeClass(r.classList),i.addClass(r.classListOver)))}))}},updateItemIcon:function(t){if(this.listIcon.hasIcons){var e=this.listIcon.pseudoElemIcon,i=t.index(),n=this.listIcon.idx,s=this.listIcon.items[i],a=s&&s.isIcon?s.icon:"";if(!s)return;if(n>-1){var r=this.listIcon.items[n];r&&(e.removeClass("".concat(r.classList," ").concat(r.classListOver)),e[0].style.fill="")}this.listIcon.idx=i,e.changeIcon(a),s.isClassList&&e.addClass(s.classList)}},updateList:function(t){var e=this,i=this.settings,n=e.isMobile(),s=void 0!==e.list&&null!==e.list&&e.list.length>0,a="",r="",o=0,l=this.element.find("optgroup").length,c="",d=!0===this.settings.multiple,h="".concat(this.settings.moveSelected),p=!0===this.settings.showSelectAll,g={all:B.translate("All"),selected:B.translate("Selected"),labelText:e.isInlineLabel?e.inlineLabelText.text():this.label.text()};g.all="string"==typeof i.allTextString&&""!==i.allTextString?e.settings.allTextString:"".concat(g.all," ").concat(g.labelText),g.selected="string"==typeof i.selectedTextString&&""!==i.selectedTextString?e.settings.selectedTextString:"".concat(g.selected," ").concat(g.labelText),this.element[0].classList.contains("text-align-reverse")?c=" text-align-reverse":this.element[0].classList.contains("text-align-center")&&(c=" text-align-center"),s||(a='<div class="dropdown-list'.concat(c).concat(n?" mobile":"").concat(this.settings.multiple?" multiple":"",'" id="dropdown-list" ').concat(this.settings.multiple?'aria-multiselectable="true"':"",'>\n        <label for="dropdown-search" class="audible">').concat(this.settings.noSearch?B.translate("PressDown"):B.translate("TypeToFilter"),'</label>\n        <input type="text" class="dropdown-search').concat(c,'" ').concat(this.settings.noSearch?'aria-readonly="true"':"",' id="dropdown-search" autocomplete="off" />\n        <span class="trigger">').concat(n?$.createIcon({icon:"close",classes:["close"]}):$.createIcon("dropdown"),'</span>\n        <ul role="listbox" aria-label="').concat(B.translate("Dropdown"),'">'));var f=this.element.find("option"),m=this.element.find("optgroup"),v=":selected",b=[];"typeahead"===this.settings.reload&&(v=function(t,i){return!!e.selectedValues&&e.selectedValues.indexOf(i.value)>-1});var y=f.filter(v);function w(t){return'<li role="presentation" class="group-label" focusable="false">\n        '.concat(t,"\n      </li>")}function x(i,n){var s="",a=i.innerHTML,r=u.getAttributes(i),o=r.getNamedItem("value"),l=r.getNamedItem("title"),c=l?'" title="'.concat(l.value,'"'):"",d=r.getNamedItem("data-badge"),h=r.getNamedItem("data-badge-color"),p="",g=i.selected?" is-selected":"",f=i.disabled?" is-disabled":"",m=i.className?" ".concat(i.className.value):"",v=m.indexOf("clear")>-1?' class="clear-selection"':"",b=' tabIndex="'.concat(n&&0===n?0:-1,'"'),y=" ".concat(e.getDataAttributes(r,["data-badge","data-badge-color","data-val","data-icon"]).str),w=(o&&"value"in o?o.value:a).replace(/"/g,"/quot/"),x="";if(e.listIcon.hasIcons&&e.listIcon.items[n]&&(x=e.listIcon.items[n].html),d&&(p='<span class="badge '.concat(h?h.value:"azure07",'">').concat(d.value,"</span>")),m.indexOf("clear")>-1&&""===a&&(a=B.translate("ClearSelection")),t&&t.length>0){var C=e.getSearchRegex(t);a=a.replace(C,'<span class="dropdown-highlight">$1</span>').trim()}return e.listIcon.hasIcons&&e.listIcon.items[n]&&e.listIcon.items[n].isSwatch&&(m+=" is-swatch"),s+='<li class="dropdown-option'.concat(g).concat(f).concat(m,'" ').concat(g?'aria-selected="true"':"",' data-val="').concat(w,'" ').concat(y).concat(b).concat(c,' role="option">\n        <a id="list-option-').concat(n,'" href="#" ').concat(v,' role="option">').concat(x).concat(a).concat(p,"</a></li>")}if("typeahead"===this.settings.reload&&y.prop("selected",!0),d&&p&&f.length){var C=f.not("[disabled], .hidden").length===y.not("[disabled], .hidden").length;r+='<li role="presentation" class="dropdown-select-all-list-item'.concat(C?" is-selected":"",'">')+'<a role="option" href="#" id="dropdown-select-all-anchor" class="dropdown-select-all-anchor">'.concat(B.translate("SelectAll"),"</a>")+"</li>"}"group"===h&&(m&&m.length?m.each((function(t,e){var i=y.filter((function(){return $.contains(e,this)}));b.push(i)})):h="all"),"all"===h&&(f=f.not(y),y.length>0&&(r+=w(g.selected)),y.each((function(t){r+=x(this,t),o++})),!l&&f.length>0&&(r+=w(g.all))),f.each((function(t){var e,i=t+o,n=$(this),s=n.parent();s.is("optgroup")&&m.length&&(e=s.index(),m.index(s)>-1&&(m=m.not(s),r+=w("".concat(s.attr("label"))),"group"===h&&b[e].each((function(t){r+=x(this,t),o++})))),"none"!==h&&n.is(":selected")||(r+=x(this,i))})),s?this.listUl.html(r):(a+="".concat(r,"</ul>")+"</div>",this.list=$(a),this.listUl=this.list.find("ul"),this.searchInput=this.list.find("#dropdown-search")),this.listIcon.hasIcons&&(this.list.addClass("has-icons"),this.listIcon.pseudoElemIcon.clone().appendTo(this.list)),l&&this.listUl.addClass("has-groups"),this.hasTooltips=this.listUl.find("[title]").length>0,this.isOpen()&&(this.position(),this.highlightOption(this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)").first()))},setDisplayedValues:function(){var t=$(this.element[0].selectedOptions),e=this.getOptionText(t);if(t.hasClass("clear")&&(e=""),this.settings.showTags&&this.tagListAPI)this.renderTagList();else{if(this.settings.empty&&0===t.length){var i=this.pseudoElem.find("span").first();return u.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),i=$("#".concat(this.element.attr("id"))).next().find("span").first(),u.html(i,'<span class="audible">'.concat(this.label.text()," </span>"),"<div><p><span><ul><li><a><abbr><b><i><kbd><small><strong><sub><svg><use><br>"),void this.setPlaceholder(e)}var n=this.element.attr("maxlength");n&&(e=e.substr(0,n)),e=e.trim();var s=this.pseudoElem.find("span");s.length>0&&(s[0].innerHTML='<span class="audible">'.concat(this.label.text()," </span>").concat(h.escapeHTML(e))),this.settings.showSearchUnderSelected||this.setPlaceholder(e)}this.previousActiveDescendant=t.first().val(),this.updateItemIcon(t),this.setBadge(t)},copyClass:function(t,e,i){t.hasClass(i)&&e.addClass(i)},setInitial:function(){this.element.is(":disabled")&&this.disable(),this.element.is("[readonly]")&&this.readonly(),this.isHidden&&(this.pseudoElem.hide().prev("label").hide(),this.pseudoElem.next("svg").hide())},setPlaceholder:function(t){if(this.placeholder=this.placeholder||{text:this.element.attr("placeholder")},this.placeholder.text){var e="string"!=typeof t||"string"==typeof t&&""===t;this.placeholder.elem=this.placeholder.elem||this.pseudoElem.find("span:not(.audible)"),this.placeholder.elem.attr("data-placeholder-text",e?this.placeholder.text:"")}else delete this.placeholder},ignoreKeys:function(t,e){var i=e.which;if(e.altKey&&38===i)return e.stopPropagation(),e.preventDefault(),!1;if(!t.is(":disabled")&&!t.hasClass("is-readonly")){if(e.ctrlKey)if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;return!0}},handleSearchEvents:function(){var t=this;this.filterTerm||(this.searchKeyMode=!1);var e,i=this.searchInput[0].value;"ie"===m.browser.name&&"11"===m.browser.version||(e=String.fromCodePoint(8)),"."!==i&&i!==e||(this.searchInput[0].value=""),this.searchInput.on("keydown.".concat("dropdown"),(function(e){var i=$(t);return t.handleKeyDown(i,e)})).on("input.".concat("dropdown"),(function(e){t.isFiltering=!0,t.handleAutoComplete(e)}))},filterList:function(t){var e=!1;this.settings.source&&"typeahead"===this.settings.reload&&(e=!0,this.callSource());var i,n=this,s=!1,a=$(".dropdown-option",this.listUl),r=$(".group-label",this.listUl);a.length&&this.list&&(!this.list||this.list.length)&&(t||(t=""),i=!e&&t&&t.length?this.listfilter.filter(a,t):a,this.list.addClass("search-mode"),this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.searchInput.removeAttr("aria-activedescendant"),this.unhighlightOptions(),i&&(i.length||t)?(i.removeClass("hidden"),a.not(i).add(r).addClass("hidden"),this.filteredItems=a.filter(i),this.filteredItems.each((function(e){var i=$(this),a=i.children("a");i.attr("tabindex",0===e?"0":"-1"),s||(n.highlightOption(i),s=!0);var r=n.getSearchRegex(t),o=i.text();o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=h.escapeHTML(o)).replace(/&lt;/g,"&#16;")).replace(/&gt;/g,"&#17;")).replace(/&apos;/g,"&#18;")).replace(/&quot;/g,"&#19;")).replace(/&amp;/g,"&")).replace(r,'<span class="dropdown-highlight">$1</span>').trim()).replace(/&#16;/g,"&lt;")).replace(/&#17;/g,"&gt;")).replace(/&#18;/g,"&apos;")).replace(/&#19;/g,"&quot;");var l=0!==i.children("a").find("svg").length?(new XMLSerializer).serializeToString(i.children("a").find("svg")[0]):"",c=i.children("a").find(".swatch"),d=0!==c.length?c[0].outerHTML:"";a[0]&&(a[0].innerHTML=d+l+o)})),r.each((function(){var t=$(this).nextUntil(".group-label, .selector").not(".hidden");(n.settings.showEmptyGroupHeaders||t.length)&&$(this).removeClass("hidden")})),t="",this.position()):this.resetList())},resetList:function(){if(this.settings.source&&"typeahead"===this.settings.reload)return this.filterTerm="",this.searchKeyMode=!1,void this.callSource(null,!0);if(this.list&&(!this.list||this.list.length)){this.list.removeClass("search-mode");var t=this.listUl.find("li");t.removeAttr("style").each((function(){var t=$(this).children("a"),e=$(this),i=h.escapeHTML(t.text()),n=0!==e.children("a").find("svg").length?(new XMLSerializer).serializeToString(e.children("a").find("svg")[0]):"",s=e.children("a").find(".swatch"),a=0!==s.length?s[0].outerHTML:"";t[0]&&(t[0].innerHTML=a+n+i)})),this.list.hasClass("is-ontop")?this.list[0].style.top="".concat(this.pseudoElem.offset().top-this.list.height()+this.pseudoElem.outerHeight()-2,"px"):this.list[0].style.top="",delete this.filteredItems,this.settings.multiple&&this.updateList(),t.removeClass("hidden"),this.position(),2===this.list.find("svg").length&&this.list.find("svg").last().remove()}},selectBlank:function(){var t=this.element.find("option").filter((function(){return!this.value||0===$.trim(this.value).length}));t.length&&(t[0].selected=!0,t[0].setAttribute("selected",!0),this.element.triggerHandler("updated"),this.element.triggerHandler("change"))},handleKeyDown:function(t,e){var i,n=this.element[0].selectedIndex||-1,s=this.element[0].options,a=e.which;if(!this.ignoreKeys(t,e))return!1;if(!this.isLoading()){if(this.settings.onKeyDown)if(!1===this.settings.onKeyDown(e))return e.stopPropagation(),e.preventDefault(),!1;switch(this.isOpen()&&(s=this.listUl.find("li:visible:not(.separator):not(.group-label):not(.is-disabled)"),n=-1,$(s).each((function(t){$(this).is(".is-focused")&&(n=t)}))),a){case 37:case 8:case 46:if(!this.isOpen())return this.selectBlank(),e.stopPropagation(),e.preventDefault(),!1;break;case 9:return this.isOpen()&&(!this.settings.multiple&&s.length&&n>-1&&this.selectOption(this.correctValue($(s[n]))),this.closeList("tab"),this.activate()),!0;case 27:if(this.isOpen()){this.element.closest(".modal.is-visible").data("listclosed",!0);var r=this.pseudoElem?this.pseudoElem.parents("td"):null;return this.closeList("cancel"),this.activate(),r&&r.focus(),e.stopPropagation(),!1}break;case 32:case 13:if(this.isOpen()){if(32===a&&!0===this.searchKeyMode)break;if(e.preventDefault(),s.length&&n>-1){var o=$(s[n]);this.selectListItem(o)}}return e.stopPropagation(),!1;case 38:if(e.shiftKey)return;return this.searchKeyMode=!1,n>0&&(i=$(s[n-1]),this.highlightOption(i),this.setItemIconOverColor(i),i.parent().find(".is-focused").removeClass("is-focused"),i.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 40:if(e.shiftKey)return;return this.searchKeyMode=!1,n<s.length-1&&(i=$(s[n+1]),this.highlightOption(i),this.setItemIconOverColor(i),i.parent().find(".is-focused").removeClass("is-focused"),i.addClass("is-focused")),e.stopPropagation(),e.preventDefault(),!1;case 35:this.searchKeyMode=!1;var l=$(s[s.length-1]);return this.highlightOption(l),e.stopPropagation(),!1;case 36:this.searchKeyMode=!1;var c=$(s[0]);return this.highlightOption(c),e.stopPropagation(),!1}return this.isOpen()||this.isControl(a)||this.settings.source||this.settings.noSearch||(this.isFiltering=!0,this.filterTerm=$.actualChar(e),this.searchInput&&this.searchInput.length&&this.searchInput.val($.actualChar(e)),this.toggle()),this.searchKeyMode=!0,this.searchInput&&this.searchInput.attr("aria-activedescendant",""),!0}},handlePseudoElemKeydown:function(t){var e=$(t.target),i=t.key;if(e.is(".is-readonly"))return!0;var n="Esc"===i||"Escape"===i;if(["Alt","Shift","Control","Meta"].indexOf(i)>-1)return!1;if(!this.ignoreKeys(e,t))return!1;if(this.settings.onKeyDown&&!1===this.settings.onKeyDown(t))return t.stopPropagation(),t.preventDefault(),!1;if(["ArrowDown","ArrowUp","Down","Up","Enter","Spacebar"," "].indexOf(i)>-1)return this.isOpen()||this.open(),this.settings.noSearch&&!t.ctrlKey&&this.handleKeyDown(e,t),!1;var s="Mac OS X"===m.os.name;return!s&&"Delete"===i||s&&"Backspace"===i?(this.selectBlank(),"Backspace"===i&&(t.stopPropagation(),t.preventDefault()),!0):n||"Tab"===i?!this.settings.noSearch||!this.isOpen()||this.handleKeyDown(e,t):(this.handleAutoComplete(t),!0)},handleAutoComplete:function(t){var e=this;if(!this.isLoading()){var i=this;if(this.timer&&clearTimeout(this.timer),"input"===t.type)this.filterTerm=this.searchInput.val();else{if(this.filterTerm+=$.actualChar(t).toLowerCase(),""===this.filterTerm)return;t.key===this.filterTerm||t.key.toLowerCase()!==this.filterTerm||i.settings.noSearch||(this.filterTerm=t.key)}this.timer=setTimeout((function(){i.settings.noSearch?i.isOpen()?i.highlightStartsWith(i.filterTerm):i.selectStartsWith(i.filterTerm):(e.searchKeyMode=!0,i.isOpen()?(0===e.list.find("ul li.hidden").length&&e.list.find(" > svg.listoption-icon:not(.swatch)").changeIcon("icon-empty-circle"),n()):i.open(n))}),i.settings.delay)}function n(){""===i.filterTerm?i.resetList():i.filterList(i.filterTerm.toLowerCase())}},isControl:function(t){return t>7&&t<48||t>90&&t<94||t>111&&t<146},activate:function(t){var e=this,i=this.pseudoElem;(t||e.isMobile())&&(i=this.searchInput),this.currentlyScrolledPos&&(this.listUl.scrollTop(this.currentlyScrolledPos),delete this.currentlyScrolledPos),t&&i&&(i.hasClass("is-readonly")||!0===i.prop("readonly"))||(e.isMobile()||e.filterTerm||!i||(i[0].setSelectionRange?i[0].setSelectionRange(0,i[0].value.length):"INPUT"===i[0].tagName&&i[0].select()),i&&i[0].focus())},getSearchRegex:function(t){var e;try{e=new RegExp("(".concat(E.escapeRegExp(t),")"),"i")}catch(t){e=/[\s\S]*/i}return e},getOptionText:function(t){var e="";return t||(t=this.element.find("option:selected")),t.each((function(){e.length>0&&(e+=", "),e+=$(this).text().trim()})),e},open:function(t){var e=this;function i(){e.isMobile()&&$(".tooltip:not(.is-hidden)").hide(),e.updateList(),e.openList(),t&&"function"==typeof t&&t.call(this)}this.inputTimer()&&(this.element.is(":disabled")||this.pseudoElem.hasClass("is-disabled")||this.pseudoElem.hasClass("is-readonly")||e.callSource(i)||i())},openList:function(){var t,e=this.previousActiveDescendant?this.list.find('.dropdown-option[data-val="'.concat(this.previousActiveDescendant.replace(/"/g,"/quot/"),'"]')):this.list.find(".is-selected"),i=this;(this.touchPrevented=!1,$("select").each((function(){var t=$(this).data();t.dropdown&&t.dropdown.closeList("cancel")})),$(".popupmenu.is-open").filter((function(){return 0===$(this).parents(".popupmenu").length})).each((function(){var t=$(this).data("trigger");if(t&&t.length){var e=$(this).data("trigger").data("popupmenu");e&&"function"==typeof e.close&&e.close()}})),this.isOpen()||this.list.appendTo("body"),this.list.show(),this.isShortField&&this.list[0].classList.add("dropdown-short"),this.pseudoElem.attr("aria-expanded","true").addClass("is-open"),i.settings.attributes)&&(C.addAttributes(this.list.find("input"),this,this.settings.attributes,"search",!0),this.list.find("label").attr("for",this.list.find("input").attr("id")),C.addAttributes(this.list.find("label"),this,this.settings.attributes,"search-label"),C.addAttributes(this.list.find(".trigger svg"),this,this.settings.attributes,"trigger",!0),C.addAttributes(this.list.find("ul"),this,this.settings.attributes,"listbox",!0),C.addAttributes(this.list,this,this.settings.attributes,"list"),this.list.find(".dropdown-option a").each((function(t){var e=$(this);C.addAttributes(e,i,i.settings.attributes,"option-".concat(t),!0)})));if(this.searchInput.attr("aria-activedescendant",e.children("a").attr("id")),this.settings.showSearchUnderSelected&&this.list.find(".trigger").find(".icon").attr("class","icon search").changeIcon("search"),this.isInGrid=1===this.pseudoElem.closest(".datagrid-row").length,this.pseudoElem.parent().hasClass("is-inline")&&(this.isInGrid=!1),this.isInGrid){var n=this.pseudoElem.closest(".datagrid").attr("class").replace("datagrid","");this.list.addClass("datagrid-dropdown-list ".concat(n))}1===this.pseudoElem.closest(".datagrid-filter-wrapper").length&&this.list.addClass("datagrid-filter-dropdown");var s=this.settings.cssClass;if(s&&"string"==typeof s&&this.list.addClass(s),this.position(),this.settings.maxWidth&&this.list.css("max-width","".concat(this.settings.maxWidth,"px")),"string"==typeof this.filterTerm&&this.filterTerm.length>0)this.searchInput.val(this.filterTerm);else if(!this.settings.showSearchUnderSelected){var a=$(this.selectedOptions),r=this.getOptionText(a);this.searchInput.val(r)}var o=this.settings.multiple;if(this.highlightOption(e,o),this.settings.multiple&&this.listUl.find(".is-selected").length>0&&(this.highlightOption(this.listUl.find(".dropdown-option").eq(0)),setTimeout((function(){i.listUl.scrollTop(0)}),0)),this.handleSearchEvents(),this.activate(!0),this.element.trigger("listopened"),this.isMobile()&&i.searchInput.on("keypress.dropdown",(function(t){13===t.which&&i.closeList("select")})),i.list.removeClass("dropdown-tall").on("touchend.list click.list","li",(function(t){if(!i.touchPrevented){var e=i.selectListItem($(this));t.preventDefault(),e&&t.stopPropagation()}})).on("mouseenter.list","li",(function(){i.highlightOption($(this),!0)})),this.hasTooltips){var l=function(){h.timer&&h.timer.destroy&&h.timer.destroy(!0)},c=function(t,e){$(t).tooltip({trigger:"immediate",content:e}),$(t).focus()},d=function(t){var e;l(),$("#tooltip").hide(),null===(e=$("#tooltip").data("tooltip"))||void 0===e||null==e||e.destroy()},h=this;h.list.on("mouseover.tooltip","li[title], li[data-title]",(function(t){var e;e=t.currentTarget,l(),h.timer=new U({duration:50,timeoutCallback:function(){var t=e.getAttribute("title");if(!t)return t=e.getAttribute("data-title"),void c(e,t);e.setAttribute("data-title",t),e.removeAttribute("title"),c(e,t)}}),G.register(h.timer)})).on("mouseleave.tooltip, click.tooltip","li[title], li[data-title]",(function(t){d(t.currentTarget)}))}function u(t){return t.closest(".dropdown, .multiselect").length>0||t.closest(".dropdown-list").length>0||!0===i.touchmove}function p(t){var e=$(t.target);if(i.touchPrevented||u(e)&&!e.is(".icon"))return t.preventDefault(),void(i.touchPrevented=!1);i.closeList("cancel")}setTimeout((function(){i.list.addClass("is-closable")}),100),$(document).on("touchstart.dropdown",(function(e){i.touchPrevented=!1,t={x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY},$(document).on("touchmove.dropdown",(function(e){var n=e.originalEvent.touches[0].pageX,s=e.originalEvent.touches[0].pageY;(n>=t.x+10||n<=t.x-10||s>=t.y+10||s<=t.y-10)&&(i.touchPrevented=!0)}))})).on("touchend.dropdown touchcancel.dropdown",(function(t){if($(document).off("touchmove.dropdown"),t.preventDefault(),i.touchPrevented)return t.stopPropagation(),!1;p(t)})).on("click.dropdown",p);var g=$(".modal.is-visible .modal-body-wrapper"),f=i.element.parents(".scrollable, .scrollable-x, .scrollable-y, .card-content");f.length&&(g=f),g.length&&(this.parentScrollableArea=g,this.parentScrollableArea.on("scroll.dropdown",(function(t){var e=$("*:focus");i.touchPrevented||u($(t.target))||e.is(".timepicker")?i.touchPrevented=!1:i.closeList("cancel")}))),$("body").on("resize.dropdown",(function(){i.position(),void 0===window.orientation&&i.closeList("cancel")})),void 0!==window.orientation&&$(window).on("orientationchange.dropdown",(function(){i.closeList("cancel")}))},position:function(){var t=this,e={parentXAlignment:"left",placement:"bottom",strategies:["flip","shrink-y"]};this.list[0].removeAttribute("style"),this.listUl[0].removeAttribute("style");var i=this.pseudoElem;this.isInGrid&&(i=this.element.closest(".datagrid-cell-wrapper"));var n=window.getComputedStyle(i[0]),s=2*parseInt(n.borderLeftWidth,10),a=Math.round(parseInt(i[0].clientWidth,10)+s);this.searchInput[0].style.cssText="width: ".concat(a,"px !important");var r=Math.round(this.list.width())<=a;if(this.searchInput[0].style.width="",e.parent=i,e.useParentWidth=r,!this.settings.showSearchUnderSelected){var o=window.devicePixelRatio>1,l="chrome"===m.browser.name;e.y=-(parseInt(i[0].clientHeight,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)-(!l&&o?1:0)),e.x=0}t.settings.placementOpts&&t.settings.placementOpts.x&&(e.x=t.settings.placementOpts.x),this.list.one("afterplace.dropdown",(function(e,i){t.list[!0===i.wasFlipped?"addClass":"removeClass"]("is-ontop"),t.listUl[!0===i.wasFlipped?"prependTo":"appendTo"](t.list);var n=window.getComputedStyle(t.list[0]),s=n.top?parseInt(n.top,10):0,a=0;"firefox"===m.browser.name&&(a=4);var r,o=parseInt(t.listUl[0].offsetHeight,10),l=parseInt(t.list[0].offsetHeight,10)+5,c=parseInt(t.searchInput[0].offsetHeight,10),d=parseInt(t.list[0].offsetTop,10)+parseInt(t.list[0].offsetHeight,10)>=window.innerHeight;return c<l-2*c&&o+c>=l&&(r="".concat(l-c-5,"px"),d&&(t.list[0].style.height="".concat(parseInt(l,10)-10,"px"))),i.wasFlipped&&(r="".concat(l-c-a-5,"px"),t.isShortField||(t.list[0].style.top="".concat(s,"px"))),r&&(t.listUl[0].style.height=r),void 0===r&&t.list[0].classList.contains("is-ontop")&&(r="".concat(l-c-a-7),t.list[0].style.top="".concat(s-r,"px")),i})).place(e),this.list.data("place").place(e)},selectListItem:function(t){var e=t.closest("li");if(e.length&&(t=e),t.is(".separator, .group-label"))return!1;if(t.is(".dropdown-select-all-anchor")&&(t=t.parent()),this.settings.multiple&&t[0].classList.contains("dropdown-select-all-list-item")){var i=!t[0].classList.contains("is-selected");return t[0].classList[i?"add":"remove"]("is-selected"),i?t[0].setAttribute("aria-selected","true"):t[0].removeAttribute("aria-selected"),this.selectAll(i),!0}var n=this.correctValue(t);if(n.is(":disabled"))return!1;if(this.selectOption(n),this.settings.closeOnSelect&&this.closeList("select"),this.isMobile())return!0;if(this.activate(!this.settings.closeOnSelect),this.settings.showSelectAll&&this.list){var s=this.element.find("option"),a=s.filter(":selected");s.length>a.length?this.list.find(".dropdown-select-all-list-item").removeClass("is-selected").removeAttr("aria-selected"):this.list.find(".dropdown-select-all-list-item").addClass("is-selected").attr("aria-selected","true")}return!0},correctValue:function(t){var e=t.attr("data-val").replace(/"/g,"/quot/"),i=this.element.find('option[value="'.concat(e,'"]'));return(0===i.length||i.length>1)&&(i=this.element.find("option").filter((function(){var t=$(this),i=t.attr("value");return t.text()===e||i&&i.replace(/"/g,"/quot/")===e}))),i},close:function(){return this.closeList("cancel")},closeList:function(t){this.list&&this.list.is(":visible")&&this.isListClosable()&&this.inputTimer()&&(this.touchmove&&(this.touchmove=!1),this.filterTerm="",this.searchKeyMode=!1,this.setDisplayedValues(),delete this.filteredItems,this.tagListAPI&&this.scrollTagList(),this.searchInput.off(["input.".concat("dropdown"),"keydown.".concat("dropdown")].join(" ")),this.list.off(["click.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown"),"mousewheel.".concat("dropdown"),"mouseenter.".concat("dropdown")].join(" ")).remove(),this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.searchInput.removeAttr("aria-activedescendant"),$(document).off(["click.".concat("dropdown"),"scroll.".concat("dropdown"),"touchstart.".concat("dropdown"),"touchmove.".concat("dropdown"),"touchend.".concat("dropdown"),"touchcancel.".concat("dropdown")].join(" ")),this.parentScrollableArea&&(this.parentScrollableArea.off("scroll.dropdown"),delete this.parentScrollableArea),$("body").off("resize.dropdown"),$(window).off("orientationchange.dropdown"),this.element.trigger("listclosed",t),this.activate(),this.toggleTooltip(),this.list=null,this.searchInput=null,this.listUl=null)},scrollToOption:function(t){t&&0!==t.length&&(this.listUl.scrollTop(0),this.listUl.scrollTop(t.offset().top-this.listUl.offset().top-this.listUl.scrollTop()-40))},scrollTagList:function(){var t=this;this.tagListAPI&&setTimeout((function(){t.isFocused||(t.tagListAPI.element.scrollTop=0)}),5)},handleBlur:function(){return this.closeList("cancel"),!0},isLoading:function(){return this.element.is(".is-loading")&&this.element.is(".is-blocked")},isOpen:function(){return!!this.pseudoElem.hasClass("is-open")},toggle:function(){this.isOpen()||this.isLoading()?this.closeList("cancel"):this.open()},toggleList:function(){return z(this.toggle,this.toggleList).apply(this)},highlightOption:function(t,e){var i;this.isOpen()&&(t&&(0===t.length&&(t=this.list.find(".dropdown-option").eq(0)),t.is(".separator, .group-label")||(t.is("option")?(i=t,t=this.listUl.find('li[data-val="'.concat(i.val(),'"]'))):i=this.element.find("option").filter((function(e,i){return i.value===t.attr("data-val")})),this.setItemIconOverColor(),this.list.find(".is-focused").removeClass("is-focused").attr({tabindex:"-1"}),t.length&&i.length&&!i.hasClass(".is-disabled")&&!i.is(":disabled")&&(this.searchInput.attr("aria-activedescendant",t.children("a").attr("id")),""===i.val()||""===t.attr("data-val")||i.hasClass("clear")||(this.setItemIconOverColor(t),t.addClass("is-focused").attr({tabindex:"0"}),e&&!1!==e&&void 0!==e||this.scrollToOption(t))))))},unhighlightOptions:function(t,e){t&&t.length||(t=this.list.find(".is-selected")),this.setItemIconOverColor(),t.removeClass("is-focused").attr({tabindex:"-1"}),this.searchInput.removeAttr("aria-activedescendant"),e&&!1!==e&&void 0!==e||this.scrollToOption(t.first())},renderListItem:function(t){var e=t.value,i=t.selected,n=this.listUl.find('li[data-val="'.concat(e,'"]'));if(i)return n[0].classList.add("is-selected"),void n[0].setAttribute("aria-selected",!0);n[0].classList.remove("is-selected"),n[0].removeAttribute("aria-selected")},selectAll:function(t){var e=this,i="option:not(.is-disabled):not(:disabled)",n="li.dropdown-option:not(.separator):not(.group-label):not(.is-disabled)",s=C.getArrayFromList(this.element[0].querySelectorAll(i)),a=C.getArrayFromList(this.listUl[0].querySelectorAll(n)),r=s[s.length-1];this.settings.selectAllFilterOnly&&this.filteredItems&&(s=[],(a=$.makeArray(this.filteredItems)).forEach((function(t){var i=t.getAttribute("data-val");if(i){var n=e.element[0].querySelector('option[value="'.concat(i,'"]'));n&&s.push(n)}}))),t?(a.forEach((function(t){t.classList.add("is-selected"),t.setAttribute("aria-selected",!0)})),s.forEach((function(t){t.selected=!0,t.setAttribute("selected",!0)}))):(a.forEach((function(t){t.classList.remove("is-selected"),t.removeAttribute("aria-selected")})),s.forEach((function(t){t.selected=!1,t.setAttribute("selected",!1),t.removeAttribute("selected")}))),this.previousActiveDescendant=r.value||"",this.setDisplayedValues(),this.updateItemIcon(r),!this.settings.selectAllFilterOnly&&this.list[0].classList.contains("search-mode")&&this.resetList(),this.activate(!0),this.setBadge(r),this.toggleTooltip(),this.element.trigger("change").triggerHandler("selected")},selectOptions:function(t,e){Array.isArray(t)&&(t=$(t));var i=this;t.each((function(){i.selectOption($(this),e)})),i.element.trigger("change").triggerHandler("selected")},selectOption:function(t,e){var i;if(t&&t.length&&(!t.is("li")||(i=t,0===(t=this.element.find('option[value="'.concat(t.attr("data-val"),'"]'))).length&&(t=this.element.find("option").filter((function(){return $(this).text()===i.attr("data-val")}))),!t.prop("disabled")))){var n=t.val();"string"==typeof t?(i=this.listUl.find('li[data-val="'.concat(t,'"]')),n=t,t=this.element.find('option[value="'.concat(n,'"]'))):"string"==typeof n&&(n=n.replace(/"/g,"/quot/"),i=this.listUl.find('li[data-val="'.concat(n,'"]')));var s=!0,a=this.selectedValues,r=!1;!t.hasClass("clear")&&i||(r=!0),r&&this.deselectAll(),this.settings.multiple&&(Array.isArray(a)||(a=[a]),a.indexOf(n)>-1&&(s=!1)),s?(this.select(t[0]),this.previousActiveDescendant=n):(this.deselect(t[0]),this.previousActiveDescendant=void 0);var o=this.listUl[0].scrollTop;o>0&&(this.currentlyScrolledPos=o),this.renderListItem(t[0]),this.setDisplayedValues(),this.updateItemIcon(t),e||(this.element.trigger("change").triggerHandler("selected",[t,s]),this.toggleTooltip()),this.settings.multiple&&this.activate(!0),this.setBadge(t);var l=this.element.attr("id");if(m.browser.isIE11()&&l){var c=$("#".concat(l)).html(),d=$("#".concat(l)).val();c&&this.element.html(c),d&&this.element.val(d)}}},select:function(t){t&&t instanceof HTMLOptionElement&&(this.settings.multiple&&this.selectedValues.length>=this.settings.maxSelected||(t.selected=!0))},selectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.select(e[0]),this.updated())}},deselect:function(t){t&&t instanceof HTMLOptionElement&&(t.selected=!1)},deselectValue:function(t){if("string"==typeof t){var e=this.element.find('option[value="'.concat(t,'"]'));e&&e.length&&(this.deselect(e[0]),this.updated())}},deselectAll:function(){var t=this;this.element.find("option").each((function(e,i){$(i).prop("selected",!1),t.deselectValue(i)}))},firstOptionStartingWith:function(t){if("string"==typeof t){var e=this.element[0],i=-1,n=0;this.searchMatches&&this.searchMatches[t]||(this.searchMatches={},this.searchMatches[t]=[]);for(var s=0;s<e.options.length;s++){if(0===e.options[s].innerText.toLowerCase().indexOf(t)){if(-1===this.searchMatches[t].indexOf(s)){this.searchMatches[t].push(s),i=s;break}n++}else;}if(-1===i){if(!this.searchMatches[t].length)return;n===this.searchMatches[t].length&&(i=this.searchMatches[t][0],this.searchMatches[t].length=1)}return e.options[i]}},selectStartsWith:function(t){this.filterTerm="";var e=this.firstOptionStartingWith(t);this.select(e),this.updated(),this.element.trigger("change")},highlightStartsWith:function(t){if(this.isOpen()){var e=this.firstOptionStartingWith(t);this.highlightOption($(e))}},setBadge:function(t){if(this.badges){var e=this.element.parent().find(".badge");0===e.length&&(this.element.parent().find(".dropdown-wrapper").append('<span class="badge">1</span>'),e=this.element.parent().find(".badge")),e.attr("class","badge ".concat(t.attr("data-badge-color")?t.attr("data-badge-color"):"azure07")).text(t.attr("data-badge"))}},callSource:function(t,e){var n=this,s="";if(e||!this.isOpen()||this.element.hasClass("search-mode")||(s=this.searchInput.val()),!this.settings.source)return!1;this.isFiltering=!1;var a=i(this.settings.source),r=function(e,i){var a="",r=n.element.val();function o(t){return t.replace(/"/g,"'")}function l(t){if(null!=t){var e="",i="",s="";"string"==typeof t&&(t={value:t}),void 0!==t.value&&(t.value=o(t.value)),void 0!==t.id&&(isNaN(t.id)||(t.id="".concat(t.id)),t.id=o(t.id),e=' id="'.concat(t.id,'"')),void 0!==t.label&&t.label.length&&(t.label=o(t.label),s=t.label);var l=n.selectedValues.indexOf(r)>-1;n.settings.multiple?r.forEach((function(e){e===t.value&&(t.selected=!0)})):(t.value===r||l)&&(t.selected=!0),t.selected&&(i=" selected"),s.length||s===t.value||(s+=t.value),a+="<option".concat(e,' value="').concat(t.value,'"').concat(i,">\n          ").concat(s,"\n        </option>")}}if(!n.isFiltering&&!C.equals(e,n.dataset)&&(n.dataset=e,!i)){n.element.empty();for(var c=0;c<e.length;c++){var d=void 0;if(e[c].group){d=e[c].options,a+='<optgroup label="'.concat(e[c].group,'">');for(var h=0;h<d.length;h++)l(d[h]);a+="</optgroup>"}else l(e[c])}n.element.append(a)}n.element.triggerHandler("complete"),n.element.trigger("requestend",[s,e]),"function"==typeof t?t():n.updateList(s)};if(n.element.triggerHandler("start"),n.element.trigger("requeststart"),"function"===a)this.settings.source(r,s,this.settings.sourceArguments);else if("object"===a){var o=$.isArray(this.settings.source)?this.settings.source:[this.settings.source];r(o)}else{var l=this.settings.source.toString();$.getJSON(l).done((function(t){r(t)})).fail((function(){r([])}))}return!0},getDataAttributes:function(t,e){if(t){"string"==typeof t&&(t=[t]);var i=e||[];"string"==typeof i&&(i=[i]);var n={obj:{},str:"",isExclude:function(t){return $.inArray(t,i)>-1}};for(var s in t)t.hasOwnProperty(s)&&(n.name="".concat(t[s].name),n.isData="data-"===n.name.substr(0,5),n.isData&&!n.isExclude(n.name)&&(n.obj[n.name]=t[s].value,n.str+=" ".concat(n.name,'="').concat(t[s].value,'"')));return{str:n.str,obj:n.obj}}},setCode:function(t){var e=this,i=function(){e.element.val(t),e.updated()};e.callSource(i)||i()},isMobile:function(){return["ios","android"].indexOf(m.os.name)>-1},isListClosable:function(){return this.list.hasClass("is-closable")},toTagData:function(){var t=[],e=this.element[0].id;return e||(e=C.uniqueId(this.element[0],this.element[0].className)),this.selectedOptions.forEach((function(i){t.push({content:i.innerText.trim(),dismissible:!0,href:"#",id:"".concat(e,"-tag-").concat(i.value),style:"secondary",value:i.value})})),t},disable:function(){this.element.prop("disabled",!0).prop("readonly",!1),this.pseudoElem.addClass("is-disabled"),this.pseudoElem.is($(document.activeElement))&&this.pseudoElem.blur(),this.pseudoElem.addClass("is-disabled").removeClass("is-readonly").attr("tabindex","-1").prop("readonly",!1).prop("disabled",!0),this.closeList("cancel"),this.settings.showTags&&this.pseudoElem.find(".tag").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.pseudoElem.prop("disabled",!1).prop("readonly",!1).attr("tabindex","0").removeClass("is-disabled").removeClass("is-readonly"),this.settings.showTags&&this.pseudoElem.find(".tag").removeClass("is-disabled")},readonly:function(){this.element.prop("disabled",!1).prop("readonly",!0),this.pseudoElem.removeClass("is-disabled").addClass("is-readonly").attr("tabindex",this.element.attr("tabindex")||"0").prop("disabled",!1).prop("readonly",!0),this.closeList("cancel")},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.closeList("cancel"),this.pseudoElem&&this.pseudoElem.hasClass("is-open")&&this.pseudoElem.removeClass("is-open").removeAttr("aria-expanded"),this.settings.multiple&&!0===this.settings.multiple?this.element.prop("multiple",!0):this.element.prop("multiple",!1),!0===this.element.prop("readonly")?this.readonly():this.pseudoElem.removeClass("is-readonly"),this.pseudoElem[this.element.prop("disabled")?"addClass":"removeClass"]("is-disabled"),this.updateList(),this.setDisplayedValues(),this.toggleTooltip(),this.element.trigger("has-updated"),this},destroy:function(){this.placeholder&&delete this.placeholder,this.currentlyScrolledPos&&delete this.currentlyScrolledPos,$.removeData(this.element[0],"dropdown"),this.closeList("cancel"),this.pseudoElem.off().remove(),this.icon.remove(),this.wrapper.remove(),this.listfilter.destroy(),this.element.removeAttr("style"),this.element.closest("form").off("reset.dropdown"),this.element.off(),this.label.off();var t=document.body.querySelector("#dropdown-list");t&&this.isOpen()&&t.parentNode.removeChild(t)},handleEvents:function(){var t=this,e=this;function i(t){var e=$(t.target).parents(".tag").length>0,i=!1;return t.target instanceof HTMLElement&&"string"==typeof t.target.className&&(i=t.target.classList.contains("tag")),!(!i&&!e)}var n=!1;this.pseudoElem.on("keydown.dropdown",(function(e){return t.handlePseudoElemKeydown(e)})).on("click.dropdown touchstart.dropdown",(function(t){t.originalEvent.ctrlKey&&t.originalEvent.shiftKey||t.stopPropagation(),n||e.toggle()})).on("mouseup.dropdown touchend.dropdown",(function(t){2!==t.button||t.stopPropagation()})).on("mousedown.dropdown touchstart.dropdown",(function(t){n=i(t)})).on("touchcancel.dropdown",(function(t){i(t)||(t.stopPropagation(),e.toggle(),t.preventDefault())})),this.tagListAPI&&this.pseudoElem.on("focusout.dropdown",(function(){t.scrollTagList()})),e.element.on("activated.dropdown",(function(){e.label.trigger("click")})).on("updated.dropdown",(function(t){t.stopPropagation(),e.updated()})).on("openlist.dropdown",(function(){e.toggle()})),e.element.closest("form").on("reset.dropdown",(function(){setTimeout((function(){e.element.triggerHandler("updated")}),1)})),this.label.on("click",(function(){e.pseudoElem.focus()}))}},$.fn.dropdown=function(t){return this.each((function(){var e=$.data(this,"dropdown");e?e.updated(t):e=$.data(this,"dropdown",new oi(this,t))}))};var li={themes:{light:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},dark:{border:"matched-only",checkmark:{one:[1,2],two:[3,10]}},contrast:{border:"all",checkmark:{one:[1,3],two:[4,10]}}},customColors:!1,colors:[{label:"Slate",number:"10",value:"1a1a1a"},{label:"Slate",number:"09",value:"292929"},{label:"Slate",number:"08",value:"383838",border:"dark"},{label:"Slate",number:"07",value:"454545",border:"dark"},{label:"Slate",number:"06",value:"5C5C5C"},{label:"Slate",number:"05",value:"737373"},{label:"Slate",number:"04",value:"999999"},{label:"Slate",number:"03",value:"BDBDBD"},{label:"Slate",number:"02",value:"D8D8D8"},{label:"Slate",number:"01",value:"F0F0F0",border:"light, contrast"},{label:"Amber",number:"10",value:"D66221"},{label:"Amber",number:"09",value:"DE7223"},{label:"Amber",number:"08",value:"E68425"},{label:"Amber",number:"07",value:"EB9728"},{label:"Amber",number:"06",value:"EFAA30"},{label:"Amber",number:"05",value:"F2BC41"},{label:"Amber",number:"04",value:"F4C951"},{label:"Amber",number:"03",value:"F7D475"},{label:"Amber",number:"02",value:"F8E09C"},{label:"Amber",number:"01",value:"FBE9BF"},{label:"Ruby",number:"10",value:"880E0E"},{label:"Ruby",number:"09",value:"941E1E"},{label:"Ruby",number:"08",value:"A13030"},{label:"Ruby",number:"07",value:"AD4242"},{label:"Ruby",number:"06",value:"B94E4E"},{label:"Ruby",number:"05",value:"C65F5F"},{label:"Ruby",number:"04",value:"D26D6D"},{label:"Ruby",number:"03",value:"DE8181"},{label:"Ruby",number:"02",value:"EB9D9D"},{label:"Ruby",number:"01",value:"F4BCBC"},{label:"Turquoise",number:"10",value:"0E5B52"},{label:"Turquoise",number:"09",value:"206B62"},{label:"Turquoise",number:"08",value:"317C73"},{label:"Turquoise",number:"07",value:"448D83"},{label:"Turquoise",number:"06",value:"579E95"},{label:"Turquoise",number:"05",value:"69ADA3"},{label:"Turquoise",number:"04",value:"7BBFB5"},{label:"Turquoise",number:"03",value:"8ED1C6"},{label:"Turquoise",number:"02",value:"A9E1D6"},{label:"Turquoise",number:"01",value:"C0EDE3"},{label:"Emerald",number:"10",value:"397514"},{label:"Emerald",number:"09",value:"44831F"},{label:"Emerald",number:"08",value:"56932E"},{label:"Emerald",number:"07",value:"66A140"},{label:"Emerald",number:"06",value:"76B051"},{label:"Emerald",number:"05",value:"89BF65"},{label:"Emerald",number:"04",value:"9CCE7C"},{label:"Emerald",number:"03",value:"AFDC91"},{label:"Emerald",number:"02",value:"C3E8AC"},{label:"Emerald",number:"01",value:"D5F6C0"},{label:"Amethyst",number:"10",value:"4B2A5E"},{label:"Amethyst",number:"09",value:"5A3A6F"},{label:"Amethyst",number:"08",value:"6C4B81"},{label:"Amethyst",number:"07",value:"7D5F92"},{label:"Amethyst",number:"06",value:"8E72A4"},{label:"Amethyst",number:"05",value:"A189B8"},{label:"Amethyst",number:"04",value:"B59ECA"},{label:"Amethyst",number:"03",value:"C7B4DB"},{label:"Amethyst",number:"02",value:"DACCEC"},{label:"Amethyst",number:"01",value:"EDE3FC"},{label:"Azure",number:"10",value:"133C59"},{label:"Azure",number:"09",value:"134D71"},{label:"Azure",number:"08",value:"1D5F8A"},{label:"Azure",number:"07",value:"2876A8"},{label:"Azure",number:"06",value:"2578A9"},{label:"Azure",number:"05",value:"4EA0D1"},{label:"Azure",number:"04",value:"69B5DD"},{label:"Azure",number:"03",value:"8DC9E6"},{label:"Azure",number:"02",value:"ADD8EB"},{label:"Azure",number:"01",value:"C8E9F4"}],placeIn:null,showLabel:!1,editable:!0,disabled:!1,uppercase:!0,colorOnly:!1,clearable:!0,clearableText:null,popupmenuSettings:{}};function ci(t,e){this.settings=C.mergeSettings(t,e,li),e&&e.colors&&(this.settings.colors=e.colors),this.element=$(t),this.init()}ci.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.isIe11=this.isIe&&"11"===m.browser.version,this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=this.element.parent().is(".inline"),this.settings.clearableText||(this.settings.clearableText=B?B.translate("None"):"None"),this.build(),this.handleEvents(),this.setCustomWidth()},build:function(){this.isEditor="editor"===this.settings.placeIn;var t=this.element,e=this.isEditor?this.element.attr("data-value"):this.element.val(),i="swatch".concat(e&&""!==$.trim(e)?"":" is-empty");if(!this.isEditor)if(this.isInlineLabel?this.inlineLabel.addClass("colorpicker-container"):(this.container=$('<span class="colorpicker-container"></span>'),t.wrap(this.container)),this.container=t.parent(),this.swatch=$('<span class="'.concat(i,'"></span>')).prependTo(this.container),this.settings.showLabel){var n=t.data("mask");n&&"function"==typeof n.destroy&&n.destroy()}else{t.mask({pattern:["#",/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/,/[0-9a-fA-F]/]})}var s=this.element.children(".trigger");this.container&&this.container.length&&(s=this.container.children(".trigger")),s&&s.length&&s.children(".icon").length||(this.icon=$.createIconElement("dropdown").appendTo(this.isEditor?this.element:this.container),this.icon.wrap('<span class="trigger"></span>')),e&&this.setColor(e),(this.element.is(":disabled")||this.settings.disabled)&&this.disable(),this.element.is(":disabled")&&this.container&&this.container.closest(".field").addClass("is-disabled"),this.element.prop("readonly")&&this.readonly(),this.settings.editable||this.settings.disabled||this.readonly(),this.settings.colorOnly&&this.element.parent().addClass("color-only"),this.element.attr("autocomplete","off"),this.addAria(),C.addAttributes(this.element.parent().find(".trigger"),this,this.settings.attributes,"trigger")},getHexFromLabel:function(t){for(var e=0;e<this.settings.colors.length;e++){var i=this.settings.colors[e],n=B.translate(i.label,!0);if(t===i.label+i.number||t===n+i.number){var s=i.value;return"#"!==s.substr(0,1)&&(s="#".concat(s)),s}}return""},getLabelFromHex:function(t){if(!t)return"";for(var e=0;e<this.settings.colors.length;e++){var i=this.settings.colors[e];if(t.replace("#","")===i.value.replace("#",""))return this.translateColorLabel(i.label)+i.number}return""},setCustomWidth:function(){if(this.element[0].style&&this.element[0].style.width){var t=parseInt(this.element[0].style.width,10);this.container.css({width:t}),this.element.css({width:t-4-this.swatch.width()})}},getHexValue:function(){return this.element.attr("value")},getLabelValue:function(){return this.settings.showLabel?this.element.val():this.getLabelFromHex(this.element.val())},addAria:function(){this.element.attr({role:"combobox","aria-autocomplete":"list"}),$('label[for="'.concat(this.element.attr("id"),'"]')).append('<span class="audible">'.concat(B.translate("UseArrow"),"</span>"))},toggleList:function(){var t=this,e=$("#colorpicker-menu");if(!(this.element.is(":disabled")||this.element.prop("readonly")&&this.settings.editable||e.length&&this.isPickerOpen)){e=this.updateColorMenu();var i=C.extend({},{ariaListbox:!0,menuId:"colorpicker-menu",trigger:"immediate",attachToBody:!0,placementOpts:{containerOffsetX:10,containerOffsetY:10,parentXAlignment:B.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},offset:{x:0,y:10}},this.settings.popupmenuSettings);this.element.popupmenu(i).on("open.colorpicker",(function(){t.element.parent().addClass("is-open"),t.isPickerOpen=!0})).on("close.colorpicker",(function(){[].slice.call(t.menu[0].querySelectorAll("a")).forEach((function(t){var e=$(t).data("tooltip");e&&e.hide()})),e.on("destroy.colorpicker",(function(){t.element.off("open.colorpicker selected.colorpicker close.colorpicker"),t.menu.off("destroy.colorpicker").remove()})),t.element.parent().removeClass("is-open"),t.isPickerOpen=!1,t.element.trigger("listclosed","select")})).on("selected.colorpicker",(function(e,i){t.element.is(".colorpicker-editor-button")||(t.itemLabel=i.data("label")),t.isEditor||t.setColor(i.data("value"),t.itemLabel);var n=!1;if(t.element.is(".colorpicker-editor-button")){var s=t.element.data("toolbaritem")||t.element.data("toolbarflexitem"),a=s?s.toolbarAPI:null;a&&a.overflowedItems.forEach((function(t){"colorpicker"===t.type&&(n=!0)}))}n||t.element.focus(),t.element.trigger("change")})),this.menu=$("#colorpicker-menu"),setTimeout((function(){t.menu.find(".is-selected").focus()}),1)}},setColor:function(t,e){t=t||"";var i=this.settings,n=t,s=e;"#"!==t.toString().substr(0,1)&&""!==t&&(n="#".concat(n));var a=/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/i.test(n);if(i.showLabel&&e===i.clearableText)this.setValueOnField({hex:n,label:i.clearableText,isEmpty:!0});else{if(!a){if(!i.showLabel)return n="#"!==n?n:"",void this.setValueOnField({hex:n,invalid:!0});s=t.replace("#",""),n=this.getHexFromLabel(s)}s||(s=this.getLabelFromHex(n)),this.setValueOnField({hex:n,label:s})}},setValueOnField:function(t){var e=this.settings,i=this.isEditor?"data-value":"value",n="";t.isEmpty||"string"!=typeof t.hex||(n=e.uppercase?t.hex.toUpperCase():t.hex.toLowerCase()),this.swatch&&(t.isEmpty||t.invalid?(this.swatch.addClass(t.isEmpty?"is-empty":"is-invalid"),this.swatch[0].style.backgroundColor=""):(this.swatch.removeClass("is-empty is-invalid"),this.swatch[0].style.backgroundColor=n)),this.element[0].value=e.showLabel?t.label:n,this.element[0].setAttribute(i,n),this.element[0].setAttribute("aria-describedby",t.label||"")},translateColorLabel:function(t){return t?"string"==typeof B.translate(t,!0)?B.translate(t,!0):t:""},getThemeVariant:function(t){var e=Object.keys(li.themes).filter((function(e){return t.indexOf(e)>-1})),i="light";return e.length>0&&(i=e[0]),i},updateColorMenu:function(){var t=this,e=this.settings,i=!!$("#colorpicker-menu").length,n=$('<ul id="colorpicker-menu" class="popupmenu colorpicker"></ul>'),s=nt.currentTheme,a=this.getThemeVariant(s),r="all"===e.themes[a].border,o=e.themes[a].checkmark,l="";$("#colorpicker-menu").remove();for(var c=function(a,c){var d=$("<li></li>"),h=$('<a href="#"><span class="swatch"></span></a>').appendTo(d),u=(t.translateColorLabel(e.colors[a].label)||e.colors[a].label)+(e.colors[a].number||""),p=parseInt(e.colors[a].number,10),g=new RegExp("\\b".concat(s,"\\b")),f=e.colors[a].value,m=!1,v=t.isEditor?t.element.attr("data-value"):t.element.val();e.showLabel&&!t.isEditor&&(v=t.getHexFromLabel(v)),(r||g.test(e.colors[a].border))&&(m=!0),v&&"".concat(v).toLowerCase().replace("#","")==="".concat(f).toLowerCase()&&(o&&$.each(o,(function(t,e){p>=e[0]&&p<=e[1]&&(l=" checkmark-".concat(t))})),u!==t.itemLabel&&void 0!==t.itemLabel||h.addClass("is-selected".concat(l))),f=e.uppercase?f.toUpperCase():f.toLowerCase();var b=h.find(".swatch");b[0]&&(b[0].style.backgroundColor="#".concat(f)),b.addClass(m?"is-border":""),h[0].setAttribute("data-label",u),h[0].setAttribute("data-value",f),h[0].setAttribute("title","".concat(u," #").concat(f)),h.tooltip(),C.addAttributes(h,t,t.settings.attributes,u),i||n.append(d)},d=0,h=e.colors.length;d<h;d++)c(d);if(!i){if(e.clearable){var u=$("<li></li>"),p="foreColor"===this.element.attr("data-action")?"000000":"",g=$('<a href="#" title="'.concat(e.clearableText,'"><span class="swatch is-empty').concat(r?" is-border":"",'"></span></a>')).appendTo(u);g.data("label",e.clearableText).data("value",p).tooltip(),C.addAttributes(g,this,this.settings.attributes,"clear"),n.append(u)}$("body").append(n)}return n},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.element.parent().removeClass("is-disabled is-readonly")},disable:function(){this.element.prop("disabled",!0),this.settings.placeIn||this.element.parent().addClass("is-disabled")},readonly:function(){this.enable(),this.element.prop("readonly",!0),this.element.parent().addClass("is-readonly"),this.settings.editable||this.element.parent().addClass("is-not-editable")},isDisabled:function(){return this.element.prop("disabled")},decimal2rgb:function(t){return"number"!=typeof t?t:"rgb(".concat(255&t,", ").concat((65280&t)>>8,", ").concat((16711680&t)>>16,")")},rgb2hex:function(t){if(!t||-1===t.search("rgb"))return t;if("rgba(0, 0, 0, 0)"===t)return"transparent";var e=function(t){return"0".concat(parseInt(t,10).toString(16)).slice(-2)},i=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);return"#".concat(e(i[1])).concat(e(i[2])).concat(e(i[3]))},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.element.off(["keypress.".concat("colorpicker"),"keyup.".concat("colorpicker"),"blur.".concat("colorpicker"),"openlist.".concat("colorpicker"),"change.".concat("colorpicker"),"paste.".concat("colorpicker")].join(" ")),this.swatch&&this.swatch.length&&(this.swatch.off("click.".concat("colorpicker")),this.swatch.remove(),delete this.swatch);var t=this.element.data("mask");if(t&&t.destroy(),this.icon&&this.icon.length){var e=this.icon.parent(".trigger");this.icon.off().remove(),e.off().remove(),delete this.icon}this.container&&this.container.length&&(this.container.find(".trigger").remove(),this.element.unwrap(),delete this.container)},destroy:function(){return this.teardown(),$.removeData(this.element[0],"colorpicker"),this},handleEvents:function(){var t,e=this,i=this.element,n=i.parent();this.icon.parent().on("click.colorpicker",(function(){e.toggleList()})),i.on("focus.colorpicker",(function(){t=i.val(),n.addClass("is-focused")})).on("blur.colorpicker",(function(){n.removeClass("is-focused"),e.isIeEdge&&!i.is(".is-open")&&t!==i.val()&&i.triggerHandler("change")})).on("openlist.colorpicker",(function(){e.toggleList()}));var s="blur.colorpicker paste.colorpicker change.colorpicker";s+=this.isIe11?"keypress.colorpicker":"keyup.colorpicker",i.on(s,(function(){var t=e.isEditor?i.attr("data-value"):i.val();e.settings.showLabel?e.setColor(i.attr("value"),t):e.setColor(t)})),i.on("keydown.colorpicker",(function(t){38!==t.keyCode&&40!==t.keyCode||e.toggleList(),13===t.keyCode&&e.setColor(i.val())}))}},$.fn.colorpicker=function(t){return this.each((function(){var e=$.data(this,"colorpicker");e?e.updated(t):e=$.data(this,"colorpicker",new ci(this,t))}))};var di=[{type:"button",selector:'button:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button), input[type="button"]:not(.btn-menu):not(.btn-actions):not(.colorpicker-editor-button)',filter:function(t){return!$(t).parents(".searchfield-wrapper, .toolbar-searchfield-wrapper").length}},{type:"menubutton",selector:".btn-menu"},{type:"actionbutton",selector:".btn-actions"},{type:"colorpicker",selector:".colorpicker-editor-button"},{type:"hyperlink",selector:"a[href]",filter:function(t){if("A"!==t.nodeName)throw new Error("Unspecified error occured");return $(t).parents(".popupmenu").length<1}},{type:"checkbox",selector:'input[type="checkbox"]'},{type:"radio",selector:'input[type="radio"]'},{type:"searchfield",selector:".searchfield"},{type:"toolbarsearchfield",selector:".toolbarsearchfield"}],hi={button:"button",actionbutton:"popupmenu",colorpicker:"colorpicker",menubutton:"popupmenu",hyperlink:"hyperlink",searchfield:"searchfield",toolbarsearchfield:"searchfield"},ui={disabled:!1,readOnly:!1,hidden:!1,componentSettings:void 0,allowTabs:!1,attributes:null};function pi(t,e){this.element=t,this.settings=C.mergeSettings(this.element,e,ui),this.init()}pi.prototype={type:void 0,isToolbarFlexItem:!0,init:function(){this.type=function(t){var e=!1;if(di.forEach((function(i){$(t).is(i.selector)&&("function"!=typeof i.filter||i.filter(t))&&(e=i.type)})),!e)throw new Error("Element ".concat(t," is not a valid Toolbar Item Type."));return e}(this.element),this.section=this.element.parentElement,this.toolbar=this.section.parentElement,this.trueSelected=!1},get focusable(){return!0!==this.disabled&&("searchfield"===this.type||("actionbutton"!==this.type||!0!==this.hasNoOverflowedItems)&&(!0!==this.overflowed&&this.visible))},get focused(){return 0===this.element.tabIndex},set focused(t){this.element.tabIndex=t?0:-1},get selected(){return this.trueSelected},set selected(t){if(t)return this.trueSelected=!0,this.element.classList.add("is-selected"),this.triggerSelectedEvent(),void(this.selectedAnchor&&delete this.selectedAnchor);this.trueSelected=!1,this.element.classList.remove("is-selected")},get componentAPI(){var t=$(this.element),e=hi[this.type];if(e)return t.data(e)},get toolbarAPI(){return this.settings.toolbarAPI?this.settings.toolbarAPI:$(this.toolbar).data("toolbar-flex")},triggerSelectedEvent:function(){if(!(["searchfield","toolbarsearchfield"].indexOf(this.type)>-1)){var t=[this];["menubutton","actionbutton"].indexOf(this.type)>-1&&this.selectedAnchor&&t.push(this.selectedAnchor),$(this.element).trigger("selected",t,t[1])}},show:function(){this.visible=!0},hide:function(){this.visible=!1},set visible(t){var e="searchfield"===this.type||"toolbarsearchfield"===this.type;if(t)return e&&this.element.parentNode.classList.remove("hidden"),void this.element.classList.remove("hidden");e&&this.element.parentNode.classList.add("hidden"),this.element.classList.add("hidden")},get visible(){return-1===this.element.className.indexOf("hidden")},enable:function(){this.disabled=!1,this.hasReadOnly&&(this.readOnly=!1)},get disabled(){return this.element.disabled},set disabled(t){if(t)return this.element.disabled=!0,this.element.setAttribute("aria-disabled",!0),void(this.element.readOnly=!1);this.element.disabled=!1,this.element.removeAttribute("aria-disabled")},get hasReadOnly(){return"readOnly"in this.element},get readOnly(){return!!this.hasReadOnly&&this.element.readOnly},set readOnly(t){if(this.hasReadOnly)return t?(this.disabled=!1,this.element.disabled=!1,void(this.element.readOnly=!0)):void(this.element.readOnly=!1)},get overflowed(){var t=m.rtl,e=this.element.getBoundingClientRect(),i=this.section.getBoundingClientRect();return t?e.left<i.left:e.right>i.right},set hasNoOverflowedItems(t){if("actionbutton"===this.type&&this.componentAPI){var e=this.componentAPI.toData({noMenuWrap:!0}).length-this.predefinedItems.length<1;if(t&&e)return this.element.classList.add("no-overflowed-items"),this.trueHasNoOverflowedItems=!0,void(this.focused&&(this.toolbarAPI.focusedItem=this,this.toolbarAPI.navigate(-1,void 0)));this.trueHasNoOverflowedItems=!1,this.element.classList.remove("no-overflowed-items")}},get hasNoOverflowedItems(){return!this.componentAPI||this.trueHasNoOverflowedItems},get index(){return this.toolbarAPI.items.indexOf(this)},handleEvents:function(){var t=this,e=this,i=$(this.element);["menubutton","actionbutton","colorpicker"].indexOf(this.type)>-1&&i.on("selected.".concat("toolbarflexitem"),(function(i,n){if(!t.selectedAnchor){if(i.stopPropagation(),"actionbutton"===t.type){var s,a=$(n).parent(),r=a.data("originalButton"),o=$(r).data("toolbarflexitem");if(a.parents("ul").length>1&&(s=a.data("original-menu-element"),r=a.parents("li").last().data("originalButton"),o=$(r).data("toolbarflexitem")),o)return s?(i.preventDefault(),o.selectedAnchor=$(s).children("a")):o.selectedAnchor=n,void(o.selected=!0)}e.selectedAnchor=n,e.selected=!0}})),"actionbutton"===this.type&&(i.on("beforeopen.".concat("toolbarflexitem"),this.handleActionButtonBeforeOpen.bind(this)),$("body").off("resize.".concat("toolbarflexitem")).on("resize.".concat("toolbarflexitem"),this.handleActionButtonResize.bind(this))),this.settings.allowTabs||i.on("focus.".concat("toolbarflexitem"),this.handleFocus.bind(this))},handleActionButtonBeforeOpen:function(){this.refreshMoreActionsMenu()},handleActionButtonResize:function(){this.refreshMoreActionsMenu()},handleFocus:function(t){t.target&&t.target===this.element&&(this.toolbarAPI.focusedItem=this)},render:function(){var t,e=this;(this.disabled=this.disabled,this.hasReadOnly&&(this.readonly=this.readonly),Array.isArray(this.settings.attributes))&&(this.settings.componentSettings||(this.settings.componentSettings={}),this.settings.componentSettings.attributes?(t=[],this.settings.attributes.forEach((function(i){var n=e.settings.componentSettings.attributes.find((function(t){return t.name===i.name}));n?t.push(n):t.push({name:i.name,value:"".concat(i.value,"-").concat(e.type,"-").concat(e.index)})}))):t=this.settings.attributes.map((function(t){return{name:t.name,value:"".concat(t.value,"-").concat(e.type,"-").concat(e.index)}})),this.settings.componentSettings.attributes=t);var i,n=$(this.element),s=hi[this.type];s&&((i=n.data(s))?i.updated(this.settings.componentSettings):n[s](this.settings.componentSettings)),"actionbutton"===this.type&&(this.renderMoreActionsMenu(),this.refreshMoreActionsMenu()),this.handleEvents()},renderMoreActionsMenu:function(){var t=this.componentAPI;if(t&&this.toolbarAPI){var e=t.menu;e&&e.length||(e=$('<ul class="popupmenu"></ul>').insertAfter(this.element)),this.teardownPredefinedItems();var i=this.toolbarAPI.toPopupmenuData();!function t(e,i){e.menuId&&delete e.menuId;var n=i?"submenu":"menu";Array.isArray(e[n])&&e[n].forEach((function(e){t(e,!0)}))}(i);var n=$(t.renderItem(i));this.predefinedItems=n,this.linkToolbarItems(i),e.prepend(this.predefinedItems),t.updated({menu:e,predefined:n}),this.menuRendered=!0}},refreshMoreActionsMenu:function(){if("actionbutton"===this.type){var t=this.componentAPI;if(t&&this.toolbarAPI&&!t.isOpen){t.settings.beforeOpen||this.predefinedItems&&this.predefinedItems.length||!this.toolbarAPI.items.length||this.renderMoreActionsMenu();var e=!0;this.toolbarAPI.items.forEach((function(e){if(e.actionButtonLink){var n=e.toPopupmenuData();n.overflowed=e.overflowed,n.id&&delete n.id,t.refreshMenuItem(e.actionButtonLink,n,i)}})),this.hasNoOverflowedItems=e}}function i(t,i){if(!i.isSubmenuItem){if(!0===i.overflowed)return t.classList.add("is-overflowed"),i.visible&&t.classList.remove("hidden"),void(e=!1);t.classList.remove("is-overflowed"),t.classList.add("hidden")}}},unlinkToolbarItems:function(){function t(e){var i=$($(e).data("original-menu-element"));if(i.removeData("action-button-link"),$(e).removeData("original-menu-element"),i.hasClass("submenu"))for(var n=e.querySelector(".popupmenu").children,s=0;s<n.length;s++)t(n[s])}"actionbutton"===this.type&&this.menuRendered&&this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.each((function(e,i){var n=$(i).data("originalButton"),s=$(n).data("toolbarflexitem");if(s.actionButtonLink=null,$(i).removeData("original-button"),"menubutton"===s.type)for(var a=i.querySelector(".popupmenu").children,r=0;r<a.length;r++)t(a[r])}))},linkToolbarItems:function(t){function e(t,i){var n=t.elementLink;$(n).data("action-button-link",i),$(i).data("original-menu-element",n);var s=t.submenu;if(s&&s.length)for(var a=i.querySelector(".popupmenu").children,r=0;r<a.length;r++)e(s[r],a[r])}"actionbutton"===this.type&&t&&(Array.isArray(t)||(t=t.menu),this.predefinedItems.each((function(i,n){var s=t[i].itemLink;s.actionButtonLink=n,$(n).data("original-button",s.element);var a=t[i].submenu;if(a&&a.length)for(var r=n.querySelector(".popupmenu").children,o=0;o<r.length;o++)e(a[o],r[o])})))},toPopupmenuData:function(){if("searchfield"!==this.type&&"toolbarsearchfield"!==this.type&&"actionbutton"!==this.type){var t={itemLink:this,disabled:this.disabled,visible:this.visible},e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");if(e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(t.text=this.element.textContent.trim()),"menubutton"===this.type){var i=this.componentAPI.menu;if(i.length){var n=this.componentAPI.toData({noMenuWrap:!0}),s=this.componentAPI.element[0].id;s&&(t.id="".concat(this.toolbarAPI.uniqueId,"-").concat(s)),t.submenu=function t(e,i){var n=e.querySelectorAll("li:not(.heading)");return i.forEach((function(e,i){if(e.elementLink=n[i],e.submenu){var s=n[i].querySelector(".popupmenu");e.submenu=t(s,e.submenu)}})),i}(i[0],n)}else t.submenu=[]}return t}},toData:function(){var t={type:this.type,disabled:this.disabled,focused:this.focused,selected:this.selected,overflowed:this.overflowed,visible:this.visible};this.hasReadOnly&&(t.readOnly=this.readOnly),this.actionButtonLink&&(t.actionButtonLink=this.actionButtonLink),this.componentAPI&&(t.componentAPI=this.componentAPI);var e=this.element.querySelector(".icon:not(.close):not(.icon-dropdown) > use");return e&&e.getAttribute("href")&&(t.icon=e.getAttribute("href").replace("#icon-","")),e&&e.getAttribute("xlink:href")&&(t.icon=e.getAttribute("xlink:href").replace("#icon-","")),/\b(button|menubutton|colorpicker)\b/g.test(this.type)&&(t.text=this.element.textContent.trim()),"actionbutton"===this.type&&(t.predefinedItems=this.predefinedItems),"menubutton"!==this.type&&"actionbutton"!==this.type||(t.submenu=this.componentAPI.toData({noMenuWrap:!0})),t},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardownPredefinedItems:function(){"actionbutton"===this.type&&(this.unlinkToolbarItems(),this.predefinedItems&&this.predefinedItems.length&&this.predefinedItems.remove())},teardown:function(){$(this.element).off("selected.".concat("toolbarflexitem")).off("beforeopen.".concat("toolbarflexitem")).off("focus.".concat("toolbarflexitem")),$("body").off("resize.".concat("toolbarflexitem")),this.teardownPredefinedItems(),delete this.type,delete this.selected,delete this.focusable,delete this.visible,delete this.disabled,delete this.readOnly,delete this.section,delete this.toolbar,delete this.trueSelected,delete this.menuRendered},destroy:function(){var t=$(this.element).data("popupmenu");t&&t.destroy&&t.destroy(),this.teardown()}},$.fn.toolbarflexitem=function(t){return this.each((function(){var e=$.data(this,"toolbarflexitem");if(e)e.updated(t);else{var i=(e=$.data(this,"toolbarflexitem",new pi(this,t))).destroy;e.destroy=function(){"function"==typeof i&&i.call(this),$.removeData(this,"toolbarflexitem")}}}))};var gi={allowTabs:!1,attributes:null,beforeMoreMenuOpen:null,moreMenuSettings:{}};function fi(t,e){this.element=t,this.settings=C.mergeSettings(this.element,e,gi),this.init()}fi.prototype={trueFocusedItem:void 0,sections:[],items:[],init:function(){var t=this;this.uniqueId=C.uniqueId(this.element),this.sections=C.getArrayFromList(this.element.querySelectorAll(".toolbar-section")),this.items=this.getElements().map((function(e){var i={};return $(e).hasClass("btn-actions")&&(i=t.settings.moreMenuSettings||i,t.settings.beforeMoreMenuOpen&&(F("settings.moreMenuSettings.beforeOpen","settings.beforeMoreMenuOpen","Flex Toolbar"),i.beforeOpen=t.settings.beforeMoreMenuOpen)),$(e).toolbarflexitem({toolbarAPI:t,componentSettings:i,allowTabs:t.settings.allowTabs,attributes:t.settings.attributes}),$(e).data("toolbarflexitem")})),this.items&&(this.settings.allowTabs||(this.items.forEach((function(e){e.focused&&(void 0===t.focusedItem?t.focusedItem=e:e.focused=!1)})),this.focusedItem||(this.focusedItem=this.items[0]),this.focusedItem&&(this.focusedItem.focused=!0)),this.render(),this.handleEvents())},render:function(){this.element.setAttribute("role","toolbar"),Array.isArray(this.settings.attributes)&&C.addAttributes($(this.element),this,this.settings.attributes),this.items.forEach((function(t){t.render()}))},handleEvents:function(){var t=this;this.settings.allowTabs||(this.keydownListener=this.handleKeydown.bind(this),this.element.addEventListener("keydown",this.keydownListener),this.keyupListener=this.handleKeyup.bind(this),this.element.addEventListener("keyup",this.keyupListener),this.clickListener=this.handleClick.bind(this),this.element.addEventListener("click",this.clickListener)),$(this.element).on("selected.".concat("toolbar-flex"),(function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]})),$(this.element).on("collapsed-responsive.".concat("toolbar-flex"),(function(e,i){e.stopPropagation(),t.navigate(i,null,!0)}))},handleKeydown:function(t){var e=t.target;$(e).data("toolbarflexitem")&&this.handleItemKeydown(t)},handleItemKeydown:function(t){var e=B.isRTL(),i=t.key,n=this.getItemFromElement(t.target);function s(){t.preventDefault()}if("Enter"!==i)if(" "!==i){if(["ArrowLeft","Left","ArrowUp","Up"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowLeft"===i||"Left"===i))return;return this.navigate(e?1:-1,void 0,!0),void s()}if(["ArrowRight","Right","ArrowDown","Down"].indexOf(i)>-1){if("searchfield"===n.type&&("ArrowRight"===i||"Right"===i))return;this.navigate(e?-1:1,void 0,!0),s()}}else"hyperlink"===n.type&&this.select(t.target);else this.clickByEnterKey=!0},handleKeyup:function(t){this.clearClickByEnter(t)},handleClick:function(t){var e=t.target;$(e).data("toolbarflexitem")&&this.handleItemClick(t),this.clearClickByEnter()},handleItemClick:function(t){var e=this.getItemFromElement(t.target);this.select(e),this.focusedItem=e},clearClickByEnter:function(t){this.clickByEnterKey&&("menubutton"!==this.type&&"actionbutton"!==this.type||t.preventDefault(),delete this.clickByEnterKey)},getElements:function(){var t=[],e=[];return di.forEach((function(t){e.push(t.selector)})),e=e.join(", "),C.getArrayFromList(this.element.querySelectorAll(e)).forEach((function(e){var i=!1;di.forEach((function(n){!i&&$(e).is(n.selector)&&("function"!=typeof n.filter||n.filter(e))&&(i=!0,t.push(e))}))})),t},getItemFromElement:function(t){if(t instanceof pi||t.isToolbarFlexItem)return t;for(var e,i=0;i<this.items.length;i++)this.items[i].element.innerHTML===t.innerHTML&&(e=this.items[i]);if(!e)throw new Error("No Toolbar Item instance available for element ".concat(t,"."));return e},get searchfieldAPI(){for(var t=0;t<this.items.length;t++)if("searchfield"===this.items[t].type)return this.items[t].componentAPI},get focusedItem(){if(this.trueFocusedItem)return this.trueFocusedItem;for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focused)return this.items[t]},set focusedItem(t){if(0!==this.items.length){for(var e=0;e<this.items.length;e++)this.items[e].focused=!1;t.focused=!0,this.trueFocusedItem=t}},get hasFocusableItems(){for(var t=0;t<this.items.length;t++)if(!0===this.items[t].focusable)return!0;return!1},get canManageFocus(){var t=document.activeElement;if(this.element.contains(t))return!0;for(var e=0;e<this.items.length;e++)if("searchfield"===this.items[e].type&&this.items[e].componentAPI.isFocused)return!0;return"BODY"===t.tagName},get overflowedItems(){for(var t=[],e=0;e<this.items.length;e++)!0===this.items[e].overflowed&&t.push(this.items[e]);return t},navigate:function(t,e,i){if(!1!==this.hasFocusableItems){var n=0+t;for(null==e&&(e=this.items.indexOf(this.focusedItem));0!==t;)t>0&&(e===this.items.length-1?e=0:e++,--t),t<0&&(0===e?e=this.items.length-1:--e,t++);var s=this.items[e];!1!==s.focusable?(this.focusedItem=s,i&&this.canManageFocus&&this.focusedItem.element.focus()):this.navigate(n>0?1:-1,e,i)}},select:function(t){var e=this.getItemFromElement(t);switch(e.type){case"searchfield":case"actionbutton":case"menubutton":if(this.clickByEnterKey)return;e.selected=!0;break;default:e.selected=!0}},toPopupmenuData:function(){var t={noMenuWrap:!0};return t.menu=this.items.filter((function(t){return"actionbutton"!==t.type&&"searchfield"!==t.type})).map((function(e){return function(e){var i=e.toPopupmenuData();return i&&(i.icon&&(t.hasIcons=!0),i.selectable&&(t.selectable=i.selectable)),i}(e)})),t},toData:function(){var t={};return t.items=this.items.map((function(t){return t.toData()})),t},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,!0!==t?this.element.classList.remove("is-disabled"):this.element.classList.add("is-disabled")},isItemOverflowed:function(t){if(!t)return!1;var e;if(t instanceof HTMLElement||t instanceof $){if(!(e=$(t).data("toolbarflexitem")))return!1;t=e}return!(this.items.indexOf(t)<0)&&t.overflowed},updated:function(t){"object"===i(t)&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.settings.allowTabs||(this.element.removeEventListener("keydown",this.keydownListener),this.element.removeEventListener("keyup",this.keyupListener),this.element.removeEventListener("click",this.clickListener)),$(this.element).off("selected.".concat("toolbar-flex")),$(this.element).off("collapsed-responsive.".concat("toolbar-flex")),this.items.forEach((function(t){t.teardown()})),delete this.items,delete this.sections},destroy:function(){this.items.forEach((function(t){t.destroy()})),this.teardown()}},$.fn.toolbarflex=function(t){return this.each((function(){var e=$.data(this,"toolbar-flex");if(e)e.updated(t);else{var i=(e=$.data(this,"toolbar-flex",new fi(this,t))).destroy;e.destroy=function(){"function"==typeof i&&i.call(this),$.removeData(this,"toolbar-flex")}}}))};var mi={month:(new Date).getMonth(),year:(new Date).getFullYear(),locale:null,showToday:!0,onOpenCalendar:null,onChangeView:null,isAlternate:!1,isMenuButton:!0,showViewChanger:!1,viewChangerValue:"month",isMonthPicker:!1};function vi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,mi),this.init()}vi.prototype={init:function(){this.setLocale().build().handleEvents()},build:function(){if(this.element[0].classList.add("flex-toolbar"),this.element[0].setAttribute("data-init","false"),this.settings.isAlternate){this.element[0].classList.add("is-alternate");this.element[0].innerHTML='\n        <div class="toolbar-section">\n          '.concat(this.settings.isMenuButton?'<button type="button" class="btn btn-monthyear-pane expandable-area-trigger" id="btn-monthyear-pane">\n        <span class="month">november</span>\n        <span class="year">2019</span>\n        <svg class="icon icon-closed" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n        <svg class="icon icon-opened" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </button>':'<span class="month">november</span><span class="year">2015</span>','\n        </div>\n        <div class="toolbar-section buttonset l-align-').concat(this.isRTL?"left":"right",'">\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(B.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>').concat(B.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(B.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n          </button>\n        </div>\n      ")}else this.element[0].innerHTML='\n        <div class="toolbar-section">\n          <button type="button" class="btn-icon prev">\n            <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-left"></use></svg>\n            <span>'.concat(B.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),'</span>\n            </button>\n          <button type="button" class="btn-icon next">\n              <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n              <span>').concat(B.translate("NextMonth",{locale:this.locale.name,language:this.language}),'</span>\n          </button>\n          <span class="monthview-datepicker">\n            <span class="hidden month" data-month="9">9</span>\n            <span class="hidden year">2019</span>\n            <span class="audible">').concat(B.translate("SelectDay"),'</span>\n            <span tabindex="0" aria-label="').concat(B.translate("Today",{locale:this.locale.name,language:this.language}),'" id="monthview-datepicker-field" class="datepicker input-auto" data-validation="">October 2019</span>\n          </span>\n          ').concat(this.settings.showToday?'<a class="hyperlink today" href="#">'.concat(B.translate("Today",{locale:this.locale.name,language:this.language}),"</a>"):"",'\n        </div>\n        <div class="toolbar-section buttonset l-align-right">\n          ').concat(this.settings.showViewChanger?'<label for="'.concat(this.settings.viewChangerValue,'-calendar-view-changer" class="label audible">').concat(B.translate("ChangeView",{locale:this.locale.name,language:this.language}),'</label>\n            <select id="').concat(this.settings.viewChangerValue,'-calendar-view-changer" name="').concat(this.settings.viewChangerValue,'-calendar-view-changer" class="dropdown">\n              <option value="month"').concat("month"===this.settings.viewChangerValue?" selected":"",">").concat(B.translate("Month",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="week"').concat("week"===this.settings.viewChangerValue?" selected":"",">").concat(B.translate("Week",{locale:this.locale.name,language:this.language}),'</option>\n              <option value="day" ').concat("day"===this.settings.viewChangerValue?" selected":"",">").concat(B.translate("Day",{locale:this.locale.name,language:this.language}),"</option>\n            </select>\n          </div>"):"","\n        </div>\n      ");return this.element.toolbarflex({allowTabs:!0}),this.monthPicker=this.element.find("#monthview-datepicker-field").datepicker({dateFormat:B.calendar(this.locale.name,this.settings.language,this.settings.calendarName).dateFormat.year,locale:this.settings.locale,language:this.settings.language,onOpenCalendar:this.settings.onOpenCalendar,isMonthPicker:this.settings.isMonthPicker,showToday:this.settings.showToday}),this.settings.showViewChanger&&(this.viewChanger=this.element.find("#".concat(this.settings.viewChangerValue,"-calendar-view-changer")).dropdown()),this.todayLink=this.element.find(".hyperlink.today"),this.monthPickerApi=this.monthPicker.data("datepicker"),this.element.find("button, a").hideFocus(),this.setInternalDate(this.isIslamic?[this.settings.year,this.settings.month,1]:new Date(this.settings.year,this.settings.month,1)),C.addAttributes(this.element.find(".next"),this,this.settings.attributes,"".concat(this.settings.viewChangerValue,"-view-btn-next")),C.addAttributes(this.element.find(".prev"),this,this.settings.attributes,"".concat(this.settings.viewChangerValue,"-view-btn-prev")),C.addAttributes(this.element.find(".today"),this,this.settings.attributes,"".concat(this.settings.viewChangerValue,"-view-today")),C.addAttributes(this.element.find("#monthview-datepicker-field + .icon"),this,this.settings.attributes,"".concat(this.settings.viewChangerValue,"-view-datepicker-trigger"),!0),C.addAttributes(this.element.find("#monthview-datepicker-field"),this,this.settings.attributes,"".concat(this.settings.viewChangerValue,"-view-datepicker"),!0),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="month"]'),this,this.settings.attributes,"month-view-changer-month"),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="week"]'),this,this.settings.attributes,"month-view-changer-week"),C.addAttributes($('.monthview-header #month-calendar-view-changer [value="day"]'),this,this.settings.attributes,"month-view-changer-day"),C.addAttributes($(".monthview-header #month-calendar-view-changer"),this,this.settings.attributes,"month-view-changer"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="month"]'),this,this.settings.attributes,"week-view-changer-month"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="week"]'),this,this.settings.attributes,"week-view-changer-week"),C.addAttributes($('.week-view-header #week-calendar-view-changer [value="day"]'),this,this.settings.attributes,"week-view-changer-day"),C.addAttributes($(".week-view-header #week-calendar-view-changer"),this,this.settings.attributes,"week-view-changer"),this},setInternalDate:function(t){B.isIslamic(this.locale.name)?(this.currentYear=t[0],this.currentMonth=t[1],this.currentDay=t[2],this.currentDateIslamic=t):(this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth(),this.currentDay=t.getDate(),this.currentDate=t),this.monthPicker.text(B.formatDate(new Date(this.currentYear,this.currentMonth,this.currentDay),{date:"year",locale:this.locale.name,language:this.settings.language})),this.currentCalendar&&this.currentCalendar.months||(this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName));var e=this.currentCalendar.months?this.currentCalendar.months.wide[this.currentMonth]:"";if(this.element.find("span.month").attr("data-month",this.currentMonth).text(e),this.element.find("span.year").text(" ".concat(this.currentYear)),this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1)){var i=B.formatDate(this.currentDate,{date:"year",locale:this.locale.name}).split(" "),n=i[0];3===i.length&&this.element.find("span.month").attr("data-month",this.currentMonth).text("".concat(i[1]," ").concat(i[2])),this.element.find("span.year").text("".concat(n," ")),this.element.find("span.year").insertBefore(this.element.find("span.month"))}return this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},setLocale:function(){var t=this;return this.settings.language?(B.getLocale(this.settings.language),this.language=this.settings.language):this.language=B.currentLanguage.name,!this.settings.locale||this.locale&&this.locale.name===this.settings.locale?this.settings.locale||(this.locale=B.currentLocale,this.setCurrentCalendar()):B.getLocale(this.settings.locale).done((function(e){t.locale=B.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar()})),this},setViewChangerValue:function(t){this.settings.viewChangerValue=t,this.viewChanger.val(t).trigger("updated")},handleEvents:function(){var t=this,e=this;return this.monthPicker.off("change.calendar-toolbar-p").on("change.calendar-toolbar-p",(function(){var t=$(this).data("datepicker");e.setInternalDate(t.isIslamic?t.currentDateIslamic:t.currentDate),e.element.trigger("change-date",{selectedDate:t.currentDate,isToday:!1})})),this.todayLink.off("click.calendar-toolbar-t").on("click.calendar-toolbar-t",(function(e){t.element.trigger("change-date",{selectedDate:t.currentDate,isToday:!0}),e.preventDefault()})),this.element.find(".prev").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){t.element.trigger("change-prev",{selectedDate:t.currentDate,isToday:!1})})),this.element.find(".next").off("click.calendar-toolbar-b").on("click.calendar-toolbar-b",(function(){t.element.trigger("change-next",{selectedDate:t.currentDate,isToday:!1})})),this.settings.onChangeView&&this.viewChanger&&this.viewChanger.off("change.calendar-toolbar-v").on("change.calendar-toolbar-v",(function(e){t.settings.onChangeView({viewName:e.currentTarget.value,elem:e.currentTarget,api:t})})),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,mi)),this.teardown().init()},teardown:function(){return this.element.off(),this.monthPicker.off(),this.todayLink.off(),this.element.find(".prev .next").off(),this},destroy:function(){this.unbind(),$.removeData(this.element[0],"calendartoolbar")}};var bi={locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),activeDate:null,activeDateIslamic:null,isPopup:!1,headerStyle:"full",firstDayOfWeek:null,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],hideDays:!1,showMonthYearPicker:!0,yearsAhead:5,yearsBack:4,range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1},selectable:!0,onSelected:null,onKeyDown:null,showToday:!0,onChangeView:null,isMonthPicker:!1};function yi(t,e){this.settings=C.mergeSettings(t,e,bi),this.element=$(t),this.init()}yi.prototype={init:function(){return this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);$.when(i,e).done((function(e,i){t.locale=B.cultures[e]||B.currentLocale,t.language=i||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()}))},build:function(){var t=this;return"false"===this.settings.showMonthYearPicker&&(this.settings.showMonthYearPicker=!1),this.setCurrentCalendar(),this.prevButton=""+'<button type="button" class="btn-icon prev">\n        '.concat($.createIcon("caret-left"),"\n        <span>").concat(B.translate("PreviousMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.nextButton=""+'<button type="button" class="btn-icon next">\n        '.concat($.createIcon("caret-right"),"\n        <span>").concat(B.translate("NextMonth",{locale:this.locale.name,language:this.language}),"</span>\n      </button>"),this.table=$('<table class="monthview-table" aria-label="'.concat(B.translate("Calendar",{locale:this.locale.name}),'" role="application"></table>')),this.dayNames=$("<thead>\n        <tr>\n          <th>SU</th>\n          <th>MO</th>\n          <th>TU</th>\n          <th>WE</th>\n          <th>TH</th>\n          <th>FR</th>\n          <th>SA</th>\n        </tr>\n      </thead>").appendTo(this.table),this.days=$('<tbody>\n        <tr>\n          <td class="alternate">26</td>\n          <td class="alternate">27</td>\n          <td class="alternate">28</td>\n          <td class="alternate">29</td>\n          <td class="alternate" >30</td>\n          <td class="alternate">31</td>\n          <td>1</td>\n        </tr><tr>\n          <td>2</td>\n          <td>3</td>\n          <td>4</td>\n          <td>5</td>\n          <td>6</td>\n          <td>7</td>\n          <td>8</td>\n        </tr><tr>\n          <td>9</td>\n          <td>10</td>\n          <td>11</td>\n          <td>12</td>\n          <td>13</td>\n          <td>14</td>\n          <td>15</td>\n        </tr><tr>\n          <td>16</td>\n          <td>17</td>\n          <td>18</td>\n          <td>19</td>\n          <td class="is-today">20</td>\n          <td>21</td>\n          <td>22</td>\n        </tr><tr>\n          <td>23</td>\n          <td>24</td>\n          <td>25</td>\n          <td>26</td>\n          <td>27</td>\n          <td>28</td>\n          <td class="alternate">1</td>\n        </tr><tr>\n          <td class="alternate">2</td>\n          <td class="alternate">3</td>\n          <td class="alternate">4</td>\n          <td class="alternate">5</td>\n          <td class="alternate">6</td>\n          <td class="alternate">7</td>\n          <td class="alternate">8</td>\n        </tr>\n      </tbody>').appendTo(this.table),this.monthYearPane=$(""),this.settings.showMonthYearPicker&&this.settings.isPopup&&(this.monthYearPane=$('<div class="monthview-monthyear-pane expandable-area '.concat(this.settings.hideDays?" is-expanded":"",'">\n        <div class="expandable-pane">\n          <div class="content"><div class="picklist-section is-month"></div><div class="picklist-section is-year"></div></div>\n        </div>\n      </div>'))),this.settings.hideDays&&(this.table=""),this.header=$('<div class="monthview-header"><div class="calendar-toolbar"></div></div>'),"full"===this.settings.headerStyle?this.monthPicker=this.header.find("#monthview-datepicker-field"):this.settings.showToday&&this.header.find(".btn-icon.prev").before('<a class="hyperlink today" href="#">'.concat(B.translate("Today",{locale:this.locale.name,language:this.language}),"</a>")),this.showMonth(this.settings.month,this.settings.year),this.calendar=this.element.addClass("monthview").append(this.header,this.monthYearPane,this.table),this.settings.isPopup||this.element.addClass("is-fullsize"),this.addLegend(),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new vi(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.currentDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isMonthPicker:"full"===this.settings.headerStyle,isAlternate:"full"!==this.settings.headerStyle,isMenuButton:"full"!==this.settings.headerStyle&&this.settings.showMonthYearPicker,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,attributes:this.settings.attributes}),this.handleEvents(),C.addAttributes(this.element,this,this.settings.attributes),this},setCurrentCalendar:function(){this.currentCalendar=B.calendar(this.locale.name,this.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions},showMonth:function(t,e){var i,n=this,s=this,a=this.settings,r=new Date;if(r.setHours(0),r.setMinutes(0),r.setSeconds(0),i=this.isIslamic?a.activeDate||B.gregorianToUmalqura(r):a.activeDate&&a.activeDate.getDate()?a.activeDate:r,this.setCurrentCalendar(),this.isIslamic)if(a.activeDateIslamic)i=a.activeDateIslamic;else{var o=new Date(e,t,this.currentDay||this.settings.day),l=B.gregorianToUmalqura(o);this.todayDateIslamic=B.gregorianToUmalqura(r),a.activeDateIslamic=[],a.activeDateIslamic[0]=l[0],a.activeDateIslamic[1]=l[1],a.activeDateIslamic[2]=l[2],e=l[0],t=l[1],i=l,this.currentDay=l[2]}e.toString().length<4&&(e=(new Date).getFullYear()),12===t&&(e++,t=0,this.currentMonth=t,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),t<0&&(e--,t=11,this.currentMonth=t,this.currentYear=e,this.currentDate.setFullYear(e),this.currentDate.setMonth(t)),this.currentDay=this.currentDay||this.settings.day,this.currentCalendar&&this.currentCalendar.days||(this.currentCalendar=B.calendar(this.locale.name,this.language,this.settings.calendarName));var c=this.currentCalendar.days.narrow;c=c||this.currentCalendar.days.abbreviated,a.isPopup||(c=this.currentCalendar.days.abbreviated);var d=this.currentCalendar.months.wide[t];this.currentMonth=t,this.currentYear=e;var u=this.currentCalendar.firstDayofWeek||0;if(a.firstDayOfWeek&&(u=a.firstDayOfWeek),this.dayNames.find("th").each((function(t){$(this).text(c[(t+u)%7])})),this.yearFirst=this.currentCalendar.dateFormat.year&&"y"===this.currentCalendar.dateFormat.year.substr(1,1),this.header.find(".month").attr("data-month",t).text("".concat(h.stripTags(d)," ")),this.header.find(".year").text(" ".concat(e)),this.yearFirst&&!this.isIslamic&&!this.isRTL){i.setFullYear(e);var p=B.formatDate(i,{date:"year",locale:this.locale.name}).split(" ")[0];this.header.find(".year").text("".concat(p," ")),this.header.find(".year").insertBefore(this.header.find(".month"))}"full"===a.headerStyle&&this.calendarToolbarAPI&&this.calendarToolbarAPI.setInternalDate(this.isIslamic?[e,t,1]:new Date(e,t,1)),this.appendMonthYearPicker(t,e);var g,f,m,v=(this.firstDayOfMonth(e,t)-u+7)%7,b=this.daysInMonth(e,t+(this.isIslamic?1:0)),y=this.daysInMonth(e,t+(this.isIslamic?0:1)),w=1,x=1,C=!1,k=function(t,e){C=e,t.addClass("is-selected".concat(a.range.useRange?" range":"")).attr("aria-selected","true").attr("tabindex","0")};if(this.dayMap=[],this.days.find("td").each((function(n){var a=$(this).removeClass("alternate prev-month next-month is-selected range is-today");if(a.removeAttr("aria-selected"),a.removeAttr("tabindex"),n<v&&(m=b-v+1+n,f=0===t?11:t-1,g=0===t?e-1:e,s.setDisabled(a,g,f,m),s.setLegendColor(a,g,f,m),s.dayMap.push({key:E.padDate(g,f,m),elem:a}),a.addClass("alternate prev-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(h.stripTags(m),"</span></span>")),a.attr("data-key",E.padDate(g,f,m))),n>=v&&x<=y){if(s.dayMap.push({key:E.padDate(e,t,x),elem:a}),a.html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(h.stripTags(x),"</span></span>")),a.attr("data-key",E.padDate(e,t,x)),s.isIslamic)x===i[2]&&k(a,!0);else{var r=i.getHours(),o=i.getMinutes(),l=s.isSeconds?i.getSeconds():0,c=function(t){return t?t.setHours(r,o,l,0):0};c(new Date(e,t,x))===c(s.currentDate||i)&&k(a,!0)}x===s.todayDay&&s.currentMonth===s.todayMonth&&s.currentYear===s.todayYear&&a.addClass("is-today"),a.attr("aria-label",B.formatDate(new Date(s.currentYear,s.currentMonth,x),{date:"full",locale:s.locale.name}));var d=E.padDate(s.currentYear,s.currentMonth,x);return a.attr("data-key",d),s.setDisabled(a,e,t,x),s.setLegendColor(a,e,t,x),a.attr("role","link"),void x++}x>=y+1&&(m=w,f=11===t?0:t+1,g=11===t?e+1:e,s.dayMap.push({key:E.padDate(g,f,m),elem:a}),s.setDisabled(a,g,f,m),s.setLegendColor(a,g,f,m),a.addClass("alternate next-month").html('<span class="day-container"><span aria-hidden="true" class="day-text">'.concat(w,"</span></span>")),a.attr("data-key",E.padDate(g,f,m)),w++)})),!C&&!a.range.useRange){var T=s.dayMap.filter((function(i){return i.key===E.padDate(e,t,n.settings.day)}));T.length&&k(T[0].elem,!1)}var S=this.days.find("tr").eq(5);7===S.find("td.alternate").length?S.hide():S.show(),this.currentDate||(this.isIslamic?(this.currentDateIslamic=[this.currentYear,this.currentMonth,this.currentDay],this.currentDate=B.umalquraToGregorian(this.currentYear,this.currentMonth,this.currentDay)):this.currentDate=new Date(this.currentYear,this.currentMonth,this.currentDay)),this.setRangeSelection(),this.validatePrevNext(),a.range.useRange||0!==this.element.find("td.is-selected").length||(this.element.find("td[tabindex]").removeAttr("tabindex"),this.element.find("td:not(.alternate) .day-text").first().closest("td").attr("tabindex","0")),this.element.trigger("monthrendered",{year:e,month:t,elem:this.element,api:this})},getTime:function(t,e){if(this.isIslamic)return t[0]+"0".concat(t[1]).slice(-2)+"0".concat(t[2]).slice(-2);if(e){var i=new Date(t);return i.setHours(0,0,0),i.getTime()}return t.getTime()},setRangeSelection:function(){if(this.settings.range.useRange){var t={};t.date=new Date(this.currentYear,this.currentMonth,1),t.date.setDate(t.date.getDate()-(this.days.find(".prev-month:visible").length+1));var e=E.padDate(t.date.year||t.date[0],t.date.month||t.date[1],t.date.day||t.date[2]);t.cell=this.days.find('[data-key="'.concat(e,'"]')),this.setRangeOnCell(!this.settings.range.second&&t.cell)}},appendMonthYearPicker:function(t,e){var i=this;if(this.settings.showMonthYearPicker){var n='<ul class="picklist is-month">';this.currentCalendar.months.wide.map((function(e,i){n+='<li class="picklist-item'.concat(i===t?" is-selected ":"",'"><a href="#" ').concat(i===t?'tabindex="0" ':'tabindex="-1" ','data-month="').concat(i,'">').concat(e,"</a></li>")})),n+="</ul>",this.monthYearPane.find(".picklist-section.is-month").empty().append(n);var s=[],a='<ul class="picklist is-year">';a+='<li class="picklist-item up"><a href="#" tabindex="0"><span class="audible">'.concat(B.translate("PreviousYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-up"></use></svg></a></li>');for(var r=this.settings.yearsBack;r>=1;r--)s.push(parseInt(e,10)-r);s.push(e);for(var o=1;o<=this.settings.yearsAhead;o++)s.push(parseInt(e,10)+o);s.map((function(t){a+='<li class="picklist-item'.concat(e===t?" is-selected ":"",'"><a href="#" ').concat(e===t?'tabindex="0" ':'tabindex="-1" ','data-year="').concat(t,'">').concat(t,"</a></li>")})),a+='<li class="picklist-item down"><a tabindex="0"><span class="audible">'.concat(B.translate("NextYear"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-down"></use></svg></a></li>'),a+="</ul>",this.monthYearPane.find(".picklist-section.is-year").empty().append(a),this.yearFirst&&this.monthYearPane.addClass("is-yearfirst"),C.addAttributes(this.monthYearPane.find(".picklist-item.up a"),this,this.settings.attributes,"btn-picklist-up"),C.addAttributes(this.monthYearPane.find(".picklist-item.down a"),this,this.settings.attributes,"btn-picklist-down"),this.monthYearPane.find(".is-year .picklist-item").not(".up, .down").each((function(){var t=$(this).find("a");C.addAttributes(t,i,i.settings.attributes,"btn-picklist-".concat(t.text().toLowerCase()))})),this.monthYearPane.find(".is-month .picklist-item").not(".up, .down").each((function(t){C.addAttributes($(this).find("a"),i,i.settings.attributes,"btn-picklist-".concat(t))}))}},firstDayOfMonth:function(t,e){if(this.isIslamic){var i=B.umalquraToGregorian(t,e,1);return null===i?1:i.getDay()}return new Date(t,e,1).getDay()},daysInMonth:function(t,e){if(this.isIslamic){for(var i=this.conversions.yearInfo[this.islamicYearIndex(t)][0],n=0;n<=e;n++){if(n===e)return 29+(1&i);i>>=1}return 0}return new Date(t,e,0).getDate()},islamicYearIndex:function(t){var e=t-1318;return e<0||e>=this.conversions.yearInfo.length?0:e},setDisabled:function(t,e,i,n){var s=this.settings;function a(){t.addClass("is-disabled").attr("aria-disabled","true").removeClass("is-selected range").removeAttr("aria-selected")}if(t.removeClass("is-disabled").removeAttr("aria-disabled"),"function"==typeof s.disable.callback)$.when(this.isDateDisabled(e,i,n)).then((function(t){t&&a()}));else{var r=this.isDateDisabled(e,i,n);(r&&!s.disable.isEnable||!r&&s.disable.isEnable)&&a()}},isDateDisabled:function(t,e,n){var s=this.settings;if("function"==typeof s.disable.callback){var a=$.Deferred();return $.when(s.disable.callback(t,e,n)).then((function(t){a.resolve(t)})),a.promise()}var r=new Date(s.disable.minDate).setHours(0,0,0,0),o=new Date(s.disable.maxDate).setHours(0,0,0,0),l=this.isIslamic?B.umalquraToGregorian(t,e,n):new Date(t,e,n);if(!l)return!1;if(-1!==s.disable.dayOfWeek.indexOf(l.getDay()))return!0;var c=l.getFullYear();if((l=l.setHours(0,0,0,0))<=r||l>=o)return!0;/string|number/.test(i(s.disable.years))&&(s.disable.years=[s.disable.years]);for(var d=0,h=s.disable.years.length;d<h;d++)if(c===Number(s.disable.years[d]))return!0;s.disable.dates.length&&"string"==typeof s.disable.dates&&(s.disable.dates=[s.disable.dates]);for(var u=0,p=s.disable.dates.length;u<p;u++){if(l===new Date(s.disable.dates[u]).setHours(0,0,0,0))return!0}return!1},getDateRange:function(t,e,i){var n=[],s=this.isIslamic?c(t):new Date(t);for(i=void 0!==i?i:this.settings.range.includeDisabled;this.getTime(e)>=this.getTime(s);)(i||!i&&!this.isDateDisabled(this.isIslamic?s[0]:s.getFullYear(),this.isIslamic?s[1]:s.getMonth(),this.isIslamic?s[2]:s.getDate()))&&(this.isIslamic?n.push(s):n.push(new Date(s))),this.isIslamic?s[2]+=1:s.setDate(s.getDate()+1);return n},setLegendColor:function(t,e,i,n){if(this.settings.showLegend&&t[0]){var s=this.getLegendColor(e,i,n);if(t[0].style.backgroundColor="",t.off("mouseenter.legend mouseleave.legend"),s){if(-1===s.indexOf("#")){var a=s.replace(/[0-9]/g,""),r=10*s.substr(s.length-2,2);s=Z.themeColors().palette[a][r].value}t.addClass("is-colored"),t[0].style.backgroundColor=I.hexToRgba(s,.3);var o=I.hexToRgba(s,.3),l=I.hexToRgba(s,.7);t.on("mouseenter.legend",(function(){var t=$(this);t[0].style.backgroundColor=l,t.find("span")[0].style.backgroundColor="transparent",t.find(".day-text")[0].style.backgroundColor="transparent"})).on("mouseleave.legend",(function(){var t=$(this);t[0].style.backgroundColor=o,t.find("span")[0].style.backgroundColor="",t.find(".day-text")[0].style.backgroundColor=""}))}}},getLegendColor:function(t,e,i){var n=this.settings;if(n.showLegend){for(var s=new Date(t,e,i),a=s.setHours(0,0,0,0),r=0;r<n.legend.length;r++){var o=n.legend[r];if(o.dayOfWeek&&-1!==o.dayOfWeek.indexOf(s.getDay()))return o.color;if(o.dates)for(var l=0;l<o.dates.length;l++){if(a===new Date(o.dates[l]).setHours(0,0,0,0))return o.color}}return""}},handleEvents:function(){var t=this,e=this,i=this.settings;return this.element.off("updated.".concat("monthview")).on("updated.".concat("monthview"),(function(){t.updated()})),this.header.off("click.monthview").on("click.monthview",".btn-icon",(function(){var t=$(this).is(".next"),n={},s={month:e.currentMonth,year:e.currentYear};i.range.useRange?(t?n.date=new Date(s.year,s.month+1,e.element.find(".next-month:visible").length+1):(n.date=new Date(s.year,s.month,1),n.date.setDate(n.date.getDate()-(e.days.find(".prev-month:visible").length+1))),s.month+=t?1:-1):(e.currentMonth+=t?1:-1,e.currentDate.setMonth(e.currentMonth),e.currentYear=parseInt(e.element[0].querySelector("span.year").innerText,10),e.currentDate.setFullYear(e.currentYear),s.month=e.currentMonth,s.year=e.currentYear),e.showMonth(s.month,s.year),i.range.useRange&&(n.formatedDate=B.formatDate(n.date,{date:"full",locale:e.locale.name}),n.cell=e.days.find('[aria-label="'.concat(n.formatedDate,'"]')),e.setRangeOnCell(!i.range.second&&n.cell))})),i.range.useRange&&(this.header.off("mouseover.datepicker").on("mouseover.datepicker","button",(function(){i.range.extra&&e.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)})).off("focus.datepicker").on("focus.datepicker","button:not(.hide-focus)",(function(){i.range.extra&&e.setRangeOnCell($(this).is(".next")?i.range.extra.maxCell:i.range.extra.minCell)})),this.days.off("mouseover.datepicker").on("mouseover.datepicker","td",(function(){e.setRangeOnCell(this)}))),this.calendarToolbarEl&&this.calendarToolbarEl.off("change-date.monthview").on("change-date.monthview",(function(e,i){i.isToday&&t.settings.isPopup||(i.isToday?t.setToday():t.selectDay(i.selectedDate,!1,!0))})),i.selectable&&this.element.addClass("is-selectable").off("click.monthview-day").on("click.monthview-day","td",(function(e){var i=e.currentTarget.getAttribute("data-key");t.lastClickedKey=i,e.currentTarget.classList.contains("is-disabled")||t.selectDay(i,!1,!0)})),this.handleMonthYearPane().handleKeys(),this},handleMonthYearPane:function(){var t=this,e=this.settings,i=function(i){var n=t.monthYearPane[0].querySelector(".picklist.is-year"),s=n.children,a=s["up"===i?1:s.length-2].querySelector("a").getAttribute("data-year");if(u.remove(s["up"===i?s.length-2:1]),$(n).find(".picklist-item").not(".up, .down").remove(),"up"===i)for(var r=10;r>0;r--){var o=parseInt(a,10)-r,l=$('<a href="#" tabindex="-1" data-year="'.concat(o,'">').concat(o,"</a>")),c=$('<li class="picklist-item"></li>');c.append(l),$(n).find(".picklist-item.down").before(c),C.addAttributes(l,t,e.attributes,"btn-picklist-".concat(o))}if("down"===i)for(var d=1;d<11;d++){var h=parseInt(a,10)+d,p=$('<a href="#" tabindex="-1" data-year="'.concat(h,'">').concat(h,"</a>")),g=$('<li class="picklist-item"></li>');g.append(p),$(n).find(".picklist-item.down").before(g),C.addAttributes(p,t,e.attributes,"btn-picklist-".concat(h))}$(n).find(".picklist-item").eq(5).addClass("is-selected").attr("tabindex","0")},n=null;this.monthYearPane.off("touchstart.monthviewpane mousedown.monthviewpane").on("touchstart.monthviewpane mousedown.monthviewpane",".picklist.is-year li",(function(t){return n=setInterval((function(){return t.currentTarget.classList.contains("up")&&i("up"),t.currentTarget.classList.contains("down")&&i("down"),t.stopImmediatePropagation(),t.stopPropagation(),!1}),200),!0})).off("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane").on("touchend.monthviewpane touchcancel.monthviewpane mouseup.monthviewpane mouseout.monthviewpane",".picklist.is-year li",(function(){return clearInterval(n),!0}));var s=function(i,n){var s=function(e){return t.monthYearPane[0].querySelector(".is-".concat(e," .is-selected a"))},a="is-month"===n?{month:parseInt(i.getAttribute("data-month"),10),year:parseInt(s("year").getAttribute("data-year"),10)}:{month:parseInt(s("month").getAttribute("data-month"),10),year:parseInt(i.getAttribute("data-year"),10)};e.range.useRange||(t.currentMonth=a.month,t.currentDate.setMonth(t.currentMonth),t.currentYear=a.year,t.currentDate.setFullYear(t.currentYear),a.month=t.currentMonth,a.year=t.currentYear),function(e,i){var n=t.monthYearPane[0].querySelector(".picklist.".concat(i," .is-selected"));u.removeClass(n,"is-selected"),n&&n.querySelector("a").setAttribute("tabindex","-1"),u.addClass(e.parentNode,"is-selected"),e.setAttribute("tabindex","0")}(i,n),t.element.hasClass("".concat(n,"only"))&&t.monthYearPane.parent().find("button.is-select-month").click()};this.monthYearPane.off("click.picklist-month").on("click.picklist-month",".picklist.is-month li",(function(t){s(t.target,"is-month"),t.preventDefault()})),this.monthYearPane.off("click.picklist-month-a").on("click.picklist-month-a",".picklist.is-month li a",(function(t){t.preventDefault()})),this.monthYearPane.off("click.picklist-year").on("click.picklist-year",".picklist.is-year li",(function(t){t.currentTarget.classList.contains("up")?i("up"):t.currentTarget.classList.contains("down")?i("down"):(s(t.target,"is-year"),t.preventDefault())})),this.monthYearPane.off("click.picklist-year-a").on("click.picklist-year-a",".picklist.is-year li a",(function(t){t.preventDefault()})),this.monthYearPane.on("expand.monthviewpane",(function(){e.hideDays||(t.element.find(".btn-icon, td.is-selected").attr("disabled","true"),t.element.find("td.is-selected").removeAttr("tabindex"),t.monthYearPane.find(".content").css("height",t.header.parent().height()-t.header.height()-55),t.element.find(".hyperlink.today").hide(),t.element.find(".is-select").removeClass("is-select").addClass("is-select-month-pane"),t.element.find(".is-cancel").removeClass("is-cancel").addClass("is-cancel-month-pane").text(B.translate("Cancel",{locale:t.locale.name,language:t.language}))),setTimeout((function(){t.monthYearPane.find(".is-month .is-selected a").focus(),t.monthYearPane.parent().hasClass("is-yearonly")&&t.monthYearPane.find(".is-year .is-selected a").focus()}))})).on("collapse.monthviewpane",(function(){e.hideDays||(t.element.find(".btn-icon").removeAttr("disabled"),t.element.find("td.is-selected").attr("tabindex","0"),t.element.find(".hyperlink.today").show(),t.element.find(".is-select-month-pane").addClass("is-select").removeClass("is-select-month-pane"),t.element.find(".is-cancel-month-pane").addClass("is-cancel").removeClass("is-cancel-month-pane").text(B.translate("Clear",{locale:t.locale.name,language:t.language})))}));var a=function(t,e){var i=t.currentTarget,n=t.currentTarget.parentNode,s="prev"===e?n.previousSibling:n.nextSibling;s||(s=n.parentNode.children["prev"===e?n.parentNode.children.length-1:0]);var a=s.querySelector("a");i.setAttribute("tabindex","-1"),n.parentNode.querySelector(".is-selected").classList.remove("is-selected"),u.addClass(s,"is-selected"),a.setAttribute("tabindex","0"),a.focus()};return this.monthYearPane.off("keydown.monthviewpane").on("keydown.monthviewpane",".picklist-item a",(function(t){var e=t.currentTarget.parentNode.classList.contains("up"),n=t.currentTarget.parentNode.classList.contains("down"),r=t.currentTarget.parentNode.parentNode.classList.contains("is-year"),o=t.currentTarget.parentNode.parentNode.classList.contains("is-month"),l=!1;"ArrowUp"===t.key&&(r||o)?(a(t,"prev"),l=!0):"ArrowDown"===t.key&&(r||o)?(a(t,"next"),l=!0):"Enter"===t.key&&(e||n?(i(e?"up":"down"),l=!0):(r||o)&&(s(t.target,r?"is-year":"is-month"),l=!0)),l&&t.preventDefault()})),this},selectDay:function(t,e,i){this.isIslamic&&"string"!=typeof t&&(this.currentDateIslamic=B.gregorianToUmalqura(t),t=E.padDate(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2])),this.isIslamic||"string"==typeof t||(t=E.padDate(t.getFullYear(),t.getMonth(),t.getDate()));var n=this.dayMap.filter((function(e){return e.key===t})),s=parseInt(t.substr(0,4),10),a=parseInt(t.substr(4,2),10)-1,r=parseInt(t.substr(6,2),10);if(this.isIslamic?(this.currentDateIslamic=t,this.currentDate=B.umalquraToGregorian(s,a,r)):this.currentDate=new Date(s,a,r),this.currentYear=s,this.currentMonth=a,this.currentDay=r,(0===n.length||n[0].elem.hasClass("alternate"))&&(this.showMonth(a,s),n=this.dayMap.filter((function(e){return e.key===t}))),0!==!n.length){var o=n[0].elem[0],l={node:o,key:t,day:r,month:a,year:s,close:e};delete this.isKeyClick,this.element.find("td.is-selected").removeClass("is-selected").removeAttr("tabindex"),$(o).addClass("is-selected").attr("tabindex","0").focus(),(i="full"===this.settings.headerStyle||i)&&this.settings.onSelected&&this.settings.onSelected(o,l),i&&this.element.trigger("selected",l)}},setToday:function(){this.selectDay(new Date,!1,!0)},handleKeys:function(){var t=this,e=this.settings;this.element.off("keydown.monthview").on("keydown.monthview",".monthview-table",(function(i){var n=i.keyCode||i.charCode||0,s=$(i.target),a=t.days.find("td:visible"),r=a.length,o=null,l=null,c=!1,d=new Date(e.disable.minDate),h=new Date(e.disable.maxDate),u=function(){t.datepickerApi&&e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&t.datepickerApi.resetRange({isData:!0})};if(t.settings.onKeyDown&&!1===t.settings.onKeyDown({e:i,key:n,cell:s,node:t.element}))return i.stopPropagation(),i.preventDefault(),!1;if(40===n&&(c=!0,e.range.useRange?(o=a.index(i.target)+7,l=a.eq(o),o<r&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<h.getMonth()||h.getDate()-1>=t.currentDate.getDate()+7)&&t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+7),t.selectDay(t.currentDate,!1,!1))),38===n&&(c=!0,e.range.useRange?(o=a.index(i.target)-7,l=a.eq(o),o>-1&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1<=t.currentDate.getDate()-7)&&t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-7),t.selectDay(t.currentDate,!1,!1))),(37===n||189===n&&!i.shiftKey)&&(c=!0,e.range.useRange?(o=a.index(i.target)-1,l=a.eq(o),o>-1&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()>d.getMonth()||d.getDate()+1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()-1),t.selectDay(t.currentDate,!1,!1))),(39===n||187===n&&i.shiftKey)&&(c=!0,e.range.useRange?(o=a.index(i.target)+1,l=a.eq(o),o<r&&(u(),t.setRangeOnCell(l.is(".is-selected")?null:l),t.setRangeSelBeforeFirstSel(l),t.activeTabindex(l,!0))):e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?((t.currentDate.getMonth()<h.getMonth()||h.getDate()-1!==t.currentDate.getDate())&&t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setDate(t.currentDate.getDate()+1),t.selectDay(t.currentDate,!1,!1))),33!==n||i.altKey||(c=!0,u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()-1),t.selectDay(t.currentDate,!1,!1))),34!==n||i.altKey||(c=!0,u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==h.getMonth()&&(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1)):(t.currentDate.setMonth(t.currentDate.getMonth()+1),t.selectDay(t.currentDate,!1,!1))),33===n&&i.ctrlKey&&(c=!0,u(),t.currentDate.setFullYear(t.currentDate.getFullYear()-1),t.selectDay(t.currentDate,!1,!1)),34===n&&i.ctrlKey&&(c=!0,u(),t.currentDate.setFullYear(t.currentDate.getFullYear()+1),t.selectDay(t.currentDate,!1,!1)),36===n){c=!0;var p,g=t.currentDate;u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?d.getMonth()!==t.currentDate.getMonth()?p=new Date(g.getFullYear(),g.getMonth(),1):(p=new Date(d.getFullYear(),d.getMonth(),d.getDate())).setDate(p.getDate()+1):p=new Date(g.getFullYear(),g.getMonth(),1),t.currentDate=p,t.isIslamic&&(t.currentDateIslamic=B.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(35===n){c=!0;var f,m=t.currentDate;u(),e.disable.restrictMonths&&e.disable.minDate&&e.disable.maxDate?t.currentDate.getMonth()!==h.getMonth()?f=new Date(m.getFullYear(),m.getMonth()+1,0):(f=new Date(h.getFullYear(),h.getMonth(),h.getDate())).setDate(f.getDate()-1):f=new Date(m.getFullYear(),m.getMonth()+1,0),t.currentDate=f,t.isIslamic&&(t.currentDateIslamic=B.gregorianToUmalqura(t.currentDate)),t.selectDay(t.currentDate,!1,!1)}if(84===n){if(e.range.useRange&&t.datepickerApi){u();var v=!(e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date));t.datepickerApi.setToday(v),!v&&t.datepickerApi&&"function"==typeof t.datepickerApi.closeCalendar&&t.datepickerApi.closeCalendar()}else t.setToday();c=!0}if(32===n||13===n){if(c=!0,e.range.useRange)return(!e.range.first||e.range.first&&!e.range.first.date)&&a.removeClass("is-selected"),s.focus().trigger("click"),!1;var b=t.getCellDate(s);t.isIslamic?(t.currentDateIslamic=[b.year,b.month,b.day],t.currentDate=B.umalquraToGregorian(t.currentDateIslamic[0],t.currentDateIslamic[1],t.currentDateIslamic[2])):t.currentDate=new Date(b.year,b.month,b.day),t.selectDay(t.currentDate,!0,!0)}return!c||(i.stopPropagation(),i.preventDefault(),!1)}))},validatePrevNext:function(){if(this.settings.disable.restrictMonths&&this.settings.disable.minDate&&this.settings.disable.maxDate){var t=new Date(this.settings.disable.minDate),e=new Date(this.settings.disable.maxDate);if(this.element.find(".prev").prop("disabled",!1),this.element.find(".next").prop("disabled",!1),t.getFullYear()>this.currentYear||this.currentYear>e.getFullYear())return this.element.find(".prev").prop("disabled",!0),void this.element.find(".next").prop("disabled",!0);this.currentMonth-1<t.getMonth()&&this.element.find(".prev").prop("disabled",!0),this.currentMonth+1>e.getMonth()&&this.element.find(".next").prop("disabled",!0)}},addLegend:function(){var t=this.settings;if(t.showLegend){this.legend&&this.legend.length&&this.legend.remove(),this.legend=$('<div class="monthview-legend"></div>');for(var e=0;e<t.legend.length;e++){var i=t.legend[e],n=i.color;if(-1===n.indexOf("#")){var s=n.replace(/[0-9]/g,""),a=10*n.substr(n.length-2,2);n=Z.themeColors().palette[s][a].value}var r=""+'<div class="monthview-legend-item">\n          <span class="monthview-legend-swatch" style="background-color: '.concat(I.hexToRgba(n,.3),'"></span>\n          <span class="monthview-legend-text">').concat(i.name,"</span>\n        </div>");this.legend.append(r)}this.table.after(this.legend)}},setRangeOnCell:function(t){var e=this,i=this.settings;if(i.range.useRange&&i.range.first&&!i.range.second){var n=i.range.first,s=i.range.extra,a=s.cellLength-1,r=n.rowIdx+n.cellIdx+a*n.rowIdx;if((t=$(t)).length&&!t.is(".is-disabled, .is-selected")){var o=t.closest("tr"),l=t.index(),c=o.index(),d=c+l+a*c,h=e.getCellDate(t),u=this.getTime(this.isIslamic?[h.year,h.month,h.day]:new Date(h.year,h.month,h.day)),p=this.getDifferenceToDate(i.range.first.date,i.range.maxDays);e.days.find("td:visible").each((function(t){var n=$(this);u>e.getTime(i.range.first.date)&&!i.range.selectBackward&&(!i.range.maxDays||i.range.maxDays>0&&u<=p.aftertime)&&(t>r&&t<=d||u>e.getTime(s.max)&&t<=d)?n.addClass("range-next"):u<e.getTime(i.range.first.date)&&!i.range.selectForward&&(!i.range.maxDays||i.range.maxDays>0&&u>=p.beforetime)&&(t<r&&t>=d||u<e.getTime(s.min)&&t>=d)?n.addClass("range-prev"):n.removeClass("range-next range-prev")}))}else t.length||e.days.find("td").removeClass("range-next range-prev")}!t&&i.range.second&&e.setRangeSelected()},getDifferenceToDate:function(t,e,i){var n=this,s={},a=function(t,e,a){for(t=n.isIslamic?B.umalquraToGregorian(t):new Date(t);e>0;)t.setDate(t.getDate()+(a?1:-1)),(i||!i&&!n.isDateDisabled(t.getFullYear(),t.getMonth(),t.getDate()))&&(e--,s[a?"after":"before"]=n.isIslamic?B.gregorianToUmalqura(new Date(t)):new Date(t));a&&s.after?s.aftertime=n.getTime(s.after):s.before&&(s.beforetime=n.getTime(s.before))};return i=void 0!==i?i:this.settings.range.includeDisabled,a(t,e),a(t,e,!0),s},setRangeSelected:function(){var t=this,e=this,i=this.settings;i.range.useRange&&i.range.second&&i.range.second.date&&this.days&&this.days.length&&(this.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),this.days.find("td:visible").each((function(){var n,s=$(this),a=s.is(".is-disabled")&&!i.range.includeDisabled,r=s.is(".is-disabled")&&i.range.includeDisabled?" include-disabled":"",o=e.getTime((n=e.getCellDate(s),t.isIslamic?[n.year,n.month,n.day]:new Date(n.year,n.month,n.day))),l=e.getTime(i.range.first.date,!0),c=e.getTime(i.range.second.date,!0);o!==l&&o!==c||a?(!e.isIslamic&&o>l&&o<c&&!a||e.isIslamic&&(l>o&&c<o||l<o&&c>o)&&!a)&&s.addClass("range-selection".concat(r)):s.addClass("is-selected".concat(r).concat(l!==c?" range-selection".concat(o!==c||e.isIslamic?"":" end-date"):""))})))},setRangeSelByClick:function(){var t=0,e=this.settings;if(e.range.useRange)if(e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date){if(e.showTime&&this.datepickerApi){var i={time1:this.getTime(e.range.first.date),time2:this.getTime(e.range.second.date),first:this.datepickerApi.setTime(e.range.first.date),second:this.datepickerApi.setTime(e.range.second.date)};i.time1!==this.getTime(i.first)&&(this.datepickerApi.setRangeToElem(i.first,!0),this.datepickerApi.setRangeToElem(i.second,!1),t=2)}t=0===t?1:t}else{var n;if(!e.range.first||e.range.first&&!e.range.first.date)(n=this.dayMap.filter((function(t){return t.elem.is(".is-selected")})))&&n.length&&(this.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),n[0].elem.focus().trigger("click"),t=3);else if(!e.range.second||e.range.second&&!e.range.second.date){if((n=this.days.find("td.range-prev:visible").first()).length||(n=this.days.find("td.range-next:visible").last()),n.length||(n=this.dayMap.filter((function(t){return t.elem.is(".is-selected")}))),n&&n.length)(n[0].elem||n).focus().trigger("click"),t=3}}return t},getCellDate:function(t){var e=parseInt(t.text(),10),i=parseInt(this.header.find(".month").attr("data-month"),10),n=parseInt(this.header.find(".year").text(),10);return t.hasClass("prev-month")?0===i?(i=11,n--):i--:t.hasClass("next-month")&&(11===i?(i=0,n++):i++),{year:n,month:i,day:e}},setRangeSelBeforeFirstSel:function(t){var e=this.settings;e.range.useRange&&$("#monthview-popup:visible")&&(e.range.first||($("td",this.element).removeClass("is-selected"),t.addClass("is-selected")))},activeTabindex:function(t,e){return $("td",this.element).removeAttr("tabindex"),t.attr("tabindex",0),e&&t.focus(),t},updated:function(){return this.teardown().init()},teardown:function(){return this.header.off(),this.days.off(),this.element.off(),this.monthYearPane&&(this.monthYearPane.off(),this.monthYearPane=null),this},destroy:function(){if(this.teardown(),this.element&&this.element.empty(),this.element&&this.element[0])try{$.removeData(this.element[0],"monthview")}catch(t){}return this}};var wi={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],filteredTypes:[],events:[],locale:null,language:null,firstDayOfWeek:0,startDate:null,endDate:null,showAllDay:!0,showTimeLine:!0,startHour:7,endHour:19,showToday:!0,showViewChanger:!0,onChangeView:null,onChangeWeek:null,onRenderWeek:null,eventTooltip:"overflow",iconTooltip:"overflow"};function xi(t,e){this.settings=C.mergeSettings(t,e,wi),this.element=$(t),this.init()}xi.prototype={init:function(){return this.settings.startDate||(this.settings.startDate=Je.firstDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.settings.endDate||(this.settings.endDate=Je.lastDayOfWeek(new Date,this.settings.firstDayOfWeek)),this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,e).done((function(e,i){t.locale=B.cultures[e]||B.currentLocale,t.language=i||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build()})),this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.conversions=this.currentCalendar.conversions,this},build:function(){return this.addToolbar(),this.showWeek(this.settings.startDate,this.settings.endDate),this.handleEvents(),C.addAttributes(this.element,this,this.settings.attributes),this},renderAllEvents:function(t){if(!this.settings.onRenderWeek||t){var e=this.settings.events.slice(0);e.sort((function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0})),this.removeAllEvents();for(var i=0;i<e.length;i++){var n=e[i];this.settings.filteredTypes.indexOf(n.type)>-1||this.renderEvent(n)}}else this.callOnRenderWeek()},callOnRenderWeek:function(){var t=this;this.settings.onRenderWeek(this.element,(function(e,i){i&&i.length>0&&(t.settings.eventTypes=i),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0))}),{api:t,settings:this.settings})},removeAllEvents:function(){for(var t=this.element[0].querySelectorAll(".calendar-event"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var i=0;i<this.dayMap.length;i++)this.dayMap[i].events=[]},renderEvent:function(t){var e=new Date(t.starts),i=E.padDate(e.getFullYear(),e.getMonth(),e.getDate());if(B.isIslamic(this.locale.name)){var n=B.gregorianToUmalqura(e);i=E.padDate(n[0],n[1],n[2])}var s=new Date(t.ends),a=E.padDate(s.getFullYear(),s.getMonth(),s.getDate());if(B.isIslamic(this.locale.name)){var r=B.gregorianToUmalqura(s);a=E.padDate(r[0],r[1],r[2])}var o=this.dayMap.filter((function(t){return t.key>=i&&t.key<=a}));if(t.endKey=a,t.startKey=i,t=Ze.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),1!==o.length||t.isAllDay||this.appendEventToHours(o[0].elem,t),1===o.length&&t.isAllDay&&this.appendEventToAllDay(o[0].elem,t),o.length>1)for(var l=0;l<o.length;l++){var c=0===l?"calendar-event-start":"calendar-event-continue";l===o.length-1&&(c="calendar-event-ends"),this.appendEventToAllDay(o[l].elem,t,c)}},appendEventToAllDay:function(t,e,i){var n=t.querySelector(".week-view-all-day-wrapper");if(n){var s=document.createElement("a");u.addClass(s,"calendar-event",e.color,i),s.setAttribute("data-id",e.id),s.setAttribute("data-key",e.startKey),s.setAttribute("href","#"),"calendar-event-continue"!==i&&"calendar-event-ends"!==i||s.setAttribute("tabindex","-1"),s.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>");var a=n.querySelectorAll(".calendar-event").length;if(a>=1&&(s.style.top="".concat(22*a,"px")),a>2)for(var r=this.element[0].querySelectorAll(".week-view-all-day-wrapper"),o=0;o<r.length;o++)r[o].style.height="".concat(44+23*(a-1),"px");n.appendChild(s),C.addAttributes($(s),this,this.settings.attributes,"week-view-event-".concat(e.id)),this.attachTooltip(s,e)}},appendEventToHours:function(t,e){for(var i=this.element[0].querySelectorAll("td:nth-child(".concat(t.cellIndex+1,")")),n=0;n<i.length;n++){var s=i[n],a=parseFloat(s.parentNode.getAttribute("data-hour"),10),r=Math.round(e.startsHour);if(r>e.startsHour?a===r-.5:a===r){var o=e.endsHour-e.startsHour,l="",c=document.createElement("a");if(u.addClass(c,"calendar-event",e.color),c.setAttribute("data-id",e.id),c.setAttribute("data-key",e.startKey),c.setAttribute("href","#"),o<.5&&u.addClass(c,"reduced-padding",e.color),o<1.5&&u.addClass(c,"is-ellipsis"),o>2&&(l=" ".concat(B.formatHourRange(e.startsHour,e.endsHour,{locale:this.locale}))),e.startsHour+o>this.settings.endHour&&(u.addClass(c,"is-cutoff",e.color),o=this.settings.endHour+1-e.startsHour),o<.25&&(o=.25),e.startsHour>a){var d=e.startsHour-a,h=s.parentNode.offsetHeight;c.style.top="".concat(d/.016666666666666784*(h/30),"px")}c.style.height="".concat(2*o*25+1.5*o,"px"),c.innerHTML='<div class="calendar-event-content">\n          '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n          <span class="calendar-event-title">').concat(e.shortSubject||e.subject).concat(l,"</span>\n        </div>");var p=s.querySelector(".week-view-cell-wrapper"),g=s.querySelectorAll(".calendar-event"),f=g.length;if(f>0){var m=100/(f+1),v=0;for(v=0;v<f;v++)g[v].style.width="".concat(m,"%"),v>0&&this.isRTL&&(g[v].style.right="".concat(m*v,"%")),v>0&&!this.isRTL&&(g[v].style.left="".concat(m*v,"%"));c.style.width="".concat(m,"%"),this.isRTL?c.style.right="".concat(m*v,"%"):c.style.left="".concat(m*v,"%")}p.appendChild(c),C.addAttributes($(c),this,this.settings.attributes,"week-view-event-".concat(e.id)),this.attachTooltip(c,e)}}},attachTooltip:function(t,e){var i=this;if("overflow"!==this.settings.iconTooltip){var n=t.querySelector(".calendar-event-icon");n&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({settings:this.settings,event:e}):e[this.settings.iconTooltip]&&(n.setAttribute("title",e[this.settings.iconTooltip]),$(n).tooltip({content:n.innerText})))}"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({settings:this.settings,event:e}):e[this.settings.eventTooltip]&&(t.setAttribute("title",e[this.settings.eventTooltip]),$(t).tooltip({content:t.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(t.setAttribute("title",e.subject),$(t).tooltip({beforeShow:function(t,e){var n=e[0].querySelector(".calendar-event-title"),s=e[0].querySelector(".calendar-event-icon"),a=s?s.querySelector(".icon").getAttribute("data-status"):"";n.offsetWidth>e[0].scrollWidth-(s?s.offsetWidth:0)?t("".concat(n.innerText).concat(a?" (".concat(B.translate(a,{locale:i.locale.name},!1),")"):"")):t(!1)}}))},showWeek:function(t,e){var i=this;this.numberOfDays=Math.round((e-t)/864e5);var n=new Date(t.getTime()),s=new Date(e.getTime());B.isIslamic(this.locale.name)&&(t=B.gregorianToUmalqura(t),t=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),e=B.gregorianToUmalqura(e),e=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6])),this.dayMap=[],this.isDayView=!1,this.element.removeClass("is-day-view"),0!==this.numberOfDays&&1!==this.numberOfDays||(this.element.addClass("is-day-view"),this.isDayView=!0,this.element.find("#calendar-view-changer").val("day").trigger("updated")),this.hasIrregularDays=7!==this.numberOfDays,this.weekHeader='<thead class="week-view-table-header"><tr><th><div class="week-view-header-wrapper"><span class="audible">'.concat(B.translate("Hour"),"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper">'.concat(B.translate("AllDay",this.locale.name),"</div>")),this.weekHeader+="</th>";for(var a=new Date(t.getTime());a<=e;a.setDate(a.getDate()+1)){var r=B.formatDate(a,{pattern:"d",locale:this.locale.name}),o=B.formatDate(a,{pattern:"EEE",locale:this.locale.name}),l=this.currentCalendar.dateFormat.dayOfWeek,c=l?"EEE"===l.split(" ")[0]:"d EEE";this.weekHeader+='<th data-key="'.concat(E.padDate(a.getFullYear(),a.getMonth(),a.getDate()),'"><div class="week-view-header-wrapper').concat(Je.isToday(a)?" is-today":"",'"><span class="week-view-header-day-of-week').concat(c?"":" is-emphasis",'">').concat(c?o:r,'</span><span class="week-view-header-day-of-week').concat(c?" is-emphasis":"",'">').concat(c?r:o,"</span></div>"),this.settings.showAllDay&&(this.weekHeader+='<div class="week-view-all-day-wrapper"></div>'),this.weekHeader+="</th>"}this.weekHeader+="</tr></thead>",this.weekBody="<tbody>";for(var d=this.settings.startHour;d<=this.settings.endHour;d++){for(var h='<tr class="week-view-hour-row" data-hour="'.concat(d,'"><td><div class="week-view-cell-wrapper">').concat(B.formatHour(d,{locale:this.locale}),"</div></td>"),u='<tr class="week-view-half-hour-row" data-hour="'.concat(d,'.5"><td><div class="week-view-cell-wrapper"></div></td>'),p=new Date(t.getTime());p<=e;p.setDate(p.getDate()+1))h+='<td><div class="week-view-cell-wrapper"></div></td>',u+='<td><div class="week-view-cell-wrapper"></div></td>';h+="</tr>",u+="</tr>",this.weekBody+=h+u}this.weekBody+="</tbody>",this.weekContainer='<div class="week-view-container"><table class="week-view-table">'.concat(this.weekHeader).concat(this.weekBody,"</table></div>"),this.element.find(".week-view-container").remove();var g={isDayView:this.isDayView,startDate:B.isIslamic(this.locale.name)?n:t,endDate:B.isIslamic(this.locale.name)?s:e,elem:this.element,api:this};this.element.append(this.weekContainer).trigger("weekrendered",g),this.settings.onChangeWeek&&this.settings.onChangeWeek(g),this.element.find("th").each((function(t,e){var n=e.getAttribute("data-key");n&&i.dayMap.push({key:n,elem:e})})),this.addTimeLine(),this.showToolbarMonth(t,e),this.renderAllEvents(),this.settings.startDate=B.isIslamic(this.locale.name)?n:t,this.settings.endDate=B.isIslamic(this.locale.name)?s:e},showToolbarMonth:function(t,e){var i=B.formatDate(t,{pattern:"MMMM",locale:this.locale.name}),n=B.formatDate(e,{pattern:"MMMM",locale:this.locale.name}),s=B.formatDate(t,{pattern:"yyyy",locale:this.locale.name}),a=B.formatDate(e,{pattern:"yyyy",locale:this.locale.name}),r=B.formatDate(e,{date:"year",locale:this.locale.name});n!==i&&(r="".concat(B.formatDate(t,{pattern:"MMM",locale:this.locale.name})," - ").concat(B.formatDate(e,{pattern:"MMMM yyyy",locale:this.locale.name}))),a!==s&&(r="".concat(B.formatDate(t,{pattern:"MMM yyyy",locale:this.locale.name})," - ").concat(B.formatDate(e,{pattern:"MMM yyyy",locale:this.locale.name}))),this.monthField.text(r)},addTimeLine:function(){var t=this;if(this.settings.showTimeLine){var e=function(){var e=new Date,i=e.getHours(),n=e.getMinutes(),s=i-t.settings.startHour+n/60;t.markers.css("top",52*s)};this.timeMarker||(this.element.find(".week-view-hour-row:nth-child(1) td").prepend('<div class="week-view-time-marker"></div>'),this.markers=$(".week-view-time-marker"),e(),this.timer=setInterval((function(){e()}),3e4))}},addToolbar:function(){var t=this;this.header=$('<div class="week-view-header"><div class="calendar-toolbar"></div></div>').appendTo(this.element),this.calendarToolbarEl=this.header.find(".calendar-toolbar"),this.calendarToolbarAPI=new vi(this.calendarToolbarEl[0],{onOpenCalendar:function(){return t.settings.startDate},locale:this.settings.locale,language:this.settings.language,year:this.currentYear,month:this.currentMonth,showToday:this.settings.showToday,isAlternate:!1,isMenuButton:!0,showViewChanger:this.settings.showViewChanger,onChangeView:this.settings.onChangeView,viewChangerValue:this.isDayView?"day":"week",attributes:this.settings.attributes}),this.monthField=this.header.find("#monthview-datepicker-field")},handleEvents:function(){var t=this;this.element.off("updated.".concat("weekview")).on("updated.".concat("weekview"),(function(){t.updated()})),this.element.off("change-date.".concat("weekview")).on("change-date.".concat("weekview"),(function(e,i){var n=i.isToday?new Date:i.selectedDate;t.isDayView?(t.settings.startDate=n,t.settings.endDate=n):(t.settings.startDate=t.hasIrregularDays?n:Je.firstDayOfWeek(n,t.settings.firstDayOfWeek),t.settings.startDate.setHours(0,0,0,0),t.settings.endDate=new Date(t.settings.startDate),t.settings.endDate.setDate(t.settings.endDate.getDate()+t.numberOfDays-1),t.settings.endDate.setHours(23,59,59,59)),t.showWeek(t.settings.startDate,t.settings.endDate)})),this.element.off("change-next.".concat("weekview")).on("change-next.".concat("weekview"),(function(){t.advanceDays(!0)})),this.element.off("change-prev.".concat("weekview")).on("change-prev.".concat("weekview"),(function(){t.advanceDays(!1)}));var e=function(e,i){var n=e.getAttribute("data-id"),s=t.settings.events.filter((function(t){return t.id===n}));s&&0!==s.length&&t.element.trigger(i,{settings:t.settings,event:s[0]})};return this.element.off("click.".concat("weekview")).on("click.".concat("weekview"),".calendar-event",(function(t){e(t.currentTarget,"eventclick"),t.preventDefault()})),this.element.off("dblclick.".concat("weekview")).on("dblclick.".concat("weekview"),".calendar-event",(function(t){e(t.currentTarget,"eventdblclick")})),this},advanceDays:function(t){var e=this.isDayView?1:this.numberOfDays;t||(e=-e),this.settings.startDate.setDate(this.settings.startDate.getDate()+e),this.isDayView?(this.settings.endDate=new Date(this.settings.startDate),this.settings.startDate.setHours(0,0,0,0),this.settings.endDate.setHours(23,59,59,999)):this.settings.endDate.setDate(this.settings.endDate.getDate()+e),this.showWeek(this.settings.startDate,this.settings.endDate)},addEvent:function(t){t.startsLocale||(t=Ze.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes)),Ze.cleanEventData(t,!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t)},selectHeader:function(t){var e=t instanceof Date?E.padDate(t.getFullYear(),t.getMonth(),t.getDate()):t,i={all:".week-view-table-header th"};i.current="".concat(i.all,'[data-key="').concat(e,'"]'),[].slice.call(this.element[0].querySelectorAll(i.all)).forEach((function(t){t.classList.remove("is-selected")}));var n=this.element[0].querySelector(i.current);n&&n.classList.add("is-selected")},clearEvents:function(){this.settings.events=[],this.renderAllEvents()},updateEvent:function(t){for(var e=t.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===e&&(this.settings.events[i]=C.extend(!0,this.settings.events[i],t),Ze.cleanEventData(this.settings.events[i],!0,this.settings.startDate,this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents()},deleteEvent:function(t){for(var e=t.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===e&&this.settings.events.splice(i,1);this.renderAllEvents()},updated:function(t){return t||(t={}),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t.locale?(this.destroy().init(),this):(this.renderAllEvents(),this)},teardown:function(){return this.element.off(),clearInterval(this.timer),this.timer=null,this},destroy:function(){return this.teardown(),this.element.empty(),$.removeData(this.element[0],"weekview"),this}};var Ci={eventTypes:[{id:"example",label:"Example",color:"emerald07",checked:!0,click:function(){}}],events:[],locale:null,language:null,month:(new Date).getMonth(),year:(new Date).getFullYear(),day:(new Date).getDate(),showViewChanger:!0,onRenderMonth:null,template:null,mobileTemplate:null,upcomingEventDays:14,modalTemplate:null,menuId:null,menuSelected:null,eventTooltip:"overflow",iconTooltip:"overflow",newEventDefaults:{title:"NewEvent",subject:"",isAllDay:!0,comments:""},onChangeView:null,showToday:!0,weekViewSettings:{firstDayOfWeek:0,startHour:7,endHour:19,showAllDay:!0,showTimeLine:!0},disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},dayLegend:null};function ki(t,e){this.settings=C.mergeSettings(t,e,Ci),this.element=$(t),this.init()}ki.prototype={init:function(){return this.setLocaleThenBuild()},build:function(){return this.setCurrentCalendar().renderEventTypes().renderMonthView().renderWeekView().handleEvents().addEventLegend(),this},setLocaleThenBuild:function(){var t=this,e=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,e).done((function(e,i){t.locale=B.cultures[e]||B.currentLocale,t.language=i||t.settings.language||t.locale.language,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents()})),this},setCurrentCalendar:function(){return this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this},addEventLegend:function(){var t=this.settings;this.eventLegend=$('<div class="calendar-event-legend"></div>'),this.monthviewTable=$(".monthview-table");for(var e=0;e<t.eventTypes.length;e++){var i=t.eventTypes[e],n=i.color,s=$('<div class="calendar-event-legend-item"></div>');s.append('<span class="calendar-event-legend-swatch '.concat(n,'"></span>\n          <span class="calendar-event-legend-text">').concat(i.label,"</span>")),this.eventLegend.append(s),C.addAttributes(s,this,this.settings.attributes,"legend-mobile-".concat(i.id),!0)}this.monthviewTable.after(this.eventLegend)},renderEventTypes:function(){if(this.eventTypeContainer=document.querySelector(".calendar-event-types"),!this.eventTypeContainer)return this;for(var t=0;t<this.settings.eventTypes.length;t++){var e=this.settings.eventTypes[t],i='<input type="checkbox" class="checkbox '.concat(e.color,'07" name="').concat(e.id,'" id="').concat(e.id,'" ').concat(e.checked?'checked="true"':""," ").concat(e.disabled?'disabled="true"':"",' />\n        <label for="').concat(e.id,'" class="checkbox-label">').concat(e.translationKey?B.translate(e.translationKey,{locale:this.locale.name,language:this.language}):e.label,"</label><br/>");this.eventTypeContainer.insertAdjacentHTML("beforeend",i);var n=$(this.eventTypeContainer).find("#".concat(e.id));C.addAttributes($(this.eventTypeContainer).find("#".concat(e.id)),this,this.settings.attributes,"legend-".concat(e.id),!0),n.next("label").attr("for",n[0].id)}return this},renderMonthView:function(){var t=this;return this.monthViewContainer=document.querySelector(".calendar .calendar-monthview"),this.activeView="month",this.onChangeToMonth=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)},this.monthView=new yi(this.monthViewContainer,{onRenderMonth:this.settings.onRenderMonth,onSelected:this.settings.onSelected,selectable:!0,locale:this.settings.locale,language:this.settings.language,month:this.settings.month,year:this.settings.year,day:this.settings.day,eventTooltip:this.eventTooltip,iconTooltip:this.iconTooltip,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToMonth,disable:this.settings.disable,showLegend:null!==this.settings.dayLegend,legend:this.settings.dayLegend,attributes:this.settings.attributes}),this.monthViewHeader=document.querySelector(".calendar .monthview-header"),this.renderAllEvents(),C.addAttributes($(".calendar"),this,this.settings.attributes),C.addAttributes($(".calendar-monthview"),this,this.settings.attributes,"monthview"),this},renderWeekView:function(){var t=this;if(this.weekViewContainer=document.querySelector(".calendar .calendar-weekview"),!this.weekViewContainer)return this;this.weekViewContainer.classList.add("week-view"),this.weekViewContainer.classList.add("hidden"),this.onChangeToWeekDay=function(e){t.settings.onChangeView?t.settings.onChangeView(e):t.changeView(e.viewName)};var e=Je.firstDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek),i=Je.lastDayOfWeek(new Date(this.currentDate()),this.settings.weekViewSettings.firstDayOfWeek);return e.setHours(0,0,0,0),i.setHours(23,59,59,999),this.weekView=new xi(this.weekViewContainer,{locale:this.settings.locale,language:this.settings.language,startDate:e,endDate:i,eventTypes:this.settings.eventTypes,events:this.settings.events,firstDayOfWeek:this.settings.weekViewSettings.firstDayOfWeek,showAllDay:this.settings.weekViewSettings.showAllDay,showTimeLine:this.settings.weekViewSettings.showTimeLine,startHour:this.settings.weekViewSettings.startHour,endHour:this.settings.weekViewSettings.endHour,showToday:this.settings.showToday,showViewChanger:this.settings.showViewChanger,onChangeView:this.onChangeToWeekDay,eventTooltip:this.settings.eventTooltip,iconTooltip:this.settings.iconTooltip,attributes:this.settings.attributes}),this.weekViewHeader=document.querySelector(".calendar .calendar-weekview .monthview-header"),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.settings.onChangeWeek=function(e){t.monthView.selectDay(e.startDate,!1,!0)},this.weekView.renderAllEvents(),C.addAttributes($(".calendar-weekview"),this,this.settings.attributes,"weekview"),this},changeView:function(t){if(t!==this.activeView&&this.weekViewContainer){var e=this.currentDate(),i=new Date(e),n=new Date(e);switch(i.setHours(0,0,0,0),n.setHours(23,59,59,999),t){case"day":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="day",this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.clearEventDetails(),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView);break;case"week":this.monthViewContainer.classList.add("hidden"),this.weekViewContainer.classList.remove("hidden"),this.activeView="week",i=Je.firstDayOfWeek(i,this.settings.firstDayOfWeek),n=Je.lastDayOfWeek(i,this.settings.firstDayOfWeek),this.weekView.settings.filteredTypes=this.filterEventTypes(),this.weekView.showWeek(i,n),this.weekView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.clearEventDetails(),this.monthView.selectDay(e,!1,!0),this.weekView.selectHeader(e);break;case"month":this.monthViewContainer.classList.remove("hidden"),this.weekViewContainer.classList.add("hidden"),this.activeView="month",this.monthView.showMonth(this.settings.month,this.settings.year),this.monthView.calendarToolbarAPI.setViewChangerValue(this.activeView),this.monthView.selectDay(e,!1,!0)}}},appendUpcomingEvent:function(t){if(this.upcomingEventsContainer=document.querySelector(".calendar-upcoming-events"),this.upcomingEventsContainer&&!(t.daysUntil>0)){var e=Math.abs(t.daysUntil);if(!(e<0||e>this.settings.upcomingEventDays)){var i=document.createElement("a");i.setAttribute("href","#"),i.setAttribute("data-key",t.startKey),u.addClass(i,"calendar-upcoming-event");var n="",s=B.formatDate(t.starts,{pattern:"d",locale:this.locale.name}),a=B.formatDate(t.ends,{pattern:"d",locale:this.locale.name}),r="".concat(B.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(s===a?s:"".concat(s,"-").concat(a),", ").concat(B.formatDate(t.starts,{pattern:"yyyy",locale:this.locale.name}));if(parseInt(a,10)<parseInt(s,10)){var o=new Date(t.starts);o.setDate(1),o.setMonth(o.getMonth()+1);var l=o.getFullYear();r="".concat(B.formatDate(t.starts,{pattern:"MMMM",locale:this.locale.name})," ").concat(s," - ").concat(B.formatDate(o,{pattern:"MMMM",locale:this.locale.name})," ").concat(a,", ").concat(l)}n+='\n      <span class="calendar-upcoming-date">'.concat(r,'</span>\n      <span class="calendar-upcoming-event-color ').concat(t.color||"",'">').concat(t.color||"",'</span>\n      <span class="calendar-upcoming-description">').concat(t.subject||"",'</span>\n      <span class="calendar-upcoming-status-text">').concat(t.status||"",'</span>\n      <span class="calendar-upcoming-duration">').concat(t.isDays?t.duration:t.durationHours," ").concat(t.durationUnits||"","</span>"),i.innerHTML=n,this.upcomingEventsContainer.appendChild(i),C.addAttributes($(i),this,this.settings.attributes,"upcoming-event-".concat(t.id))}}},renderEventDetails:function(t,e){if(this.settings.events&&"month"===this.activeView){var i=this.settings.events.filter((function(e){return e.id===t}));if(i&&0!==i.length&&(this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsContainer)){var n=$.extend(!0,{},i[0]);n.durationHours&&!n.isDays&&Ze.formateTimeString(n,this.locale,this.language),this.renderTmpl(n,this.settings.template,this.eventDetailsContainer,e>1),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsMobileContainer&&this.renderTmpl(n,this.settings.mobileTemplate,this.eventDetailsMobileContainer,e>1);var s=$(this.eventDetailsContainer).data("accordion");s&&s.destroy(),this.eventDetailsMobileContainer&&this.translate(this.eventDetailsMobileContainer),this.translate(this.eventDetailsContainer)}}},translate:function(t){var e=this;$(t).find('[data-translate="text"]').each((function(t,i){var n=$(i);n.text(B.translate(n.attr("data-translate-key")||n.text(),{showAsUndefined:!1,showBrackets:!1,language:e.settings.language,locale:e.settings.locale}))}))},renderSelectedEventDetails:function(){var t=this.getDayEvents();if(this.clearEventDetails(),t.events&&0!==t.events.length){for(var e=0;e<t.events.length;e++)this.renderEventDetails(t.events[e].id,t.events.length);$(".calendar .list-detail",this.element).css("display","block"),$(this.eventDetailsContainer).accordion(),this.eventDetailsMobileContainer&&$(this.eventDetailsMobileContainer).addClass("listview").listview({selectable:!1,hoverable:!1}),u.hasClass(this.eventDetailsContainer,"has-only-one")&&$(this.eventDetailsContainer).find(".accordion-header, .accordion-header a").off("click"),$(".accordion-pane.no-transition",this.element).removeClass("no-transition")}},renderDay:function(t){this.monthView.selectDay(t);var e=new Date(this.currentDate()),i=new Date(this.currentDate());e.setHours(0,0,0,0),i.setHours(23,59,59,999),"day"===this.activeView&&this.weekView.showWeek(e,i),"week"===this.activeView&&(e=Je.firstDayOfWeek(e,this.settings.firstDayOfWeek),i=Je.lastDayOfWeek(e,this.settings.firstDayOfWeek),this.weekView.showWeek(e,i))},clearEventDetails:function(){this.eventDetailsContainer=document.querySelector(".calendar-event-details"),this.eventDetailsMobileContainer=document.querySelector(".calendar-event-details-mobile.listview"),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML="")},clearUpcomingEvents:function(){this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML="")},filterEventTypes:function(){var t=[];if(!this.eventTypeContainer)return t;for(var e=this.eventTypeContainer.querySelectorAll(".checkbox"),i=0;i<e.length;i++){var n=e[i];n.checked||t.push(n.getAttribute("name"))}return t},renderAllEvents:function(t){if(this.settings.onRenderMonth&&!t)return this.callOnRenderMonth(),this;var e=this.filterEventTypes();this.removeAllEvents(),this.clearUpcomingEvents(),this.clearEventDetails();var i=this.settings.events.slice(0);i.sort((function(t,e){return t.starts<e.starts?-1:t.starts>e.starts?1:0}));for(var n=0;n<i.length;n++){var s=i[n];e.indexOf(s.type)>-1||this.renderEvent(s)}return this.renderSelectedEventDetails(),this.weekView&&(this.weekView.settings.filteredTypes=e,this.weekView.renderAllEvents()),this},renderEvent:function(t){var e=B.newDateObj(t.starts),i=B.isIslamic(this.locale.name),n=E.padDate(e.getFullYear(),e.getMonth(),e.getDate());if(i){var s=B.gregorianToUmalqura(e);n=E.padDate(s[0],s[1],s[2])}var a=B.newDateObj(t.ends),r=E.padDate(a.getFullYear(),a.getMonth(),a.getDate());if(i){var o=B.gregorianToUmalqura(a);r=E.padDate(o[0],o[1],o[2])}var l=this.monthView.dayMap.filter((function(t){return t.key>=n&&t.key<=r}));t.endKey=r,t.startKey=n,t=Ze.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes);for(var c=-1,d=0;d<this.monthView.dayMap.length;++d)if(this.monthView.dayMap[d].key>=n&&this.monthView.dayMap[d].key<=r){c=d;break}if(1===l.length&&this.appendEvent(l[0].elem[0],t,"event-day-start-end",c),l.length>1)for(var h=0;h<l.length;h++){var u=0===h?"event-day-start":"event-day-span";l.length-1===h&&(u="event-day-end"),this.appendEvent(l[h].elem[0],t,u,c+h)}this.appendUpcomingEvent(t,l,c)},removeAllEvents:function(){for(var t=this.monthViewContainer.querySelectorAll(".calendar-event-more"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e]);for(var i=this.monthViewContainer.querySelectorAll(".calendar-event"),n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n]);for(var s=this.monthViewContainer.querySelectorAll(".calendar-event-spacer"),a=0;a<s.length;a++)s[a].parentNode.removeChild(s[a]);for(var r=0;r<this.monthView.dayMap.length;r++)this.monthView.dayMap[r].events=[]},appendEvent:function(t,e,i,n){var s,a,r,o=this,l=t.querySelectorAll(".calendar-event").length;if(n>-1&&(this.monthView.dayMap[n].events||(this.monthView.dayMap[n].events=[]),this.monthView.dayMap[n].events.push(e)),l>=3){var c=t.querySelector(".calendar-event-more"),d=function(t,e){t.setAttribute("data-count",e),t.innerHTML="<span>+ ".concat(e," ").concat(B.translate("More",{locale:o.locale.name,language:o.language}).replace("...",""),"</span>")};return c?d(c,parseInt(c.getAttribute("data-count"),10)+1):(r=document.createElement("span"),u.addClass(r,"calendar-event-more"),d(r,1),t.querySelector(".day-container").appendChild(r),$(t).off("click.".concat("calendar")).on("click.".concat("calendar"),".calendar-event-more span",(function(){var t=o.monthView.dayMap[n].key;o.monthView.selectDay(t,!1,!0),o.changeView("day")}))),this}r=document.createElement("a"),u.addClass(r,"calendar-event",e.color,i),r.setAttribute("data-id",e.id),r.setAttribute("data-key",e.startKey),"#"===(null===(s=e.color)||void 0===s||null==s?void 0:s.substr(0,1))&&(r.style.backgroundColor=e.color,r.classList.remove(e.color)),"#"===(null===(a=e.borderColor)||void 0===a||null==a?void 0:a.substr(0,1))&&(r.style.borderLeftColor=e.borderColor),r.innerHTML='<div class="calendar-event-content">\n      '.concat(e.icon?'<span class="calendar-event-icon"><svg class="icon '.concat(e.icon,'" focusable="false" aria-hidden="true" role="presentation" data-status="').concat(e.status,'"><use href="#').concat(e.icon,'"></use></svg></span>'):"",'\n      <span class="calendar-event-title">').concat(e.shortSubject||e.subject,"</span>\n    </div>");var h=this.monthViewContainer.querySelectorAll('.calendar-event.event-day-start[data-id="'.concat(e.id,'"]'));if(h[0])for(var p=h[0].parentNode.children,g=t.querySelector(".day-container").children.length;g<p.length;g++){if(p[g].getAttribute("data-id")===e.id)break;if(!p[g].classList.contains("day-text")){var f=document.createElement("span");f.classList.add("calendar-event-spacer"),t.querySelector(".day-container").appendChild(f)}}if(t.querySelector(".day-container").appendChild(r),C.addAttributes($(r),this,this.settings.attributes,"event-".concat(e.id)),"overflow"!==this.settings.iconTooltip){var m=r.querySelector(".calendar-event-icon");m&&("function"==typeof this.settings.iconTooltip?this.settings.iconTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.iconTooltip]&&(m.setAttribute("title",e[this.settings.iconTooltip]),$(m).tooltip({content:m.innerText})))}return"overflow"!==this.settings.eventTooltip&&("function"==typeof this.settings.eventTooltip?this.settings.eventTooltip({month:this.settings.month,year:this.settings.year,event:e}):e[this.settings.eventTooltip]&&(r.setAttribute("title",e[this.settings.eventTooltip]),$(r).tooltip({content:r.innerText}))),e.shortSubject||"overflow"!==this.settings.eventTooltip&&"overflow"!==this.settings.iconToolTip||(r.setAttribute("title",e.subject),$(r).tooltip({beforeShow:function(t,e){var i=e[0].querySelector(".calendar-event-title"),n=e[0].querySelector(".calendar-event-icon"),s=n?n.querySelector(".icon").getAttribute("data-status"):"";i.offsetWidth>e[0].scrollWidth-(n?n.offsetWidth:0)?t("".concat(i.innerText).concat(s?" (".concat(B.translate(s,{locale:o.locale.name,language:o.language},!1),")"):"")):t(!1)}})),this},getEventTypeLabel:function(t){var e="";if(!t)return e;var i=this.settings.eventTypes.filter((function(e){return e.id===t}));return 1===i.length&&(e=i[0].label),e},handleEvents:function(){var t=this,e=this;this.element.off("updated.".concat("calendar")).on("updated.".concat("calendar"),(function(){t.updated()})),this.isSwitchingMonth=!1,this.element.off("monthrendered.".concat("calendar")).on("monthrendered.".concat("calendar"),(function(e,i){t.isSwitchingMonth=!0,t.modalVisible()&&t.removeModal(),t.settings.year=i.year,t.settings.month=i.month,t.renderAllEvents(),setTimeout((function(){t.isSwitchingMonth=!1}),500)})),this.element.off("change.".concat("calendar")).on("change.".concat("calendar"),".checkbox",(function(){t.renderAllEvents(!0)})),$(this.monthViewContainer).off("selected.".concat("calendar")).on("selected.".concat("calendar"),(function(){t.renderSelectedEventDetails()})),this.element.off("click.".concat("calendar","-upcoming")).on("click.".concat("calendar","-upcoming"),".calendar-upcoming-event",(function(e){var i=e.currentTarget.getAttribute("data-key");t.renderDay(i)})),this.element.off("contextmenu.".concat("calendar")).on("contextmenu.".concat("calendar"),".calendar-event",(function(i){i.stopPropagation();var n=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0},s=i.currentTarget.getAttribute("data-id"),a=t.settings.events.filter((function(t){return t.id===s}));if(t.element.triggerHandler("contextmenu",{originalEvent:i,month:t.settings.month,year:t.settings.year,event:a[0]}),!C.isSubscribedTo(e.element[0],i,"contextmenu","calendar")&&!n())return!0;if(i.preventDefault(),e.closePrevPopupmenu(),!n())return!0;var r=$(i.currentTarget);return r.popupmenu({attachToBody:!0,menuId:t.settings.menuId,eventObj:i,trigger:"immediate",offset:{y:5}}),r.off("selected.calendar").on("selected.calendar",(function(t,i){if(e.settings.menuSelected&&e.settings.menuSelected(t,i,s),"delete-event"===i.attr("data-action")&&e.deleteEvent({id:s}),"show-event"===i.attr("data-action")){var n=this.getAttribute("data-key");e.monthView.selectDay(n)}})),!1}));var i=0,n=!1;return this.element.off("click.".concat("calendar","-event")).on("click.".concat("calendar","-event"),".calendar-event",(function(s){i=setTimeout((function(){if(!n){var i=s.currentTarget.getAttribute("data-id"),a=t.settings.events.filter((function(t){return t.id===i}));if(!a||0===a.length)return;var r=$(s.currentTarget),o=r.find(".calendar-event-title");(s.currentTarget.classList.contains("event-day-span")||s.currentTarget.classList.contains("event-day-end"))&&(o=e.element.find('.event-day-start[data-id="'.concat(r.attr("data-id"),'"] .calendar-event-title'))),t.showModalWithCallback(a[0],!1,o),t.element.triggerHandler("eventclick",{month:t.settings.month,year:t.settings.year,event:a[0]})}n=!1}),100)})),this.element.off("dblclick.".concat("calendar","-event")).on("dblclick.".concat("calendar","-event"),".calendar-event",(function(e){clearTimeout(i),n=!0;var s=e.currentTarget.getAttribute("data-id"),a=t.settings.events.filter((function(t){return t.id===s}));a&&0!==a.length&&t.element.trigger("eventdblclick",{month:t.settings.month,year:t.settings.year,event:a[0]})})),this.element.off("dblclick.".concat("calendar")).on("dblclick.".concat("calendar"),"td",(function(e){var i=e.currentTarget.getAttribute("data-key");if(i&&!t.isSwitchingMonth){var n=new Date(i.substr(0,4),i.substr(4,2)-1,i.substr(6,2)),s=C.extend({},t.settings.newEventDefaults);s.startKey=i,s.endKey=i,s.starts=n,s.ends=n,e.stopPropagation(),Ze.cleanEventData(s,!1,t.currentDate(),t.locale,t.language,t.settings.events,t.settings.eventTypes),t.showModalWithCallback(s,!0),t.element.triggerHandler("dblclick",{eventData:s,api:t})}})),this.element.find(".listview").off("click.".concat("calendar","-mobile")).on("click.".concat("calendar","-mobile"),(function(e){var i=$(e.target).closest("li"),n=i.attr("data-id"),s=t.settings.events.filter((function(t){return t.id===n}));s&&0!==s.length&&(t.showModalWithCallback(s[0],!1,i),t.element.triggerHandler("eventclick",{month:t.settings.month,year:t.settings.year,event:s[0]}))})),this},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")}))},callOnRenderMonth:function(){var t=this;this.settings.onRenderMonth(this.element,(function(e,i){i&&i.length>0&&(t.settings.eventTypes=i,t.weekView&&(t.weekView.settings.eventTypes=i),t.renderEventTypes()),e&&e.length>0&&(t.settings.events=e,t.renderAllEvents(!0),t.weekView&&(t.weekView.settings.events=e,t.weekView.renderAllEvents(!0)))}),{api:t,month:this.settings.month,year:this.settings.year})},currentDate:function(){var t=this.isIslamic?this.monthView.currentDateIslamic:this.monthView.currentDate;return B.isValidDate(t)?t:new Date},getDayEvents:function(t){if(t||(t=this.currentDate()),"string"==typeof t||this.isRTL||(t=E.padDate(t.getFullYear(),t.getMonth(),t.getDate())),B.isIslamic(this.locale.name)){var e=B.gregorianToUmalqura(t);t=E.padDate(e[0],e[1],e[2])}var i=this.monthView.dayMap.filter((function(e){return e.key===t}));"month"!==this.activeView&&(i=this.weekView.dayMap.filter((function(e){return e.key===t})));var n={date:this.monthView.currentDate,events:[]};return 0===i.length?[]:(n.events=i[0].events,n.elem=i[0].elem,n)},renderTmpl:function(t,e,n,s){if("object"===i(fe)&&e){if(e instanceof $?e="".concat(e.html()):"string"==typeof e&&(E.containsHTML(e)||(e=$("#".concat(e)).html())),t.color=Ze.getEventTypeColor(t,this.settings.eventTypes),t.startsLong=B.formatDate(t.starts,{date:"long",locale:this.locale.name}),t.endsLong=B.formatDate(t.ends,{date:"long",locale:this.locale.name}),t.startsHoursLong="".concat(B.formatDate(t.starts,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(t.starts,{date:"hour",locale:this.locale.name})),t.endsHoursLong="".concat(B.formatDate(t.ends,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(t.ends,{date:"hour",locale:this.locale.name})),B.isIslamic(this.locale.name)){var a=B.gregorianToUmalqura(new Date(t.starts)),r=B.gregorianToUmalqura(new Date(t.ends));t.startsLong=B.formatDate(a,{date:"long",locale:this.locale.name}),t.endsLong=B.formatDate(r,{date:"long",locale:this.locale.name}),t.startsHoursLong="".concat(B.formatDate(a,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(a,{date:"hour",locale:this.locale.name})),t.endsHoursLong="".concat(B.formatDate(r,{date:"long",locale:this.locale.name})," ").concat(B.formatDate(r,{date:"hour",locale:this.locale.name}))}t.typeLabel=this.getEventTypeLabel(t.type);var o=fe.compile(e,{event:t});n.classList.remove("has-only-one"),s?u.append(n,o,"*"):(n.innerHTML=o,n.classList.add("has-only-one"))}},addEvent:function(t){Ze.cleanEventData(t,!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes),this.settings.events.push(t),this.renderEvent(t),this.renderSelectedEventDetails(),this.weekView&&this.weekView.addEvent(t)},updateEvent:function(t){for(var e=t.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===e&&(this.settings.events[i]=C.extend(!0,this.settings.events[i],t),Ze.cleanEventData(this.settings.events[i],!0,this.currentDate(),this.locale,this.language,this.settings.events,this.settings.eventTypes));this.renderAllEvents(),this.weekView&&this.weekView.updateEvent(t)},deleteEvent:function(t){for(var e=t.id,i=this.settings.events.length-1;i>=0;i--)this.settings.events[i].id===e&&this.settings.events.splice(i,1);this.renderAllEvents(),this.weekView&&this.weekView.deleteEvent(t)},clearEvents:function(){this.settings.events=[],this.renderAllEvents(),this.weekView&&this.weekView.clearEvents()},showEventModal:function(t,e,i){var n=this;if(this.settings.modalTemplate){this.modalVisible()&&this.removeModal(),this.modalContents=document.createElement("div"),u.addClass(this.modalContents,"calendar-event-modal","hidden"),document.getElementsByTagName("body")[0].appendChild(this.modalContents),t=Ze.addCalculatedFields(t,this.locale,this.language,this.settings.eventTypes),this.renderTmpl(t||{},this.settings.modalTemplate,this.modalContents);var s=this.getDayEvents(),a=!0;s.elem=$(s.elem);var r=6===s.elem.index()?this.isRTL?"right":"left":this.isRTL?"left":"right";i||"day"!==this.activeView||(i=$(".week-view-header-wrapper"),r=this.isRTL?"left":"right"),i||(i=s.elem);var o=this.settings.modalOptions||{content:$(this.modalContents),closebutton:!0,popover:!0,placementOpts:{parent:i,strategies:["flip","nudge","shrink-y"],parentXAlignment:"center",parentYAlignment:"center",placement:r},title:t.title||t.subject,trigger:"immediate",keepOpen:!0,extraClass:"calendar-popup calendar-popup-mobile",tooltipElement:"#calendar-popup",headerClass:t.color,initializeContent:!1};i.off("hide.calendar").on("hide.calendar",(function(){a?n.removeModal():(e(n.modalContents,t),n.element.trigger("hidemodal",{elem:n.modalContents,event:t}),n.removeModal(),a=!0)})).popover(o).off("show.calendar").on("show.calendar",(function(e,s){n.element.trigger("showmodal",{elem:n.modalContents,event:t}),s.find("#isAllDay").off().on("click.calendar",(function(t){$(t.currentTarget).prop("checked")?(s.find("#durationHours").prop("disabled",!0),s.find("#endsHourLocale").prop("disabled",!0),s.find("#startsHourLocale").prop("disabled",!0)):(s.find("#durationHours").prop("disabled",!1),s.find("#endsHourLocale").prop("disabled",!1),s.find("#startsHourLocale").prop("disabled",!1))})),s.find("#type").val(t.type).dropdown(),s.find("#comments").val(t.comments),s.find("#subject").focus(),s.find("button").on("click",(function(t){var e=i.data("tooltip"),n=t.currentTarget.getAttribute("data-action");a="submit"!==n,e&&e.hide(!0)})),s.find(".datepicker").datepicker({locale:n.settings.locale,language:n.settings.language}),s.find(".timepicker").timepicker({locale:n.settings.locale,language:n.settings.language}),n.translate(s)})),$("#calendar-popup").one("tooltipafterplace.calendar",(function(t,e){var i=e.element.find(".arrow"),n=parseInt(i.css("margin-top"),10);if(s.elem.parent().index()>=3){var a=parseInt(e.element.offset().top,10),r=a+e.element.height(),o=$("html").height()+10;if(r>o){var l=a-(r-o)-25;e.element.css("top","".concat(l,"px")),i.css("margin-top","".concat(n+(a-l)-18,"px"))}}else e.element.height()>580&&i.css("margin-top","".concat(n-18,"px"))})),this.activeElem=i}},showModalWithCallback:function(t,e,i){var n=this;this.showEventModal(t,(function(t,i){for(var s=t.querySelectorAll("input, textarea, select"),a=0;a<s.length;a++)i[s[a].id]="checkbox"===s[a].getAttribute("type")?s[a].checked:s[a].value;e?n.addEvent(i):n.updateEvent(i)}),i)},modalVisible:function(){return null!==document.querySelector(".calendar-event-modal")},removeModal:function(){this.modalContents=null,this.activeElem&&(this.activeElem.off(),this.activeElem.data("tooltip")&&this.activeElem.data("tooltip").destroy()),u.remove(document.getElementById("calendar-popup")),u.remove(document.querySelector(".calendar-event-modal")),$("#timepicker-popup").hide()},updated:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t||(t={}),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),t.locale||t.template||t.upcomingEventDays||t.mobileTemplate?(this.destroy().init(),this):(this.weekView&&t.events&&(this.weekView.settings.events=t.events),this.weekView&&t.eventTypes&&(this.weekView.settings.events=t.events),this.weekView&&t.weekViewSettings&&(this.weekView.settings=C.mergeSettings(this.element[0],t.weekViewSettings,this.weekViews.settings)),this.monthView.showMonth(this.settings.month,this.settings.year),this.renderAllEvents(),this.weekView&&t.weekViewSettings&&this.weekView.renderAllEvents(),this)},teardown:function(){return this.element&&this.element.off(),$(this.monthViewContainer).off(),this.monthView&&this.monthView.destroy(),this.weekView&&this.weekView.destroy(),this},destroy:function(){return this.eventTypeContainer&&(this.eventTypeContainer.innerHTML=""),this.monthViewContainer&&(this.monthViewContainer.innerHTML=""),this.upcomingEventsContainer&&(this.upcomingEventsContainer.innerHTML=""),this.eventDetailsContainer&&(this.eventDetailsContainer.innerHTML=""),this.eventDetailsMobileContainer&&(this.eventDetailsMobileContainer.innerHTML=""),this.removeModal(),this.teardown(),$.removeData(this.element[0],"calendar"),this}},$.fn.calendar=function(t){return this.each((function(){var e=$.data(this,"calendar");e?e.updated(t):e=$.data(this,"calendar",new ki(this,t))}))};var Ti={slidesToShow:1,startingSlide:null,loop:!1,attributes:null};function Si(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ti),this.init()}Si.prototype={init:function(){this.setElements(),this.slides.length&&(this.createControls(),this.handleEvents(),this.initActiveSlide(),this.showCollapsedView(),this.addAttributes())},setElements:function(){var t=this.settings;this.container=$(".slides",this.element),this.slidesJQ=$(".slide",this.element),this.slidesToShow=t.slidesToShow,this.slides=[],this.isVisible=!0;for(var e=0,i=this.slidesJQ.length;e<i;e++)this.slides.push({node:$(this.slidesJQ[e])});this.activeIndex=null!==t.startingSlide&&t.startingSlide>-1&&t.startingSlide<this.slides.length?t.startingSlide:0,C.addAttributes(this.element,this,this.settings.attributes)},createControls:function(){for(var t,e,i,n,s,a,r,o,l,c=this.slides.length,d='<div class="controls">',h="",u=0,p=0,g=c;p<g;p+=this.slidesToShow){e="",u++,o=1===this.slidesToShow||c-p==1,n=B.translate(o?"SlideOf":"SlidesOf"),i=o?"#slide {0} of {1}":"#slides {0} and {1} of {2}";for(var f=0;f<this.slidesToShow&&p+f<c;f++)e+="".concat(p+f+1,", ");n=n.replace(o?"{1}":"{2}",c),i=i.replace(o?"{1}":"{2}",c),r=(e=e.slice(0,-2)).lastIndexOf(","),a=e.substr(r+2),o?(l="",(t=this.slides[p].node).is(".is-disabled, [disabled]")&&!t.is('[disabled="false"]')&&(l=' disabled tabindex="-1"',this.slides[p].isDisabled=!0),t.is(".active")&&null===this.settings.startingSlide&&""===l&&(this.activeIndex=p),n=(s=t.attr("data-button-text"))&&s.length?s:n.replace("{0}",e),i=i.replace("{0}",e)):(e=e.substr(0,r),n=n.replace("{1}",a).replace("{0}",e),i=i.replace("{1}",a).replace("{0}",e)),i=i.toLowerCase().replace(/[\s,--]+/g,"-"),h+='<a href="'.concat(i,'" class="control-button hyperlink hide-focus"').concat(l,'><span class="audible">').concat(n,"</span></a>")}d+="".concat(h,"</div>"),this.isBulletsNav=this.element.width()>29*u;var m=$(".btn-previous",this.element),v=$(".btn-next",this.element);this.isBulletsNav?m.add(v).remove():(m.length||(d+=""+'<button class="btn-previous" type="button">\n            '.concat($.createIcon("left-arrow"),'\n            <span class="audible"> ').concat(B.translate("Previous"),"</span>\n          </button>")),v.length||(d+=""+'<button class="btn-next" type="button">\n            '.concat($.createIcon("right-arrow"),'\n            <span class="audible">').concat(B.translate("Next"),"</span>\n          </button>"))),this.activeIndex>0&&this.activeIndex>u-1&&(this.activeIndex=u-1),u>1&&this.element.append(d)},isVisibleInContainer:function(t){if(t&&t[0]){var e=t[0].getBoundingClientRect(),i=this.element[0].getBoundingClientRect();return e.left>i.left&&e.left<i.left+i.width&&e.top>i.top&&e.top<i.top+i.height}return-1},updateSlidesToShow:function(t){if(this.isActive)return this.settings.slidesToShow=t||1,this.updated(),this},responsiveSlidesToShow:function(t){var e=this;this.isActive&&(this.slidesToShow=t||this.settings.slidesToShow,this.unbind().slidesJQ.css("width",""),this.slides.length&&setTimeout((function(){e.createControls(),e.handleEvents(),e.initActiveSlide(),e.showCollapsedView()}),0))},show:function(t){if(this.isActive){t=void 0!==t?t:this.activeIndex,this.activeIndex=t;var e=t>0?"".concat((B.isRTL()?"":"-")+100*t,"%"):0;this.controlButtons.removeClass("is-active").eq(t).addClass("is-active"),this.container[0].style.left=e,this.isBulletsNav?(this.element.removeClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible")):(this.element.addClass("is-bullets-nav-hidden"),this.controlButtons.find("span").addClass("audible").end().eq(t).find("span").removeClass("audible")),this.isFocus&&this.isBulletsNav&&(this.isFocus=!1,this.controlButtons.eq(t).focus())}},first:function(){this.show(0)},last:function(){this.show(Math.round(this.slides.length/this.slidesToShow)-1)},prev:function(){var t,e=this;if(t=this.activeIndex>0?this.activeIndex-1:this.settings.loop?Math.round(this.slides.length/this.slidesToShow)-1:0,this.slides[t].isDisabled)return setTimeout((function(){e.prev()}),0),this.activeIndex=t,!1;this.show(t)},next:function(){var t,e=this;if(t=this.activeIndex>=Math.round(this.slides.length/this.slidesToShow)-1?this.settings.loop?0:this.activeIndex:this.activeIndex+1,this.slides[t].isDisabled)return setTimeout((function(){e.next()}),0),this.activeIndex=t,!1;this.show(t)},showCollapsedView:function(){if(this.isActive=!0,this.element.addClass("is-active"),this.container[0].style.width="".concat(100*this.slides.length,"%"),this.settings.slidesToShow>1&&this.slidesJQ.eq(0).width()*this.slidesToShow>this.element.width())this.responsiveSlidesToShow(this.slidesToShow-1);else{for(var t=0,e=this.slidesJQ.length;t<e;t++)this.slidesJQ[t].style.width="".concat(100/this.slidesToShow/this.slides.length,"%");this.show()}},addAttributes:function(){for(var t=0,e=this.controlButtons.length;t<e;t++){var i=$(this.controlButtons[t]);C.addAttributes(i,this,this.settings.attributes,"control-".concat(t+1))}},showExpandedView:function(){this.isActive=!1,this.element.removeClass("is-active"),this.element&&this.element[0]&&(this.element[0].style.width=""),this.container&&this.container[0]&&(this.container[0].style.width="",this.container[0].style.left="")},initActiveSlide:function(){if(this.slides[this.activeIndex].isDisabled)return this.next(),!1;this.show(),this.slidesJQ.addClass("is-visible")},unbind:function(){return $("body").off("resize.circlepager"),this.element.off("focus.circlepager keydown.circlepager","*"),this.controlButtons&&this.controlButtons.off("click.circlepager keydown.circlepager"),$(".btn-previous, .btn-next",this.element).off("click.circlepager"),$(".controls",this.element).remove(),this.showExpandedView(),this.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Ti)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"circlepager")},handleEvents:function(){var t=this,e=this;$(".btn-previous",this.element).on("click.circlepager",(function(e){t.prev(),e.stopImmediatePropagation()})),$(".btn-next",this.element).on("click.circlepager",(function(e){t.next(),e.stopImmediatePropagation()})),this.controlButtons=$(".control-button",this.element);for(var i=function(e,i){var n=$(t.controlButtons[e]);n.hideFocus(),n.on("click.circlepager",(function(i){i.preventDefault(),t.slides[e].isDisabled||t.show(e)}))},n=0,s=this.controlButtons.length;n<s;n++)i(n);this.element.on("focus.circlepager","*",(function(t){var i=!1;if(!e.isVisibleInContainer($(this)))for(var n=e.element.find(":focusable"),s=0,a=n.length;s<a;s++)if(e.isVisibleInContainer(n.eq(s))){n.eq(s).focus(),i=!0;break}if(t.stopPropagation(),i)return!1})),this.element.on("keydown.circlepager","*",(function(t){var i=!1,n=t.which||t.keyCode||t.charCode||0,s=$(":focusable"),a=s.index(this);if(9===n)if(t.shiftKey){for(var r=a-1;r>=0;r--)if(e.element.has(s.eq(r)).length<1||e.isVisibleInContainer(s.eq(r))){s.eq(r).focus(),i=!0;break}}else e.isVisibleInContainer(s.eq(a+1))||(e.controlButtons.first().focus(),i=!0);if(t.stopPropagation(),i)return!1})),this.controlButtons.on("keydown.circlepager",(function(t){var i=!1,n=t.which||t.keyCode||t.charCode||0,s=B.isRTL();if(-1!==[37,39].indexOf(n)&&(e.isFocus=!0,t.altKey?37===n&&!s||39===n&&s?e.first():e.last():(!s&&37===n||s&&39===n?e.prev():e.next(),i=!0)),i)return t.preventDefault(),t.stopPropagation(),!1})),$("body").on("resize.circlepager",(function(){e.responsiveSlidesToShow()})),e.element.closest(".tab-panel-container").prev(".tab-container").off("activated.circlepager").on("activated.circlepager",(function(){e.responsiveSlidesToShow()}))}},$.fn.circlepager=function(t){return this.each((function(){var e=$.data(this,"circlepager");e?e.updated(t):e=$.data(this,"circlepager",new Si(this,t))}))},$.fn.calendartoolbar=function(t){return this.each((function(){var e=$.data(this,"calendartoolbar");e?e.updated(t):e=$.data(this,"calendartoolbar",new vi(this,t))}))};var Ai={breakpoint:"phone-to-tablet",trigger:null,expandedText:B.translate("ShowLess"),collapsedText:B.translate("ShowMore")};function $i(t,e){this.settings=C.mergeSettings(t,e,Ai),this.element=$(t),this.init(),N("CompositeForm")}$i.prototype={init:function(){return this.build().handleEvents()},build:function(){var t=this.element[0].classList;t.contains("composite-form")||t.add("composite-form");var e=this.element.find(".expandable-area");return e.length?(this.hasSummary=!0,this.expandableArea=e,this.expandableAreaAPI=this.expandableArea.data("expandablearea"),this.expandableAreaAPI||(this.expandableArea.expandablearea({trigger:this.settings.trigger}),this.expandableAreaAPI=this.expandableArea.data("expandablearea")),this.expander=this.expandableAreaAPI.expander,this.setExpanderText(this.settings.expandedText)):this.hasSummary=!1,this.checkResponsive(),this},handleEvents:function(){var t=this;function e(){var e=t.expandableAreaAPI.isExpanded();t.setExpanderText(t.settings[e?"expandedText":"collapsedText"])}return $("body").off("resize.".concat("compositeform")).on("resize.".concat("compositeform"),(function(e){t.checkResponsive(e)})),this.element.on("updated.".concat("compositeform"),(function(){t.updated()})),this.hasSummary&&this.expandableArea.on("expand.".concat("compositeform"),e).on("collapse.".concat("compositeform"),e),this},checkResponsive:function(){var t=this.element[0].classList;p.isBelow(this.settings.breakpoint)?t.add("is-in-responsive-mode"):(t.remove("is-in-responsive-mode"),this.isSideOriented()&&!this.expandableAreaAPI.isExpanded()&&this.expandableAreaAPI.open())},setExpanderText:function(t){if(this.hasSummary&&t instanceof String&&t.length){var e=this.expander.find("span");e||(e=this.expander),e.text(t)}},isSideOriented:function(){return this.element[0].classList.contains("on-side")},updated:function(){return this.teardown().init()},teardown:function(){return $("body").off("resize.".concat("compositeform")),this.element.off("updated.".concat("compositeform")),this.hasSummary&&this.expandableArea.off("expand.".concat("compositeform"," collapse.").concat("compositeform")),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"compositeform")}},$.fn.compositeform=function(t){return this.each((function(){var e=$.data(this,"compositeform");e?e.updated(t):e=$.data(this,"compositeform",new $i(this,t))}))};var Ei={content:null,initializeContent:!0,title:"Contextual Action Panel",modalSettings:{buttons:null,centerTitle:!1,id:null,showCloseBtn:!1,trigger:"click",useFlexToolbar:!1}},Di=["buttons","centerTitle","id","showCloseButton","trigger","useFlexToolbar"];function Ii(t){var e={showCloseButton:"showCloseBtn"};return Di.forEach((function(i){if(-1===[null,void 0].indexOf(t[i])){var n=i;t.modalSettings||(t.modalSettings={}),e[i]?(n=e[i],t.modalSettings[n]=t[i]):t.modalSettings[i]=t[i],delete t[i],F("settings.modalSettings.".concat(n),"settings.".concat(i))}})),t}function Li(t,e){this.settings=C.mergeSettings(t,e,Ei),this.settings=Ii(this.settings),this.element=$(t),this.init()}Li.prototype={get modalAPI(){var t;return this.panel&&this.panel.length&&(t=this.panel.data("modal")),t},get toolbarAPI(){var t;return this.toolbar&&this.toolbar.length&&(t=this.toolbar[0].classList.contains("flex-toolbar")?this.toolbar.data("toolbar-flex"):this.toolbar.data("toolbar")),t},init:function(){this.setup().build().handleEvents()},setup:function(){var t,e=this.element.next(".contextual-action-panel"),i=this.id;return"string"==typeof dataModal&&(t=$("#".concat(i))).length&&(e=t),1===this.element.closest(".popupmenu").length&&(e=this.element.closest(".popupmenu").next(".contextual-action-panel")),e[0]&&(e[0].style.display="none",e.addClass("is-animating"),this.panel=e),this},build:function(){var t,e,i,n,s=this,a=this.settings.content;if(this.id=(null===(t=this.settings)||void 0===t||null===(e=null==t?void 0:t.modalSettings)||void 0===e||null==e?void 0:e.id)||(null==a||null==a?void 0:a.attr("id"))||C.uniqueId(this.element,"contextual-action-modal"),null!==(i=this.settings)&&void 0!==i&&null!==(n=null==i?void 0:i.modalSettings)&&void 0!==n&&(null==n?void 0:n.id)||(this.settings.modalSettings.id=this.id),!this.panel||!this.panel.length)if(a instanceof jQuery){if(a.is(".contextual-action-panel")?this.panel=a:(a.wrap('<div class="contextual-action-panel"></div>'),this.panel=a.parent()),this.panel.addClass("modal").appendTo("body"),a.is("iframe"))return a.ready((function(){s.completeBuild(),a.show()})),s;a.show()}else this.panel=$('<div class="contextual-action-panel">'.concat(a,"</div>")).appendTo("body"),this.panel.addClass("modal").attr("id",this.settings.modalSettings.id);return this.completeBuild(),this},completeBuild:function(){var t,e,i=!1,n=!1,s=!0;this.panel.find("svg").icon(),0===this.panel.find(".modal-content").length&&((t=this.panel.children()).is("iframe")&&(e=t.contents(),this.toolbar=e.find(".toolbar, .flex-toolbar"),i=!0),i||(t.wrapAll('<div class="modal-content"></div>').wrapAll('<div class="modal-body"></div>'),this.panel.addClass("modal")));var a=this.panel.find(".modal-header");0===a.length&&(a=$('<div class="modal-header"></div>')).insertBefore(this.panel.find(".modal-body")),this.header=a;var r=this.panel.find(".toolbar .buttonset, .flex-toolbar .buttonset");if(this.toolbar||(this.toolbar=this.panel.find(".toolbar, .flex-toolbar")),!this.toolbar.length)if(s=!1,this.settings.modalSettings.buttons&&this.settings.modalSettings.buttons.forEach((function(t){"input"===t.type&&(n=!0)})),this.settings.title&&this.settings.modalSettings.centerTitle){var o=n?'<div class="toolbar-section search"></div>':"",l='<div class="flex-toolbar">\n          <div class="toolbar-section static"></div>\n          <div class="toolbar-section title center-text">\n            <h2>'.concat(this.settings.title,"</h2>\n          </div>\n          ").concat(o,'\n          <div class="toolbar-section buttonset static"></div>\n        </div>');this.toolbar=$(l)}else if(!r.length){var c=this.settings.modalSettings.useFlexToolbar?"flex-toolbar":"toolbar",d=this.settings.modalSettings.useFlexToolbar?'<div class="toolbar-section title"><h2>'.concat(this.settings.title,"</h2></div>"):"",h=this.settings.modalSettings.useFlexToolbar?"toolbar-section buttonset":"buttonset",u='<div class="'.concat(h,'"></div>'),p=this.settings.modalSettings.useFlexToolbar&&n?'<div class="toolbar-section search"></div>':"",g='<div class="'.concat(c,'">\n          ').concat(d,"\n          ").concat(p,"\n          ").concat(u,"\n        </div>"),f=$(g);f.appendTo(this.panel.find(".modal-header")),this.toolbar=f,r=f.children(".buttonset")}if(this.toolbar.appendTo(this.header),!s){r&&(r.length||this.settings.modalSettings.centerTitle)||(r=$('<div class="toolbar-section buttonset"></div>')).appendTo(this.toolbar);var m=this.toolbar.find(".title");if(!m.length){var v=this.settings.modalSettings.centerTitle?" center-text":"";m=$('\n          <div class="toolbar-section title'.concat(v,'">\n            <h2>').concat(this.settings.title,"</h2>\n          </div>\n        ")),r?m.insertBefore(r):this.toolbar.prepend(m)}m.length||(m=$('\n          <div class="title">\n            '.concat(this.settings.title,"\n          </div>\n        ")),this.toolbar.prepend(m))}if(i||this.panel.detach().appendTo("body"),this.element.attr("data-modal")||this.element.attr("data-modal",this.settings.modalSettings.id),this.panel.attr("id")||this.panel.attr("id",this.settings.modalSettings.id),this.panel.modal(this.settings.modalSettings),this.buttons=this.panel.find(".buttonset").children("button"),this.closeButton=this.panel.find(".modal-header").find('.btn-close, [name="close"], button.close-button'),this.settings.modalSettings.showCloseBtn&&!this.closeButton.length){var b=B.translate("Close");if(this.closeButton=$('\n        <button class="btn-close" type="button" title="'.concat(b,'">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(b,"</span>\n        </button>\n      ")),this.settings.modalSettings.useFlexToolbar){var y=$('<div class="toolbar-section static"></div>').append(this.closeButton),w=this.toolbar.find(".toolbar-section.more");y.insertAfter(w.length?w:r)}else r.append(this.closeButton)}return this.closeButton.length&&this.toolbar.addClass("has-close-button"),this.toolbar.is(".toolbar")&&this.toolbar.toolbar(),this.toolbar.is(".flex-toolbar")&&this.toolbar.toolbarflex(),C.fixSVGIcons(this.element),this},handleEvents:function(){var t=this;function e(e){t.element.triggerHandler(e.type)}return this.panel.addClass("is-animating").off("open.contextualactionpanel").on("open.contextualactionpanel",(function(i){e(i),t.panel.removeClass("is-animating")})).off("close.contextualactionpanel").on("close.contextualactionpanel",(function(t){e(t)})).off("beforeopen.contextualactionpanel").on("beforeopen.contextualactionpanel",(function(i){t.settings.initializeContent&&$(this).initialize(),e(i)})).off("afteropen.contextualactionpanel").on("afteropen.contextualactionpanel",(function(){if(t.toolbar&&t.toolbar.trigger("recalculate-buttons"),t.toolbar.length){var e=t.toolbar.find(".buttonset > .is-selected");if(e.length||(e=t.toolbar.find(".buttonset > *:first-child")).is(".searchfield-wrapper")&&(e=e.children(".searchfield")),!e.length&&t.toolbar.is(".flex-toolbar"))return void(e=t.toolbar.find("button").first()).focus();var i=t.toolbar.data("toolbar");i&&i.setActiveButton(e,!0)}t.panel.find(".modal-body-wrapper").find(":focusable").first().focus(),C.fixSVGIcons(t.panel)})),t.closeButton&&t.closeButton.length&&t.closeButton.on("click.contextualactionpanel",(function(){t.handleToolbarSelected()})),this},handleToolbarSelected:function(){this.close(!0)},teardown:function(){var t=this.toolbar.children(".buttonset");this.panel.off("open.contextualactionpanel close.contextualactionpanel beforeopen.contextualactionpanel afterclose.contextualactionpanel"),t.children("*:not(.searchfield)").off("click.contextualactionpanel"),t.children(".btn-menu").each((function(){var t=$(this).data("popupmenu");t&&t.destroy()})),this.header&&this.header.remove(),this.panel.find(".modal-body").children().first().unwrap().unwrap(),this.element.removeAttr("data-modal"),this.closeButton&&this.closeButton.length&&(this.closeButton.off("click.contextualactionpanel"),delete this.closeButton),this.element.trigger("afterteardown")},close:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"immediate"===this.settings.modalSettings.trigger&&(t=!0),this.modalAPI&&this.modalAPI.close(t,!1,e)},disable:function(){this.element.prop("disabled",!0),this.panel.hasClass("is-visible")&&this.close()},enable:function(){this.element.prop("disabled",!1)},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=Ii(this.settings),this.setup(),this.modalAPI&&this.modalAPI.updated(this.settings.modalSettings),this},destroy:function(){this.modalAPI&&this.modalAPI.isOpen&&this.modalAPI.close(!0),$.removeData(this.element[0],"contextualactionpanel"),this.toolbar&&this.toolbar.data("toolbar")&&this.toolbar.data("toolbar").destroy(),this.toolbar&&this.toolbar.data("toolbarFlex")&&this.toolbar.data("toolbarFlex").destroy()},destroyAll:function(){J.destroyAll(!0)}},$.fn.contextualactionpanel=function(t){return this.each((function(){var e,i,n=null==t||null===(e=null==t?void 0:t.modalSettings)||void 0===e||null==e?void 0:e.id;!n&&null!=t&&(null==t?void 0:t.content)&&(null==t||null==t?void 0:t.content)instanceof jQuery&&(n=null==t||null===(i=null==t?void 0:t.content)||void 0===i||null==i?void 0:i.attr("id"));var s=J.findById(n);s?s.updated(t):$.data(this,"contextualactionpanel",new Li(this,t))}))},$.fn.popover=$.fn.tooltip;var Pi=["standard","range"],Mi=function(){return{locale:null,language:null,timeFormat:void 0,minuteInterval:5,secondInterval:5,mode:Pi[0],roundToInterval:!0,parentElement:null,returnFocus:!0,attributes:null}};function Ri(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Mi),this.init()}Ri.prototype={init:function(){this.setLocaleThenBuild()},setLocaleThenBuild:function(){var t=this,e=B.getLocale(this.settings.language),i=B.getLocale(this.settings.locale);return $.when(i,e).done((function(e,i){t.locale=B.cultures[e]||B.currentLocale,t.language=i||t.settings.language||t.locale.language||null,t.settings.language=t.language,t.setCurrentCalendar(),t.build().handleEvents().addAttributes()})),this},setCurrentCalendar:function(){return this.currentCalendar=B.calendar(this.locale.name,this.settings.language,this.settings.calendarName),void 0===this.settings.timeFormat&&(this.settings.timeFormat=this.currentCalendar.timeFormat||"h:mm a"),this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.build(),this},setup:function(){function t(t,e){(!e||["minute","second"].indexOf(e)<0)&&(e="minute");var i=Mi()["".concat(e,"Interval")];if(void 0===t||isNaN(t))return i;var n=parseInt(t,10);return n>0&&n<60?n:i}function e(t){return!0===t}var i;return this.id="".concat(C.uniqueId(this.element,"timepicker"),"-id"),this.hoursId="timepicker-hours-".concat(this.id.toString()),this.minutesId="timepicker-minutes-".concat(this.id.toString()),this.secondsId="timepicker-seconds-".concat(this.id.toString()),this.periodId="timepicker-period-".concat(this.id.toString()),this.element.is("[data-round-to-interval]")&&(this.settings.roundToInterval=e(this.element.attr("data-round-to-interval"))),this.element.is("[data-minute-interval]")&&(this.settings.minuteInterval=t(this.element.attr("data-minute-interval"),"minute")),this.settings.timeFormat=(i=24===parseInt(this.element.attr("data-force-hour-mode"),10)?"HH:mm":this.settings.timeFormat)&&i.toUpperCase().match("H")&&i.match("mm")?i:Mi().timeFormat,this.settings.minuteInterval=t(this.settings.minuteInterval,"minute"),this.settings.secondInterval=t(this.settings.secondInterval,"second"),this.settings.mode=function(t){return $.inArray(t,["standard","range"])>-1?t:Mi().mode}(this.settings.mode),this.settings.roundToInterval=e(this.settings.roundToInterval),this.dayPeriods=this.currentCalendar.dayPeriods,this},build:function(){return this.setup(),this.settings.parentElement?(this.settings.parentElement.empty(),this.trigger=$(),this.buildStandardPopup(),this.setupStandardEvents(),this):(this.trigger=this.element.next("svg.icon"),0===this.trigger.length&&(this.trigger=$.createIconElement("clock").insertAfter(this.element)),this.addAria().addMask().handleEvents().roundMinutes(),this)},addAria:function(){return this.element.attr({"aria-expanded":"false",role:"combobox"}),this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.find(".audible").remove(),this.label.append('<span class="audible">'.concat(B.translate("UseArrow",{locale:this.locale.name,language:this.language}),"</span>")),this},addAttributes:function(){C.addAttributes(this.element,this,this.settings.attributes),C.addAttributes(this.trigger,this,this.settings.attributes,"trigger")},handleKeys:function(){var t=this;this.element.on("keydown.timepicker",(function(e){var i=!1;return 27===e.which&&t.isOpen()&&(i=!0,t.closeTimePopup()),40!==e.which||t.isOpen()||(i=!0,t.openTimePopup()),!i||(e.stopPropagation(),e.preventDefault(),!1)}))},handleBlur:function(){var t=this;this.element.on("blur.timepicker",(function(){t.roundMinutes(),setTimeout((function(){t.isOpen()&&0===t.popup.find(":focus").length&&t.closeTimePopup()}),20)}))},is24HourFormat:function(t){return t||(t=this.settings.timeFormat),!!t&&(t.match("H")||[]).length>0},hourText:function(t){return((this.settings.timeFormat.toUpperCase().match("HH")||[]).length>0&&t<10?"0":"")+t},hasSeconds:function(t){return t||(t=this.settings.timeFormat),(t.match("ss")||[]).length>0},hasDayPeriods:function(t){return t||(t=this.settings.timeFormat),(t.match("a")||[]).length>0},getTimeSeparator:function(){return this.currentCalendar.dateFormat.timeSeparator},roundMinutes:function(){if(E.toBoolean(this.settings.roundToInterval)){var t=this.element.val(),e=this.getTimeSeparator(),i=t?t.split(e):[],n=this.settings.minuteInterval;if(i[1]){if(!this.is24HourFormat(this.settings.timeFormat)){var s=i[1].split(" ");i[1]=s[0],s[1]&&i.push(s[1])}if(i[1]=parseInt(i[1],10),i[1]%n!=0){i[1]=Math.round(i[1]/n)*n,i[1]=i[1].toString(),i[1]=(i[1].length<2?"0":"")+i[1],"60"===i[1]&&(i[1]="00",i[0]=(parseInt(i[0],10)+1).toString());var a="".concat(i[0]+e+i[1]," ").concat(i[2]?i[2]:"");this.element.val(a)}}}},addMask:function(){this.element.data("mask")&&"object"===i(this.element.data("mask"))&&this.element.data("mask").destroy(),this.element.data("mask",void 0);var t={keepCharacterPositions:!0,process:"date",patternOptions:{format:this.settings.timeFormat}};return this.element[0].getAttribute("data-validate")||this.element.attr("data-validate","time").attr("data-validation-events",JSON.stringify({time:"blur change enter"})).validate(),t&&this.element.mask(t),this},buildStandardPopup:function(){var t,e=this,i=$('<div class="timepicker-popup-content"></div>'),n=this.getTimeSeparator(),s="";this.initValues=e.getTimeFromField();var a=$('<div class="time-parts"></div>').appendTo(i),r=this.is24HourFormat(),o=this.hasSeconds(),l=this.hasDayPeriods(),c=r?0:1,d=r?24:13;for(this.hourSelect=$('<select id="'.concat(this.hoursId,'" data-options="{\'noSearch\': \'true\'}" class="hours dropdown"></select>'));c<d;)t="",parseInt(e.initValues.hours,10)===c&&(t=" selected"),e.hourSelect.append($("<option".concat(t,">").concat(e.hourText(c),"</option>"))),c++;a.append($('<label for="'.concat(this.hoursId,'" class="audible">').concat(B.translate("Hours",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.hourSelect),a.append($('<span class="label colons">'.concat(n,"</span>")));var h=0;for(this.minuteSelect=$('<select id="'.concat(this.minutesId,'" data-options="{\'noSearch\': \'true\'}" class="minutes dropdown"></select>'));h<=59;)s=h<10?"0".concat(h):h,t="",parseInt(e.initValues.minutes,10)===h&&(t=" selected"),e.minuteSelect.append($("<option".concat(t,">").concat(s,"</option>"))),h+=e.settings.minuteInterval;if(this.minuteSelect.find("option[selected]").length||this.minuteSelect.prepend($("<option selected>".concat(e.initValues.minutes,"</option>"))),a.append($('<label for="'.concat(this.minutesId,'" class="audible">').concat(B.translate("Minutes",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.minuteSelect),o){var u=0;for(this.secondSelect=$('<select id="'.concat(this.secondsId,'" data-options="{\'noSearch\': \'true\'}" class="seconds dropdown"></select>'));u<=59;)s=u<10?"0".concat(u):u,t="",(parseInt(e.initValues.seconds,10)===u||!e.initValues.seconds&&"00"===s)&&(t=" selected"),this.secondSelect.append($("<option".concat(t,">").concat(s,"</option>"))),u+=e.settings.secondInterval;this.secondSelect.find("option[selected]").length||this.secondSelect.prepend($("<option selected>".concat(e.initValues.seconds,"</option>"))),a.append($('<span class="label colons">'.concat(n,"</span>"))),a.append($('<label for="'.concat(this.secondsId,'" class="audible">').concat(B.translate("Seconds",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.secondSelect)}if(!r&&l){this.periodSelect=$('<select id="'.concat(this.periodId,'" data-options="{\'noSearch\': \'true\'}" class="period dropdown"></select>')),a.append($('<span class="label colons"></span>'));for(var p=this.currentCalendar.dayPeriods,g=0,f=new RegExp(e.initValues.period,"i");g<2;)t="",f.test(p[g])&&(t=" selected"),this.periodSelect.append($('<option value="'.concat(p[g],'"').concat(t,">").concat(p[g],"</option>"))),g++;a.append($('<label for="'.concat(this.periodId,'" class="audible">').concat(B.translate("TimePeriod",{locale:this.locale.name,language:this.language}),"</label>"))),a.append(this.periodSelect)}if(this.settings.parentElement)this.settings.parentElement.append(i),e.popup=this.settings.parentElement.find(".timepicker-popup-content").addClass("timepicker-popup").attr("id","timepicker-popup");else{i.append('<div class="modal-buttonset"><button type="button" class="btn-modal-primary set-time">'.concat(B.translate("SetTime",{locale:this.locale.name,language:this.language}),"</button></div>"));var m=this.element,v=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(v="center",m=this.element.next(".icon")),this.trigger.popover({content:i,trigger:"immediate",placement:"bottom",placementOpts:{parent:m,parentXAlignment:v,strategies:["flip","nudge","shrink"]},tooltipElement:"#timepicker-popup"}).on("show.timepicker",(function(t,i){e.afterShow(i)})).on("hide.timepicker",(function(){e.settings.returnFocus&&e.element.focus()}))}this.trigger.data("tooltip")&&(e.popup=this.trigger.data("tooltip").tooltip,e.popup.addClass("timepicker-popup"))},afterShow:function(t){var e=this;t.find("button").button(),this.hourSelect.val(this.initValues.hours),this.hourSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.hours),this.minuteSelect.val(this.initValues.minutes),this.minuteSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.minutes),C.addAttributes(this.hourSelect.data("dropdown").wrapper.find(".dropdown"),this,this.settings.attributes,"hours"),C.addAttributes(this.minuteSelect.data("dropdown").wrapper.find(".dropdown"),this,this.settings.attributes,"minutes"),this.secondSelect&&(this.secondSelect.val(this.initValues.seconds),this.secondSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.seconds),C.addAttributes(this.secondSelect.data("dropdown").wrapper.find(".dropdown"),this,this.settings.attributes,"seconds")),e.hasDayPeriods()&&(this.periodSelect.val(this.initValues.period),this.periodSelect.data("dropdown").pseudoElem.find("span").text(this.initValues.period),C.addAttributes(this.periodSelect.data("dropdown").wrapper.find(".dropdown"),this,this.settings.attributes,"period")),t.find("div.dropdown").first().focus(),t.find(".set-time").off("click.timepicker").on("click.timepicker",(function(t){t.preventDefault(),e.setTimeOnField(),e.closeTimePopup()})),C.addAttributes(t.find(".set-time"),this,this.settings.attributes,"btn"),this.settings.parentElement||t.on("keydown.timepicker","button, div.dropdown",(function(t){return 9!==(t.keyCode||t.charCode||0)||(e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)}))},containFocus:function(t){var e=t.shiftKey,i=this.popup.find(":focusable"),n=i.index($(":focus")),s=n+1>=i.length?0:n+1,a=n-1<0?i.length:n-1;n=e?a:s,i.eq(n).focus()},setupStandardEvents:function(){var t=this;t.popup.on("touchend.timepicker touchcancel.timepicker",".set-time",(function(t){t.preventDefault(),t.target.click()})).on("keydown.timepicker","input.dropdown",(function(e){var i=!1;if(27===e.which&&(i=!0,t.closeTimePopup(),t.element.focus()),32===e.which&&(i=!0,t.popup.find(".set-time").click()),37===e.which||39===e.which){i=!0;var n=t.popup.find('input[id$="-shdo"]');if(37===e.which){var s=n.eq(n.index(this)-1);s&&0!==s.length||(s=n.eq(n.length)),s.focus()}if(39===e.which){var a=n.eq(n.index(this)+1);a&&0!==a.length||(a=n.eq(0)),a.focus()}}return!i||(e.preventDefault(),e.stopPropagation(),!1)})),t.trigger.on("hide.timepicker",(function(){t.onPopupHide()}))},buildRangePopup:function(){},setupRangeEvents:function(){},getTimeFromField:function(t){var e,i,n=this,s=t||this.element.val(),a=this.getTimeSeparator(),r={};e=(s=(s=s.replace(/[T\s:.-]/g,a).replace(/z/i,"")).replace("","".concat(a))).split(a);var o=this.currentCalendar.timeFormat.toLowerCase().indexOf("a"),l=-1!==o&&o<this.currentCalendar.timeFormat.toLowerCase().indexOf("h");!this.is24HourFormat()&&l&&(e=[e[1],e[2],e[0]]);var c,d=this.currentCalendar.dayPeriods;function h(t){return t.replace(/^\s+|\s+$/g,"")}function u(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}return e[2]&&(d[0].indexOf(".")>-1||d[1].indexOf(".")>-1)&&(d[0].replace(".","")===e[2]&&(e[2]=d[0]),d[1].replace(".","")===e[2]&&(e[2]=d[1])),this.is24HourFormat()||l||(i=e[e.length-1].split(" "),e.pop(),e=e.concat(i)),e[0]&&e[0].length&&!isNaN(e[0])||(e[0]="1"),e[0]=parseInt(e[0],10),isNaN(e[0])||(e[0]="".concat(parseInt(e[0],10))),r.hours=n.hourText(e[0]),e[1]?(e[1]=h(e[1]),e[1]=u(e[1]),r.minutes=e[1]):r.minutes="00",(c=e[2])?(c=h(c),n.hasSeconds()?(c=u(c),r.seconds=c):(function(t){return n.dayPeriods.indexOf(t)>-1}(c)||(c=n.translateDayPeriod("AM")),r.period=c)):(n.hasSeconds()&&(c="00",r.seconds=c),n.is24HourFormat()||(c=n.translateDayPeriod("AM"),r.period=c)),e[3]?(e[3]=h(e[3]),r.period=e[3]):!this.is24HourFormat()&&this.hasSeconds()&&(r.period=this.translateDayPeriod("AM")),r},getTimeFromField2:function(t){function e(t){return!t||isNaN(t)?"00":t=(t=parseInt(t,10))<10?"0".concat(t):t}var i=this.hasSeconds()?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour,n=this.hasSeconds()?"timestamp":"hour",s=B.parseDate(t||this.element.val(),{date:n}),a=(s?s.getHours():"1").toString(),r=(a>=12?this.translateDayPeriod("PM"):this.translateDayPeriod("AM")).toString();!this.is24HourFormat()&&a>12&&(a=(parseInt(a,10)-12).toString()),this.is24HourFormat()||"0"!==a||(a="12");var o=i.indexOf("a")>-1?r:void 0,l=s?s.getMinutes():"00",c=s?s.getSeconds():"00";return{hours:e(a),minutes:e(l),seconds:e(c),period:o}},translateDayPeriod:function(t){return/am|pm|AM|PM/i.test(t)?(this.currentCalendar.dayPeriods||["AM","PM"])[/AM|am/i.test(t)?0:1]:t},setTimeOnField:function(){var t,e,i,n,s=this.hourSelect?null===(t=this.hourSelect[0])||void 0===t||null==t?void 0:t.value:"",a=this.minuteSelect?null===(e=this.minuteSelect[0])||void 0===e||null==e?void 0:e.value:"",r=this.secondSelect?null===(i=this.secondSelect[0])||void 0===i||null==i?void 0:i.value:"",o=(this.periodSelect?null===(n=this.periodSelect[0])||void 0===n||null==n?void 0:n.value:"").toUpperCase(),l=this.getTimeSeparator(),c="".concat(s).concat(l).concat(a).concat(this.hasSeconds()?l+r:"");c+=(o=this.is24HourFormat()||""!==o?o:document.querySelector("#".concat(this.periodId,"-shdo")).value)?" ".concat(this.translateDayPeriod(o)):"",this.element.val(c).trigger("change"),this.element.focus()},isOpen:function(){return!(!this.popup||!this.popup.is(":visible"))},openTimePopup:function(){this.setup(),this.element.is(":disabled")||this.element.attr("readonly")||(this.popup&&!this.popup.hasClass("is-hidden")&&this.closeTimePopup(),this.element.addClass("is-active is-open"),"range"===this.settings.mode?(this.buildRangePopup(),this.setupRangeEvents()):(this.buildStandardPopup(),this.setupStandardEvents()),this.element.attr({"aria-expanded":"true"}),this.popup.find("div.dropdown").first().focus())},closeTimePopup:function(){this.trigger.data("tooltip")&&this.trigger.data("tooltip").hide()},onPopupHide:function(){if("standard"===this.settings.mode){var t=this.hourSelect,e=this.minuteSelect,i=this.secondSelect,n=this.periodSelect;t&&t.data("dropdown")&&"function"==typeof t.data("dropdown").destroy&&t.data("dropdown").destroy(),e&&e.data("dropdown")&&"function"==typeof e.data("dropdown").destroy&&e.data("dropdown").destroy(),this.hasSeconds()&&i&&i.data("dropdown")&&"function"==typeof i.data("dropdown").destroy&&i.data("dropdown").destroy(),this.hasDayPeriods()&&n&&n.data("dropdown")&&"function"==typeof n.data("dropdown").destroy&&n.data("dropdown").destroy(),this.popup.off("click.timepicker touchend.timepicker touchcancel.timepicker keydown.timepicker")}this.element.attr({"aria-expanded":"false"}),this.trigger.off("hide.timepicker show.timepicker"),this.trigger.data("tooltip").destroy(),this.trigger.data("tooltip",void 0),$("#timepicker-popup").remove(),this.element.removeClass("is-active is-open")},toggleTimePopup:function(){this.isOpen()?this.closeTimePopup():this.openTimePopup()},value:function(t){var e=this.element.val();if(!t||!1===t)return e;var i=this.currentCalendar.dateFormat.timeSeparator,n=new RegExp(i,"g"),s=(e=e.replace(n,"")).split(" ");return s[0].length<4&&(e="0".concat(s[0]).concat(s[1]?s[1]:"")),e},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},teardown:function(){this.trigger.off("keydown.timepicker"),this.element.off("focus.timepicker blur.timepicker keydown.timepicker"),this.popup&&this.closeTimePopup(),this.trigger.remove();var t=this.element.data("mask");return t&&"function"==typeof t.destroy&&t.destroy(),$.removeData(this.element[0],"validate"),$.removeData(this.element[0],"validationEvents"),this.element.removeAttr("data-validate").removeData("validate validationEvents"),this.label.find(".audible").remove(),$("#timepicker-popup").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"timepicker")},handleEvents:function(){var t=this;return this.trigger.off("click.timepicker").on("click.timepicker",(function(){t.toggleTimePopup()})),this.handleKeys(),this.handleBlur(),this}},$.fn.timepicker=function(t){return this.each((function(){var e=$.data(this,"timepicker");e?e.updated(t):e=$.data(this,"timepicker",new Ri(this,t))}))};var Bi=new function(){var t=this;this.ValidationTypes=[],this.ValidationTypes.error={type:"error",titleMessageID:"Error",pagingMessageID:"ErrorOnPage",errorsForm:!0},this.ValidationTypes.alert={type:"alert",titleMessageID:"Alert",pagingMessageID:"AlertOnPage",errorsForm:!1},this.ValidationTypes.success={type:"success",titleMessageID:"Success",pagingMessageID:"SuccessOnPage",errorsForm:!1},this.ValidationTypes.confirm=this.ValidationTypes.success,this.ValidationTypes.info={type:"info",titleMessageID:"Info",pagingMessageID:"InfoOnPage",errorsForm:!1},this.ValidationTypes.icon={type:"icon",titleMessageID:"Icon",pagingMessageID:"IconOnPage",errorsForm:!1,icon:"user-profile"},this.rules={required:{isNotEmpty:function(t,e){return!(!("placeholder"in document.createElement("input"))&&e&&(t===e.attr("placeholder")||t===B.translate("Required")))&&("string"==typeof t?(t=$.trim(t.replace(/<\/?[^>]*>/g,"")),0!==$.trim(t).length):"number"==typeof t?!isNaN(t):$.isArray(t)?t.length>0:!!t)},isRadioChecked:function(t){var e=t.attr("name");return e&&e.length&&$('input[name="'.concat(e,'"]:radio:checked')).length},check:function(t,e){this.message=B.translate("Required");return!(!$(e).is(".datepicker")||!$("#monthview-popup").is(":visible"))||(e.is(":radio")?this.isRadioChecked(e):this.isNotEmpty(t,e))},message:"Required",type:"error",id:"required"},date:{check:function(t,e){if(this.message=B.translate("InvalidDate"),t instanceof Date)return t&&t.getTime&&!isNaN(t.getTime());var i=t.indexOf(":")>-1?B.calendar().dateFormat.datetime:B.calendar().dateFormat.short,n=null;e&&e.data("datepicker")&&(i=(n=e.data("datepicker")).pattern);var s=!("MMMM"===i||"MMM"===i||"MM"===i||"MMMM d"===i||"d MMMM"===i||"yyyy"===i);return n&&(i={locale:n.locale.name,pattern:i,calendarName:n.currentCalendar.name}),!(void 0===B.parseDate(t,i,s)&&""!==t)},message:"Invalid Date",type:"error",id:"date"},availableDate:{check:function(e,n){this.message=B.translate("UnavailableDate");var s=!0;if(""===e)return s;if(!t.rules.date.check(e,n))return s=!1,this.message="",s;var a,r,o,l,c=n.data("datepicker"),d=c?c.settings:{},h=Object.keys(d).length>0,u=e;if("string"==typeof u){var p="locale"!==d.dateFormat?d.dateFormat:B.calendar().dateFormat.short;if(d.showTime){var g=d.timeFormat||B.calendar().timeFormat;p+=" ".concat(g)}c&&c.isIslamic&&(p={pattern:c.pattern,locale:c.locale.name}),u=B.parseDate(u,p)}c&&c.isIslamic&&u instanceof Date&&(u=B.umalquraToGregorian(u.getFullYear(),u.getMonth(),u.getDate()));var f=d.useUTC?B.dateToUTC(u):u;if(f&&h&&"function"==typeof d.disable.callback)return!d.disable.callback(f.getFullYear(),f.getMonth(),f.getDate());if(f instanceof Array)return s;if(f&&h){o=d.useUTC?B.dateToUTC(new Date(d.disable.minDate)).setHours(0,0,0,0):new Date(d.disable.minDate).setHours(0,0,0,0),l=d.useUTC?B.dateToUTC(new Date(d.disable.maxDate)).setHours(0,0,0,0):new Date(d.disable.maxDate).setHours(0,0,0,0),-1!==d.disable.dayOfWeek.indexOf(f.getDay())&&(s=!1);var m=f.getFullYear();((f=f.setHours(0,0,0,0))<=o||f>=l)&&(s=!1),/string|number/.test(i(d.disable.years))&&(d.disable.years=[d.disable.years]);for(var v=0,b=d.disable.years.length;v<b;v++)if(m===Number(d.disable.years[v])){s=!1;break}for(d.disable.dates.length&&"string"==typeof d.disable.dates&&(d.disable.dates=[d.disable.dates]),a=0,r=d.disable.dates.length;a<r;a++)if(f===(d.useUTC?B.dateToUTC(d.disable.dates[a]):new Date(d.disable.dates[a])).setHours(0,0,0,0)){s=!1;break}}return h&&(s=!!(s&&!d.disable.isEnable||!s&&d.disable.isEnable)),s},message:"Unavailable Date",type:"error",id:"availableDate"},rangeDate:{check:function(e,i){var n=this;this.message=B.translate("rangeDate");var s=!0,a=i.data("datepicker");if(a){var r=a.settings,o=e.split(r.range.separator),l=function(e,a){i.val(a),n.message="".concat(t.rules[e].message," (").concat(a,")"),t.rules[e].check(a,i)||(s=!1)};if(e.indexOf(a.pattern)>-1){if(1===o.length)l("date",o[0]);else if(2===o.length){var c=o[0]===a.pattern?1:0;l("date",o[c]),s&&l("availableDate",o[c])}}else 1===o.length?(l("date",o[0]),s&&l("availableDate",o[0])):2===o.length&&(l("date",o[0]),s&&l("date",o[1]),s&&l("availableDate",o[0]),s&&l("availableDate",o[1]))}return i.val(e),s},message:"Range Dates",type:"error",id:"rangeDate"},email:{check:function(t){this.message=B.translate("EmailValidation");return!t.length||/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,16}(?:\.[a-z]{2})?)$/i.test(t)},message:"EmailValidation",type:"error",id:"email"},enableSubmit:{check:function(e,i){var n=i.closest(".signin").find('button[type="submit"]');return e.length&&(t.rules.email.check(e)||t.rules.passwordConfirm.check(e,i))?n.enable():n.disable(),!0},message:"",type:"error",id:"enableSubmit"},emailPositive:{check:function(e,i){if($.trim(e).length&&!i.is("[readonly]")){t.rules.emailPositive.positive=!0,this.message=B.translate("EmailValidation");var n=t.rules.email.check(e,i);return n&&(this.message=""),n}return t.rules.emailPositive.positive=!1,!0},message:"EmailValidation",type:"error",id:"emailPositive"},passwordReq:{check:function(t){this.message=B.translate("PasswordValidation");return!t.length||t.match(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{10,}$/)},message:"PasswordValidation",type:"error",id:"passwordReq"},passwordConfirm:{check:function(e,i){this.message=B.translate("PasswordConfirmValidation");var n=$('input[type="password"]:not('.concat(i.attr("id"),")"),i.closest(".signin")).eq(0).val(),s=e===n&&t.rules.passwordReq.check(n);return!e.length||s},message:"PasswordConfirmValidation",type:"error",id:"passwordConfirm"},time:{check:function(t,e){t=t.replace(/ /g,""),this.message=B.translate("InvalidTime");var i=e&&e.data("timepicker"),n=i?e.data("timepicker").settings:{},s=n&&n.timeFormat?n.timeFormat:B.calendar().timeFormat;if(e.attr("data-options")&&n&&!n.timeFormat){var a=JSON.parse(e.attr("data-options"));a.patternOptions&&a.patternOptions.format&&(s=a.patternOptions.format)}var r,o=(s.match("HH")||s.match("H")||[]).length>0,l=o?24:12,c=t.indexOf(B.calendar().dateFormat.timeSeparator),d=0,h=0,u=0;if(""===t)return!0;if(d=parseInt(t.substring(0,c),10),h=parseInt(t.substring(c+1,c+3),10),i&&(d=(r=i.getTimeFromField()).hours,h=r.minutes,i.hasSeconds()&&(u=r.seconds)),d.toString().length<1||isNaN(d)||parseInt(d,10)<0||parseInt(d,10)>l)return!1;if(h.toString().length<1||isNaN(h)||parseInt(h,10)<0||parseInt(h,10)>59)return!1;if(u.toString().length<1||isNaN(u)||parseInt(u,10)<0||parseInt(u,10)>59)return!1;if(!o){if(parseInt(d,10)<1)return!1;var p=new RegExp(B.calendar().dayPeriods[0],"i"),g=new RegExp(B.calendar().dayPeriods[1],"i");if(0===(t.match(p)||t.match(g)||[]).length)return!1}return!0},message:"Invalid Time",type:"error",id:"time"},test:{check:function(t){return"1"===t},message:"Value is not valid (test).",type:"error",id:"test"}}},Oi={title:"(Title)",message:"(Content)",position:"top right",audibleOnly:!1,progressBar:!0,timeout:6e3,allowLink:!1,draggable:!1,savePosition:!1,uniqueId:null};function Fi(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,Oi),this.init()}Fi.prototype={init:function(){this.show()},show:function(){var t=this,e=this.settings,i=parseFloat(S.convertDelayToFPS(e.timeout)),n=e.allowLink?h.stripTags(e.message,"<a><br><p>"):h.stripHTML(e.message),s=!1,a=100;this.uniqueId=e.uniqueid?this.generateUniqueId("usersettings-position"):"";var r=$("#toast-container".concat(this.uniqueId)),o=$('\n      <div class="toast">\n        <span class="toast-title">'.concat(h.stripHTML(e.title),'</span>\n        <span class="toast-message">').concat(n,"</span>\n      </div>")),l=$('\n      <button type="button" class="btn-icon btn-close" title="'.concat(B.translate("Close"),'" aria-hidden="true">\n        ').concat($.createIcon("close"),'\n        <span class="audible">').concat(B.translate("Close"),"</span>\n      </button>\n    ")),c=$('<div class="toast-progress"></div>');r.length||(r=$('<div id="toast-container'.concat(this.uniqueId,'" class="toast-container" aria-relevant="additions" aria-live="polite"></div>')).appendTo("body")),r.removeClass("toast-top-left toast-top-right toast-bottom-right toast-bottom-left").addClass("toast-".concat(e.position.replace(" ","-"))),e.timeout=e.audibleOnly?100:e.timeout,e.progressBar&&o.append(c),r.append(o),o.addClass(e.audibleOnly?"audible":"effect-scale"),o.append(l),t.createDraggable(o,r);var d=r.children().length;this.toastIndex=d;for(var u=0,p=this.element.find(".toast-container").children();u<p.length;u++)d=p.length;C.addAttributes(o,this,this.settings.attributes),C.addAttributes(o.find("button"),this,this.settings.attributes,"btn-close");var g=new U({duration:S.convertDelayToFPS(e.timeout),timeoutCallback:function(){t.remove(o,d)},updateCallback:function(t){a=(t.duration-t.elapsedTime)/i*100,B.isRTL()&&(a=100-a),e.progressBar&&(c[0].style.width="".concat(a,"%"))}});function f(e){g.destroy(!0),t.remove(e,d)}G.register(g),$(document).on("keydown.toast-".concat(d," keyup.toast-").concat(d),(function(t){var e=(t=t||window.event).which||t.keyCode;t.ctrlKey&&80===e&&(s="keydown"===t.type,g[s?"pause":"resume"]()),"keydown"===t.type&&27===e&&(t.stopImmediatePropagation(),t.preventDefault(),f(o))})),o.on("mousedown.toast touchstart.toast mouseup.toast touchend.toast",(function(t){s=!!/mousedown|touchstart/i.test(t.type),g[s?"pause":"resume"]()})),l.on("click.toast",(function(){f(o)}))},createDraggable:function(t,e){var i=this;if(this.settings.draggable&&t[0]&&e[0]){var n=m.features.touch,s=e.parent();e.css({top:"",left:"",right:""});var a=e[0].getBoundingClientRect(),r=this.restorePosition(),o=a;r&&((o={top:r.top,left:r.left,width:t.outerWidth(),height:t.outerHeight()}).right=o.left+o.width,o.bottom=o.top+o.height,this.isPosInViewport(o)||(o=a));var l={top:"".concat(o.top,"px"),left:"".concat(o.left,"px")};e.is(".toast-bottom-right, .toast-top-right")&&(l.right="auto"),e.css(l),e.addClass("is-draggable");t.off("mousedown.toast touchstart.toast").on("mousedown.toast touchstart.toast",(function(t){n||t.preventDefault(),$(t.target).is("a, .btn-close")||e.drag({containment:"document"}).off("dragstart.toast").on("dragstart.toast",(function(){t.stopImmediatePropagation(),e.attr("aria-grabbed","true"),s.attr("aria-dropeffect","move")})).off("dragend.toast").on("dragend.toast",(function(){e.removeAttr("aria-grabbed"),s.removeAttr("aria-dropeffect"),i.savePosition({left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))});var t=e.data("drag");t&&"function"==typeof t.destroy&&t.destroy()}))}));var c=function(t){var e=t.dragApi,i=t.x,n=t.y,s=e.getElementsFromPoint(i,n)[0];return!$(s).closest(".toast").length},d=function(t){var e=$.Event("keyup");$.extend(e,{ctrlKey:!0,altKey:!0,keyCode:80}),t.trigger(e)},h=$(document);h.off("mouseup.toast").on("mouseup.toast",(function(t){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var n=e.data("drag");if(n&&"function"==typeof n.getElementsFromPoint){var s={dragApi:n,x:t.pageX,y:t.pageY};c(s)&&d(h)}}})).off("touchend.toast").on("touchend.toast",(function(t){if(1===$("#toast-container".concat(i.uniqueId," .toast")).length){var n=e.data("drag");if(n&&"function"==typeof n.getElementsFromPoint){var s=t.originalEvent;if(s.targetTouches.length>1)return;var a=s.changedTouches[0],r={dragApi:n,x:a.pageX,y:a.pageY};c(r)&&d(h)}}}))}},savePosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings.savePosition&&this.canUseLocalStorage()&&!$.isEmptyObject(t)&&(localStorage[this.uniqueId]=JSON.stringify(t),this.element.triggerHandler("settingschanged",[t]))},restorePosition:function(){if(!this.settings.savePosition||!this.canUseLocalStorage())return null;var t=localStorage[this.uniqueId];return t?JSON.parse(t):null},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},generateUniqueId:function(t){return t=null==t?"":t,"toast-".concat(this.settings.uniqueid||"","-").concat(t).replace(/--/g,"-").replace(/-$/g,"")},isPosInViewport:function(t){return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},unbind:function(t,e){return t.closest(".toast-container").off("dragstart.toast dragend.toast"),t.off("mousedown.toast mouseup.toast touchstart.toast touchend.toast"),t.find(".btn-close").off("click.toast"),void 0!==e&&$(document).off(["keydown.toast-".concat(e),"keyup.toast-".concat(e)].join(" ")),this},remove:function(t,e){var i=this,n=function(){t.remove(),!$("#toast-container".concat(i.uniqueId," .toast")).length&&i.destroy()};if(this.unbind(t,e),this.settings.audibleOnly)n();else{t.addClass("effect-scale-hide");var s=new U({duration:20,updateCallback:function(){},timeoutCallback:function(){n()}});G.register(s)}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,Oi)),this.show()},destroy:function(){var t=this,e=$("#toast-container".concat(this.uniqueId));e[0]&&[].slice.call(e[0].querySelectorAll(".toast")).forEach((function(e){t.settings.audibleOnly=!0,t.remove($(e))}));$(document).off(["mouseup.toast","touchend.toast"].join(" ")),e.remove(),delete this.toastIndex,delete this.uniqueId,$.removeData(this.element[0],"toast")}},$.fn.toast=function(t){return this.each((function(){var e=$.data(this,"toast");e?e.updated(t):e=$.data(this,"toast",new Fi(this,t))}))};var Ni={inline:!0,message:"",type:"error",showTooltip:!1,isHelpMessage:!1};function zi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ni),this.init()}zi.prototype={init:function(){this.fields="input, textarea, select, div[data-validate], div[data-validation]",this.isPlaceholderSupport=!!("placeholder"in document.createElement("input")),this.inputs=this.element.find(this.fields),this.element.is(this.fields)&&(this.inputs=$().add(this.element)),this.timeout=null,this.attachEvents()},extractEvents:function(t){if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===i(t)){var e="";for(var n in t)-1===e.indexOf(t[n])&&(e+="".concat(t[n]," "));t=e=e.split(" ").join(".validate ")}return t},filterValidations:function(t,e){var n=[];if(!t)return[];if(t.indexOf("{")>-1&&(t=JSON.parse(t.replace(/'/g,'"'))),"object"===i(t))for(var s in t)e&&t[s].indexOf(e)>-1&&n.push(s);return n},setErrorIconOpacity:function(t){if(t.is(":text")&&t.is('[data-error-type="tooltip"]')){var e=this.calculateTextWidth(t.val()),i=t.outerWidth()-35;t.closest(".field, .field-short").find(".icon-error")[e>i?"addClass":"removeClass"]("lower-opacity")}},calculateTextWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");return i.font=e||"14px arial",i.measureText(t).width},attachEvents:function(){var t=this,e="[data-validate],[data-validation]";this.inputs.each((function(){var t=$(this),e=t.attr("data-validate")||t.attr("data-validation");e&&e.indexOf("required")>-1&&t.addClass("required")})),this.inputs.filter("input, textarea, div").filter(e).not("input[type=file]").each((function(){var e=$(this),i=e.attr("data-validation-events"),n=t.extractEvents(i||"blur.validate change.validate keyup.validate");n.indexOf("enter.validate")>-1&&e.off("keypress.enter.validate").on("keypress.enter.validate",(function(e){var i=$(this);13===e.which&&t.validate(i,!0,e)})),e.off(n).on(n,(function(i){if("keyup"===i.type){if(9===i.keyCode)return;t.setErrorIconOpacity(e)}var n=$(this),s=n.data("handleEvent".concat([i.type||""]));(!n.is("[readonly]")||n.parent().is(".field-fileupload")||n.is(".lookup.is-not-editable"))&&(!s||s.type!==i.type||"validate"!==i.handleObj.namespace||n.is(".lookup")||n.closest(".modal:visible").length)&&(n.data("handleEvent".concat([i.type||""]),i.handleObj),setTimeout((function(){n.closest(".modal-engaged").length&&!n.closest(".modal-body").length||t.validate(e,!0,i)}),300))}))})),this.inputs.filter("input[type=checkbox]").filter(e).off("click.validate").on("click.validate",(function(e){t.validate($(this),!0,e)})),this.inputs.filter(":radio").off("click.validate").on("click.validate",(function(e){var i=$(this).parent().find(".radio").first();t.validate(i,!0,e)}));var i=this.inputs.filter("select").filter(e);if(i.length&&(i.off("change.validate listopened.validate listclosed.validate").on("change.validate",(function(e){t.validate($(this),!0,e)})).on("listopened.validate",(function(){var t=$(this),e=t.data("tooltip");e&&document.activeElement===t.data("dropdown").searchInput[0]&&e.hide(),$("#validation-tooltip").hide()})).on("listclosed.validate",(function(){var t=$(this),e=t.data("tooltip"),i=t.data("dropdown");m.features.touch&&(i.pseudoElem.focus(),setTimeout((function(){i.pseudoElem.blur()}),100)),i&&i.wrapper&&(e=i.wrapper.find(".icon-error").data("tooltip")),e&&document.activeElement!==t.data("dropdown").searchInput[0]&&e.show()})),i.filter((function(){return void 0!==$(this).data("dropdown")})).each((function(){$(this).data("dropdown").pseudoElem.off("blur.validate").on("blur.validate",(function(e){var i=$(this).closest(".field, .field-short").find("select");t.validate(i,!0,e)}))}))),this.element.is("form")&&this.element.attr("data-validate-on")){this.element.off("submit.validate").on("submit.validate",(function e(i){i.stopPropagation(),i.preventDefault(),t.validateForm((function(i){t.element.off("submit.validate"),t.element.triggerHandler("validated",i),t.element.data("isValid",i),t.element.on("submit.validate",e)}))}))}},validateForm:function(t){var e,i=this,n=[];i.inputs=this.element.find(i.fields),i.inputs.each((function(t){var e=$(this);if(e.attr("data-validate")){if("true"===e.attr("data-disable-validation")||e.hasClass("disable-validation"))return;for(var s=i.validate(e,!1,t),a=0;a<s.length;a++)n.push(s[a])}})),(e=$).when.apply(e,n).then((function(){t(!0)}),(function(){t(!1)}))},setPrimaryBtn:function(t,e){var i=t.find("[data-validate]:visible, select[data-validate], :checkbox[data-validate]"),n=!0;i.length>0&&i.each((function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var e=null!==t[0].offsetParent;t.is(".required")&&(e&&t.is(".editor")&&!t.html()&&(n=!1),!e&&!t.is("select, :checkbox")||t.val()||t.is(".editor")||(n=!1)),!e&&!t.is("select, :checkbox")||t.isValid()||(n=!1)}})),n?e.removeAttr("disabled"):e.attr("disabled","disabled")},value:function(t){return t.is("input[type=checkbox]")?t.prop("checked"):t.is("div")?t[0].innerHTML:t.val()},getTypes:function(t,e){var i,n=this.filterValidations(t.attr("data-validation-events"),e.type);return i=t.is("input.dropdown")&&t.prev().prev("select").attr("data-validate")?t.prev().prev("select").attr("data-validate").split(" "):t.is("input.dropdown")&&t.prev().prev("select").attr("data-validation")?t.prev().prev("select").attr("data-validation").split(" "):t.attr("data-validation")?t.attr("data-validation").split(" "):t.attr("data-validate")?t.attr("data-validate").split(" "):[],n.length>0&&(i=i.filter((function(t){return-1!==n.indexOf(t)}))),"keyup"===e.type&&(i=i.filter((function(t){return"date"!==t&&"time"!==t}))),i},setIconOnParent:function(t,e){var i,n,s,a=$.createIcon({classes:["icon-".concat(e)],icon:"".concat(e,"-alert")}),r=t.closest(".tab-panel, .expandable-pane"),o=t.closest(".row.flex-align-bottom"),l=r.attr("id"),c=t.closest(".tab-container, .tab-panel-container, .expandable-area");if(o&&o.length&&($(".".concat(e),o).length?o.addClass("has-messages"):o.removeClass("has-messages")),c.is(".tab-panel-container")&&(c=c.prev(".tab-container")),c.is(".tab-container"))(i=$('.tab-list a[href="#'.concat(l,'"]'),c).closest(".tab")).length?$(".count",i).length&&(i=$(".count",i)):(l=$('a[href="#'.concat(l,'"]'),".popupmenu").closest(".popupmenu").attr("id"),i=$('.tab-list .tab[aria-controls="'.concat(l,'"]'),c),n=l);else{if(!c.is(".expandable-area"))return;i=$('.expandable-header[aria-controls="'.concat(l,'"] .title'),c)}n&&n.length&&(s=r.add($($(n).attr("href"))),$('a[role="menuitem"]',"#".concat(n)).each((function(){s=s.add($($(this).attr("href")))})));var d=$('a[href="#'.concat(r.attr("id"),'"]'),"#".concat(l));if(r&&$(".".concat(e),r).length||s&&$(".".concat(e),s).length){$(".".concat(e),r).length||(d.removeClass("is-".concat(e)),$(".icon-".concat(e),d).remove()),$(".".concat(e),r).length&&$(".".concat(e),s).length&&!$(".icon-".concat(e),d).length&&d.addClass("is-".concat(e)).append(a),$(".icon-".concat(e),i).length||i.addClass("is-".concat(e)).append(a);var h=c.data("tabs");h&&h.sizeBar()}else(i=i.add(d)).removeClass("is-".concat(e)),$(".icon-".concat(e),i).remove()},validate:function(t,e,i){if(t.data("handleEvent".concat([i.type||""]),null),"true"===t.attr("data-disable-validation")||t.hasClass("disable-validation")||t.is(":disabled"))return[];var n,s,a,r,o,l=this,c=l.getTypes(t,i)||[],d=[],h=[],u=l.value(t),p=t.attr("placeholder");function g(e,i,s,a){!1===(n=Bi.rules[s]).positive&&l.removePositive(t),o=Bi.ValidationTypes[n.type]||Bi.ValidationTypes.error;var r="tooltip"!==t.attr("data-".concat(o.type,"-type"));if(e)0===$.grep(h,(function(t){return t===o.type})).length?(a.resolve(),n.positive&&(l.addMessage(t,n,r,i),l.removeMessage(t,n,!0),a.resolve(),l.addPositive(t))):o.errorsForm||a.resolve();else{if(!l.isPlaceholderSupport&&u===p&&n.message!==B.translate("Required"))return;l.addMessage(t,n,r,i),h.push(n.type),o.errorsForm?a.reject():a.resolve()}l.setIconOnParent(t,n.type);var c=l.getField(t).data("".concat(o.type,"message"));e&&c&&c.filter((function(t){return t.id===n.id||n.message})).length>0&&l.removeMessage(t,n,!0);var d=t.closest(".modal").find(".btn-modal-primary").not(".no-validation");d.length&&l.setPrimaryBtn(t.closest(".modal"),d);var g=t.closest("#calendar-popup").find(".btn-modal-primary").not(".no-validation");g.length&&l.setPrimaryBtn(t.closest("#calendar-popup"),g),"error"===n.type&&t.closest("form").triggerHandler("aftervalidate",{field:t,rule:n,isValid:e})}for(a=0,r=c.length;a<r;a++)n=Bi.rules[c[a]],s=$.Deferred(),n&&(n.async?n.check(u,t,g,s):g(n.check(u,t),e,c[a],s),d.push(s));return d},getField:function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},hasError:function(t){return this.getField(t).hasClass("error")},addMessage:function(t,e,i,n,s){if(!(""===e.message||t.is(".dropdown, .multiselect")&&$("#dropdown-list").is(":visible"))){s=s||!1;var a=this.getField(t),r=a.data("".concat(e.type,"message")),o=Bi.ValidationTypes[e.type]||Bi.ValidationTypes.error;if(s||a.addClass("icon"===e.type?"custom-icon":e.type),!(r&&r===e.message||r&&r.filter((function(t){return(t.id||t.message)===(e.id||e.message)&&t.message===e.message})).length>0)){var l=e.message;if(r){for(var c=0;c<r.length;c++)l=" ".concat(r[c].message);l+="<br> ".concat(e.message)}r||(r=[]),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),(r=r.filter((function(t){return t.id!==e.id}))).push({id:e.id,message:e.message,type:e.type}),a.data("".concat(o.type,"message"),r),void 0!==$.fn.toast&&$("body").toast({title:B.translate(o.titleMessageID),audibleOnly:!0,message:l}),i?(t.data("isValid",!1),this.showInlineMessage(t,e,s)):this.showTooltipMessage(t,l,o.type,n)}}},showIcon:function(t,e){var i=this.getField(t).addClass("icon"===e?"custom-icon":e),n=$.createIconElement({classes:["icon-".concat(e)],icon:e}),s=i.closest(".field, .field-short"),a=t.parent();return 0===s.find("svg.icon-".concat(e)).length?(a.is(".editor-container")&&t.parent().addClass("is-error"),1===t.parent(":not(.editor-container)").find(".btn-actions").length?a.find(".btn-actions").before(n):1===a.find(".data-description").length?a.find(".data-description").before(n):1===a.find(".field-info").length?a.find(".field-info").before(n):t.is("textarea")?t.after(n):t.is(".dropdown, .multiselect")?a.find(".dropdown-wrapper").append(n):(t.is(".spinbox")||t.is(".lookup"),a.append(n)),$(".icon-success",s).remove()):n=s.find("svg.icon-error"),n},showTooltipMessage:function(t,e,i,n){if(!t.is(":radio")){var s=this.showIcon(t,i),a=t;if(t.is(".dropdown, .multiselect")&&void 0!==t.data("dropdown")){var r=t.data("dropdown").pseudoElem;a=r,r.addClass("icon"===i?"custom-icon":i)}t.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===i?"custom-icon":i);var o=s.data("tooltip");o?o.content=e:(s.tooltip({content:e,placement:"bottom",placementOpts:{callback:function(t){var e=a[0].getBoundingClientRect(),i=o.tooltip[0].getBoundingClientRect(),n=$("html").is('[dir="rtl"]'),s=t.x,r=0;return n?i.left<e.left&&(r+=e.left-i.left):i.right>e.right&&(r+=-1*(i.right-e.right)),t.setCoordinate("x",s+r),t.nudges||(t.nudges={}),t.nudges.x=r,t}},trigger:"focus",isError:!0,tooltipElement:"#validation-tooltip"}),o=s.data("tooltip")),t.on("focus.validate",(function(){o&&o.show()})).on("blur.validate",(function(){o&&o.hide()})),o&&t.attr("data-error-type","tooltip"),this.setErrorIconOpacity(t),n&&o&&o.show()}},toggleRadioMessage:function(t,e,i,n,s){var a,r,o=t.attr("name");o&&o.length&&(a=$(':radio[name="'.concat(o,'"], :radio[name="').concat(o,'"] + label')),r=t.parent().is(".inline")?$(':radio[name="'.concat(o,'"]:last')).parent():$(':radio[name="'.concat(o,'"]:last + label')),s?(a.addClass("icon"===i?"custom-icon":i),$(n).addClass("radio-group-".concat(i)).insertAfter(r)):(a.removeClass(i),r.next(".radio-group-".concat(i)).remove()))},showInlineMessage:function(t,e,i){i=i||!1;var n,s,a=this.getField(t),r=Bi.ValidationTypes[e.type]||Bi.ValidationTypes.error;e.icon=e.icon||r.icon,s="error"===e.type||Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1?"".concat(r.type,"-alert"):"".concat(r.type),n="icon"===e.type?""+'<div class="custom-icon-message" data-rule-id="'.concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-custom"],icon:e.icon}),'\n          <pre class="audible">\n            ').concat(B.translate(r.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"):""+'<div class="'.concat(r.type,'-message" data-rule-id="').concat(e.id||e.message,'">\n          ').concat($.createIcon({classes:["icon-".concat(r.type)],icon:s}),'\n          <pre class="audible">\n            ').concat(B.translate(r.titleMessageID),'\n          </pre>\n          <p class="message-text">').concat(e.message,"</p>\n        </div>"),i||a.addClass("icon"===e.type?"custom-icon":e.type),t.is(":radio")?this.toggleRadioMessage(t,e.message,r.type,n,!0):(a.closest(".field, .field-short").find(".formatter-toolbar").addClass("icon"===r.type?"custom-icon":r.type),a.closest(".field, .field-short").append(n),a.closest(".field, .field-short").find(".colorpicker-container").addClass("icon"===r.type?"custom-icon":r.type)),t.is(".spinbox")&&a.closest(".spinbox-wrapper").addClass("icon"===r.type?"custom-icon":r.type),"error"===r.type&&t.parent().find(".icon-success").remove(),t.triggerHandler(r.type,{field:t,message:e.message}),t.closest("form").triggerHandler(r.type,{field:t,message:e.message})},addPositive:function(t){var e=$.createIcon({icon:"success",classes:"icon-success"});$(".icon-success",t.parent(".field, .field-short")).length||t.parent(".field, .field-short").append(e)},removeMessage:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getField(t),s=n.data("".concat(e.type,"message")),a=e.id||e.message;if(e&&("error"!==e.type||s)&&0!==s.filter((function(t){return t.id===a})).length){var r=s.filter((function(t){return t.id!==a})),o=0===r.length;if(o?n.removeData("".concat(e.type,"message")):n.data("".concat(e.type,"message"),r),t.closest(".field, .field-short").find('[data-rule-id="'.concat(e.id||e.message,'"]')).remove(),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&t.parent().find('.dropdown-wrapper > [data-rule-id="'.concat(e.id||e.message,'"]')).off("click.validate").remove(),o&&"error"===e.type&&i&&(t.triggerHandler("valid",{field:t,message:""}),t.closest("form").triggerHandler("valid",{field:t,message:""})),o&&(t.removeClass("".concat(e.type," custom-icon")).data("isValid",!0),(t.hasClass("dropdown")||t.hasClass("multiselect"))&&(t.next().next().removeClass("".concat(e.type," custom-icon")),t.next().find("div.dropdown").removeClass("".concat(e.type," custom-icon"))),t.is(":radio")&&this.toggleRadioMessage(t,"",e.type,"",!1),t.hasClass("spinbox")&&t.closest(".spinbox-wrapper").removeClass("".concat(e.type," custom-icon")),t.hasClass("colorpicker")&&t.parent(".colorpicker-container").removeClass(e.type),t.closest(".field-fileupload").length>0&&t.closest(".field-fileupload").find("input.".concat(e.type)).removeClass(e.type),"tooltip"===t.attr("data-".concat(e.type,"-type")))){var l=t.closest(".field, .field-short").find(".icon-error"),c=l.data("tooltip");c&&c.destroy(),this.inputs&&this.inputs.filter("input, textarea").off("focus.validate"),t.parent().find(".dropdown-wrapper > .icon-".concat(e.type)).off("click.validate").remove(),t.parent().find(".icon-".concat(e.type)).remove(),t.next(".icon-".concat(e.type)).off("click.validate").remove(),t.parent(".field, .field-short").find(".icon-".concat(e.type)).remove(),t.next(".inforCheckboxLabel").next(".icon-".concat(e.type)).remove()}}},removePositive:function(t){$(".icon-success",t.parent(".field, .field-short")).remove()},resetForm:function(t){var e=t.find("input, select, textarea, div.dropdown, div.editor");e.removeClass("error"),t.find(".error").removeClass("error"),t.find(".icon-error").remove(),t.find(".icon-success").remove(),t.find(".error-message").remove(),e.removeClass("alert"),t.find(".alert").removeClass("alert"),t.find(".icon-alert").remove(),t.find(".alert-message").remove(),e.removeClass("info"),t.find(".info").removeClass("info"),t.find(".icon-info").remove(),t.find(".info-message").remove(),setTimeout((function(){$("#validation-errors").addClass("is-hidden")}),300),e.data("isDirty",!1).removeClass("isDirty"),t.find(".isDirty").removeClass("isDirty"),t.is("form")&&t[0].reset();var i=$.fn.validation.ValidationTypes;Object.keys(i).forEach((function(t){e.removeData("".concat(t,"message"))})),e.removeData("isValid")},isFormValid:function(t){if($(t).find(".error-message").length>0)return!1;for(var e=$(t).find('[data-validate*="required"]'),i=0;i<e.length;i++){var n=$(e[i]),s=this.value(n);if((n.is(":visible")||n.is("select"))&&!s)return!1}return!0},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.init()}};var Hi={type:"error",inline:!0};$.fn.validation=Bi,$.fn.getMessage=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),i=$.fn.getField($(this)).data(e),n="";if(i){if(1===i.length)return i[0].message;for(var s=0;s<i.length;s++)n+=" ".concat(i[s].message)}return n},$.fn.getMessages=function(t){t||(t={type:"error"});var e="".concat(t.type,"message"),i=$.fn.getField($(this)).data(e);return i||(i=[]),i},$.fn.getField=function(t){return t.is("select")&&void 0!==t.data("dropdown")&&(t=t.data("dropdown").pseudoElem),t},$.fn.getErrorMessage=function(t){return F("$.fn.getMessage","$.fn.getErrorMessage"),t=C.extend({},t,Hi),$(this).getMessage(t)},$.fn.scrollIntoView=function(t,e){"boolean"!=typeof t&&(t=void 0);var i=new zi(this,e).getField($(this));i[0].scrollIntoView(t),i.focus(),i.is("input.checkbox")&&(i=i.next(".checkbox-label"))[0]&&i[0].scrollIntoView(t)},$.fn.addMessage=function(t){return this.each((function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new zi(this,t)));var i={message:t.message,type:t.type,triggerEvents:t.triggerEvents,icon:t.icon,id:t.id||t.message},n=$(this);e.addMessage(n,i,t.inline,t.showTooltip,t.isAlert),e.setIconOnParent(n,t.type)}))},$.fn.addError=function(t){F("$.fn.addMessage","$.fn.addError");var e=!0;return"boolean"==typeof t.inline&&!1===t.inline&&(e=!1),(t=C.extend({},t,Hi)).inline=e,this.each((function(){$(this).addMessage(t)}))},$.fn.removeMessage=function(t){return t||(t={type:"error"}),this.each((function(){var e=$.data(this,"Validator");e||(e=$.data(this,"Validator",new zi(this,t)));var i=$(this),n="".concat(t.type,"message"),s=$.fn.getField(i).data(n);if(i.hasClass("error")&&"error"===t.type&&i.removeClass("error"),s){for(var a=0;a<s.length;a++)e.removeMessage(i,s[a],t.triggerEvents);e.setIconOnParent(i,t.type),$.removeData(this,"Validator")}}))},$.fn.removeError=function(t){return F("$.fn.removeMessage","$.fn.removeError"),t=C.extend({},t,Hi),this.each((function(){return $(this).removeMessage(t)}))},$.fn.validate=function(t,e){var i="string"==typeof t;return this.each((function(){var n=$.data(this,"validate");if(n&&"string"!=typeof n){if(i)return void("function"==typeof n[t]&&n[t](e));n.updated(t)}else n=$.data(this,"validate",new zi(this,t))}))},$.fn.isValid=function(){var t=$(this).data("isValid");return null==t||t},$.fn.validateField=function(){var t=$(this),e=Soho.components.Validator.prototype;e&&e.validate&&e.validate(t,!1,0)},$.fn.resetForm=function(){Soho.components.Validator.prototype.resetForm(this)};var qi={showTime:!1,useCurrentTime:!1,timeFormat:void 0,minuteInterval:void 0,secondInterval:void 0,mode:void 0,roundToInterval:void 0,dateFormat:"locale",placeholder:!1,firstDayOfWeek:0,disable:{callback:null,dates:[],years:[],minDate:"",maxDate:"",dayOfWeek:[],isEnable:!1,restrictMonths:!1},showLegend:!1,showMonthYearPicker:!0,hideDays:!1,yearsAhead:5,yearsBack:4,legend:[{name:"Public Holiday",color:"azure06",dates:[]},{name:"Weekends",color:"turquoise06",dayOfWeek:[]}],range:{useRange:!1,start:"",end:"",separator:" - ",minDays:0,maxDays:0,selectForward:!1,selectBackward:!1,includeDisabled:!1,selectWeek:!1},calendarName:null,locale:null,language:null,useUTC:!1,hideButtons:!1,showToday:!0,onOpenCalendar:null,isMonthPicker:!1,attributes:null};function Vi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,qi),this.init()}Vi.prototype={init:function(){this.build(),this.handleEvents()},build:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.element.attr("autocomplete","off"),this.element.next().is("svg")?this.trigger=this.element.next():this.trigger=$.createIconElement("calendar").insertAfter(this.element),this.element.hasClass("hidden")&&this.trigger.addClass("hidden"),this.settings.range.selectWeek&&(this.settings.selectForward=!0,this.settings.minDays=6,this.settings.maxDays=7),this.setLocale(),this.addAria(),this.settings.locale||this.settings.language||this.setCurrentCalendar()},setLocale:function(){var t=this,e=this.settings;this.locale=B.currentLocale,this.settings.language?(B.getLocale(this.settings.language),this.language=this.settings.language):this.language=B.currentLanguage.name,e.locale&&B.getLocale(e.locale).done((function(e){var i=t.getSimilarApi("locale",e);i.forEach((function(i){i.locale=B.cultures[e],i.language=t.settings.language||i.locale.language,i.setCurrentCalendar()})),0===i.length&&(t.locale=B.cultures[e],t.language=t.settings.language||t.locale.language,t.setCurrentCalendar())})),e.language&&B.getLocale(e.language).done((function(){t.getSimilarApi("language",e.language).forEach((function(t){t.language=e.language}))}))},getSimilarApi:function(t,e){var i=[].slice.call(document.querySelectorAll(".datepicker")),n=[];return i.forEach((function(i){var s=$(i).data("datepicker");s&&s.settings[t]===e&&n.push(s)})),n},setCurrentCalendar:function(){this.currentCalendar=B.calendar(this.settings.locale||this.locale.name,this.settings.language,this.settings.calendarName),this.isIslamic="islamic-umalqura"===this.currentCalendar.name,this.isRTL="right-to-left"===(this.locale.direction||this.locale.data.direction),this.isFullMonth=this.settings.dateFormat.indexOf("MMMM")>-1,this.setFormat(),this.mask()},addAria:function(){this.label=$('label[for="'.concat(this.element.attr("id"),'"]')),this.label.append('<span class="audible">'.concat(B.translate("PressDown",{locale:this.locale.name,language:this.language}),"</span>"))},handleKeys:function(t){var e=this,i=this.settings;if(t.is("#monthview-popup"))return t.off("keydown.datepicker").on("keydown.datepicker",".monthview-table, .monthview-monthyear-pane",(function(t){var i=!1,n=t.keyCode||t.charCode||0;return 9===n&&(e.containFocus(t),i=!0),27===n&&(e.closeCalendar(),e.element.focus(),t.stopImmediatePropagation(),i=!0),84===n&&(e.closeCalendar(),e.element.focus(),i=!0),!i||(t.stopPropagation(),t.preventDefault(),!1)})),void t.off("keydown.datepicker-tab").on("keydown.datepicker-tab","td, input, div.dropdown, button",(function(t){return 9!==(t.keyCode||t.charCode||0)||(i.range.useRange&&$(t.target).is(".next")&&!i.range.selectWeek?e.calendarAPI.days.find("td:visible:last").attr("tabindex",0).focus():e.containFocus(t),t.stopPropagation(),t.preventDefault(),!1)}));t.off("keydown.datepicker").on("keydown.datepicker",(function(t){var i,n,s=!1,a=t.keyCode||t.charCode||0,r=(null===(i=e.settings)||void 0===i||null===(n=null==i?void 0:i.dateFormat)||void 0===n||null==n?void 0:n.indexOf("-"))>-1;return 40!==a||e.isOpen()||(s=!0,e.openCalendar(),setTimeout((function(){e.setFocusAfterOpen()}),200)),84===a&&(s=!0,e.setToday()),189!==a||t.shiftKey||r||(s=!0,e.adjustDay(!1)),187===a&&t.shiftKey&&!r&&(s=!0,e.adjustDay(!0)),!s||(t.stopPropagation(),t.preventDefault(),!1)}))},containFocus:function(t){var e=t.shiftKey,i=this.popup.find(":focusable"),n=$(t.currentTarget);(n.is(".monthview-monthyear-pane, #btn-monthyear-pane")||n.closest(".is-monthyear.is-monthonly").length>0)&&(i=this.popup.find(":focusable").not("td").not(".picklist-item a").add(".picklist-item.is-selected a:visible, .picklist-item.up a:visible, .picklist-item.down a:visible"));var s=i.index($(":focus"));s=e?s-1<0?i.length-1:s-1:s+1>=i.length?0:s+1,i.eq(s).focus()},setFormat:function(){var t=this.settings,e="object"===i(B)&&this.currentCalendar.dateFormat?this.currentCalendar.dateFormat:null,n="object"===i(B)&&this.currentCalendar.timeFormat?this.currentCalendar.timeFormat:null;"object"===i(B)&&this.settings.calendarName&&(e=B.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).dateFormat,n=B.calendar(this.settings.locale,this.settings.language,this.settings.calendarName).timeFormat),"object"===i(e)&&void 0!==e.short&&(e=e.short),"locale"===t.dateFormat?(this.pattern=e+(t.showTime?" ".concat(t.timeFormat||n):""),t.dateFormat=this.pattern):this.pattern=t.dateFormat+(t.showTime&&t.timeFormat?" ".concat(t.timeFormat):""),this.show24Hours=(this.pattern.match("H")||[]).length>0,this.isSeconds=(this.pattern.match("ss")||[]).length>0},mask:function(){this.setFormat();var t=this.settings,e={process:"date",keepCharacterPositions:!0,patternOptions:{format:this.pattern}},i="date availableDate",n={date:"change blur enter",availableDate:"change blur"};t.range.useRange&&(e.process="rangeDate",e.patternOptions.delimeter=t.range.separator,i="rangeDate",n={rangeDate:"change blur"}),e.processOnInitialize=!1,this.isFullMonth?this.pattern=this.settings.dateFormat:void 0===this.element.data("mask")&&this.element.mask(e),this.addedValidation=!1,this.element[0]&&this.element[0].getAttribute&&!this.element[0].getAttribute("data-validate")&&(this.addedValidation=!0,this.element.attr({"data-validate":i,"data-validation-events":JSON.stringify(n)}).validate()),this.setPlaceholder()},setPlaceholder:function(){var t,e=this,i=this.settings,n=this.pattern;!i.placeholder||this.element.attr("placeholder")&&"M / D / YYYY"!==this.element.attr("placeholder")||(i.range.useRange&&(n=i.range.first&&i.range.first.date?(t=i.range.first.date,B.formatDate(t,{pattern:e.pattern,locale:e.locale.name})+i.range.separator+this.pattern):this.pattern+i.range.separator+this.pattern),this.element[0].setAttribute("placeholder",n))},isOpen:function(){return this.popup&&this.popup.is(":visible")&&!this.popup.hasClass("is-hidden")},openCalendar:function(){var t=this,e=this,i=this.settings,n={};if(!this.element.is(":disabled")&&!this.element.attr("readonly")||0!==this.element.closest(".monthview").length){$("#validation-tooltip").addClass("is-hidden"),this.element.addClass("is-active is-open").trigger("listopened"),this.timepickerContainer=$('<div class="datepicker-time-container"></div>');var s='<button type="button" class="is-cancel btn-tertiary">\n      '.concat(B.translate(this.settings.isMonthPicker?"Cancel":"Clear",{locale:this.locale.name,language:this.language}),"\n    </button>"),a=' <button type="button" class="is-select btn-primary">\n      '.concat(B.translate("Apply",{locale:this.locale.name,language:this.language}),"\n    </button>");if(this.footer=$(""+'<div class="popup-footer">\n        '.concat(this.isRTL?a+s:s+a,"\n      </div>")),i.hideDays&&(this.footer=$(""+'<div class="popup-footer">\n          <button type="button" class="is-cancel btn-tertiary">\n            '.concat(B.translate("Clear",{locale:this.locale.name,language:this.language}),'\n          </button>\n          <button type="button" class="is-select-month btn-primary">\n            ').concat(B.translate("Apply",{locale:this.locale.name,language:this.language}),"\n          </button>\n        </div>"))),i.hideButtons&&(this.footer=$("")),i.showTime&&(void 0===i.timeFormat?n.timeFormat=this.pattern.slice(this.pattern.indexOf(" ")).trim():n.timeFormat=i.timeFormat,void 0!==i.minuteInterval&&(n.minuteInterval=i.minuteInterval),void 0!==i.secondInterval&&(n.secondInterval=i.minuteInterval),void 0!==i.mode&&(n.mode=i.mode),void 0!==i.roundToInterval&&(n.roundToInterval=i.roundToInterval)),this.calendarContainer=$('<div class="monthview-container"></div>'),this.setValueFromField(),this.settings.showTime){""===this.element.val()&&this.currentDate&&this.currentDate.getDate()&&!this.settings.useCurrentTime&&(this.currentDate.setHours(0),this.currentDate.setMinutes(0),this.currentDate.setSeconds(0));var r=this.settings.timeFormat?this.settings.timeFormat:null;r||(r=this.isSeconds?this.currentCalendar.dateFormat.timestamp:this.currentCalendar.dateFormat.hour),n.parentElement=this.timepickerContainer,n.locale=this.settings.locale,n.language=this.settings.language,this.time=B.formatDate(this.currentDate,{pattern:r,locale:this.locale.name,language:this.language}),this.timepicker=this.timepickerContainer.timepicker(n).data("timepicker"),this.setUseCurrentTime(),this.timepickerContainer.find(".dropdown").dropdown(),this.timepickerContainer.on("change.datepicker",(function(){t.currentDate=t.setTime(t.currentDate),t.setValue(t.currentDate,!0,!0)})),setTimeout((function(){t.timepicker.initValues=t.timepicker.getTimeFromField(t.time),t.timepicker.afterShow(t.timepickerContainer)}),1)}this.todayDate=new Date,this.todayMonth=this.todayDate.getMonth(),this.todayYear=this.todayDate.getFullYear(),this.todayDay=this.todayDate.getDate(),this.isIslamic&&(this.todayDateIslamic=B.gregorianToUmalqura(this.todayDate),this.todayYear=this.todayDateIslamic[0],this.todayMonth=this.todayDateIslamic[1],this.todayDay=this.todayDateIslamic[2]),this.settings.year=this.currentYear,this.settings.month=this.currentMonth,this.isIslamic&&(this.settings.activeDateIslamic=this.activeDate instanceof Date?B.gregorianToUmalqura(this.activeDate):this.activeDate),this.settings.onOpenCalendar?(this.settings.activeDate=this.settings.onOpenCalendar(),this.isIslamic?(this.settings.activeDateIslamic=B.gregorianToUmalqura(this.settings.activeDate),this.settings.year=this.settings.activeDateIslamic[0],this.settings.month=this.settings.activeDateIslamic[1]):(this.settings.year=this.settings.activeDate.getFullYear(),this.settings.month=this.settings.activeDate.getMonth())):(this.settings.activeDate=this.currentDate||this.todayDate,this.settings.activeDateIslamic=this.currentDateIslamic||this.todayDateIslamic),this.settings.isPopup=!0,this.settings.headerStyle="simple",this.settings.onSelected=function(i,n){if(t.currentDate=new Date(n.year,n.month,n.day),e.settings.range.useRange&&e.settings.range.first&&e.settings.range.selectWeek){var s=Je.firstDayOfWeek(new Date,t.settings.firstDayOfWeek),a=Je.lastDayOfWeek(new Date,t.settings.firstDayOfWeek);return e.settings.range.first={},e.settings.range.second=void 0,e.setWeekRange({day:s.getDate(),month:s.getMonth(),year:s.getFullYear()},{day:a.getDate(),month:a.getMonth(),year:a.getFullYear()}),e.closeCalendar(),void e.element.focus()}e.settings.range.useRange&&e.settings.range.first&&!e.settings.range.selectWeek||(e.insertDate(t.currentDate),n.close&&(e.closeCalendar(),e.element.focus()))},this.settings.range.useRange&&this.settings.range.selectWeek&&(this.settings.onKeyDown=function(t){return 37!==t.key&&39!==t.key&&(38!==t.key&&40!==t.key&&13!==t.key)}),this.calendarAPI=new yi(this.calendarContainer,this.settings),this.calendar=this.calendarAPI.element,i.showTime&&this.calendar.addClass("is-timepicker"),i.hideDays&&(this.calendar.addClass("is-monthyear"),"MMMM"!==i.dateFormat&&"MMM"!==i.dateFormat&&"MM"!==i.dateFormat||this.calendar.addClass("is-monthonly"),"yyyy"===i.dateFormat&&this.calendar.addClass("is-yearonly")),this.calendar.append(i.showTime?this.timepickerContainer:"",this.footer);var o=this.element,l=this.isRTL?"right":"left";this.element.parent().is(".datagrid-cell-wrapper")&&(l="center",o=this.element.next(".icon"));var c={content:this.calendar,placementOpts:{parent:o,parentXAlignment:l,strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",extraClass:this.settings.range.selectWeek?"monthview-popup is-range-week":"monthview-popup",tooltipElement:"#monthview-popup",initializeContent:!1};this.trigger.popover(c).off("show.datepicker").on("show.datepicker",(function(){if(window.innerHeight<400&&t.popupClosestScrollable&&1===t.popupClosestScrollable.length&&(t.popup.find(".arrow").hide(),t.popup.css({"min-height":$("html").hasClass("theme-uplift-light")?"":"".concat(t.popupClosestScrollable[0].scrollHeight-521,"px"),height:""}),t.popupClosestScrollable.css("min-height","375px")),i.range.useRange&&i.range.first&&i.range.first.date&&i.range.second&&i.range.second.date&&t.popup.addClass("is-hidden"),t.settings.hideButtons&&t.popup.addClass("hide-buttons"),t.settings.showMonthYearPicker&&(t.popup.find(".expandable-area").expandablearea({animationSpeed:150,trigger:"btn-monthyear-pane"}),t.popup.find(".btn-monthyear-pane").button()),t.settings.range.selectWeek){var e=t.popup.find("tbody");t.popup.find(".monthview-table tr").hover((function(t){var i=$(t.currentTarget);e.find("td").removeClass("is-selected range-selection end-date"),i.find("td").addClass("range-selection")}))}})).off("hide.datepicker").on("hide.datepicker",(function(){t.popupClosestScrollable.add(t.popup).css("min-height",""),t.closeCalendar()})),this.handleKeys($("#monthview-popup")),$(".monthview-footer a",this.calendar).button(),this.popup=$("#monthview-popup"),this.popupClosestScrollable=this.popup.closest(".scrollable"),this.popup.attr("role","dialog"),this.originalDate=this.element.val(),this.calendarAPI.currentDate=this.currentDate,this.calendarAPI.currentDateIslamic=this.currentDateIslamic,this.calendarAPI.validatePrevNext(),this.calendarAPI.days.off("click.datepicker").on("click.datepicker","td",(function(){var t=$(this);if(t.hasClass("is-disabled"))e.calendarAPI.activeTabindex(t,!0);else{if(!i.range.useRange||i.range.first&&!i.range.second||i.range.selectWeek||e.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected"),i.range.useRange&&i.range.selectWeek){var n=e.calendarAPI.getCellDate(e.calendar.find("td.range-selection").first()),s=e.calendarAPI.getCellDate(e.calendar.find("td.range-selection").last());return void e.setWeekRange(n,s)}i.range.useRange||e.calendarAPI.days.find(".is-selected").removeClass("is-selected").removeAttr("aria-selected").removeAttr("tabindex");var a=$(this);a.addClass("is-selected".concat(i.range.useRange?" range":"")).attr("aria-selected","true"),e.lastValue=null,e.insertSelectedDate(a),i.range.useRange?e.isFocusAfterClose=!0:(e.closeCalendar(),e.element.focus())}})),this.footer.off("click.datepicker").on("click.datepicker","button",(function(t){var n=$(this);if(n.hasClass("is-cancel")&&(e.settings.isMonthPicker||(e.element.val("").trigger("change").trigger("input"),e.currentDate=null,e.clearRangeDates()),e.closeCalendar(),e.element.focus()),n.hasClass("is-cancel-month-pane")&&e.calendarAPI.monthYearPane.data("expandablearea").close(),n.hasClass("is-select-month")||n.hasClass("is-select-month-pane")){var s=parseInt(e.calendarAPI.monthYearPane.find(".is-year .is-selected a").attr("data-year"),10),a=parseInt(e.calendarAPI.monthYearPane.find(".is-month .is-selected a").attr("data-month"),10);e.currentDate=new Date(s,a,1),e.isIslamic&&(e.currentDateIslamic[0]=s,e.currentDateIslamic[1]=a,e.currentDateIslamic[2]=1,e.currentYear=s,e.currentMonth=a,e.currentDay=1,e.currentDate=B.umalquraToGregorian(s,a,1)),i.range.useRange?e.isFocusAfterClose=!1:n.hasClass("is-select-month")&&(e.insertDate(e.isIslamic?e.currentDateIslamic:e.currentDate),e.closeCalendar()),n.hasClass("is-select-month-pane")&&e.calendarAPI.showMonth(a,s)}if(n.hasClass("is-select")){var r=e.calendarAPI.setRangeSelByClick();if(1===r)e.closeCalendar();else if(2===r)e.element.trigger("change",[i.range.data]).trigger("input",[i.range.data]),e.closeCalendar();else{if(3===r)return void t.preventDefault();e.insertSelectedDate(),e.closeCalendar()}n.hasClass("is-select-month-pane")||e.element.focus()}t.preventDefault(),n.hasClass("is-select-month-pane")&&(e.calendarAPI.monthYearPane.data("expandablearea").close(),e.popup.find(".btn-primary.is-select").focus())})),this.popup.off("click.datepicker-today").on("click.datepicker-today",".hyperlink.today",(function(t){t.preventDefault(),i.range.useRange?(e.setToday(!0),(!i.range.second||i.range.second&&!i.range.second.date)&&t.preventDefault()):(e.setToday(),e.closeCalendar())})),setTimeout((function(){C.addAttributes(t.popup.find(".btn-monthyear-pane"),t,t.settings.attributes,"btn-monthyear"),C.addAttributes(t.popup.find(".is-cancel"),t,t.settings.attributes,"btn-cancel"),C.addAttributes(t.popup.find(".is-select"),t,t.settings.attributes,"btn-select"),e.calendarAPI.validatePrevNext(),e.setFocusAfterOpen()}),50)}},setUseCurrentTime:function(){if(this.settings.useCurrentTime&&this.timepicker.minuteSelect.length){var t=this.isSeconds&&this.timepicker.secondSelect.length,e=function(t){return(t<10?"0":"")+t},i=function(t,e){t.find("option:contains(".concat(e,")")).length||(t.find("option:selected").prop("selected",!1),t.prepend($("<option selected >".concat(e,"</option>"))))},n=new Date;i(this.timepicker.minuteSelect,e(n.getMinutes())),t&&i(this.timepicker.secondSelect,e(n.getSeconds())),"string"==typeof this.time&&""!==this.time&&this.currentDate&&this.currentDate.getDate()&&(i(this.timepicker.minuteSelect,e(this.currentDate.getMinutes())),t&&i(this.timepicker.secondSelect,e(this.currentDate.getSeconds())))}},clearRangeDates:function(){var t=this.settings;t.range.useRange&&(t.range.start=qi.range.start,t.range.end=qi.range.end,t.range.data&&delete t.range.data)},insertSelectedDate:function(t){var e=this.calendarAPI.getCellDate(t||this.calendar.find("td.is-selected").last()),i=e.day,n=e.month,s=e.year;this.currentDate=new Date(s,n,i),this.isIslamic&&(this.currentDateIslamic[0]=s,this.currentDateIslamic[1]=n,this.currentDateIslamic[2]=i,this.currentYear=s,this.currentMonth=n,this.currentDay=i,this.currentDate=B.umalquraToGregorian(s,n,i)),this.insertDate(this.isIslamic?this.currentDateIslamic:this.currentDate)},setWeekRange:function(t,e){var i=this.settings;i.range.first.date=new Date(t.year,t.month,t.day),i.range.second=void 0,this.setValue(new Date(e.year,e.month,e.day)),this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected")},close:function(){return z(this.closeCalendar,this.close).apply(this)},closeCalendar:function(){var t=this.calendarAPI&&this.calendarAPI.days.length?this.calendarAPI.days.find("td.is-selected"):null;this.resetRange({cell:t}),this.settings.showTime&&this.timepickerControl&&this.timepickerControl.isOpen()&&this.timepickerControl.closeTimePopup(),this.popup&&this.popup.length&&this.popup.hide().remove();var e=this.trigger.data("tooltip");e&&e.destroy(),this.calendarAPI&&delete this.calendarAPI.datepickerApi,this.element.hasClass("is-active")&&(this.element.trigger("listclosed"),this.element.removeClass("is-active is-open"))},setFocusAfterOpen:function(){var t=this.settings;if(this.calendar){if(t.range.useRange&&(t.range.first&&t.range.first.label&&(!t.range.second||t.range.second&&!t.range.second.date)&&this.setRangeFirstPart(t.range.first.date),this.calendarAPI.setRangeSelected(),t.range.second&&t.range.first.date&&t.range.second.date&&this.element.val(this.getRangeValue()),this.popup.removeClass("is-hidden")),this.calendarAPI.datepickerApi=this,t.range.useRange&&t.range.selectWeek){var e=this.calendar.find("td.is-selected").first().parent();return this.calendar.find("td[tabindex]").removeAttr("tabindex"),void e.attr("tabindex","0").focus()}this.calendarAPI.activeTabindex(this.calendar.find("td.is-selected"),!0)}},setRangeFirstPart:function(t){var e=this.settings,i=function(t){return new Date(t.year,t.month,t.day)},n=this.calendarAPI.days.find("td:visible:first"),s=this.calendarAPI.days.find("td:visible:last"),a=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),r=this.calendarAPI.days.find('[data-key="'.concat(a,'"]')),o=r.closest("tr");this.isIslamic?(this.currentDate=B.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),this.currentDateIslamic=t):this.currentDate=t;var l=this.calendarAPI.getCellDate(n),d=this.calendarAPI.getCellDate(s);e.range.first={date:this.isIslamic?c(t):t,cell:r,row:o,rowIdx:o.index(),cellIdx:r.index()},e.range.extra={minCell:n,maxCell:s,min:this.isIslamic?[l.year,l.month,l.day]:i(l),max:this.isIslamic?[d.year,d.month,d.day]:i(d),cellLength:o.children("td").length},this.calendarAPI.settings.range.first=e.range.first,this.calendarAPI.settings.range.extra=e.range.extra},insertDate:function(t,e){var i=this.settings,n="",s="",a="";if(t instanceof Array)n=t[0],s=t[1],a=t[2].toString();else{if(!(t instanceof Date)||isNaN(this.getTime(t)))return;n=t.getFullYear(),s=t.getMonth(),a=t.getDate().toString()}if(this.calendarAPI.currentMonth===s&&this.calendarAPI.currentYear===n||this.calendarAPI.showMonth(s,n),this.isOpen()){var r=this.calendarAPI.days.find("td:not(.alternate)").filter((function(){return $(this).text().toLowerCase()===a}));r.hasClass("is-disabled")||(this.settings.showTime&&(e?(this.time=B.formatDate(t,{pattern:this.currentCalendar.dateFormat.hour,locale:this.locale.name,language:this.language}),this.settings.roundToInterval&&($("#timepicker-minutes").val(""),t=this.setTime(t))):t=this.setTime(t)),this.setValue(t,!0),i.range.useRange?this.calendarAPI.days.find(".is-selected").removeAttr("aria-selected").removeAttr("tabindex"):this.calendarAPI.days.find(".is-selected").removeClass("is-selected range").removeAttr("aria-selected").removeAttr("tabindex"),r.addClass("is-selected".concat(i.range.useRange?" range":"")).attr({"aria-selected":!0})),this.calendarAPI.activeTabindex(r,!0)}},setValue:function(t,e,i){var n=this.settings;this.currentDate=t,t instanceof Array&&(this.currentDateIslamic=t,this.currentDate=B.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5])),n.range.useRange?i||this.setRangeToElem(t,!1):this.element.val(B.formatDate(t,{pattern:this.pattern,locale:this.locale.name})),e&&(n.range.useRange?i||this.element.trigger("change",[n.range.data]).trigger("input",[n.range.data]):this.element.trigger("change").trigger("input"))},getTime:function(t){return Array.isArray(t)?t.join(""):t.getTime()},setRangeToElem:function(t,e){var i=this,n=this.settings,s=function(t){return B.formatDate(t,{pattern:i.pattern,locale:i.locale.name})},a=s(t),r=!1;if(this.isOpen()){var o=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),l=this.calendarAPI.days.find('[data-key="'.concat(o,'"]')),c=l.closest("tr");n.range.second&&(n.range.second.date?this.resetRange({cell:l}):(delete n.range.second.date,$.isEmptyObject(n.range.second)&&delete n.range.second));var d={};n.range.first&&(d.date=this.getTime(t),d.firstdate=this.getTime(n.range.first.date),d.min=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.minDays),d.max=this.calendarAPI.getDifferenceToDate(n.range.first.date,n.range.maxDays)),!n.range.first||e?(this.setRangeFirstPart(t),a=this.getRangeValue(),this.setPlaceholder()):!n.range.second&&n.range.selectBackward&&d.date>d.firstdate||n.range.selectForward&&d.date<d.firstdate||n.range.maxDays>0&&d.date>d.max.aftertime||d.date<d.max.beforetime?(this.resetRange({cell:l}),this.setRangeFirstPart(t),a=this.getRangeValue(),this.setPlaceholder()):(r=!0,this.isIslamic?(this.currentDate=B.umalquraToGregorian(t[0],t[1],t[2],t[3],t[4],t[5],t[6]),this.currentDateIslamic=t):this.currentDate=t,n.range.minDays>0&&(d.date>=d.firstdate&&d.date<d.min.aftertime?(t=d.min.after,d.date===d.firstdate&&(d.date=this.getTime(t))):d.date<d.firstdate&&d.date>d.min.beforetime&&(t=d.min.before),o=this.isIslamic?E.padDate(t[0],t[1],t[2]):E.padDate(t.getFullYear(),t.getMonth(),t.getDate()),c=(l=this.calendarAPI.days.find('[data-key="'.concat(o,'"]'))).closest("tr")),d.date>d.firstdate?n.range.second={date:t,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}:(n.range.second=n.range.first,n.range.first={date:t,cell:l,row:c,rowIdx:c.index(),cellIdx:l.index()}),a=this.getRangeValue())}else if(!e){r=!0;var h=t||new Date;this.currentMonth=h.getMonth(),this.currentYear=h.getFullYear(),this.currentDay=h.getDate(),this.currentDate=h,n.range.first=n.range.first||{},n.range.second=n.range.second||{},n.range.first.date=h,n.range.second.date=h,a=this.getRangeValue()}this.element.val(a),r?(n.range.data={value:a,dates:this.calendarAPI?this.calendarAPI.getDateRange(n.range.first.date,n.range.second.date):[n.range.first.date],startDate:n.range.first.date,start:s(n.range.first.date),endDate:n.range.second.date,end:s(n.range.second.date)},this.closeCalendar(),this.isFocusAfterClose&&(delete this.isFocusAfterClose,this.element.focus())):n.range.data={value:a,dates:[n.range.first.date],startDate:n.range.first.date,start:s(n.range.first.date)}},resetRange:function(t){t=t||{},this.settings.range.useRange&&(delete this.settings.range.first,delete this.settings.range.second,delete this.settings.range.extra,t.isData&&delete this.settings.range.data,this.calendarAPI&&(delete this.calendarAPI.settings.range.first,delete this.calendarAPI.settings.range.second,delete this.calendarAPI.settings.range.extra,t.isData&&delete this.calendarAPI.settings.range.data),this.calendarAPI&&this.calendarAPI.days.length&&this.calendarAPI.days.find("td").removeClass("range range-next range-prev range-selection end-date is-selected"),t.cell&&t.cell.addClass("is-selected"))},setRangeValueFromField:function(){var t,e=this,i=function(t){return B.formatDate(t,{pattern:e.pattern,locale:e.locale.name})},n=function(t){return B.parseDate(t,{pattern:e.pattern,locale:e.locale.name},!1)},s=function(t){return t&&"function"==typeof t.getTime?t:new Date},a=function(t){var i=n(t[0]),a=n(t[1]),r=e.isIslamic&&Array.isArray(i);return r||(i=B.gregorianToUmalqura(new Date(t[0])),a=B.gregorianToUmalqura(new Date(t[1]))),i&&a?(i=e.getTime(s(i)),a=e.getTime(s(a)),e.isIslamic&&!r&&(t[0]=B.gregorianToUmalqura(new Date(t[0])),t[1]=B.gregorianToUmalqura(new Date(t[1]))),i>a?[t[1],t[0]]:[t[0],t[1]]):t},r=this.settings,o={};(o.value=r.range.value||this.element.val().trim(),o.isEmpty=""===o.value,!o.isEmpty&&o.value.indexOf(r.range.separator)>-1?o.dates=a(o.value.split(r.range.separator)):!o.isEmpty&&o.value.indexOf(r.range.separator.slice(0,-1))>-1?o.dates=o.value.split(r.range.separator.slice(0,-1)):o.isEmpty||-1!==o.value.indexOf(r.range.separator)||(o.dates=[i(o.value)]),!r.range.data&&r.range.start&&r.range.end&&o.isEmpty)&&(t="string"==typeof r.range.start&&"string"==typeof r.range.end?a([r.range.start,r.range.end]):"string"!=typeof r.range.start&&"string"==typeof r.range.end?a([i(r.range.start),r.range.end]):"string"==typeof r.range.start&&"string"!=typeof r.range.end?a([r.range.start,i(r.range.end)]):a([i(r.range.start),i(r.range.end)]),r.range.start=i(t[0]),r.range.end=i(t[1]));if(r.range.first=r.range.first||{},r.range.second=r.range.second||{},r.range.data&&r.range.data.startDate?r.range.first.date=r.range.data.startDate:r.range.start&&"string"==typeof r.range.start?r.range.first.date=n(r.range.start):o.dates&&(r.range.first.date=this.isIslamic&&Array.isArray(o.dates[0])?o.dates[0]:n(o.dates[0])),r.range.data&&r.range.data.endDate?r.range.second.date=r.range.data.endDate:r.range.end&&"string"==typeof r.range.end?r.range.second.date=n(r.range.end):o.dates&&(r.range.second.date=this.isIslamic&&Array.isArray(o.dates[1])?o.dates[1]:n(o.dates[1])),this.calendarAPI&&this.calendarAPI.setRangeSelected(),!o.isEmpty&&(o.isEmpty||r.range.data))return!1;var l=i(r.range.first.date);return l&&this.element.val(l),!0},setValueFromField:function(){var t=this,e=this.settings;if(this.setCurrentCalendar(),e.range.useRange&&""===this.element.val().trim()&&this.resetRange({isData:!0}),e.range.useRange&&(""!==this.element.val().trim()||e.range.start&&e.range.end||e.range.data&&e.range.data.startDate&&e.range.data.endDate)&&!this.setRangeValueFromField())return this.currentDate&&"function"==typeof this.currentDate.getMonth&&(this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate()),void(this.currentDate&&this.isIslamic&&(this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]));var i=this.element.val(),n=i;if(this.isIslamic&&i){var s=B.parseDate(this.element.val(),{pattern:this.pattern,locale:this.locale.name});s instanceof Date?n=B.umalquraToGregorian(s.getFullYear(),s.getMonth(),s.getDate()):s instanceof Array&&(n=B.umalquraToGregorian(s[0],s[1],s[2],s[3],s[4],s[5]))}var a=function(){var e=(new Date).getDate();if(t.calendarAPI){var i=t.calendarAPI.dayMap.filter((function(t){return t.elem.is(".is-selected")}));i.length&&(e=parseInt(i[0].key.substr(6),10))}return e}();this.currentDate=n||new Date,"string"==typeof this.currentDate&&(this.currentDate=B.parseDate(this.currentDate,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1),this.pattern&&-1===this.pattern.indexOf("d")&&this.currentDate.setDate(a)),void 0===this.currentDate&&(this.currentDate=B.parseDate(n,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},!1)),this.isIslamic?(this.currentDateIslamic=B.gregorianToUmalqura(this.currentDate),this.currentYear=this.currentDateIslamic[0],this.currentMonth=this.currentDateIslamic[1],this.currentDay=this.currentDateIslamic[2]):(this.currentDate=this.currentDate||new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.currentDay=this.currentDate.getDate());var r=this.pattern,o=!(r.indexOf("MMMM")>-1||r.indexOf("MMM")>-1||"yyyy"===r||"MMMM"===r||"MMM"===r||"MM"===r),l=this.element.val().trim();if(""!==l&&!e.range.useRange){var c=B.parseDate(l,{pattern:this.pattern,locale:this.locale.name,calendarName:this.settings.calendarName},o),d=0;d=this.isIslamic?c[3]:null==c||null==c?void 0:c.getHours(),!this.isIslamic&&c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&c.setHours(d+12),this.isIslamic&&c&&d<12&&this.element.val().trim().indexOf(this.currentCalendar.dayPeriods[1])>-1&&(d+=12),!this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&c.setDate(a),this.isIslamic&&this.pattern&&-1===this.pattern.indexOf("d")&&(c[2]=a),void 0===c||""===this.element.val().trim()||e.range.useRange||(this.setValue(c),l!==this.element.val().trim()&&this.element.trigger("change").trigger("input"))}e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&(e.range.second.date?this.element.val(this.getRangeValue()):this.setRangeToElem(this.currentDate,!0))},enable:function(){this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.attr("disabled","disabled").closest(".field").addClass("is-disabled")},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.enable(),this.element.attr("readonly","readonly")},isReadonly:function(){return this.element.prop("readonly")},setToday:function(t){var e=this.settings;if(this.lastValue=null,this.currentDate=new Date,!this.isReadonly()&&!this.isDisabled()){if(this.settings.useCurrentTime||(this.currentDate=this.setTime(this.currentDate)),this.isIslamic){var i=B.gregorianToUmalqura(this.currentDate);this.currentDateIslamic=i}var n=this.isIslamic?this.currentDateIslamic:this.currentDate;if(this.isOpen())if(e.range.useRange)if(!e.range.first||e.range.first&&!e.range.first.date){if(this.calendarAPI.days.find("td:visible").removeClass("is-selected").removeAttr("aria-selected"),this.insertDate(n,!0),t&&this.calendarAPI){var s=this.calendarAPI.dayMap.filter((function(t){return t.elem.is(".is-selected")}));s&&s.length&&setTimeout((function(){s[0].elem.focus()}),0)}}else e.range.first&&e.range.first.date&&(!e.range.second||e.range.second&&!e.range.second.date)?this.setRangeToElem(n,!1):e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date&&(this.resetRange({isData:!0}),this.insertDate(n,!0));else this.insertDate(n,!0);else{if(e.range.useRange)this.setRangeToElem(this.currentDate);else{var a={pattern:this.pattern,locale:this.locale.name},r=B.formatDate(n,a);this.element.val(r)}e.range.useRange?this.element.trigger("change",[e.range.data]).trigger("input",[e.range.data]):this.element.trigger("change").trigger("input")}}},adjustDay:function(t){if(!this.isReadonly()&&!this.isDisabled()){this.currentDate||this.setToday();var e={pattern:this.pattern,locale:this.locale.name},i=this.isIslamic?this.currentDateIslamic:this.currentDate;this.isIslamic?(i[2]+=t?1:-1,(i=B.umalquraToGregorian(this.currentDateIslamic[0],this.currentDateIslamic[1],this.currentDateIslamic[2],this.currentDateIslamic[3],this.currentDateIslamic[4],this.currentDateIslamic[5],this.currentDateIslamic[6])).setDate(i.getDate()+(t?1:-1)),i=B.gregorianToUmalqura(i)):i.setDate(i.getDate()+(t?1:-1)),this.element.val(B.formatDate(i,e)),this.element.trigger("change").trigger("input")}},setTime:function(t){var e=void 0!==this.popup;if(!this.timepicker||!e)return this.settings.useCurrentTime||t.setHours(0,0,0,0),t;var i=this.popup.find(".dropdown.hours").val(),n=this.popup.find(".dropdown.minutes").val(),s=this.isSeconds?this.popup.find(".dropdown.seconds").val():0,a=this.popup.find(".dropdown.period"),r=a.val();return i=a.length&&r===this.currentCalendar.dayPeriods[1]&&i<12?parseInt(i,10)+12:i,i=!a.length||r!==this.currentCalendar.dayPeriods[0]&&r||12!==parseInt(i,10)?i:0,t instanceof Array?(t[3]=i?parseInt(i,10):t[3],t[4]=n?parseInt(n,10):t[4],t[5]=s?parseInt(s,10):t[5]):(t=new Date(t)).setHours(i,n,s),t},getCurrentDate:function(){return this.currentDate},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,qi)),this.teardown().init()},getRangeValue:function(){var t=this,e=this.settings,i=function(e){return B.formatDate(e,{pattern:t.pattern,locale:t.locale.name})};return e.range.useRange&&e.range.first&&e.range.first.date&&e.range.second&&e.range.second.date?"".concat(i(e.range.first.date)+e.range.separator+i(e.range.second.date)):e.range.useRange&&e.range.first&&e.range.first.date?e.placeholder?"".concat(i(e.range.first.date)+e.range.separator+this.pattern):i(e.range.first.date):""},teardown:function(){this.isOpen()&&this.closeCalendar(),this.element.off("blur.datepicker change.datepicker-rangeclear keyup.datepicker-rangeclear"),this.trigger.remove(),this.element.removeAttr("placeholder"),this.calendarAPI&&this.calendarAPI.destroy(),this.calendar&&this.calendar.length&&this.calendar.remove(),this.popup&&this.popup.length&&this.popup.remove();var t=this.element.data("mask");return t&&t.destroy(),this.element.removeAttr("data-mask"),this.element.removeData("mask"),this.element.off("keydown.datepicker blur.validate change.validate keyup.validate focus.validate"),this.addedValidation&&(this.element.removeAttr("data-validate").removeData("validate validationEvents"),delete this.addedValidation),this},destroy:function(){this.closeCalendar(),this.teardown(),this.element[0]&&$.removeData(this.element[0],"datepicker")},handleEvents:function(){var t=this,e=this,i=this.settings;if(this.trigger.on("click.datepicker",(function(){e.isOpen()?e.closeCalendar():e.openCalendar()})),this.handleKeys(this.element),e.element.on("blur.datepicker",(function(){""!==t.element.val().trim()&&t.setValueFromField()})),this.element.on("change.datepicker-rangeclear keyup.datepicker-rangeclear",(function(){t.isOpen()||""!==t.element.val().trim()||e.clearRangeDates()})),!this.isOpen()&&i.range.useRange&&!i.range.first){this.setRangeValueFromField();var n=this.getRangeValue();n&&this.element.val(n)}}},$.fn.datepicker=function(t){return this.each((function(){var e=$.data(this,"datepicker");e?e.updated(t):e=$.data(this,"datepicker",new Vi(this,t))}))};var Wi=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code","div"];function ji(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;if(!t||"string"!=typeof t||!e.length)throw new Error('"id" property must be defined and unique.');if(this.id=t,!e||"string"!=typeof e||!e.length)throw new Error('"displayName" property must be defined.');return this.displayName=e,i=i.toLowerCase(),-1===Wi.indexOf(i)&&(i="p"),this.tagName=i,"string"==typeof n&&n.length&&(this.className=n),s instanceof CSSStyleDeclaration&&(this.styleProps=s),this}ji.prototype={render:function(t){return t=h.stripHTML(t),"<".concat(this.tagName,">").concat(t,"</").concat(this.tagName,">")}};function Ui(){return{popupmenuSettings:{offset:{y:10}},styles:[new ji("default",B.translate("FontPickerNormal")),new ji("header1",B.translate("FontPickerHeader").replace("{0}","1"),"h3"),new ji("header2",B.translate("FontPickerHeader").replace("{0}","2"),"h4")]}}function _i(t,e){if(!(t instanceof HTMLElement))throw new Error('Property "element" is not an HTMLElement type');this.settings=C.mergeSettings(t,e,Ui()),e&&Array.isArray(e.styles)&&(this.settings.styles=e.styles),this.element=t,this.init()}_i.prototype={get menuAPI(){var t=$(this.element).data("popupmenu");if(t)return t},get selected(){var t;return this.settings.styles.forEach((function(e){e.selected&&(t=e)})),t||(this.settings.styles[0].selected=!0,this.settings.styles[0])},getStyleById:function(t){var e;if(this.settings.styles.forEach((function(i){i.id===t&&(e=i)})),!e)throw new Error('No FontPickerStyle available with id "'.concat(t,'"'));return e},getStyleByTagName:function(t){var e;if(this.settings.styles.forEach((function(i){i.tagName===t&&(e=i)})),!e)throw new Error('No FontPickerStyle available with tagName "'.concat(t,'"'));return e},get disabled(){return this.trueDisabled},set disabled(t){this.trueDisabled=t,this.element.disabled=!0===t},get supportedTagNames(){var t=[];return this.settings.styles.forEach((function(e){t.push(e.tagName)})),t},init:function(){return Array.isArray(this.settings.styles)&&this.settings.styles.length||(this.settings.styles=Ui().styles),this.build().handleEvents()},build:function(){var t=$(this.element),e=this.element.querySelector("svg.icon.icon-dropdown");e||(e=$.createIcon({icon:"dropdown",classes:["icon-dropdown"]}),this.element.insertAdjacentHTML("beforeend",e)),this.ddIcon=this.element.querySelector("svg.icon.icon-dropdown"),t.button();var i=t.next(".popupmenu");i&&i.length||(i=$('<ul class="popupmenu fontpicker-menu"></ul>').insertAfter(this.element)),i.html(this.buildMenuHTML());var n=C.extend({},this.settings.popupmenuSettings,{menu:i,stretchToWidestMenuItem:!0});return t.popupmenu(n),this.render(),this.audible=$('<span class="audible">'.concat(B.translate("FontPickerStyle"),"</span>")),this.element.prepend(this.audible[0]),this},render:function(){var t=this.selected,e=this.element.querySelector("span:not(.audible)");$(e).html(t.displayName)},buildMenuHTML:function(){var t="";return this.settings.styles.forEach((function(e){var i=e.render(e.displayName);t+='<li class="fontpicker-style">\n        <a href="#" data-val="'.concat(e.id,'">').concat(i,"</a>\n      </li>")})),"".concat(t)},handleEvents:function(){var t=this,e=this;return $(this.element).on("selected.".concat("fontpicker"),(function(e,i){var n=i.attr("data-val");t.select(n)})).on("updated.".concat("fontpicker"),(function(t,i){e.updated(i)})),this},select:function(t,e){if(!t||"string"!=typeof t&&!(t instanceof ji))throw new Error('"id" property must be defined in order to select.');var i;i=t instanceof ji?t:this.getStyleById(t),this.settings.styles.forEach((function(t){t.selected=!1})),i.selected=!0,this.render(i),e||$(this.element).triggerHandler("font-selected",[i])},updated:function(t){var e;void 0!==t&&(Array.isArray(t.styles)&&(e=t.styles),this.settings=C.mergeSettings(this.element,t,this.settings),e&&(this.settings.styles=e));return this.teardown().init()},teardown:function(){var t=this.element.querySelector("svg.icon.icon-dropdown");t.parentNode.removeChild(t);var e=this.menuAPI;e&&"function"==typeof e.destroy&&e.destroy();var i=$(this.element).data("button");return i&&"function"==typeof i.destroy&&i.destroy(),$(this.element).off(["selected.".concat("fontpicker"),"updated.".concat("fontpicker")].join(" ")),this},destroy:function(){this.teardown(),$.removeData(this.element,"fontpicker")}},$.fn.fontpicker=function(t){return this.each((function(){var e=$.data(this,"fontpicker");e?e.updated(t):e=$.data(this,"fontpicker",new _i(this,t))}))};var Gi={rightAligned:!1,maxVisibleButtons:3,resizeContainers:!0,favorButtonset:!0,moreMenuSettings:void 0,noSearchfieldReinvoke:!1,attributes:null};function Yi(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Gi),this.init()}Yi.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){return this.settings.maxVisibleButtons<=0&&(this.settings.maxVisibleButtons=Gi.maxVisibleButtons),this},build:function(){var t,e=this;if(this.element.attr("role","toolbar"),this.settings.resizeContainers&&this.element.is(":not(:hidden)")&&this.element[0].classList.add("do-resize"),Array.isArray(this.settings.attributes)&&C.addAttributes(this.element,this,this.settings.attributes),this.buildAriaLabel(),this.id||(this.id=parseInt($(".toolbar, .formatter-toolbar").index(this.element),10)),this.title=this.element.children(".title"),this.title.length?(this.element[0].classList.add("has-title"),this.cutoffTitle=!1,this.title.on("beforeshow.toolbar",(function(){return e.cutoffTitle})).tooltip({content:"".concat(this.title.text().trim())})):this.element[0].classList.remove("has-title"),this.buttonset=this.element.children(".buttonset"),this.buttonset.length||(this.buttonset=$('<div class="buttonset"></div>'),this.title.length?this.buttonset.insertAfter(this.title):this.buttonset.prependTo(this.element)),this.element[this.settings.rightAligned?"addClass":"removeClass"]("right-aligned"),this.more=this.element.find(".btn-actions"),0===this.more.length&&!this.element.hasClass("no-actions-button")){var i=this.element.find(".more");i.length||(i=$('<div class="more"></div>').appendTo(this.element)),this.more=$('<button class="btn-actions" type="button"></button>').html("".concat($.createIcon({icon:"more"}),'<span class="audible">').concat(B.translate("MoreActions"),"</span>")).attr("title",B.translate("More")).appendTo(i)}(this.buttonsetItems=this.buttonset.children("button").add(this.buttonset.find("input")),this.items=this.buttonsetItems.add(this.title.children("button")).add(this.more),this.items.filter('button, input[type="button"], [class^="btn"]').each((function(t){var i=$(this);i.data("button")||i.button(),!$(this).data("tooltip")&&i.attr("title")&&i.tooltip(),!i.is(".btn-menu")&&Array.isArray(e.settings.attributes)&&C.addAttributes(i,e,e.settings.attributes,"button-".concat(t))})),this.settings.noSearchfieldReinvoke)||this.items.filter(".searchfield, .toolbar-searchfield-wrapper, .searchfield-wrapper").each((function(t,i){var n=$(i);if(n.is(".toolbar-searchfield-wrapper, .searchfield-wrapper")&&(n=n.children(".searchfield")),!n.data("searchfield")){var s=$.extend({},C.parseSettings(n[0]));n.searchfield(s)}C.addAttributes(n,e,e.settings.attributes,"searchfield")}));var n=this.more.data("popupmenu"),s=this.more.attr("aria-controls");n?this.moreMenu=n.menu:(this.moreMenu=$("#".concat(s)),this.moreMenu.length||(this.moreMenu=this.more.next(".popupmenu, .popupmenu-wrapper")),this.moreMenu.length||(this.moreMenu=$('<ul id="popupmenu-toolbar-'.concat(this.id,'" class="popupmenu"></ul>')).insertAfter(this.more)),this.moreMenu.is(".popupmenu-wrapper")&&(this.moreMenu=this.moreMenu.children(".popupmenu")));var a,r=[];this.items.not(this.more).not(".ignore-in-menu").filter((function(){return $(this).parent(".buttonset, .inline").length})).each((function(){r.push(e.buildMoreActionsMenuItem($(this)))})),r.reverse(),$.each(r,(function(t,i){""!==i.text()&&i.prependTo(e.moreMenu)})),this.defaultMenuItems=this.moreMenu.children("li:not(.separator)"),this.hasDefaultMenuItems=this.defaultMenuItems.length>0,this.settings.moreMenuSettings&&Array.isArray(this.settings.moreMenuSettings.attributes)&&(a=this.settings.moreMenuSettings.attributes),a&&a.length||!Array.isArray(this.settings.attributes)||(a=this.settings.attributes.map((function(t){var e="".concat(t.value,"-actionbutton");return{name:t.name,value:e}}))),null!==(t=a)&&void 0!==t&&(null==t?void 0:t.length)||(a=null);var o=C.extend({},this.settings.moreMenuSettings,{trigger:"click",menu:this.moreMenu,attributes:a},this.hasDefaultMenuItems?{predefined:this.defaultMenuItems}:{});n?this.more.on("beforeopen.toolbar",(function(){e.refreshMoreActionsMenu(e.moreMenu)})).triggerHandler("updated",[o]):this.more.popupmenu(o).on("beforeopen.toolbar",(function(){e.refreshMoreActionsMenu(e.moreMenu)})),function(){e.items.attr("tabindex","-1");var t=e.items.filter(".is-selected");if(t.length)return e.activeButton=t.first().attr("tabindex","0"),void e.items.not(e.activeButton).removeClass("is-selected");t=e.items.filter(":visible:not(:disabled)").first().attr("tabindex","0"),e.activeButton=t,e.element.is(":hidden, .is-hidden")?e.activeButton=e.items.filter(":not(:disabled)").first().attr("tabindex","0"):e.isItemOverflowed(t)&&(t.attr("tabindex","-1"),e.activeButton=e.more.addClass("is-selected").attr("tabindex","0"))}(),this.adjustMenuItemVisibility(),this.handleResize(),this.element.triggerHandler("rendered");var l=this.buttonset.find(".searchfield-wrapper, .toolbar-searchfield-wrapper");return l.length&&l.trigger("reanimate"),this},buildMoreActionsMenuItem:function(t){var e;if(!0===t.data("skipit"))return t.data("skipit",void 0),e;var i=t.data("action-button-link");i&&i.length?e=i.parent():(e=$("<li></li>"),i=$('<a href="#"></a>').appendTo(e),t.data("action-button-link",i),i.data("original-button",t)),t.hasClass("hidden")&&e.addClass("hidden"),t.is(":disabled")?(e.addClass("is-disabled"),i.prop("disabled",!0)):(e.removeClass("is-disabled"),i.prop("disabled",!1)),i.text(this.getItemText(t));var n=$.getBaseURL("#icon-dropdown"),s=t.children(".icon").filter((function(){var t=$(this).getIconName();return t&&t!==n&&-1===t.indexOf("dropdown")}));s&&s.length&&(i.html("<span>".concat(i.text(),"</span>")),s.clone().detach().prependTo(i));var a=e.find("b");a.length&&(this.moreMenu.addClass("has-icons"),a.detach().prependTo(e));var r=this.items.not(this.more).not(".searchfield").index(t);if(t.is(".btn-menu")){var o,l;this.settings.attributes&&this.settings.attributes.length&&(l=this.settings.attributes.map((function(t){return{name:t.name,value:"".concat(t.value,"-menubutton-").concat(r)}}))),null!==(o=l)&&void 0!==o&&(null==o?void 0:o.length)||(l=null),t.data("popupmenu")?i.children(".icon.arrow").length||i.append($.createIcon({classes:"icon arrow icon-dropdown",icon:"dropdown"})):t.popupmenu({attributes:l});var c=t.data("popupmenu").menu,d=c.clone();!function t(i,n,s){var a,r=i.children("li"),o=n.attr("id");n.children("li").each((function(e,i){var n=$(i),s=r.eq(e),a=n.children("a"),o=s.children("a"),l=n.attr("id"),c=a.attr("id");l&&n.removeAttr("id").attr("data-original-menu-item",l),c&&a.removeAttr("id").attr("data-original-menu-anchor",c),o.data("action-button-link",a),a.data("original-button",o);var d=s.children(".wrapper").children(".popupmenu"),h=n.children(".wrapper").children(".popupmenu");d.length&&h.length&&t(d,h,n)})),n.removeAttr("id").attr("data-original-menu",o),s.addClass("submenu"),s.is(e)&&((a=s.children(".wrapper"))&&a.length||(a=$('<div class="wrapper"></div>')),a.html(n),s.append(a))}(c,d,e)}return t.is("[data-popdown]")&&t.popdown(),e},refreshMoreActionsMenu:function(t){var e=this;$("li > a",t).each((function(){var t,i=$(this),n=i.parent(),s=i.data("originalButton"),a=e.getItemText(s);s&&(i.find("span").length?i.find("span").text(a.trim()):i.text(a.trim()),s.isHiddenAtBreakpoint()||s.parent().isHiddenAtBreakpoint()?n.addClass("hidden"):n.removeClass("hidden"),s.parent().is(".is-disabled")||s.is(":disabled")?(n.addClass("is-disabled"),i.prop("disabled",!0),i.attr("tabindex","-1")):(n.removeClass("is-disabled"),i.prop("disabled",!1)),s.is("a")&&(s.parent("li").is(".is-checked")?n.addClass("is-checked"):n.removeClass("is-checked")),s.is(".btn-menu")&&(t=i.parent().find(".popupmenu").first(),e.refreshMoreActionsMenu(t)))}))},getItemText:function(t){if(!t)return"";var e,i=t.find("span").first(),n=t.attr("title"),s=t.data("tooltip"),a=s&&"string"==typeof s.content?s.content:void 0;return e=""!==n&&void 0!==n?n:a||(i.length?i.text():t.text()),h.stripHTML(e)},handleEvents:function(){var t=this;return this.items.on("keydown.toolbar",(function(e){t.handleKeys(e)})).on("click.toolbar",(function(e){t.handleClick(e)})),this.items.filter(".btn-menu, .btn-actions").on("close.toolbar",(function(){var e,i=$(this);i.is(".is-overflowed")?(e=t.getLastVisibleButton())&&e.length&&e[0].focus():document.activeElement&&"INPUT"===document.activeElement.tagName||(i&&i.focus(),t.buttonset.scrollTop(0))})),this.items.not(this.more).on("selected.toolbar",(function(e,i){e.stopPropagation(),t.handleSelected(e,i)})),this.more.on("keydown.toolbar",(function(e){t.handleKeys(e)})).on("beforeopen.toolbar",(function(){t.adjustMenuItemVisibility()})).on("selected.toolbar",(function(e,i){e.stopPropagation(),t.handleSelected(e,i)})),this.more.on("show-submenu.toolbar",(function(e,i){t.handleTransferToMenuButtonItem(e,i)})),this.element.on("updated.toolbar",(function(e,i){e.stopPropagation(),t.updated(i)})).on("recalculate-buttons.toolbar",(function(e,i){t.handleResize(i)})).on("scrollup.toolbar",(function(){var e=t.element.parents(".tab-container.module-tabs");e.length&&e.scrollTop(0)})),$("body").on("resize.toolbar-".concat(this.id),(function(){t.handleResize()})),this.handleResize(),this},handleTransferToMenuButtonItem:function(t,e){var i=e.children("a").data("original-button");if(i){var n=i.data("popupmenu");n&&"function"==typeof n.settings.beforeOpen&&(n.callSource(t),this.buildMoreActionsMenuItem(i))}},handleSelected:function(t,e){var i,n,s,a,r=e.data("original-button");if(e.parent().is(".hidden, .is-disabled")||e.is("[readonly], [disabled]"))t.preventDefault();else{if(r&&r.length>0){if(i=r.listEvents(),n=this.element.listEvents(),this.setActiveButton(r),r.is("[data-popdown]")&&(a=r.data("popdown"),this.isItemOverflowed(r)&&(a.settings.trigger=this.more,a.updated())),r.attr("ng-click")||r.attr("data-ng-click"))return void r.trigger("click");for(var o=["click","touchend","touchcancel"],l=0;l<o.length;l++){var c=o[l];if(n&&n[c]&&n[c].delegateCount>0){var d=this.element,h=$.Event(c);return h.target=d.find(r)[0],void d.trigger(h)}if(i&&i[c]||r[0]["on".concat(c)])return void r.trigger(c)}return a=(s=r.parents(".popupmenu")).data("trigger"),s.length&&a instanceof $&&a.length?void a.triggerHandler("selected",[r]):void this.triggerSelect(r)}this.triggerSelect(e)}},handleClick:function(t){return this.setActiveButton($(t.currentTarget)),this.triggerSelect($(t.currentTarget)),!1},handleKeys:function(t){var e=t.which,i=$(t.target),n=i.is(".btn-actions"),s=B.isRTL();(37===e&&i.is(":not(input)")||38===e&&i.is(":not(input.is-open)"))&&(t.preventDefault(),n?this.setActiveButton(s?this.getFirstVisibleButton():this.getLastVisibleButton()):this.navigate(s?1:-1)),(39===e&&i.is(":not(input)")||40===e&&i.is(":not(input.is-open)"))&&(t.preventDefault(),n?this.setActiveButton(s?this.getLastVisibleButton():this.getFirstVisibleButton()):this.navigate(s?-1:1))},handleResize:function(t){if(this.settings.resizeContainers){var e=t?t.title:void 0,i=t?t.buttonset:void 0;this.sizeContainers(e,i)}for(var n=this.getButtonsetButtons(),s=0;s<n.length;s++)n[s].removeClass("is-overflowed");this.element.is(":not(:hidden)")&&(this.adjustMenuItemVisibility(),this.toggleMoreMenu())},sizeContainers:function(t,e){var i=this.element[0],n=this.title[0],s=this.buttonset[0],a=this.more[0];if(this.title&&this.title.length){if(this.element.is(":hidden"))return s.style.width="",n.style.width="",void i.classList.remove("do-resize");s.style.width="",n.style.width="",i.classList.contains("do-resize")||i.classList.add("do-resize");var r=$(i).getHiddenSize(),o=$(s).getHiddenSize(),l=$(n).getHiddenSize(),c=$(a).getHiddenSize(),d=parseInt(r.padding.left,10)+parseInt(r.padding.right,10);isNaN(c.width)&&(c.width=50),(isNaN(o.width)||o.width<0)&&(o.width=0);var h,u=this,p=void 0!==t&&!isNaN(t),g=void 0!==e&&!isNaN(e);this.cutoffTitle=!1;var f=p?parseInt(t,10):!0===u.settings.favorButtonset?r.width-(d+(g?parseInt(e,10):o.width)+c.width):l.scrollWidth,m=g?parseInt(e,10):!0===u.settings.favorButtonset?o.width:r.width-(d+(p?parseInt(t,10):l.scrollWidth)+c.width);if(this.settings.favorButtonset)return f<74&&(this.cutoffTitle=!0,h=Math.abs(f-74),f=74,m-=h),s.style.width=v(m+2),n.style.width=v(f-2),n.textContent&&f<E.textWidth(n.textContent.trim())&&(this.cutoffTitle=!0),void(f>E.textWidth($(n).find("h1").text().trim())&&(this.cutoffTitle=!1));m<0&&(this.cutoffTitle=!0,h=Math.abs(m-0),m=0,f-=h),n.style.width=v(f+2),s.style.width=v(m-2)}function v(t){return"".concat(t,"px")}},navigate:function(t){var e,i=this.items.filter(":visible:not(:disabled)"),n=i.index(this.activeButton)+t;n>=0&&n<i.length&&(e=i.eq(n)),n>=i.length&&(e=i.first()),-1===n&&(e=i.last()),this.isItemOverflowed(e)&&(e=this.more),this.setActiveButton(e)},getLastVisibleButton:function(){for(var t,e,i=$(this.items.get().reverse()).not(this.more),n=0;!t&&n<i.length;){if(e=$(i[n]),!this.isItemOverflowed(e)){t=e;break}n++}for(t&&0!==t.length||(t=i.first());t.length&&t.is(".separator, *:disabled, *:hidden");)t=t.prev();return t},getFirstVisibleButton:function(){for(var t=0,e=this.items,i=e.eq(t);i.is(".separator, *:disabled, *:hidden");)t++,i=e.eq(t);return i},setActiveButton:function(t,e){if(t[0]!==this.activeButton[0]){var i=this;this.items.add(this.more).attr("tabindex","-1").removeClass("is-selected"),this.activeButton=function(){if(t.is("a"))return n();var e=i.more.data("tooltip");return t[0]===i.more[0]?(e&&e.tooltip.is(":not(.hidden)")&&e.hide(),n()):i.isItemOverflowed(t)&&!t.is(".searchfield")?n():t}(),this.activeButton.addClass("is-selected").attr("tabindex","0"),!e&&this.activeButton[0]&&(this.buttonsetItems.length>1&&this.activeButton[0].focus(),this.element.triggerHandler("navigate",[this.activeButton]))}function n(){return i.moreButtonIsDisabled()||!i.element.hasClass("has-more-button")?i.getLastVisibleButton():i.more}},triggerSelect:function(t){var e=$(t);e.is(this.more)||e.is(".btn-menu, li.submenu")||this.element.triggerHandler("selected",[e])},getButtonsetButtons:function(){for(var t,e=[],i=this.buttonsetItems,n=0;n<i.length;n++)void 0!==(t=i.eq(n)).data("action-button-link")&&t.is(":not(.searchfield)")&&e.push(t);return e},getVisibleButtons:function(t){var e,i=this,n=[],s=[];t&&Array.isArray(t)||(t=this.getButtonsetButtons());for(var a=0;a<t.length;a++)t[a][0].classList.remove("is-overflowed");for(var r=0;r<t.length;r++)e=t[r],i.isItemOverflowed(e)?n.push(e):s.push(e);return{visible:s,hidden:n}},adjustMenuItemVisibility:function(t){var e="removeClass";function i(t,i){var n=t[0],s=t.data("action-button-link").parent()[0],a=t.isHiddenAtBreakpoint();if(i)return s.classList.add("hidden"),void n.classList.remove("is-overflowed");a||s.classList.remove("hidden"),n.classList.add("is-overflowed"),t.find(".icon").length&&(e="addClass")}t||(t=this.getVisibleButtons());for(var n=0;n<t.visible.length;n++)i(t.visible[n],!0);for(n=0;n<t.hidden.length;n++)i(t.hidden[n],!1);var s=0;this.moreMenu.find(".icon").each((function(){$(this).parent().parent().hasClass("hidden")||$(this).hasClass("icon-dropdown")||s++})),s>0&&(e="addClass"),this.moreMenu[e]("has-icons")},isItemOverflowed:function(t){if(this.moreButtonIsDisabled())return!1;if(!t||0===t.length)return!0;var e=this.buttonsetItems.filter(":not(.hidden)").index(t),i=this.settings.maxVisibleButtons;if(this.moreButtonIsVisible()&&(i-=1),this.title.length&&e>=i)return!0;this.buttonset.scrollTop()>0&&this.buttonset.scrollTop(0),t instanceof $&&t.length&&(t=t[0]);var n=t.classList,s=window.getComputedStyle(t);if(n.contains("btn-actions"))return!0;if(n.contains("searchfield"))return!1;if("none"===s.display)return!0;var a=B.isRTL(),r=t.getBoundingClientRect(),o=this.buttonset[0].getBoundingClientRect(),l=a?r.left<=o.left:r.right>=o.right;return!0===r.bottom>=o.bottom||!0===l},moreButtonIsDisabled:function(){return this.element[0].classList.contains("no-actions-button")},hasNoMoreButton:function(){return z(this.moreButtonIsDisabled,this.hasNoMoreButton).apply(this)},moreButtonIsVisible:function(){return this.element[0].classList.contains("has-more-button")},toggleMoreMenu:function(){if(!this.moreButtonIsDisabled()){var t="removeClass";this.moreMenu.children("li:not(.separator)").not(".hidden").length>0&&(t="addClass"),this.element[t]("has-more-button");var e=this.more.data("popupmenu");if("removeClass"===t){if(!e)return;e.close();var i=e.menu.find("li:not(.separator)").children("a"),n=!1;if(i.add(this.more).each((function(){document.activeElement===this&&(n=!0)})),n){var s=this.getLastVisibleButton()[0];s&&s.focus()}}}},buildAriaLabel:function(){if(!this.element.attr("aria-label")){var t=1===this.element.closest(".header").length,e=this.element.attr("id")||"",i=this.element.children(".title"),n=this.element.prev("label"),s=this.element.prev(".label"),a=t?$("header.header").find("h1").text():i.length?i.filter("div").text():n.length?n.text():s.length?s.text():"".concat(e," ").concat(B.translate("Toolbar"));this.element.attr("aria-label",a.replace(/\s+/g," ").trim())}},updated:function(t){this.settings.noSearchfieldReinvoke&&(this.keepSearchfield=!0),t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},enable:function(){this.element.prop("disabled",!1),this.items.prop("disabled",!1),this.more.prop("disabled",!1)},disable:function(){this.element.prop("disabled",!0),this.items.prop("disabled",!0),this.more.prop("disabled",!0).data("popupmenu").close()},teardown:function(){var t=this;$("body").off("resize.toolbar-".concat(this.id));var e=void 0===this.moreMenu?[]:this.moreMenu.children("li");if(e.each((function(){t.teardownMoreActionsMenuItem($(this),!0)})),e.not(this.defaultMenuItems).remove(),delete this.defaultMenuItems,delete this.hasDefaultMenuItems,this.items.each((function(t,e){var i=$(e).data("tooltip");i&&"function"==typeof i.destroy&&i.destroy();var n=$(e).data("button");n&&"function"==typeof n.destroy&&n.destroy(),e.classList.remove("is-overflowed"),e.removeAttribute("tabindex")})),this.items.off(["keydown.".concat("toolbar"),"click.".concat("toolbar"),"focus.".concat("toolbar"),"blur.".concat("toolbar"),"close.".concat("toolbar"),"selected.".concat("toolbar")].join(" ")),delete this.items,this.title&&this.title.length){var i=this.title.off("beforeshow.toolbar").data("tooltip");i&&"function"==typeof i.destroy&&i.destroy(),this.title[0].style.width="",delete this.cutoffTitle,delete this.title}if(this.buttonsetItems&&delete this.buttonsetItems,this.buttonset.children(".searchfield-wrapper").length)if(this.settings.noSearchfieldReinvoke||this.keepSearchfield)this.keepSearchfield&&delete this.keepSearchfield;else{var n=this.buttonset.children(".searchfield-wrapper").children(".searchfield"),s=n.data("searchfield");s&&"function"==typeof s.destroy&&n.data("searchfield").destroy()}return this.buttonset&&this.buttonset.length&&(this.buttonset[0].style.width="",delete this.buttonset),this.moreMenu&&delete this.moreMenu,this.more.length&&void 0!==this.more.data("popupmenu")&&(this.more.off(["keydown.".concat("toolbar"),"beforeopen.".concat("toolbar"),"selected.".concat("toolbar"),"show-submenu.".concat("toolbar")].join(" ")),this.more.data("popupmenu").destroy(),delete this.more),this.activeButton&&delete this.activeButton,this.element.off(["updated.".concat("toolbar"),"recalculate-buttons.".concat("toolbar"),"scrollup.".concat("toolbar")].join(" ")),this.element[0].classList.remove("do-resize"),this.element.removeAttr("role").removeAttr("aria-label"),this},teardownMoreActionsMenuItem:function(t,e){var i=this,n=$(t),s=n.children("a"),a=s.data("original-button");s.off("mousedown.toolbar click.toolbar touchend.toolbar touchcancel.toolbar");var r,o=n.find(".icon");o.length&&o.remove(),n.is(".submenu")&&(r=n.children(".wrapper").children(".popupmenu")).children("li").each((function(){i.teardownMoreActionsMenuItem($(this),!0)})),a&&a.length&&($.removeData(s[0],"original-button"),$.removeData(a[0],"action-button-link"),s.remove(),r&&r.off().parent(".wrapper").off().remove(),e&&n.remove())},destroy:function(){this.teardown(),$.removeData(this.element[0],"toolbar")}},$.fn.toolbar=function(t){return this.each((function(){var e=$.data(this,"toolbar");e?e.updated(t):e=$.data(this,"toolbar",new Yi(this,t))}))};var Ki=["p","h1","h2","h3","h4","h5","h6","blockquote","pre","code"],Xi={buttons:{editor:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","source"],source:["fontPicker","separator","bold","italic","underline","strikethrough","separator","foreColor","backColor","separator","justifyLeft","justifyCenter","justifyRight","separator","quote","orderedlist","unorderedlist","separator","anchor","separator","image","separator","clearFormatting","separator","visual"]},excludeButtons:{editor:["backColor"],source:["backColor"]},rows:{editor:null,source:null},delay:200,placeholder:null,pasteAsPlainText:!1,anchor:{url:"http://www.example.com",class:"hyperlink",target:"NewWindow",isClickable:!1,showIsClickable:!1},image:{url:"/images/placeholder-80x80.png"},onLinkClick:null,showHtmlView:!1,preview:!1,paragraphSeparator:"p",useFlexToolbar:!0,useSourceFormatter:!1,formatterTabsize:4,fontpickerSettings:{popupmenuSettings:{showArrow:!1,offset:{y:0}}},attributes:null};function Qi(t,e){this.settings=C.mergeSettings(t,e,Xi),null!=e&&(null==e?void 0:e.buttons)&&(this.settings.buttons=e.buttons),this.element=$(t),this.init()}Qi.prototype={get toolbarAPI(){var t;return this.toolbar&&this.toolbar.length&&(t=this.toolbar.data(this.settings.useFlexToolbar?"toolbar-flex":"toolbar")),t},init:function(){var t=this;if(this.id="".concat(C.uniqueId(this.element,"editor"),"-id"),this.container=this.element.parent(".field, .field-short").addClass("editor-container"),this.label=this.element.prevAll(".label").first(),!this.previewRendered&&(this.element.hasClass("is-preview")||this.settings.preview))return this.container[0].classList.add("is-preview"),this.element[0].classList.remove("is-disabled","is-readonly","is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),void this.element[0].removeAttribute("role");var e=this.settings;if(e.anchor=$.extend({},Xi.anchor,e.anchor),e.image=$.extend({},Xi.image,e.image),e.anchor.defaultUrl=e.anchor.url,e.anchor.defaultClass=e.anchor.class,e.anchor.defaultTargetText=e.anchor.target,e.anchor.defaultIsClickable=e.anchor.isClickable,e.anchor.targets=e.anchor.targets||{SameWindow:"",NewWindow:"_blank"},$.each(this.settings.anchor.targets,(function(e,i){t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(t.settings.anchor.target=i,t.settings.anchor.defaultTarget=i)})),(this.settings.firstHeader||this.settings.secondHeader)&&(Array.isArray(this.settings.fontpickerSettings.styles)||(this.settings.fontpickerSettings.styles=[]),this.settings.fontpickerSettings.styles.length||this.settings.fontpickerSettings.styles.push(new ji("legacyDefault","Default")),this.settings.firstHeader&&(F("`fontpickerSettings.styles` setting","`firstHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new ji("legacyHeader1","Header 1",this.settings.firstHeader)),delete this.settings.firstHeader),this.settings.secondHeader&&(F("`fontpickerSettings.styles` setting","`secondHeader` setting","Editor Component"),this.settings.fontpickerSettings.styles.push(new ji("legacyHeader2","Header 2",this.settings.secondHeader)),delete this.settings.secondHeader)),e.buttons&&e.buttons.editor){for(var i=!1,n=[new ji("default","Default","p")],s=e.buttons.editor.filter((function(t){return"header"===t.substr(0,6)})),a=0;a<s.length;a++){var r=s[a].substr(6,1);i=!0,n.push(new ji("header".concat(r),"Header ".concat(r),"h".concat(r)))}i&&(e.buttons.editor=e.buttons.editor.filter((function(t){return"header"!==t.substr(0,6)})),e.fontpickerSettings={styles:n}),"separator"===e.buttons.editor[0]&&e.buttons.editor.splice(0,1),i&&(e.buttons.editor=["fontPicker"].concat(e.buttons.editor))}return e.anchor.defaultTarget||(e.anchor.target&&$.trim(e.anchor.target).length?e.anchor.defaultTarget=e.anchor.target:(e.anchor.defaultTargetText=B.translate("SameWindow"),e.anchor.defaultTarget=e.anchor.targets[e.anchor.defaultTargetText])),this.setup(),"string"==typeof e.paragraphSeparator&&/^(p|br|div)$/.test(e.paragraphSeparator)&&document.execCommand("defaultParagraphSeparator",!1,e.paragraphSeparator),this.element.hasClass("is-readonly")&&this.readonly(),this.settings.showHtmlView&&this.toggleSource(),this.setRowsHeight(),this},setup:function(){this.isActive=!0,this.modals={},this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().setupKeyboardEvents().onPasteTriggered()},initElements:function(){return this.element.attr({contentEditable:!0,"aria-multiline":!0,role:"textbox","aria-labelledby":this.container.find(".label").length?this.container.find(".label")[0].id:"no-id"}),this.element.attr("data-editor",!0),this.initTextarea(),this.bindParagraphCreation().bindTab(),this.createToolbar().bindButtons().bindModals().bindAnchorPreview(),this},sourceViewActive:function(){return this.element.hasClass("source-view-active")},setPlaceholders:function(){return this.settings.placeholder?(this.element.attr("placeholder",this.settings.placeholder),this):this},getCurrentElement:function(){return this.sourceViewActive()?this.textarea:this.element},bindParagraphCreation:function(){var t=this;return this.getCurrentElement().on("keyup.editor",(function(e){var i,n=t.getSelectionStart();n&&n.getAttribute("data-editor")&&0===n.children.length&&document.execCommand("formatBlock",!1,"p"),13===e.which&&("li"===(i=(n=t.getSelectionStart()).tagName.toLowerCase())||t.isListItemChild(n)||(e.shiftKey||document.execCommand("formatBlock",!1,"p"),"a"===i&&document.execCommand("unlink",!1,null)))})),this},bindTab:function(){var t=this;return this.getCurrentElement().on("keydown.editor",(function(e){if(9===e.which){var i=t.getSelectionStart().tagName.toLowerCase();"pre"===i&&(e.preventDefault(),document.execCommand("insertHtml",null,"    ")),"li"===i&&(e.preventDefault(),document.execCommand(e.shiftKey?"outdent":"indent",e))}if(8===e.which){var n=t.element.text().toString().trim().replace(/\s/g,"");window.getSelection().toString().trim().replace(/\s/g,"")===n&&t.element.html("")}})),this},setExcludedButtons:function(){var t,e,i,n=this,s=function(t,e){var i=-1,n=0;return t.filter((function(t,s){var a=!0;return e.indexOf(t)>-1&&"separator"!==t?(n++,a=!1):"separator"===t&&s-n-1===i&&(n=0,a=!1),"separator"===t&&(i=s),a}))};return t=n.settings,e=t.buttons,i=t.excludeButtons,n.sourceViewActive()?i&&i.source&&i.source.length?s(e.source,i.source):e.source:i&&i.editor&&i.editor.length?s(e.editor,i.editor):e.editor},createToolbar:function(){var t=this;if(this.toolbar)return this;var e=[this.settings.useFlexToolbar?"flex-toolbar":"toolbar","editor-toolbar","formatter-toolbar"].join(" "),n="",s="";this.settings.useFlexToolbar&&(n="toolbar-section ",s='<div class="toolbar-section more">\n        <button class="btn-actions btn-editor">\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-more"></use>\n          </svg>\n        </button>\n      </div>');for(var a=this.setExcludedButtons(),r="",o=0,l=a.length;o<l;o+=1){var c=this.buttonTemplate(a[o]);c&&this.element.hasClass("source-view-active")&&"visual"!==a[o]&&(c=c.replace('type="button"','type="button" disabled')),c&&(r+=c)}var d="";this.settings.attributes&&(d=this.getAutomationAttributes("-editor-toolbar"),d=JSON.stringify(d),d=' data-options=\'{"attributes": '.concat(d,"}'"));var h='<div class="'.concat(e,'" data-init="false" id="editor-toolbar-').concat(this.id,'"').concat(d,'>\n      <div class="').concat(n,'buttonset">\n        ').concat(r,"\n      </div>\n      ").concat(s,"\n    </div>");this.element.parent().find(".icon-dirty").length?this.toolbar=$(h).insertBefore(this.element.parent().find(".icon-dirty")):this.toolbar=$(h).insertBefore(this.sourceViewActive()?this.element.prev():this.element);var u=this.toolbar.find('[data-action="fontStyle"]').first();if(u&&u.length){if(this.settings.attributes){var p=this.getAutomationAttributes("-editor-fontpicker");"object"===i(this.settings.fontpickerSettings.popupmenuSettings)?this.settings.fontpickerSettings.popupmenuSettings.attributes=p:this.settings.fontpickerSettings.popupmenuSettings||(this.settings.fontpickerSettings.popupmenuSettings={attributes:p})}u.fontpicker(this.settings.fontpickerSettings),this.fontPickerElem=u}var g=this.toolbar.find('[data-action="foreColor"], [data-action="backColor"]');return g.colorpicker({placeIn:"editor",popupmenuSettings:{offset:{y:0},showArrow:!1}}),$(".trigger",g).off("click.colorpicker"),this.toolbar[this.settings.useFlexToolbar?"toolbarflex":"toolbar"]({moreMenuSettings:{offset:{y:0},showArrow:!1}}),this.toolbar.find("button[title]").tooltip(),g.on("beforeopen.editor",(function(e,i){var n=t.toolbar.data("toolbar")||t.toolbar.data("toolbar-flex");n&&n.overflowedItems.forEach((function(t){"colorpicker"===t.type&&i&&i.parent(".popupmenu-wrapper").off("afterplace.editor").one("afterplace.editor",(function(t,e){if(void 0===e.width){var i,n,s=(((null===(i=e.container)||void 0===i||null==i?void 0:i.outerWidth())||-1)-((null===(n=e.element)||void 0===n||null==n?void 0:n.outerWidth())||-1))/2;s>-1&&e.element.css("left","".concat(s,"px"))}}))}))})),this},getAutomationAttributes:function(t){var e=this,i=this.settings,n=i.attributes;if(i.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(i.attributes))n=[],i.attributes.forEach((function(i){var s="function"==typeof i.value?i.value(e):i.value;n.push({name:i.name,value:s+t})}));else{var s="function"==typeof i.attributes.value?i.attributes.value(this):i.attributes.value;n={name:i.attributes.name,value:s+t}}return n},switchToolbars:function(){this.destroyToolbar(),this.setupTextareaEvents(),this.createToolbar(),this.bindButtons().bindModals().bindAnchorPreview(),this.bindSelect().bindPaste().setupKeyboardEvents(),this.toolbar.find("button").button()},initTextarea:function(){var t=this;return this.textarea&&!this.settings.showHtmlView?this:(this.textarea=this.createTextarea(),this.textarea.text(h.sanitizeHTML(this.element.html().toString())),this.container.on("input.editor keyup.editor",".editor",f((function(e){t.textarea.text(h.sanitizeHTML(t.element.html().toString())),t.resetEmptyEditor(e),t.element.trigger("change")}),400)),$("html").on("themechanged.".concat("editor"),(function(){t.setRowsHeight(),t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()})),this.setupTextareaEvents(),this.textarea)},setRowsHeight:function(){var t,e,i,n,s,a,r,o,l=Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1;null!==(t=this.settings)&&void 0!==t&&null!==(e=null==t?void 0:t.rows)&&void 0!==e&&(null==e?void 0:e.editor)&&this.element.height((null===(s=this.settings)||void 0===s||null===(a=null==s?void 0:s.rows)||void 0===a||null==a?void 0:a.editor)*(l?26:22.2));null!==(i=this.settings)&&void 0!==i&&null!==(n=null==i?void 0:i.rows)&&void 0!==n&&(null==n?void 0:n.source)&&this.element.parent().find(".editor-source").height(26*(null===(r=this.settings)||void 0===r||null===(o=null==r?void 0:r.rows)||void 0===o||null==o?void 0:o.source)+15)},resetEmptyEditor:function(){this.savedSelection=this.saveSelection();var t="p"===this.settings.paragraphSeparator?"p":"div",e=this.element.html().toString().trim();"<br>"!==(e=this.element.html().toString().trim())&&e!=="<".concat(t,"><br></").concat(t,">")||this.element.html(""),this.element.contents().filter((function(){return 3===this.nodeType&&""!==this.textContent.trim()})).wrap("<".concat(t,"></").concat(t,">")),e=this.element.html().toString().trim(),this.textarea.html(h.sanitizeHTML(e));var i=this.saveSelection(),n=function(t){return"number"==typeof t},s=function(t){return function(t){return t&&t[0]&&n(t[0].startOffset)&&n(t[0].endOffset)}(t)?{start:t[0].startOffset,end:t[0].endOffset}:null},a=s(this.savedSelection),r=s(i);null!==a&&null!==r&&a.start===r.start&&a.end===r.end||this.restoreSelection(this.savedSelection)},removeWhiteSpace:function(){var t=this.element.html().toString().trim();((t||"").match(/>\s+</g)||[]).length>0&&this.element.html(t.replace(/>\s+</g,"><"))},createTextarea:function(){this.sourceView=$("<div></div>").attr({class:"editor-source editable hidden",id:"editor-source-".concat(this.id)}).insertBefore(this.element),$("<ul></ul>").addClass("line-numbers").appendTo(this.sourceView);var t=$('<div class="text-container"></div>').appendTo(this.sourceView),e="source-textarea-".concat($('[id^="source-textarea-"]').length+1),i="".concat(this.element.prev(".label").addClass("audible").text()," - HTML Source View");return $('<label class="audible" for="'.concat(e,'">').concat(i,"</label>")).appendTo(t),$('<textarea id="'.concat(e,'" class="editable"></textarea>')).appendTo(t)},triggerClick:function(t,e){$('button[data-action="'.concat(e,'"]'),this.toolbar).trigger("click.editor")},setupKeyboardEvents:function(){var t=this,e=this.getCurrentElement(),i={b:66,e:69,h:72,i:73,l:76,bl:55,n:56,q:81,r:82,u:85,h3:51,h4:52,space:32,sv:192};return e.on("keydown.editor",(function(n){switch((n=n||window.event).which?i.charCode=n.which:n.keyCode?i.charCode=n.keyCode:i.charCode=!1,n.ctrlKey&&i.charCode){case i.h3:t.triggerClick(n,"append-".concat(t.settings.firstHeader));break;case i.h4:t.triggerClick(n,"append-".concat(t.settings.secondHeader));break;case i.b:t.triggerClick(n,"bold"),n.preventDefault();break;case i.e:t.triggerClick(n,"justifyCenter");break;case i.h:t.triggerClick(n,"anchor"),n.preventDefault();break;case i.i:t.triggerClick(n,n.shiftKey?"image":"italic"),n.shiftKey||n.preventDefault();break;case i.bl:n.shiftKey&&t.triggerClick(n,"insertunorderedlist"),n.preventDefault();break;case i.l:n.shiftKey||t.triggerClick(n,"justifyLeft"),n.preventDefault();break;case i.n:n.shiftKey&&t.triggerClick(n,"insertorderedlist");break;case i.q:t.triggerClick(n,"append-blockquote");break;case i.r:t.triggerClick(n,"justifyRight");break;case i.u:t.triggerClick(n,"underline"),n.preventDefault();break;case i.space:t.triggerClick(n,"clearFormatting");break;case i.sv:t.triggerClick(n,e===t.element?"source":"visual")}})),this.element.on("mousedown.editor","a",(function(t){var e=$(this).attr("href");"firefox"!==m.browser.name&&"Mac OS X"===m.os.name&&(t.metaKey||t.ctrlKey)&&(window.open(e,"_blank"),t.preventDefault())})),this.element.on("updated.editor",(function(){t.updated()})),this},setupTextareaEvents:function(){var t=this;return this.textarea.off(".editor").on("input.editor keyup.editor",(function(){t.sourceView.hasClass("hidden")||t.adjustSourceLineNumbers()})).on("focus.editor",(function(){t.sourceView.addClass("is-focused")})).on("blur.editor",(function(e){t.sourceView.removeClass("is-focused"),t.element.empty().html(h.sanitizeHTML(t.textarea.val())),t.element.data("validate")&&t.element.data("validate").validate(t.element,!0,e)})),this},adjustSourceLineNumbers:function(){var t=this.textarea.parent(),e=parseInt(getComputedStyle(this.textarea[0]).lineHeight,10),i=this.textarea.innerHeight()-this.textarea.height();this.textarea[0].style.height="";var n=this.textarea[0].scrollHeight,s=Math.floor((n-i)/e),a=this.sourceView.find(".line-numbers"),r=a.find("li").length,o="",l=0;if(!this.lineNumbers||s!==this.lineNumbers){if(this.lineNumbers)if(this.lineNumbers<s){for(;l<s-this.lineNumbers;)o+='<li role="presentation"><span>'.concat(r+l+1,"</span></li>"),l++;a.append(o)}else this.lineNumbers>s&&(l=this.lineNumbers-s,a.find("li").slice(-l).remove());else{for(this.lineNumbers=s;l<this.lineNumbers;)o+='<li role="presentation"><span>'.concat(l+1,"</span></li>"),l++;a.append(o)}this.lineNumbers=s}t[0].style.width="calc(100% - ".concat(a.outerWidth()+2,"px)"),n===this.textarea[0].scrollHeight?this.textarea[0].style.height="".concat(a[0].scrollHeight-13,"px"):this.adjustSourceLineNumbers()},wrapTextInTags:function(t,e,i){var n,s;switch(i){case"bold":n=["<b>","</b>"];break;case"italic":n=["<i>","</i>"];break;case"underline":n=["<u>","</u>"];break;case"strikethrough":n=["<strike>","</strike>"];break;case"append-blockquote":n=["<blockquote>","</blockquote>"];break;default:n=["",""]}if("anchor"===i){var a=$('<a href="'.concat(t,'">').concat(e,"</a>"));this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&a.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&a.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?a.attr("contenteditable",!1):a.removeAttr("contenteditable"),s=a[0].outerHTML}else s=n[0]+t+e+n[1];return s},insertTextAreaContent:function(t,e){var i,n,s,a,r=this.textarea[0],o=r.value;t=t||"",document.selection&&"TEXTAREA"===r.tagName?($(r).focus(),(i=document.selection.createRange()).text=this.wrapTextInTags(t,i.text,e),$(r).focus()):r.selectionStart||"0"===r.selectionStart?(n=r.selectionStart,s=r.selectionEnd,a=r.scrollTop,i=this.wrapTextInTags(t,o.substring(n,s),e),r.value=o.substring(0,n)+i+o.substring(s,o.length),$(r).focus(),r.selectionStart=n+i.length,r.selectionEnd=n+i.length,r.scrollTop=a):(r.value+=this.wrapTextInTags(t,r.value,e),$(r).focus(),r.value=r.value)},buttonTemplate:function(t){var e=this.getButtonLabels(this.settings.buttonLabels);return{bold:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleBold"),'" data-action="bold" data-element="b">').concat(e.bold,"</button>"),italic:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleItalic"),'" data-action="italic" data-element="i">').concat(e.italic,"</button>"),underline:'<button type="button" class="btn btn-editor underline" title="'.concat(B.translate("ToggleUnderline"),'" data-action="underline" data-element="u">').concat(e.underline,"</button>"),strikethrough:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("StrikeThrough"),'" data-action="strikethrough" data-element="strike">').concat(e.strikethrough,"</button>"),foreColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(B.translate("TextColor"),'" data-action="foreColor" data-element="foreColor" data-init="false">').concat(e.foreColor,"</button>"),backColor:'<button type="button" class="btn btn-editor colorpicker-editor-button" title="'.concat(B.translate("BackgroundColor"),'" data-action="backColor" data-element="backColor">').concat(e.backColor,"</button>"),superscript:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Superscript"),'" data-action="superscript" data-element="sup">').concat(e.superscript,"</button>"),subscript:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Subscript"),'" data-action="subscript" data-element="sub">').concat(e.subscript,"</button>"),separator:'<div class="separator"></div>',anchor:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("InsertAnchor"),'" data-action="anchor" data-modal="modal-url-').concat(this.id,'" data-element="a">').concat(e.anchor,"</button>"),image:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("InsertImage"),'" data-action="image" data-modal="modal-image-').concat(this.id,'" data-element="img">').concat(e.image,"</button>"),header1:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleH3"),'" data-action="append-').concat(this.settings.firstHeader,'" data-element="').concat(this.settings.firstHeader,'">').concat(e.header1,"</button>"),header2:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ToggleH4"),'" data-action="append-').concat(this.settings.secondHeader,'" data-element="').concat(this.settings.secondHeader,'">').concat(e.header2,"</button>"),quote:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("Blockquote"),'" data-action="append-blockquote" data-element="blockquote">').concat(e.quote,"</button>"),orderedlist:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("OrderedList"),'" data-action="insertorderedlist" data-element="ol">').concat(e.orderedlist,"</button>"),unorderedlist:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("UnorderedList"),'" data-action="insertunorderedlist" data-element="ul">').concat(e.unorderedlist,"</button>"),fontPicker:'<button type="button" class="btn btn-editor fontpicker" data-action="fontStyle" data-init="false"><span>'.concat("FontPicker","</span></button>"),justifyLeft:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyLeft"),'" data-action="justifyLeft" >').concat(e.justifyLeft,"</button>"),justifyCenter:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyCenter"),'" data-action="justifyCenter">').concat(e.justifyCenter,"</button>"),justifyRight:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("JustifyRight"),'" data-action="justifyRight" >').concat(e.justifyRight,"</button>"),clearFormatting:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ClearFormatting"),'" data-action="clearFormatting" >').concat(e.clearFormatting,"</button>"),source:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ViewSource"),'" data-action="source" >').concat(e.source,"</button>"),visual:'<button type="button" class="btn btn-editor" title="'.concat(B.translate("ViewVisual"),'" data-action="visual" >').concat(e.visual,"</button>")}[t]||!1},getIcon:function(t,e,i){return'<span class="audible">'.concat(B.translate(t),"</span>").concat($.createIcon({classes:i||"",icon:e}))},getButtonLabels:function(t){var e,n={bold:this.getIcon("Bold","bold"),italic:this.getIcon("Italic","italic"),underline:this.getIcon("Underline","underline"),superscript:'<span aria-hidden="true"><b>x<sup>1</sup></b></span>',subscript:'<span aria-hidden="true"><b>x<sub>1</sub></b></span>',strikethrough:this.getIcon("StrikeThrough","strike-through"),foreColor:this.getIcon("TextColor","fore-color"),backColor:this.getIcon("BackgroundColor","back-color"),anchor:this.getIcon("InsertAnchor","link"),image:this.getIcon("InsertImage","insert-image"),header1:this.getIcon("ToggleH3","h3"),header2:this.getIcon("ToggleH4","h4"),quote:this.getIcon("Blockquote","quote"),orderedlist:this.getIcon("OrderedList","number-list"),unorderedlist:this.getIcon("UnorderedList","bullet-list"),pre:'<span aria-hidden="true"><b>0101</b></span>',indent:'<span aria-hidden="true"><b>&rarr;</b></span>',outdent:'<span aria-hidden="true"><b>&larr;</b></span>',justifyLeft:this.getIcon("JustifyLeft","left-text-align"),justifyCenter:this.getIcon("JustifyCenter","center-text"),justifyRight:this.getIcon("JustifyRight","right-text-align"),clearFormatting:this.getIcon("ClearFormatting","clear-formatting"),source:this.getIcon("ViewSource","html","html-icon"),visual:this.getIcon("ViewVisual","visual","visual-icon")};if("object"===i(t)&&(e=t),"object"===i(e))for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);return n},activateButton:function(t){this.toolbar.find('[data-element="'.concat(t,'"]')).addClass("is-active")},bindButtons:function(){var t=this,e=this;function i(t,i){var n=i instanceof pi?$(i.element):$(t.target);if(!n.is(".btn-actions")){var s=n.attr("data-action"),a=e.getCurrentElement();return t.preventDefault(),a.focus(),void 0===e.selection&&e.checkSelection(),e.sourceViewActive()||n.toggleClass("is-active"),s&&(e.execAction(s,t),n&&!e.isBtnOverflowedItem(n)&&n.focus()),("ie"===m.browser.name||m.browser.isEdge())&&a.trigger("change"),!n[0].classList.contains("longpress-target")&&void 0}}return this.settings.useFlexToolbar?(this.toolbar.on("selected.editor",i),this.toolbar.on("click.editor",".colorpicker-editor-button",i)):this.toolbar.on("click.editor","button",i),this.fontPickerElem&&this.fontPickerElem.on("font-selected",(function(e,i){t.execFormatBlock(i.tagName)})),this},bindModals:function(){var t=this;return this.modals={url:this.createURLModal(),image:this.createImageModal()},$('[name="em-target-'.concat(this.id,'"]')).dropdown(),$("#modal-url-".concat(this.id,", #modal-image-").concat(this.id)).modal({noRefocus:!1}).on("beforeopen",(function(){t.savedSelection=t.saveSelection(),$(this).attr("id")!=="modal-url-".concat(t.id)||t.selectionRange})).off("open").on("open",(function(){var e=m.features.touch,i=$(this).attr("id"),n=$("input:first",this),s=$(".modal-buttonset .btn-modal-primary",this);$('[name="em-url-'.concat(t.id,'"]')).val(t.settings.anchor.url),$('[name="em-class-'.concat(t.id,'"]')).val(t.settings.anchor.class),$('[name="em-target-'.concat(t.id,'"]')).val(t.settings.anchor.target).trigger("updated"),$('[name="em-isclickable-'.concat(this.id,'"]')).prop("checked",t.settings.anchor.isClickable),setTimeout((function(){e&&i==="modal-image-".concat(t.id)?s.focus():n.focus().select()}),10)})).off("beforeclose").on("beforeclose",(function(){var e=$(this).is(".editor-modal-image")?"image":"anchor";if(t.toolbar){var i=t.toolbar.find('[data-action="'.concat(e,'"]')),n=$(this).data("modal");i&&n&&(n.settings.noRefocus=t.isBtnOverflowedItem(i))}})).off("close").on("close",(function(e,i){if(t.restoreSelection(t.savedSelection),!i)if($(this).attr("id")==="modal-url-".concat(t.id)){var n=$(t.findElementInSelection("a",t.element[0]));n.length?t.updateCurrentLink(n):t.createLink($('[name="em-url-'.concat(t.id,'"]'),this))}else t.insertImage($("#image-".concat(t.id)).val())})),this},createURLModal:function(){var t=this,e=this.settings,i=$("#modal-url-".concat(this.id));if(i.length>0)return i;var n,s="",a=!0;$.each(e.anchor.targets,(function(e,i){s+='<option value="'.concat(i,'">').concat(B.translate(e),"</option>"),t.settings.anchor.defaultTargetText.toLowerCase()===e.toLowerCase()&&(a=!1)})),a&&(s+='<option value="'.concat(e.anchor.target,'">').concat(e.anchor.target,"</option>"));var r="";e.attributes&&(n=this.getAutomationAttributes("-editor-modal"),r=JSON.stringify(n),r=' data-options=\'{"attributes": '.concat(r,"}'"));var o=$('<div class="modal editor-modal-url" id="modal-url-'.concat(this.id,'"></div>')).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(B.translate("InsertAnchor"),'</h1>\n        </div>\n        <div class="modal-body">\n          <div class="field">\n            <label for="em-url-').concat(this.id,'" class="required">').concat(B.translate("Url"),'</label>\n            <input id="em-url-').concat(this.id,'" name="em-url-').concat(this.id,'" data-validate="required" type="text" value="').concat(e.anchor.url,'">\n          </div>\n          ').concat(e.anchor.showIsClickable?'<div class="field">\n            <input type="checkbox" class="checkbox" id="em-isclickable-'.concat(this.id,'" name="em-isclickable-').concat(this.id,'" checked="').concat(e.anchor.isClickable,'">\n            <label for="em-isclickable-').concat(this.id,'" class="checkbox-label"> ').concat(B.translate("Clickable"),"</label>\n          </div>"):"",'\n          <div class="field">\n            <label for="em-class-').concat(this.id,'">').concat(B.translate("CssClass"),'</label>\n            <input id="em-class-').concat(this.id,'" name="em-class-').concat(this.id,'" type="text" value="').concat(e.anchor.class,'">\n          </div>\n          <div class="field">\n            <label for="em-target-').concat(this.id,'" class="label"> ').concat(B.translate("Target"),'</label>\n            <select id="em-target-').concat(this.id,'" name="em-target-').concat(this.id,'" class="dropdown"').concat(r,">\n              ").concat(s,'\n            </select>\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel"> ').concat(B.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary"> ').concat(B.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(e.attributes){var l=[].slice.call(o[0].querySelectorAll('[type="text"]')),c=[].slice.call(o[0].querySelectorAll("button"));l.forEach((function(e,i){return C.addAttributes($(e),t,n,"input".concat(i))})),c.forEach((function(e,i){return C.addAttributes($(e),t,n,"button".concat(i))}))}return o.appendTo("body")},createImageModal:function(){var t=this,e=$("#modal-image-".concat(this.id));if(e.length>0)return e;var i=$('<div class="modal editor-modal-image" id="modal-image-'.concat(this.id,"\"></div>'")).html('<div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">'.concat(B.translate("InsertImage"),'</h1>\n        </div>\n        <div class="modal-body no-scroll">\n          <div class="field">\n            <label for="image-').concat(this.id,'" class="required">').concat(B.translate("Url"),'</label>\n            <input id="image-').concat(this.id,'" name="image-').concat(this.id,'" type="text" data-validate="required" value="').concat(this.settings.image.url,'">\n          </div>\n          <div class="modal-buttonset">\n            <button type="button" class="btn-modal btn-cancel">\n              ').concat(B.translate("Cancel"),'</button>\n            <button type="button" class="btn-modal-primary">\n              ').concat(B.translate("Insert"),"</button>\n          </div>\n        </div>\n      </div>"));if(this.settings.attributes){var n=this.getAutomationAttributes("-editor-modal"),s=[].slice.call(i[0].querySelectorAll('[type="text"]')),a=[].slice.call(i[0].querySelectorAll("button"));s.forEach((function(e,i){return C.addAttributes($(e),t,n,"input".concat(i))})),a.forEach((function(e,i){return C.addAttributes($(e),t,n,"button".concat(i))}))}return i.appendTo("body")},bindAnchorPreview:function(){this.element.find("a").tooltip({content:function(){return $(this).attr("href")}})},updateCurrentLink:function(t){var e=h.stripTags(document.querySelector('[name="em-url-'.concat(this.id,'"]')).value),i=h.stripTags(document.querySelector('[name="em-class-'.concat(this.id,'"]')).value),n=h.stripTags(document.querySelector('[name="em-target-'.concat(this.id,'"]')).value),s=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;t&&(t[0].setAttribute("href",this.fixLinkFormat(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl)),t[0].setAttribute("class",i&&$.trim(i).length?i:this.settings.anchor.defaultClass),t[0].setAttribute("data-url",(e&&$.trim(e).length?e:this.settings.anchor.defaultUrl).replace("http://",""))),s?t.attr("contenteditable",!1):t.removeAttr("contenteditable"),n&&$.trim(n).length?t.attr("target",n):t.removeAttr("target")},createLink:function(t){var e=this;this.restoreSelection(this.savedSelection);var i=h.stripTags(this.fixLinkFormat(t[0].value));t.val(i),this.settings.anchor.url=t.val(),this.settings.anchor.class=document.querySelector('[name="em-class-'.concat(this.id,'"]')).value,this.settings.anchor.target=document.querySelector('[name="em-target-'.concat(this.id,'"]')).value,this.settings.anchor.isClickable=this.settings.anchor.showIsClickable?document.querySelector('[name="em-isclickable-'.concat(this.id,'"]')).checked:this.settings.anchor.isClickable;var n=$('<a data-url="'.concat(i,'" href="').concat(i,'">').concat(i,"</a>"));if(this.settings.anchor.class&&$.trim(this.settings.anchor.class).length&&n.addClass(this.settings.anchor.class),this.settings.anchor.target&&$.trim(this.settings.anchor.target).length&&n.attr("target",this.settings.anchor.target),this.settings.anchor.isClickable?n.attr("contenteditable",!1):n.removeAttr("contenteditable"),this.sourceViewActive())this.insertTextAreaContent(t.val(),"anchor");else{var s,a,r,o,l;if(!this.selection.isCollapsed||m.browser.isIE11()){if(window.getSelection&&(s=window.getSelection()).getRangeAt&&s.rangeCount){a=s.getRangeAt(0),""!==(o="".concat(a)).trim()&&n.html(o);for(var c=(r=a.commonAncestorContainer.children)?r.length:0,d=0;d<c;d++){var u=r[d];u instanceof HTMLImageElement&&(l=u)}l&&n.html(l.outerHTML),a.deleteContents();var p=document.createElement("div");p.innerHTML=n[0].outerHTML;for(var g,f,v=document.createDocumentFragment();g=p.firstChild;)f=v.appendChild(g);a.insertNode(v),f&&((a=a.cloneRange()).setStartAfter(f),a.collapse(!0),s.removeAllRanges(),s.addRange(a))}}else document.execCommand("insertHtml",null,n[0].outerHTML),setTimeout((function(){e.getCurrentElement().focus()}),1);this.bindAnchorPreview()}},fixLinkFormat:function(t){return t.match(/^https?:\/\//)?t:"http://".concat(t)},bindSelect:function(){var t=this,e="";return this.selectionHandler=function(){clearTimeout(e),e=setTimeout((function(){t.checkSelection()}),t.settings.delay)},this.getCurrentElement().off("mouseup.editor keyup.editor").on("mouseup.editor keyup.editor",this.selectionHandler),this},checkSelection:function(){var t;if(void 0===this.selection&&this.sourceViewActive())return t=this.textarea.val().substring(this.textarea[0].selectionStart,this.textarea[0].selectionEnd).toString().trim(),void this.hideToolbarActions();t=window.getSelection();var e=this.getSelectionElement();return e?this.checkSelectionElement(t,e):this.hideToolbarActions(),this},getSelectionElement:function(){var t,e,i,n=window.getSelection(),s=function(t){var e=t;try{for(;!e.getAttribute("data-editor");)e=e.parentNode}catch(t){return!1}return e};try{e=(t=n.getRangeAt(0).commonAncestorContainer).parentNode,i=t.getAttribute("data-editor")?t:s(e)}catch(t){i=s(e)}return i},checkSelectionElement:function(t,e){var i=this.sourceViewActive()?this.sourceView[0]:this.element[0];this.selection=t,this.selectionRange=this.selection.getRangeAt(0),i!==e?this.hideToolbarActions():this.setToolbarButtonStates()},setToolbarButtonStates:function(){return this.toolbar.find("button").removeClass("is-active"),this.checkActiveButtons(),this},checkActiveButtons:function(){this.checkButtonState("bold"),this.checkButtonState("italic"),this.checkButtonState("underline"),this.checkButtonState("strikethrough"),this.checkColorButtonState("foreColor"),this.toolbar.find('.buttonset [data-action="backColor"]').length&&this.checkColorButtonState("backColor"),this.fontPickerElem&&this.checkButtonState("fontStyle");for(var t=this.getSelectedParentElement();void 0!==t.tagName&&-1===Ki.indexOf(t.tagName.toLowerCase)&&(this.activateButton(t.tagName.toLowerCase()),!this.element.is(t));)t=t.parentNode},checkButtonState:function(t){if(document.queryCommandState)if(this.fontPickerElem&&"fontStyle"===t){for(var e,i,n=this.fontPickerElem.data("fontpicker"),s=n.supportedTagNames,a=this.getSelectionParentElement(),r=$(a).add($(a).parentsUntil(this.element)),o=0;o<r.length&&void 0===i;o++)if(e=r[o].tagName.toLowerCase(),s.indexOf(e)>-1){i=n.getStyleByTagName(e),n.select(i,!0);break}}else document.queryCommandState(t)?this.toolbar.find('[data-action="'.concat(t,'"]')).addClass("is-active"):this.toolbar.find('[data-action="'.concat(t,'"]')).removeClass("is-active")},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=this.selectionRange;return this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},hideToolbarActions:function(){void 0!==this.toolbar&&this.toolbar.removeClass("is-active")},bindPaste:function(){var t=this,e=t.getCurrentElement();return this.pasteWrapper=function(e){var i,n,s;i=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData?e.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var a="";if(t.sourceViewActive())return this;if(i&&!e.defaultPrevented){for(e.preventDefault(),s=i.split(/[\r\n]/g),n=0;n<s.length;n+=1)""!==s[n]&&(navigator.userAgent.match(/firefox/i)&&0===n?a+="<p>".concat(t.htmlEntities(s[n]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(s[n])?a+='<img src="'.concat(t.htmlEntities(s[n]),'" />'):a+="<p>".concat(t.htmlEntities(s[n]),"</p>"));if(document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,a),!1;t.pasteHtmlAtCaret(a)}},this.pasteWrapperHtml=function(e){if(t.sourceViewActive())return this;var n,s,a,r,o;if((e.clipboardData||e.originalEvent)&&(e.clipboardData&&e.clipboardData.types?s=e.clipboardData:e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(s=e.originalEvent.clipboardData)),s&&s.types)((n=s.types)instanceof DOMStringList&&n.contains("text/html")||n.indexOf&&-1!==n.indexOf("text/html")||m.browser.isEdge())&&(a=e.originalEvent.clipboardData.getData("text/html")),n instanceof DOMStringList&&n.contains("text/plain")&&(a=e.originalEvent.clipboardData.getData("text/plain")),"object"===i(n)&&n[0]&&"text/plain"===n[0]&&!n[1]&&(a=e.originalEvent.clipboardData.getData("text/plain"));else for(o=(window.clipboardData?window.clipboardData.getData("Text"):"").split(/[\r\n]/g),a="",r=0;r<o.length;r+=1)""!==o[r]&&(navigator.userAgent.match(/firefox/i)&&0===r?a+="<p>".concat(t.htmlEntities(o[r]),"</p>"):/\.(gif|jpg|jpeg|tiff|png)$/i.test(o[r])?a+='<img src="'.concat(t.htmlEntities(o[r]),'" />'):a+="<p>".concat(t.htmlEntities(o[r]),"</p>"));return t.pastedData=m.browser.isIE11()?a:t.getCleanedHtml(a),$.when(t.element.triggerHandler("beforepaste",[{pastedData:t.pastedData}])).done((function(){if(t.pastedData&&!e.defaultPrevented){if(m.browser.isIE11()||m.browser.isEdge()||e.preventDefault(),document.queryCommandSupported("insertText"))return document.execCommand("insertHTML",!1,t.pastedData),!1;t.pasteHtmlAtCaret(t.pastedData)}t.element.triggerHandler("afterpaste",[{pastedData:t.pastedData}]),t.pastedData=null})),!!m.browser.isIE11()&&void 0},e.on("paste.editor",t.settings.pasteAsPlainText?t.pasteWrapper:t.pasteWrapperHtml),this},pasteHtmlAtCaret:function(t){var e,i,n=this,s="x-text-content-templ-x";if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(i=e.getRangeAt(0)).deleteContents(),m.browser.isIE11()&&(t=s);var a=document.createElement("div");a.innerHTML=t;for(var r,o,l=document.createDocumentFragment();r=a.firstChild;)o=l.appendChild(r);if(i.insertNode(l),o&&((i=i.cloneRange()).setStartAfter(o),i.collapse(!0),e.removeAllRanges(),e.addRange(i)),m.browser.isIE11()){for(var c=50,d=$.Deferred(),h=document.createDocumentFragment();n.element[0].childNodes.length>0;)h.appendChild(n.element[0].childNodes[0]);!function e(i,n){--c<0?d.reject():i.childNodes&&i.childNodes.length>0?(t=i.innerHTML,i.innerHTML="",i.appendChild(n),d.resolve()):setTimeout((function(){e(i,n)}),5)}(n.element[0],h),$.when(d).done((function(){var e="",i=n.element.find(":contains(+ ".concat(s,")")).filter((function(){return this.textContent===s}));i.length||(i=n.element.find(":contains(+ ".concat(s,")")).filter((function(){return this.textContent.indexOf(s)>-1&&"UL"!==this.tagName}))),t=n.getCleanedHtml(t);var a="";/(^(\s+?)?<li)/gi.test(t)?/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)?(i.is("li")||(t="<ul>".concat(t,"</ul>")),a=t):a=i.is("li")?"".concat(t,"</li>"):(e=t.match(/<\/ul|<\/ol/gi)||[]).length?t:"".concat(t,"</li></ul>"):/((\s+?)?<\/li>(\s+?)?$)/gi.test(t)&&(i.is("li")?a="<li>".concat(t):((e=t.match(/<ul|<ol/gi)||[]).length?t+=e[e.length-1].replace(/<(ul|ol)/gi,"<$1>"):t="<ul>".concat(t,"</ul>"),a=t)),a&&u.html(i,a,"*"),(e=n.element[0].innerHTML).indexOf(s)>-1&&(e=e.replace(s,t)),n.element[0].innerHTML=n.getCleanedHtml(e)}))}}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(t)},getCleanedHtml:function(t){var e,i=t||"",n=["start","xmlns","xmlns:o","xmlns:w","xmlns:x","xmlns:m","onmouseover","onmouseout","onmouseenter","onmouseleave","onmousemove","onload","onfocus","onblur","onclick","style"];this.isWordFormat(i)&&(i=this.cleanWordHtml(i));for(var s=0,a=n.length;s<a;s++)e=new RegExp(" ".concat(n[s],'="(.*?)"'),"gi"),i=this.stripAttribute(i,n[s],e),e=new RegExp(" ".concat(n[s],"='(.*?)'"),"gi"),i=this.stripAttribute(i,n[s],e);return(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/\sng-[a-z-]+/,"")).replace(/<!--(.*?)-->/gm,"")).replace(/\s\s+/g," ").replace(/\s>+/g,">")).replace(/<(ul|ol)(.*?)>/gi,"<$1>")).replace(/<li><\/li>/gi,"")).replace(/<(ul|ol)><\/(ul|ol)>/gi,"")).replace(/<\/?(html|body)(.*?)>/gi,"")).replace(/<head\b[^>]*>(.*?)<\/head>/gi,"")).replace(/<[^(br|/>)]+>[\s]*<\/[^>]+>/gi,"")).indexOf("")>-1&&(i=[(i=[(i=(i=(i=i.replace(/<\/p>/gi,"</li>")).replace(/<p><span><span><\/span><\/span>/gi,"<li>")).replace(/<\/li>\s<li>/gi,"</li><li>")).slice(0,i.indexOf("<li>")),"<ul>",i.slice(i.indexOf("<li>"))].join("")).slice(0,i.lastIndexOf("</li>")),"</ul>",i.slice(i.lastIndexOf("</li>"))].join("")),i},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindWindowActions:function(){var t=this,e=this.container,i=this.getCurrentElement(),n=this;return this.element.on("DOMNodeInserted",(function(t){var e=$(t.target),i=$("<b>helper</b>");"IMG"===t.target.tagName?e.removeAttr("id style srcset"):"SPAN"===t.target.tagName&&(e.before(i),i.after(e.contents()),i.add(e).remove())})),this.container.on("focusin.".concat("editor"),".editor, .editor-source",(function(){var t=$(this);e.addClass("is-active"),setTimeout((function(){t.hasClass("error")&&(e.parent().find(".editor-toolbar").addClass("error"),e.parent().find(".editor-source").addClass("error"))}),100)})).on("focusout.".concat("editor"),".editor, .editor-source",(function(){e.removeClass("is-active"),e.parent().find(".editor-toolbar").removeClass("error"),e.parent().find(".editor-source").removeClass("error")})),this.container.on("mouseenter.".concat("editor"),(function(){t.element.hasClass("error")||t.container.addClass("is-hover")})).on("mouseleave.".concat("editor"),(function(){t.container.removeClass("is-hover")})),n.settings.onLinkClick&&e.on("click.editorlinks","a",(function(e){n.settings.onLinkClick(e,{elem:t,url:e.currentTarget.getAttribute("data-url")}),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()})),this.label.on("click.editor",(function(){i.focus()})),i.attr("aria-label",this.label.text()),this},restoreSelection:function(t){var e=window.getSelection();if(t||(t=this.savedSelection),t){e.removeAllRanges();for(var i=0,n=t.length;i<n;i+=1)e.addRange(t[i])}},saveSelection:function(){var t,e=window.getSelection();if(e.getRangeAt&&e.rangeCount){t=[];for(var i=0,n=e.rangeCount;i<n;i+=1)t.push(e.getRangeAt(i));return t}return null},getSelectionStart:function(){var t=document.getSelection().anchorNode;return t&&3===t.nodeType?t.parentNode:t},getrange:function(){return window.getSelection().getRangeAt(0)},findElementInSelection:function(t,e){var i,n,s,a=this.getrange();if(a){for(i=s=a.commonAncestorContainer||a.parentElement();i!==e;i=i.parentNode)if(i&&i.tagName&&i.tagName.toLowerCase()===t)return i;if(!a.collapsed&&(void 0===a.text||a.text)&&s.getElementsByTagName){i=s.getElementsByTagName(t),n=document.createRange?document.createRange():document.body.createTextRange();for(var r=0,o=i.length;r<o;r++)if(document.createRange){if(n.selectNodeContents(i[r]),a.compareBoundaryPoints(Range.END_TO_START,n)<0&&a.compareBoundaryPoints(Range.START_TO_END,n)>0)return i[r]}else if(n.moveToElementText(i[r]),a.compareEndPoints("StartToEnd",n)<0&&a.compareEndPoints("EndToStart",n)>0)return i[r]}}},restoreLinkSelection:function(){var t=$(this.findElementInSelection("a",this.element[0]));if(this.settings.anchor.url=this.settings.anchor.defaultUrl,this.settings.anchor.class=this.settings.anchor.defaultClass,this.settings.anchor.target=this.settings.anchor.defaultTarget,this.settings.anchor.isClickable=this.settings.anchor.defaultIsClickable,t.length){this.settings.anchor.url=t.attr("href"),this.settings.anchor.class=t.attr("class"),this.settings.anchor.target=t.attr("target");var e=t.attr("contenteditable");!1!==e&&"false"!==e||(this.settings.anchor.isClickable=!0)}},execAction:function(t){if(this.getCurrentElement()===this.element)t.indexOf("append-")>-1?this.execFormatBlock(t.replace("append-","")):"anchor"===t?(this.restoreLinkSelection(),this.modals.url.data("modal").open()):"image"===t?this.modals.image.data("modal").open():"foreColor"===t||"backColor"===t?this.execColorActions(t):"clearFormatting"===t?this.clearFormatting():"source"===t||"visual"===t?this.toggleSource():document.execCommand(t,!1,null);else switch(t){case"visual":this.toggleSource();break;case"anchor":this.modals.url.data("modal").open();break;default:this.insertTextAreaContent(null,t)}this.checkSelection()},insertImage:function(t){document.execCommand("insertImage",!1,t)},toggleSource:function(t){var e=this,i=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};if(this.sourceViewActive()&&!t){var n=this.textarea.val();$.when(this.element.triggerHandler("beforepreviewmode",n)).done((function(t){i(t)||function(t){var i=t||e.textarea.val();i=h.sanitizeHTML(i),i=e.getCleanedHtml(i),e.element.empty().removeClass("source-view-active hidden"),e.sourceView.addClass("hidden").removeClass("is-focused"),e.element.trigger("focus.editor"),e.switchToolbars(),e.textarea.off("input.editor-firechange"),setTimeout((function(){var t;e.element[0].innerHTML=i,i=e.element[0].innerHTML,e.element.triggerHandler("afterpreviewmode",i);var n=null===(t=e.toolbar)||void 0===t||null==t?void 0:t.find('[data-action="source"]');n&&!e.isBtnOverflowedItem(n)&&n.focus()}),0)}(t)}))}else{var s=this.element.html();$.when(this.element.triggerHandler("beforesourcemode",s)).done((function(t){i(t)||function(t){var i,n=t||e.element.html().trim().replace(/\s+/g," ").replace(/<br( \/)?>/g,"<br>\n").replace(/<\/p> /g,"</p>\n\n").replace(/<\/blockquote>( )?/g,"</blockquote>\n\n");e.settings.useSourceFormatter&&(n=e.formatHtml(n)),e.element.addClass("source-view-active"),e.switchToolbars(),e.textarea.val(n).focus(),e.sourceView.removeClass("hidden"),e.element.addClass("hidden"),e.adjustSourceLineNumbers(),e.textarea.focus(),n=e.textarea.val(),e.textarea.off("input.editor-firechange").on("input.editor-firechange",(function(){e.element.trigger("change")})),e.element.triggerHandler("aftersourcemode",n);var s=null===(i=e.toolbar)||void 0===i||null==i?void 0:i.find('[data-action="visual"]');s&&!e.isBtnOverflowedItem(s)&&s.focus()}(t)}))}},isBtnOverflowedItem:function(t){var e=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex"),i=!1;return e&&e.overflowedItems.forEach((function(e){t.is(e.element)&&(i=!0)})),i},clearFormatting:function(){var t,e=this,i=this.getSelectionParentElement(),n=i.tagName,s={};i&&n&&(n=n.toLowerCase(),s=function(){for(var t=function(t){return t&&t.style&&""!==t.style.textAlign},n=i,s=t(n),a=9999;!s&&a>0;)a--,s=(n=n?n.parentNode:null)&&n===e.element[0]||t(n);var r={found:n&&n!==i&&n!==e.element[0]};return r.found&&(r.elem=n,r.textAlign=n.style.textAlign),r}(),function(){var t=function(t){var e=[].slice.call(t.querySelectorAll("li"));if(e.length>0){var i=document.createDocumentFragment();e.forEach((function(t){var e=document.createTextNode(t.textContent);i.appendChild(e),i.appendChild(document.createElement("br"))}));var n=e[0].parentNode;n.parentNode.insertBefore(i,n.nextSibling),n.parentNode.removeChild(n)}};if("li"===n)t(i.parentNode);else if(/ul|ol/.test(n))t(i);else{var e=i.classList.contains("editor")?i:$(i).closest(".editor").length?i.parentNode:null;if(e)[].slice.call(e.querySelectorAll("ul, ol")).forEach((function(e){return t(e)}))}}(),function(){var t=function(t){var e=t.parentNode,i=document.createElement("p");i.innerHTML=t.innerHTML,e.replaceChild(i,t)};Ki.indexOf(n)>-1?"p"!==n&&(document.execCommand("removeFormat",!1,null),t(i)):Ki.forEach((function(e){"p"!==e&&[].slice.call(i.querySelectorAll(e)).forEach((function(e){return t(e)}))}));for(var s=[].slice.call(e.element[0].querySelectorAll("blockquote, pre")),a=function(e,n){var a=!1;!function t(e){for(var n=0,s=e.length;n<s;n++){var r=e[n],o=[].slice.call(r.children);r===i&&(a=!0),o.length&&!a&&t(o)}}([].slice.call(s[e].children)),a&&(document.execCommand("removeFormat",!1,null),t(s[e]))},r=0,o=s.length;r<o;r++)a(r)}(),t=function(t){var e=t.parentNode,i=t.firstChild;e.insertBefore(i,t),e.removeChild(t),e.normalize()},"a"===n?t(i):[].slice.call(i.querySelectorAll("a")).forEach((function(e){(function(t){var e=window.getSelection(),i=!1;if(m.browser.isIE11()){var n=e.getRangeAt(0),s=document.createRange();s.selectNode(t);var a=n.compareBoundaryPoints(Range.START_TO_END,s),r=n.compareBoundaryPoints(Range.START_TO_START,s),o=n.compareBoundaryPoints(Range.END_TO_START,s),l=n.compareBoundaryPoints(Range.END_TO_END,s);i=a!==r||o!==l||a!==l}else i=e.containsNode(t,!0);return i})(e)&&t(e)})));var a=i.parentNode;a&&a!==this.element[0]&&[].slice.call(a.querySelectorAll("[align]")).forEach((function(t){return t.removeAttribute("align")}));document.execCommand("removeFormat",!1,null),s.found&&(s.elem.style.textAlign=s.textAlign)},getSelectionParentElement:function(){var t,e=null;return window.getSelection?(t=window.getSelection()).rangeCount&&1!==(e=t.getRangeAt(0).commonAncestorContainer).nodeType&&(e=e.parentNode):(t=document.selection)&&"Control"!==t.type&&(e=t.createRange().parentElement()),e},checkColorButtonState:function(t){var e=$('[data-action="'.concat(t,'"]'),this.toolbar),i=e.data("colorpicker"),n=document.queryCommandValue(t);return i&&"rgb(0, 0, 0)"!==n&&("firefox"===m.browser.name&&"backColor"===t&&(n=$(window.getSelection().focusNode.parentNode).css("background-color")),"number"==typeof n&&(n=i.decimal2rgb(n)),n=n?i.rgb2hex(n):"",e.attr("data-value",n).find(".icon").css("color",["transparent","#1a1a1a","#f0f0f0","#ffffff","#313236"].indexOf(n.toLowerCase())>-1?"":n)),{cpBtn:e,cpApi:i,color:n}},execColorActions:function(t){var e=this,i=this.checkColorButtonState(t),n=i.cpBtn,s=i.cpApi;n.one("selected.editor",(function(i,s){var a=s;void 0===a||a instanceof $||!a.element||(a=$(s.element));var r="".concat(a.data("value")).toLowerCase();if(-1===(r="#"!==r?r:"").indexOf("#")&&(r="#".concat(r)),"#"===r&&(r=""),n.attr("data-value",r).find(".icon").css("color",r),"ie"===m.browser.name||"foreColor"===t)r?document.execCommand(t,!1,r):document.execCommand("removeFormat",!1,t);else{document.execCommand("fontSize",!1,"2");for(var o=e.getSelectionParentElement().parentNode.getElementsByTagName("font"),l=0,c=o.length;l<c;l++)o[l].hasAttribute("style")&&(o[l].style.backgroundColor="");setTimeout((function(){for(var t=0,e=o.length;t<e;t++)o[t].hasAttribute("size")&&(o[t].style.backgroundColor=r,o[t].removeAttribute("size"))}),0)}})),s.toggleList()},execFormatBlock:function(t){if(void 0===this.selection&&this.checkSelection(),this.selection&&this.selection instanceof Selection){var e=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&e.el&&"blockquote"===e.el.parentNode.tagName.toLowerCase())return document.execCommand("outdent",!1,null);if(e.tagName===t&&(t="p"),"ie"===m.browser.name){if("blockquote"===t)return document.execCommand("indent",!1,t);t="<".concat(t,">")}document.queryCommandState("bold")&&document.execCommand("bold",!1,t),document.queryCommandState("italic")&&document.execCommand("italic",!1,t),document.queryCommandState("underline")&&document.execCommand("underline",!1,t),document.queryCommandState("strikethrough")&&document.execCommand("strikethrough",!1,t),e.el&&e.el.innerHTML&&e.el.innerHTML.indexOf("<font")>-1&&(document.execCommand("removeFormat",!1,"foreColor"),document.execCommand("removeFormat",!1,"backColor")),e.el&&e.el.innerHTML&&"<ul>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"UL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertunorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),e.el&&e.el.innerHTML&&"<ol>"===e.el.innerHTML.substr(0,4)&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),this.selection.anchorNode&&this.selection.anchorNode.parentNode&&"OL"===this.selection.anchorNode.parentNode.parentElement.nodeName&&(document.execCommand("insertorderedlist",!1,t),document.execCommand("removeFormat",!1,t)),document.execCommand("formatBlock",!1,t),this.checkActiveButtons()}},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===Ki.indexOf(e);)(t=t.parentNode)&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},isListItemChild:function(t){for(var e=t.parentNode,i=e.tagName.toLowerCase();-1===Ki.indexOf(i)&&"div"!==i;){if("li"===i)return!0;if(!(e=e.parentNode)||!e.tagName)return!1;i=e.tagName.toLowerCase()}return!1},destroyToolbar:function(){var t=function(t){return t||$()};this.toolbar=t(this.toolbar),this.element=t(this.element),this.textarea=t(this.textarea);var e=this.toolbar.data("toolbar")||this.toolbar.data("toolbar-flex");e&&e.destroy();for(var i=this.toolbar.find("button"),n=0,s=i.length;n<s;n++){var a=$(i[n]).data("tooltip");a&&"function"==typeof a.destroy&&a.destroy();var r=$(i[n]).data("button");r&&"function"==typeof r.destroy&&r.destroy()}for(var o=$('[data-action="foreColor"], [data-action="backColor"]',this.element),l=0,c=o.length;l<c;l++){var d=$(o[l]).data("colorpicker");d&&"function"==typeof d.destroy&&d.destroy()}if(this.fontPickerElem){this.fontPickerElem.off("font-selected.".concat("editor"));var h=this.fontPickerElem.data("fontpicker");h&&h.destroy(),delete this.fontPickerElem}this.toolbar.off(["click.".concat("editor"),"selected.".concat("editor")].join(" ")),this.toolbar.remove(),delete this.toolbar;var u=["blur","DOMNodeInserted","focus","input.".concat("editor"),"keydown.".concat("editor"),"keypress.".concat("editor"),"keyup.".concat("editor"),"mouseup.".concat("editor"),"mousedown.".concat("editor"),"paste.".concat("editor")].join(" ");this.element.off(u),this.textarea.off(u),this.element.prev(".label").off("click.editor"),this.container.closest(".editor-container").off("focus.editor blur.editor click.editorlinks");var p=this.checkColorButtonState("foreColor"),g=p.cpBtn;if(g.off("selected.editor"),(g=(p=this.checkColorButtonState("backColor")).cpBtn).off("selected.editor"),delete this.pasteWrapper,delete this.pasteWrapperHtml,delete this.selectionHandler,$(window).off("resize.editor"),this.modals)for(var f=Object.keys(this.modals),m=0,v=f.length;m<v;m++){var b=$("#modal-".concat(f[m],"-").concat(this.id)),y=b.data("modal");b.off("beforeclose.editor close.editor open.editor beforeopen.editor"),y&&"function"==typeof y.destroy&&y.destroy(),b.remove()}delete this.modals,this.element.trigger("destroy.toolbar.editor")},setPreviewMode:function(){var t=this.container[0].classList,e=this.element[0].classList;if(!t.contains("is-preview")){if(!this.isEditable()){var i=["is-disabled","is-readonly","is-preview"];t.remove.apply(t,i),e.remove.apply(e,i)}this.sourceViewActive()&&this.toggleSource(),t.add("is-preview"),e.remove("is-preview"),this.element[0].setAttribute("contenteditable",!1),this.element[0].removeAttribute("aria-multiline"),this.element[0].removeAttribute("role"),[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){var e=$(t).data("tooltip");e&&"function"==typeof e.destroy&&e.destroy()}))}},destroyPreviewMode:function(){if(this.container[0]){var t=this.container[0].classList;t.contains("is-preview")&&(t.remove("is-preview"),this.previewRendered?(this.element[0].setAttribute("aria-multiline",!0),this.element[0].setAttribute("role","textbox"),this.bindAnchorPreview()):(this.previewRendered=!0,this.init()))}},isPreview:function(){return!!this.container[0]&&this.container[0].classList.contains("is-preview")},isEditable:function(){var t=this,e=!0,i=function(t,e){return t.classList.contains(e)};return["is-disabled","is-readonly","is-preview"].forEach((function(n){(i(t.container[0],n)||i(t.element[0],n))&&(e=!1)})),e},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Xi)),this.teardown().init()},teardown:function(){return this.destroyToolbar(),this.sourceView&&(this.sourceView.off(".editor"),this.sourceView.remove(),delete this.sourceView),delete this.textarea,this.lineNumbers&&delete this.lineNumbers,this.selection&&delete this.selection,this.selectionRange&&delete this.selectionRange,this.container.off(["focusin.".concat("editor"),"focusout.".concat("editor"),"mouseneter.".concat("editor"),"mouseleave.".concat("editor"),"input.".concat("editor"),"keyup.".concat("editor")].join(" ")),this.container.removeClass("editor-container"),delete this.container,this.label.off("click.".concat("editor")),delete this.label,this.element.attr("contenteditable","false"),this.element.off(["mousedown.".concat("editor"),"updated.".concat("editor")].join(" ")),$("html").off("themechanged.".concat("editor")),delete this.id,delete this.isActive,this},destroy:function(){this.teardown(),$.removeData(this.element[0],"editor")},disable:function(){this.destroyPreviewMode(),this.element.addClass("is-disabled").attr("contenteditable","false"),this.container.addClass("is-disabled")},enable:function(){this.destroyPreviewMode(),this.element.removeClass("is-disabled is-readonly").attr("contenteditable","true"),this.container.removeClass("is-disabled is-readonly")},readonly:function(){this.destroyPreviewMode(),this.element.removeClass("is-readonly").attr("contenteditable","false"),this.container.addClass("is-readonly")},editable:function(){this.enable()},preview:function(){this.container[0].classList.contains("is-preview")||this.setPreviewMode()},onPasteTriggered:function(){"firefox"!==m.browser.name&&document.addEventListener&&document.addEventListener("paste",(function(t){if(void 0!==t.clipboardData){var e=t.clipboardData.items[0];if(0===e.type.indexOf("image")){var i=e.getAsFile(),n=new FileReader;n.onload=function(t){var e=t.target.result;document.execCommand("insertImage",!1,e)},n.readAsDataURL(i)}}}),!1)},isWordFormat:function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)},cleanWordHtml:function(t){var e=t;e=(e=(e=(e=(e=(e=e.replace(/<!--[\s\S]+?-->/gi,"")).replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,"")).replace(/<(\/?)s>/gi,"<$1strike>")).replace(/&nbsp;/gi,"")).replace(/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(""):""}))).replace(/(\n|\r| class=(\'|")?Mso[a-zA-Z]+(\'|")?)/g," ");for(var i=["style","script","applet","embed","noframes","noscript"],n=0,s=i.length;n<s;n++){var a=new RegExp("<".concat(i[n],".*?").concat(i[n],"(.*?)>"),"gi");e=e.replace(a,"")}return e},stripAttribute:function(t,e,i){return"style"===e?this.stripStyles(t,i):t.replace(i,"")},stripStyles:function(t,e){var i=["color","font-size","background","font-weight","font-style","text-decoration","text-align"];return t.replace(e,(function(t){for(var e=(t=t.replace(/( style=|("|\'))/gi,"")).split(";"),n="",s=0;s<e.length;s++){var a=e[s].split(":");n+=i.indexOf(a[0])>-1?"".concat(a[0],":").concat(a[1],";"):""}return""!==n?' style="'.concat(n,'"'):""}))},formatHtml:function(t){t=t.trim();var e=this.settings,i=t.split(/</),n=0,s="";function a(t){var i="",n=t*("number"==typeof e.formatterTabsize?e.formatterTabsize:4);if(t>-1)for(;n--;)i+=" ";return i}for(var r=0,o=i.length;r<o;r++){var l=i[r].split(/>/);2===l.length?("/"===i[r][0]&&n--,s+=a(n),"/"!==i[r][0]&&n++,r>0&&(s+="<"),s+="".concat(l[0].trim(),">\n"),""!==l[1].trim()&&(s+="".concat(a(n)+l[1].trim().replace(/\s+/g," "),"\n")),l[0].match(/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/)&&n--):s+="".concat(a(n)+l[0],"\n")}return s.trim()},clear:function(){this.element.empty(),this.textarea.empty(),this.sourceView.find(".line-numbers").empty(),this.sourceView.find(".textarea-print").empty()}},$.fn.editor=function(t){return this.each((function(){var e=$.data(this,"editor");e?e.updated(t):e=$.data(this,"editor",new Qi(this,t))}))};var Ji={legend:[],legendKey:"",dataset:[],newData:[],templateId:"",leafHeight:null,leafWidth:null,beforeExpand:null,renderSubLevel:!1,layout:"horizontal",rootId:null,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function Zi(t,e){this.settings=C.mergeSettings(t,e,Ji),this.element=$(t),this.init()}Zi.prototype={init:function(){var t=this.settings;if(null===this.rootId&&void 0===this.element.attr("id")?this.rootId="hierarchyChart":this.element.attr("id")?this.settings.rootId=this.element.attr("id"):this.rootId="hierarchyChart",t.colorClass=["azure08","turquoise02","amethyst06","slate06","amber06","emerald07","ruby06"],this.handleEvents(),void 0!==t.dataset&&0!==t.dataset.length&&Array.isArray(t.dataset)){if(t.dataset[0]&&t.dataset[0].children&&t.dataset[0].children.length>0||this.isStackedLayout()?this.render(t.dataset[0]):t.dataset&&t.dataset.children.length>0&&this.render(t.dataset),null!==t.leafHeight&&null!==t.leafWidth){var e="'body .hierarchy .leaf,body .hierarchy .sublevel .leaf,body .hierarchy .container .root.leaf { width: ".concat(t.leafWidth,"px;  height: ").concat(t.leafHeight,"px;  }'");$('<style type="text/css" id="hierarchyLeafStyles">'.concat(e,"</style>")).appendTo("body")}t.layout&&this.setLayout(t.layout),this.setAutomationAttributes()}else this.element.emptymessage(t.emptyMessage)},setAutomationAttributes:function(){var t=this;[].slice.call(this.element[0].querySelectorAll(".leaf")).forEach((function(e){var i=$(e),n=i.data();if(n&&n.attributes){var s=i.find(".btn-expand, .btn-collapse");C.addAttributes(i,t,n.attributes,"hierarchy-leaf"),C.addAttributes(s,t,n.attributes,"hierarchy-btn-toggle")}}))},setLayout:function(t){switch(this.isPagingLayout()&&(t="paging"),this.isMobileOnly()&&(t="mobile-only"),t){case"horizontal":this.element.addClass("layout-is-horizontal");break;case"stacked":this.element.addClass("layout-is-stacked");break;case"paging":this.element.addClass("layout-is-paging");break;case"mobile-only":this.element.addClass("layout-is-mobile-only");break;default:this.element.addClass("layout-is-horizontal")}},handleEvents:function(){var t=this,e=this,i=this.settings;e.element.off("click.hierarchy").on("click.hierarchy",".btn",(function(t){if(!e.isStackedLayout()){i.newData.length>0&&(i.newData=[]);var n=$(this).closest(".leaf").attr("id"),s=$("#".concat(n)).data(),a={branch:$(this).closest("li"),leaf:$(this).closest(".leaf"),button:$(this)};s.isExpanded?e.collapse(t,s,a):e.expand(t,s,a)}})),this.element.on("keypress",".leaf",(function(t){var i=$(this).attr("id"),n=$("#".concat(i));13===t.which&&(n.isExpanded?e.collapse(t,n):e.expand(t,n))})),e.element.off("dblclick.hierarchy").on("dblclick.hierarchy",".leaf",(function(e){var i=e.currentTarget.id,n={event:e,data:$("#".concat(i)).data()};e.stopImmediatePropagation(),t.element.trigger("dblclick",n)})),e.element.on("mouseup",".leaf, .back button",(function(t){var e=$(this),i=$(t.target),n=e.closest(".hierarchy").data("hierarchy"),s=e.data(),a=$(this).attr("id"),r={target:t.target,pageX:t.pageX,pageY:t.pageY},o=i.is("button"),l=!i.hasClass("btn-back"),c=i.is(".btn-back"),d=i.find("use").prop("href"),h=!!d&&"#icon-caret-up"===d.baseVal,u=!!d&&"#icon-caret-down"===d.baseVal,p=!!d&&"#icon-caret-right"===d.baseVal,g=i.hasClass("btn-actions"),f=i.is("a")&&i.parent().parent().is("ul.popupmenu"),m=e.hasClass("ancestor"),v="selected";if(t.stopImmediatePropagation(),(!f||!$(i).parent().data("disabled"))&&($(".leaf.is-selected").removeClass("is-selected"),$("#".concat(a)).addClass("is-selected"),o&&h&&l&&(v=m?"back":"collapse"),o&&u&&l&&(v="expand"),c&&(v="back"),g&&(v="actions",n.buildActionsMenu(s,e)),f&&(v="action"),o&&p&&l&&(v="forward"),3===t.which&&(v="rightClick"),n)){var b={id:a,data:s,actionReference:f?i.data("actionReference"):null,targetInfo:r,eventType:v,isForwardEvent:n.isForwardEvent(v),isBackEvent:n.isBackEvent(v),isAddEvent:n.isAddEvent(v),isExpandEvent:n.isExpandEvent(v),isCollapseEvent:n.isCollapseEvent(v),isSelectedEvent:n.isSelectedEvent(v),isActionsEvent:n.isActionsEvent(v),isActionEvent:n.isActionEvent(v),allowLazyLoad:n.allowLazyLoad(s,v)};e.trigger("selected",b)}}))},selectLeaf:function(t){var e=$("#".concat(t));$(".leaf.is-selected").removeClass("is-selected"),e.addClass("is-selected");var i={data:e.data(),actionReference:null,isForwardEvent:!1,isBackEvent:!1,isAddEvent:!1,isExpandEvent:!1,isCollapseEvent:!1,isSelectedEvent:!0,isActionsEvent:!1,isActionEvent:!1,allowLazyLoad:!1};e.trigger("selected",i)},updateActions:function(t,e){var i=$(t.targetInfo.target).closest(".leaf"),n=t.data,s=$(i).find(".popupmenu"),a=s.data("trigger").data().popupmenu,r=s.find("li").not(":eq(0)");$(r).each((function(t,e){$(e).remove()})),n.menu.actions=e,s.append(this.getActionMenuItems(n)),a.keydownThenClick=!0,a.open(),a.handleAfterPlace(null,{element:s.parent(),parent:$(i).find(".btn-actions"),placement:"bottom"})},buildActionsMenu:function(t,e){var i=$(e).find(".popupmenu"),n=[];void 0!==t.menu&&(i.empty(),t.menu.details&&(i.addClass("has-detail-fields"),n.push('<li><div class="detail-fields">'.concat(t.menu.details.map((function(t){return'<div class="dt-fields-row"><div class="dt-fields-cell">'.concat(t.key,'</div><div class="dt-fields-cell">').concat(t.value,"</div></div>")})).join(""),"</div></li>"))),t.menu.actions&&n.push(this.getActionMenuItems(t)),n.forEach((function(t){i.append(t)})))},getActionMenuItems:function(t){var e,i=this,n=t.menu.actions.map((function(t){return void 0===t.disabled&&(t.disabled=!1),t})),s=function(t){return C.stringAttributes(i,e,"option-".concat(t))};return t.attributes&&(e=this.getAutomationAttributes(t,"-hierarchy-popupmenu")),n.map((function(t,e){return t.hasOwnProperty("data")&&"separator"===t.data.type?'<li class="separator"></li>':'\n        <li data-disabled="'.concat(t.disabled,'" class="').concat(t.menu?"submenu":"",'">\n          <a href="').concat(t.url,'"').concat(s(e),' data-action-reference="').concat(JSON.stringify(t.data),'">\n            ').concat(t.value,"\n            ").concat(t.menu?'<svg class="arrow icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg>':"","\n          </a>\n          ").concat(t.menu?'<div class="wrapper" role="application" aria-hidden="true">\n            <ul class="popupmenu">\n              '.concat(t.menu.map((function(i,n){return'\n              <li data-disabled="'.concat(t.disabled,'">\n                <a href="').concat(t.url,'"').concat(s("".concat(e,"-").concat(n)),' data-action-reference="').concat(JSON.stringify(t.data),'">').concat(i.value,"</a>\n              </li>")})).join(""),"\n            </ul>\n          </div>"):"","\n        </li>")})).join("")},isBackEvent:function(t){return"back"===t},isForwardEvent:function(t){return"forward"===t},isAddEvent:function(t){return"add"===t},isExpandEvent:function(t){return"expand"===t},isCollapseEvent:function(t){return"collapse"===t},isSelectedEvent:function(t){return"selected"===t},isActionsEvent:function(t){return"actions"===t},isActionEvent:function(t){return"action"===t},allowLazyLoad:function(t,e){return void 0!==t&&void 0!==e&&(!t.isLoaded&&!t.isLeaf&&"expand"===e)},data:function(t,e,i,n){void 0===n&&(n={});var s=this.settings,a=e.isRootNode?e:e[0],r=[];function o(e,s,a){Object.keys(s).forEach((function(e){"id"===e&&t===s.id&&(s.isLoaded||s.isRootNode||function(t,e){e.insert&&(delete t.isLeaf,t.isExpanded=!0),0!==i.length&&e.insert?t.children=[i]:t.children=i}(s,n),r.push(s))})),s.children&&l(e,s.children)}function l(t,e,i){if(void 0===e.length)o(t,e);else for(var n=0,s=e.length;n<s;n++)o(t,e[n])}return s.newData.length>0&&(s.newData=[]),void 0!==i&&l(this,a),0!==r.length&&$("#".concat(r[0].id)).data(r[0]),r[0]},add:function(t,e,i){var n=this.settings,s=void 0!==e.id?e.id:t,a=$("#".concat(s)),r=a.parent().hasClass("leaf-container")?a.parent().parent():a.parent(),o={},l="sub-level"!==r.parent().attr("class"),c=1===r.children(".sublist").length;if(l?c?o.element=r.children(".sublist"):(o.el=r.append("<ul class='sublist'></ul>"),o.element=$(o.el).find(".sublist")):(o.el=r.children("ul"),o.element=$(o.el)),0===o.element.length&&(o.el=r.append("<ul></ul>"),o.element=$(o.el).find("ul")),!e.isRootNode){for(var d=0,h=i.length;d<h;d++)n.newData.push(i[d]);this.createLeaf(i,o.element)}this.updateState(a,!1,null,"add")},closePopupMenu:function(t){var e=t.find(".btn-actions");0!==e.length&&e.data("popupmenu").close()},expand:function(t,e,i){var n=this.settings,s=i.leaf,a=s.next();this.closePopupMenu(s),a.animateOpen(),this.element.trigger("expanded",[e,n.dataset]),s.hasClass("root")&&(a=a.next("ul")).animateOpen(),s.parent().removeClass("branch-collapsed").addClass("branch-expanded"),this.updateState(s,!1,null,"expand")},collapse:function(t,e,i){var n=this,s=this.settings,a=i.leaf,r=a.next();this.closePopupMenu(a),r.animateClosed().on("animateclosedcomplete",(function(){n.element.trigger("collapsed",[e,s.dataset])})),a.hasClass("root")&&(r=r.next("ul")).animateClosed(),a.parent().removeClass("branch-expanded").addClass("branch-collapsed"),this.updateState(a,!1,null,"collapse")},render:function(t){var e=this,i=this.settings,n=i.legend,s=t.children,a=[],r="".concat(C.uniqueId(this.element,"hierarchy")),o={legend:"<legend><ul></ul></legend>",chart:'<ul class="container"><li class="chart"></li></ul>',toplevel:this.isPagingLayout()?'<ul class="child-nodes"></ul>':'<ul class="top-level"></ul>',sublevel:this.isPagingLayout()?"":'<ul class="sub-level"></ul>'};$("#".concat(this.settings.rootId)).append(o.chart);var l=$("#".concat(this.settings.rootId," .chart"));if(0!==n.length){$("#".concat(this.settings.rootId)).prepend(o.legend);var c=$("#".concat(this.settings.rootId," legend"));this.createLegend(c)}if(this.isSingleChildWithChildren()&&$(l).addClass("has-single-child"),this.setColor(t),this.isPagingLayout()&&t.parentDataSet){var d=' id="'.concat(r,'-back-button" data-automation-id="automation-id-').concat(r,'-back-button"'),u='<div class="back">\n        <button type="button" class="btn-icon hide-focus btn-back"'.concat(d,'>\n          <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n            <use href="#icon-caret-left"></use>\n          </svg>\n          <span>Back</span>\n        </button></div>'),p=$(u).appendTo(l);setTimeout((function(){return p.next($(".leaf")).addBack($(".back")).wrapAll('<div class="back-container"></div>')})),p.children("button").data(t),$(l).addClass("has-back")}if(t.isMultiRoot){var g='<div class="leaf multiRoot"><div><h2>'.concat(t.multiRootText,"</h2></div></div>");g=h.sanitizeHTML(g),a.push(g),$(a[0]).addClass("root").appendTo(l)}else if(null!==t.ancestorPath&&void 0!==t.ancestorPath){t.ancestorPath.push(t.centeredNode);var f="".concat(t.ancestorPath.map((function(t){return" ".concat(e.getTemplate(t)," ")})).join(""));f=h.sanitizeHTML(f),a.push(f),$(a[0]).addClass("root ancestor").appendTo(l);var m=this.element.find(".leaf.root");m.each((function(i,n){e.updateState(n,!1,t.ancestorPath[i],"add"),i===m.length-1&&$(n).addClass("is-selected")}))}else{var v,b=t.centeredNode;this.isStackedLayout()&&null!==b?v=this.getTemplate(b):this.isStackedLayout()||(v=this.getTemplate(t)),v&&(v=h.sanitizeHTML(v),a.push(v),$(a[0]).addClass("root is-selected").appendTo(l)),b&&null!==b?this.updateState(this.element.find(".leaf.root"),!0,b,void 0):this.updateState(this.element.find(".leaf.root"),!0,t,void 0)}function y(t,e,i){if(null!=e)for(var n=0,s=e.length;n<s;n++){T(t,e[n])}}if(s&&s.length>0)for(var w=0,x=s.length;w<x;w++){var k=t.children[w].children;if(this.isLeaf(s[w])&&!this.isPagingLayout()&&i.renderSubLevel||this.isPagingLayout()?this.createLeaf(t.children[w],$(o.toplevel)):this.createLeaf(t.children[w],$(o.sublevel)),null!=k){y(this,t.children[w].children)}}function T(t,e,i){Object.keys(e).forEach((function(i){if("children"===i){var n=e.id,s=e,a=e.children;return null!=a&&a.length>0&&t.add(n,s,a),y(t,a)}return!0}))}var S=(this.element.find(".container").outerWidth()-$(window).width())/2;this.element.scrollLeft(S);var A=this.element.find(".top-level");0===this.element.find(".sub-level").length&&1===A.length&&A.addClass("no-sublevel")},isPagingLayout:function(){return this.settings.layout&&"paging"===this.settings.layout},isMobileOnly:function(){return this.settings.layout&&"mobile-only"===this.settings.layout},isStackedLayout:function(){return this.settings.layout&&"stacked"===this.settings.layout},isSingleChildWithChildren:function(){if(this.isStackedLayout())return!1;var t=this.settings;if(t.dataset&&t.dataset[0]&&t.dataset[0].children){for(var e=t.dataset[0].children.length,i=0;e--;)t.dataset[0].children[e].isLeaf||i++;return 1===i}return!1},getAutomationAttributes:function(t,e){var i=this,n=t.attributes;if(t.attributes&&"string"==typeof e&&""!==e)if(Array.isArray(t.attributes))n=[],t.attributes.forEach((function(t){var s="function"==typeof t.value?t.value(i):t.value;n.push({name:t.name,value:s+e})}));else{var s="function"==typeof t.attributes.value?t.attributes.value(this):t.attributes.value;n={name:t.attributes.name,value:s+e}}return n},getTemplate:function(t){var e=this,i=fe.compile("{{#dataset}}".concat($("#".concat(h.stripTags(this.settings.templateId))).html(),"{{/dataset}}"),{dataset:t});return setTimeout((function(){var i=$("#btn-".concat(h.stripTags(t.id)));if(0!==i.length){var n=e.getAutomationAttributes(t,"-hierarchy-popupmenu");i.hideFocus().popupmenu({attachToBody:!1,attributes:n})}}),1),$(i).prop("outerHTML")},createLegend:function(t){for(var e=this.settings,i=0,n=0,s=e.legend.length;n<s;n++){var a=e.legend[n].label,r=e.colorClass[n];n-1+1==4&&(t.append("<ul></ul>"),i++),t.children("ul").eq(i).append(""+'<li>\n          <span class="key '.concat(r,'"></span>\n          <span>').concat(a,"</span>\n        </li>"))}},createLeaf:function(t,e){var i=this,n=$("#".concat(i.settings.rootId," .chart"),i.container),s=e.attr("class"),a=void 0!==s?$("#".concat(i.settings.rootId," .").concat(s)):e;function r(t){i.setColor(t);var n=i.getTemplate(t),s=i.settings.rootId,r=1===a.length?a:e,o=t.isExpanded||void 0===t.isExpanded?"branch-expanded":"branch-collapsed";if(t.isLeaf&&(o=""),1!==$("#".concat(s," #").concat(t.id)).length&&(r.append("<li class=".concat(o,">").concat($(n)[0].outerHTML,"</li>")),t.children)){for(var l="",c=0,d=t.children.length;c<d;c++){i.setColor(t.children[c]);var u=i.getTemplate(t.children[c]);t.children.length,l+="<li>".concat($(u)[0].outerHTML,"</li>")}(r=$("#".concat(s," #").concat(h.stripTags(t.id))).parent()).append("<ul>".concat(l,"</ul>"));for(var p=t.children.length;p--;){var g=$("#".concat(s," #").concat(h.stripTags(t.children[p].id)));i.updateState(g,!1,t.children[p],void 0)}}}if(a.length<1&&("top-level"===s?e.insertAfter(".root"):e.appendTo(n)),t.length)for(var o=0,l=t.length;o<l;o++){t.length;r(t[o]),i.updateState($("#".concat(i.settings.rootId," #").concat(h.stripTags(t[o].id))),!1,t[o],void 0)}else r(t),i.updateState($("#".concat(i.settings.rootId," #").concat(h.stripTags(t.id))),!1,t,void 0)},setColor:function(t){var e=this,i=this.settings;if(this.setRootColor(t),this.isStackedLayout()&&(t.ancestorPath&&null!==t.ancestorPath&&t.ancestorPath.forEach((function(t){e.setRootColor(t)})),t.centeredNode&&null!==t.centeredNode&&this.setRootColor(t.centeredNode)),t.children&&!t.isRootNode)for(var n=0,s=t.children.length;n<s;n++)for(var a=0,r=i.legend.length;a<r;a++)t.children[n][i.legendKey]===i.legend[a].value&&(t.children[n].colorClass=i.colorClass[a])},setRootColor:function(t){for(var e=this.settings,i=0,n=e.legend.length;i<n;i++){if(t[e.legendKey]===e.legend[i].value){t.colorClass=e.colorClass[i];break}""===t[e.legendKey]&&(t.colorClass="default-color")}},isLeaf:function(t){var e=this.settings;return t.isLeaf||e.beforeExpand?t.isLeaf:!(t.children&&t.children.length>0)},updateState:function(t,e,i,n){if($.isEmptyObject($(t).data())&&i){var s=void 0===i?{}:i;$(t).data(s)}var a=this.settings,r=$(t).find(".btn"),o=this.isPagingLayout()?"caret-right":"caret-up",l=$(t).data();void 0===l&&void 0!==i&&(l=i),(l.children&&0!==l.children.length||"add"===n)&&(l.isExpanded=!0,l.isLoaded=!0),e&&(l.isRootNode=!0,l.isLoaded=!0),(void 0===l.isExpanded&&l.children||"expand"===n)&&(l.isExpanded=!0),void 0!==l.isExpanded&&"collapse"!==n||(l.isExpanded=!1),l.isExpanded?(r.find("svg.icon").changeIcon(o),r.addClass("btn-expand").removeClass("btn-collapse")):(r.find("svg.icon").changeIcon("caret-down"),r.addClass("btn-collapse").removeClass("btn-expand")),(l.isLeaf||l.isRootNode)&&r.addClass("btn-hidden"),l.isLeaf&&(l.isLoaded=!1,l.isExpanded=!1),this.isPagingLayout()&&(l.parentDataSet=a.dataset),$(t).data(l)},reload:function(t){this.destroy(),this.element.hierarchy(t)},unbind:function(){this.element.empty()},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Ji)),this.unbind().init()},destroy:function(){this.unbind(),this.element.removeData("hierarchy")}},$.fn.hierarchy=function(t){return this.each((function(){var e=$.data(this,"hierarchy");e?e.updated(t):e=$.data(this,"hierarchy",new Zi(this,t))}))};var tn={dataset:[],dropdownOpts:{},template:""+"<label>".concat(B.translate("FieldFilter"),'</label>\n    <select class="dropdown no-init field-filter-dropdown">\n      {{#dataset}}\n        <option\n          {{#value}} value="{{value}}"{{/value}}\n          {{#selected}} selected{{/selected}}\n          {{#disabled}} class="is-disabled" disabled{{/disabled}}\n          {{#icon}} data-icon="{{icon}}"{{/icon}}\n        >{{text}}</option>\n      {{/dataset}}\n    </select>')};function en(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,tn),this.init()}en.prototype={init:function(){this.render(),this.handleEvents(),this.setFiltered()},render:function(t){var e=this.settings;if(t=t||e.dataset,"object"===i(fe)&&t&&e.template){e.template instanceof $?e.template="".concat(e.template.html()):"string"==typeof e.template&&(E.containsHTML(e.template)||(e.template=$("#".concat(e.template)).html()));var n=fe.compile(e.template,{dataset:e.dropdownOpts.source?[]:t}),s=""+'<label for="ffdropdown-empty" class="audible">\n          '.concat(B.translate("FieldFilter"),'\n        </label>\n        <select id="ffdropdown-empty" name="ffdropdown-empty" class="dropdown no-init field-filter-dropdown"></select>');t.length>0?this.element.before(n):0===t.length&&this.element.before(n||s);var a=this.element.attr("id")||this.element.attr("name");void 0===a&&(a=C.uniqueId(this.element,"fieldfilter-"),this.element[0].setAttribute("id",a));var r="".concat(a,"-ff");this.field=this.element.closest(".field, .field-short");var o=B.isRTL();e.dropdownOpts=e.dropdownOpts||{},o&&"object"===i(e.dropdownOpts)&&(e.dropdownOpts.placementOpts?e.dropdownOpts.placementOpts.x=this.element.outerWidth():e.dropdownOpts.placementOpts={x:this.element.outerWidth()}),e.dropdownOpts.cssClass=e.dropdownOpts.cssClass?"".concat(e.dropdownOpts.cssClass," ffdropdown"):"ffdropdown",e.dropdownOpts.noSearch=!0,this.ffdropdown=this.field.find("select.dropdown.field-filter-dropdown"),this.ffdropdown.dropdown(e.dropdownOpts).prev("label").addClass("audible"),this.ffdropdown[0].setAttribute("id",r),this.ffdropdown[0].setAttribute("name",r),this.ffdropdown.prev("label")[0].setAttribute("for",r);var l=this.ffdropdown.prev("label").prev("label").text();this.field.addClass("fieldfilter-wrapper"),this.field.find("div.dropdown span.audible").text(l),this.field.find("div.dropdown span").addClass("audible"),this.ddApi=this.ffdropdown.data("dropdown"),this.ddApi&&this.ddApi.icon&&this.ddApi.icon.addClass("ffdropdown-icon"),C.addAttributes(this.field,this,this.settings.attributes,"",!0),C.addAttributes(this.field.find("label:not(.audible)"),this,this.settings.attributes,"label",!0),C.addAttributes(this.field.find("select"),this,this.settings.attributes,"select",!0)}},setFiltered:function(){if(this.ddApi){var t=this.ddApi.element.find("option:selected");this.filtered=this.getTriggerData(t)}return this},getTriggerData:function(t){var e=this.settings,i=e.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:e.dataset;return{idx:t.index(),item:t,data:i[t.index()]}},getFilterType:function(){return this.setFiltered(),this.filtered},setFilterType:function(t){if(this.ddApi){var e=-1,i=this.settings,n=i.dropdownOpts.source&&this.ddApi?this.ddApi.dataset:i.dataset;if("number"==typeof t&&t>-1&&t<n.length)e=t;else if("string"==typeof t){var s=this.ffdropdown.find('option[value="'.concat(t,'"]'));s.length||(s=this.ffdropdown.find("option").filter((function(){return $(this).text()===t}))),s.length&&(e=s.index())}-1!==e&&e!==this.ffdropdown[0].selectedIndex&&(this.ffdropdown[0].selectedIndex=e,this.ddApi.updated(),this.ffdropdown.triggerHandler("change"),this.setFiltered(),this.element.triggerHandler("filtered",[this.filtered]))}},handleEvents:function(){var t=this;return this.ffdropdown.on("listopened.".concat("fieldfilter"),(function(){var e=t.field.is(".field-short")?42:52;$("#dropdown-list ul").width(t.element.outerWidth()+e)})).on("selected.".concat("fieldfilter"),(function(e,i){var n=t.getTriggerData(i);t.element.triggerHandler("filtered",[n])})),this},readonly:function(){return this.ffdropdown.readonly(),this},enable:function(){return this.ffdropdown.enable(),this},disable:function(){return this.ffdropdown.disable(),this},unbind:function(){return this.ffdropdown.off(".".concat("fieldfilter")),this.ddApi&&"function"==typeof this.ddApi.destroy&&this.ddApi.destroy(),this.ffdropdown.add(this.ffdropdown.prev("label")).remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element[0],t,tn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldfilter")}},$.fn.fieldfilter=function(t){return this.each((function(){var e=$.data(this,"fieldfilter");e?e.updated(t):e=$.data(this,"fieldfilter",new en(this,t))}))};var nn={};function sn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,nn),this.init(),N("FieldOptions")}sn.prototype={init:function(){this.setElements(),this.handleEvents()},setElements:function(){var t=this;this.isFirefox="firefox"===m.browser.name,this.isSafari=m.browser.isSafari(),this.field=this.element.closest(".field, .radio-group"),this.targetElem=this.element;var e=this.field.find("label");return e&&(this.label=e),this.element[0].className.match(/(dropdown|multiselect)/)&&(this.targetElem=this.element.data("dropdown").pseudoElem),this.element[0].className.match(/(fileupload)/)&&(this.targetElem=this.field.find('.fileupload[type="text"]')),this.field.addClass("is-fieldoptions"),this.fieldParent=this.element.closest(".field").parent(),this.trigger=this.field.find(".btn-actions"),this.isFirefox&&this.trigger.length&&(this.trigger[0].contentEditable=!0,this.trigger.on("keydown.".concat("fieldoptions"),(function(t){9!==(t.which||t.keyCode||t.charCode||0)&&(t.preventDefault(),t.stopPropagation())}))),setTimeout((function(){t.popupmenuApi=t.trigger.data("popupmenu"),t.popupmenuApi&&(t.popupmenuApi.settings.returnFocus=!1,t.popupmenuApi.settings.offset.y=10)}),100),this},handleEvents:function(){var t=this,e=this,i=this.element.data("datepicker"),n=this.element.data("timepicker"),s=this.element.data("dropdown"),a=this.element.data("lookup")||this.element.hasClass("lookup"),r=this.element.is(".checkbox"),o=this.element.is(".fileupload"),l=this.element.is(".searchfield"),c=this.element.is(".colorpicker"),d=this.element.closest(".radio-group").length>0,h=this.element.is(".data")&&this.element.closest(".summary-form").length>0,u=function(t){return $(":focus").is(t)},p=function(e){(e||t.element).addClass("is-focused")},g=function(e){(e||t.element).removeClass("is-focused")},f=function(){e.element.add(e.trigger).add(e.field).add(e.fieldParent).addClass("is-active")},v=function(){e.element.add(e.trigger).add(e.field).add(e.fieldParent).removeClass("is-active")},b=function(e){var r=!u(t.element);return r=!t.trigger.is(e.relatedTarget)&&r,r=!t.trigger.is(".is-open")&&r,r=(!i||!i.isOpen())&&r,r=(!n||!n.isOpen())&&r,r=!$(e.relatedTarget).prev().is(t.element)&&r,r=(!s||!s.isOpen())&&r,r=!(a&&a.modal&&a.modal.isOpen())&&r,r=(!c||!t.element.is(".is-open"))&&r},y=function(e){e.trigger&&e.trigger.off("show.".concat("fieldoptions")).on("show.".concat("fieldoptions"),(function(){f()})).off("hide.".concat("fieldoptions")).on("hide.".concat("fieldoptions"),(function(e){b(e)&&(v(),t.element.removeClass("is-open"))}))},w=function(){var e,i=t.element.height();if(h){var n=parseInt(t.element.css("line-height"),10);if(i>n){t.element.removeClass("is-singleline"),e=-1*((t.element.outerHeight()-t.trigger.height())/2+0);var s=n-16;e+=s?s/2:0}else t.element.addClass("is-singleline"),e=2}else d&&(e=(i-10-t.trigger.height())/2*-1);return e},x=function(){t.trigger.css({top:"".concat(w()-1,"px")})};return m.features.touch?(this.field.addClass("visible"),this.trigger.on("beforeopen.".concat("fieldoptions"),(function(e){var a;(a=u(t.element),a=(!i||!i.isOpen())&&a,a=(!n||!n.isOpen())&&a,a=(!s||!s.isOpen())&&a)&&f()})).on("close.".concat("fieldoptions"),(function(t){b(t)&&v()}))):(this.field.removeClass("visible"),this.field.on("mouseover.".concat("fieldoptions"),(function(){e.element.prop("disabled")||e.element.closest("is-disabled").length||e.field[0].className.indexOf("visible")<0&&e.field[0].classList.add("visible")})).on("mouseout.".concat("fieldoptions"),(function(){e.field[0].className.indexOf("visible")>-1&&e.field[0].classList.remove("visible")}))),s&&setTimeout((function(){var e=t.trigger.data("popupmenu");e&&e.menu.closest(".popupmenu-wrapper").css({"z-index":"4502"})}),0),(i||n)&&y(i||n),n&&(n.settings.returnFocus=!1),(a||c)&&(this.field.on("click.".concat("fieldoptions"),".lookup-wrapper .trigger, .colorpicker-container .trigger",(function(){f()})),c&&this.element.on("beforeopen.".concat("fieldoptions"),(function(){f()}))),r&&(this.trigger.addClass("is-checkbox"),!m.features.touch&&this.isSafari&&this.field.on("click.".concat("fieldoptions"),".checkbox-label",(function(){f()})).on("mouseout.".concat("fieldoptions"),".checkbox-label",(function(){v()}))),o&&(this.element.on("change.".concat("fieldoptions"),(function(){t.targetElem.focus()})),this.field.on("click.".concat("fieldoptions"),".trigger, .trigger-close",(function(){f()}))),l&&setTimeout((function(){t.trigger.add(t.trigger.next(".popupmenu")).appendTo(t.element.closest(".searchfield-wrapper"))}),0),h&&(x(),this.targetElem.add(this.trigger).on("keydown.".concat("fieldoptions"),(function(t){13===(t.which||t.keyCode||t.charCode||0)&&setTimeout((function(){f()}),0)})),this.targetElem.attr("tabindex",0).on("click.".concat("fieldoptions"),(function(){f()})),$(document).on("click.".concat("fieldoptions"),(function(e){$(e.target).is(t.element)||v()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),d&&(x(),this.element.on("focusin.".concat("fieldoptions"),".radio",(function(){var e=t.isSafari?200:0;p(),setTimeout((function(){f()}),e)})).on("focusout.".concat("fieldoptions"),".radio",(function(){g()})),$("body").on("resize.".concat("fieldoptions"),(function(){x()}))),this.targetElem.on("focusin.".concat("fieldoptions"),(function(){f(),d&&t.isSafari&&p()})).on("focusout.".concat("fieldoptions"),(function(e){var i=t.isSafari?200:0;d&&t.isSafari&&g(),setTimeout((function(){b(e)&&v()}),i)})),this.trigger.on("focusin.".concat("fieldoptions"," click.").concat("fieldoptions"),(function(){f()})).on("focusout.".concat("fieldoptions"),(function(t){b(t)&&v()})).on("selected.".concat("fieldoptions"),(function(){t.popupmenuApi.settings.returnFocus=!0})).on("close.".concat("fieldoptions"),(function(t){b(t)&&v()})),(this.isSafari||o)&&(d&&this.element.attr("tabindex",0),this.targetElem.on("keydown.".concat("fieldoptions"),(function(e){9!==(e.which||e.keyCode||e.charCode||0)||e.shiftKey||(d?(t.targetElem.find(":checked, .radio:first").not(":disabled").focus(),t.targetElem.find(".radio").off("keydown.".concat("fieldoptions")).on("keydown.".concat("fieldoptions"),(function(i){9!==(i.which||i.keyCode||i.charCode||0)||e.shiftKey||setTimeout((function(){t.trigger.focus()}),0)}))):t.trigger.focus(),f(),e.preventDefault(),e.stopPropagation())}))),this.element.on("listopened.".concat("fieldoptions"),(function(){f()})).on("listclosed.".concat("fieldoptions"),(function(){v()})),this},enable:function(){return this.trigger.prop("disabled",!1),this},disable:function(){return this.trigger.prop("disabled",!0),this},unbind:function(){return this.field.off(["click.".concat("fieldoptions"),"mouseover.".concat("fieldoptions"),"mouseout.".concat("fieldoptions")].join(" ")),this.element.off(["beforeopen.".concat("fieldoptions"),"change.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"listclosed.".concat("fieldoptions"),"listopened.".concat("fieldoptions")].join(" ")),this.trigger.off(["beforeopen.".concat("fieldoptions"),"click.".concat("fieldoptions"),"focusin.".concat("fieldoptions"),"focusout.".concat("fieldoptions"),"selected.".concat("fieldoptions"),"close.".concat("fieldoptions")].join(" ")),this.targetElem.off(["click.".concat("fieldoptions"),"keydown.".concat("fieldoptions")].join(" ")),$("body").off(["resize.".concat("fieldoptions")].join(" ")),$(document).off(["click.".concat("fieldoptions")].join(" ")),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,nn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"fieldoptions")}},$.fn.fieldoptions=function(t){return this.each((function(){var e=$.data(this,"fieldoptions");e?e.updated(t):e=$.data(this,"fieldoptions",new sn(this,t))}))};var an={};function rn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,an),this.init()}rn.prototype={init:function(){this.build()},build:function(){var t=this,e=this,i=this.element,n=!i.is("input.fileupload");this.fileInput=n?i.find("input"):i,i.closest(".field, .field-short").addClass("field-fileupload");var s=i.find("input").attr("name");n||(s=i.attr("id")||i.attr("name"));var a=n?i.find("input").attr("class"):i.attr("class");a=a?" ".concat(a):"";var r=B.translate("FileUpload");this.shadowLabel=$('<label for="'.concat(s,'-filename">').concat(i.text(),' <span class="audible">').concat(r,"</span></label>")),this.shadowField=$('<input readonly id="'.concat(s,'-filename" class="fileupload-background-transparent').concat(a,'" type="text">'));var o='<span class="trigger">'.concat($.createIcon("folder"),"</span>"),l='<span class="trigger-close" tabindex="-1">'.concat($.createIcon("close"),"</span>");if(!n){var c=i.prev("label");0===c.length&&(c=i.parent().prev("label")),this.shadowLabel.html("".concat(c.text(),' <span class="audible">').concat(r,"</span>")),c.addClass("audible").add(this.fileInput).attr("tabindex","-1").attr("aria-hidden","true")}0===i.parent().find('input[type="text"]').length&&(i.before(this.shadowLabel,this.shadowField),this.fileInput.after(o,l));var d=this.fileInput.attr("value");d&&d.length>0&&(this.shadowField.val(d),this.fileInput.attr("value","")),this.textInput=this.shadowField,this.svg=i.parent().find(".trigger"),this.svgClose=i.parent().find(".trigger-close"),this.textInput.on("keydown.fileupload",(function(e){var n=!1;13===e.which||32===e.which?(i.parent().find('[type="file"]').trigger("click"),n=!0):8===e.which&&(m.browser.isIE11()&&e.preventDefault(),t.clearUploadFile(),n=!0),n&&e.stopPropagation()})),this.svg.on("click.fileupload",(function(e){t.fileInput.trigger("click"),n&&t.fileInput.data("handleEvent".concat([e.type||""]),e.handleObj)})),this.svgClose.on("click.fileupload",(function(e){t.clearUploadFile(),n&&t.fileInput.data("handleEvent +".concat([e.type||""]),e.handleObj)})),this.fileInput.is(":disabled")&&this.textInput.prop("disabled",!0),i.hasClass("required")&&(this.shadowLabel.addClass("required"),i.removeClass("required")),this.fileInput.attr("data-validate")&&(this.textInput.attr("data-validate",this.fileInput.attr("data-validate")),this.textInput.validate()),this.fileInput.attr("readonly")&&(this.textInput.prop("disabled",!1),this.textInput[0].classList.remove("fileupload-background-transparent"),this.fileInput.attr("disabled","disabled")),this.fileInput.on("change.fileupload",(function(){this.files.length>0?(e.textInput.val(this.files[0].name).trigger("change"),e.svgClose.show().addClass("is-visible")):e.clearing||e.clearUploadFile()})),this.fileInput.on("click.fileupload",(function(e){var i=t.fileInput.data("handleEvent".concat([e.type||""]));i&&i.type===e.type&&"fileupload"===e.handleObj.namespace&&(t.fileInput.data("handleEvent".concat([e.type||""]),null),e.preventDefault())})),this.textInput.on("dragenter.fileupload",(function(){t.fileInput.css("z-index","1")})),this.textInput.on("dragleave.fileupload, dragend.fileupload, drop.fileupload",(function(){setTimeout((function(){t.fileInput.css("z-index","-1")}),1)})),C.addAttributes(i,this,this.settings.attributes),C.addAttributes(this.svg,this,this.settings.attributes,"btn-trigger"),C.addAttributes(this.svgClose,this,this.settings.attributes,"btn-trigger-close")},clearUploadFile:function(){this.clearing=!0,this.fileInput.add(this.textInput).val(""),this.svgClose.hide().removeClass("is-visible"),this.fileInput.triggerHandler("change"),this.clearing=!1},unbind:function(){return this.svg.add(this.svgClose).off("click.fileupload"),this.fileInput.off("change.fileupload"),this.fileInput.prev("label"),this.textInput.off(),this.element.closest(".field-fileupload").removeClass("field-fileupload").find('>label:first, >[type="text"]:first, .trigger, .trigger-close, .icon-dirty, .msg-dirty').remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,an)),this},destroy:function(){this.shadowField.remove(),this.shadowLabel.remove(),$.removeData(this.element[0],"fileupload")},disable:function(){this.textInput.prop("disabled",!0),this.fileInput.prop("disabled",!0)},enable:function(){this.textInput.prop("disabled",!1).prop("readonly",!1),this.fileInput.removeAttr("disabled")},readonly:function(){this.textInput.prop("readonly",!0),this.fileInput.prop("disabled",!0),this.textInput.prop("disabled",!1),this.textInput.removeClass("fileupload-background-transparent")}},$.fn.fileupload=function(t){return this.each((function(){var e=$.data(this,"fileupload");e?e.updated(t):e=$.data(this,"fileupload",new rn(this,t))}))};var on={isStandalone:!0,standaloneClass:"standalone",allowedTypes:"*",maxFiles:99999,maxFilesInProcess:99999,maxFileSize:-1,fileName:"myfile",isDisabled:!1,showBrowseButton:!0,send:null,textDropArea:null,textDropAreaWithBrowse:null,textBtnCancel:null,textBtnCloseError:null,textBtnRemove:null,errorAllowedTypes:null,errorMaxFileSize:null,errorMaxFiles:null,errorMaxFilesInProcess:null};function ln(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,on),this.init()}ln.prototype={init:function(){return this.build(),this.handleEvents(),this},build:function(){var t,e=this.settings,i=e.isStandalone?e.standaloneClass:"";if(e.textDropArea=e.textDropArea||B.translate("TextDropArea"),e.textDropAreaWithBrowse=e.textDropAreaWithBrowse||B.translate("TextDropAreaWithBrowse"),e.textBtnCancel=e.textBtnCancel||B.translate("TextBtnCancel"),e.textBtnCloseError=e.textBtnCloseError||B.translate("TextBtnCloseError"),e.textBtnRemove=e.textBtnRemove||B.translate("TextBtnRemove"),e.errorAllowedTypes=e.errorAllowedTypes||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorAllowedTypes")),e.errorMaxFileSize=e.errorMaxFileSize||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFileSize")),e.errorMaxFiles=e.errorMaxFiles||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFiles")),e.errorMaxFiles=e.errorMaxFiles.replace("{n}",e.maxFiles),e.errorMaxFilesInProcess=e.errorMaxFilesInProcess||"<em>".concat(B.translate("Error"),"</em>: ").concat(B.translate("ErrorMaxFilesInProcess")),this.element.is(".is-disabled")&&(e.isDisabled=!0),e.isDisabled&&(i+=" is-disabled"),e.showBrowseButton){var n="",s=C.uniqueId(this.element,"fileupload-adv-"),a=e.allowedTypes.split(/[\s|]+/g),r=e.maxFilesInProcess>1?" multiple":"";if(r+=e.isDisabled?" disabled":"",1===a.length)"*"!==a[0]&&(n=".".concat(a[0]));else for(var o=0,l=a.length;o<l;o++)n+=".".concat(a[o]+(o!==l-1?",":""));t=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),'\n            <label class="fileupload-adv-browse-lbl">\n              <span>').concat(e.textDropAreaWithBrowse,'</span>\n              <input type="file" name="').concat(s,'" accept="').concat(n,'"').concat(r," />\n            </label>\n          </div>\n        </div>")}else t=""+'<div class="fileupload-wrapper '.concat(i,'">\n          <div class="container drop-area">\n            ').concat($.createIcon("upload"),"\n            <p>").concat(e.textDropArea,"</p>\n          </div>\n        </div>");u.append(this.element,t,"<div><svg><use><label><span><input>"),this.dropArea=$(".drop-area",this.element),C.addAttributes(this.dropArea,this,this.settings.attributes),C.addAttributes(this.dropArea.find("svg"),this,this.settings.attributes,"icon"),C.addAttributes(this.dropArea.find("label"),this,this.settings.attributes,"label")},handleEvents:function(){var t=this,e=this,i=this.settings;if(this.dropArea.on("dragenter.fileuploadadvanced",(function(t){e.element.triggerHandler("filesdragenter"),t.stopPropagation(),t.preventDefault(),i.isDisabled||$(this).addClass("hover")})).on("dragover.fileuploadadvanced",(function(t){t.stopPropagation(),t.preventDefault()})).on("drop.fileuploadadvanced",(function(t){var n=t.originalEvent.dataTransfer.files;t.preventDefault(),i.isDisabled||(e.element.triggerHandler("filesdroped",[n]),$(this).removeClass("hover is-focus"),e.handleFileUpload(n))})),i.showBrowseButton&&!i.isDisabled){var n=this.dropArea.find(".fileupload-adv-browse-lbl"),s=n.find('input[type="file"]');n.click((function(t){$(t.target).is('.hyperlink, input[type="file"]')||t.preventDefault()})),s.hideFocus(),s.on("hidefocusremove.fileuploadadvanced",(function(e){e.stopPropagation(),t.dropArea.addClass("is-focus")})).on("hidefocusadd.fileuploadadvanced",(function(e){e.stopPropagation(),t.dropArea.removeClass("is-focus")})).on("change.fileuploadadvanced",(function(t){t.stopPropagation(),e.handleFileUpload(this.files)}))}$(document).on("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced",(function(t){t.stopPropagation(),t.preventDefault(),"dragover"===t.type&&e.dropArea.removeClass("hover")}))},handleFileUpload:function(t){var e=this.settings;$("span.msg",this.element).closest(".error").remove(),this.totalCompleted=this.totalCompleted||0;var i=this.totalCompleted+t.length+$(".progress",this.element).length;if(i>e.maxFiles)this.showError(e.errorMaxFiles);else if(i>e.maxFilesInProcess)this.showError(e.errorMaxFilesInProcess);else{for(var n=e.fileName.replace("[]",""),s=0,a=t.length;s<a;s++)if(this.isFileTypeAllowed(t[s].name))if(-1!==e.maxFileSize&&t[s].size>e.maxFileSize)this.showError(e.errorMaxFileSize,t[s]);else{this.element.triggerHandler("beforecreatestatus",[t[s]]);var r=new FormData;r.append("".concat(n,"[]"),t[s]);var o=this.createStatus(t[s]);o.container.find(".status-icon .action").focus(),this.element.triggerHandler("aftercreatestatus",[t[s]]),"function"==typeof e.send?e.send(r,o):this.sendFileToServer(r,o)}else this.showError(e.errorAllowedTypes,t[s]);e.showBrowseButton&&this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').val("")}},createStatus:function(t){var e=this,i=this,n=this.settings,s=$(""+'<div class="container">\n        <div class="file-row">\n          <span class="status-icon">\n            <button type="button" class="btn-icon action">\n              '.concat($.createIcon({icon:"close",classes:["icon-close"]}),"\n              <span>").concat(n.textBtnCancel,'</span>\n            </button>\n          </span>\n          <span class="description">').concat(t.name,'</span>\n          <div class="l-pull-right">\n            <span class="size">').concat(this.formatFileSize(t.size),'</span>\n          </div>\n        </div>\n        <div class="progress-row">\n          <span class="progress">\n            <span class="progress-bar" data-value="0"></span>\n          </span>\n        </div>\n      </div>')),a=$(".action",s).button(),r=$(".l-pull-right",s),o=$(".progress-bar",s).progress({animationLength:10});this.dropArea.after(s);return{file:t,container:s,setProgress:function(i){e.element.triggerHandler("fileprogress",[{file:t,progress:i}]),o.attr("data-value",i).triggerHandler("updated")},setAbort:function(i){a.on("click.fileuploadadvanced",(function(){e.element.triggerHandler("fileaborted",[t]),i&&"function"==typeof i.abort&&i.abort(),a.off("click.fileuploadadvanced"),s.remove()}))},setCompleted:function(e){e=e&&"function"==typeof e.remove?e:{remove:function(){}},s.addClass("completed"),a.after($.createIcon("check")),r.append(""+'<button type="button" class="btn-icon action">\n          '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n          <span>").concat(n.textBtnRemove,"</span>\n        </button>")),$(".action",r).button().on("click.fileuploadadvanced",(function(){$(this).off("click.fileuploadadvanced"),s.remove(),e.remove(),i.element.triggerHandler("fileremoved",[t])})),o.destroy(),a.off("click.fileuploadadvanced"),a.add(o.closest(".progress-row")).remove(),i.totalCompleted++,i.element.triggerHandler("filecompleteuploading",[t])}}},sendFileToServer:function(t,e){var i={remove:function(){}},n=0,s=parseFloat(e.file.size),a=new $.fn.timer((function(){e.setCompleted(i)}),s);$(a.event).on("update",(function(t,i){n=Math.ceil(i.counter/s*100),e.setProgress(n)})),e.setAbort({abort:function(){}})},showError:function(t,e){var i,n=this.settings;i=t===n.errorMaxFiles||t===n.errorMaxFilesInProcess?$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(n.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="msg">').concat(t,"</span>\n          </div>\n        </div>")):$(""+'<div class="container error">\n          <div class="file-row">\n            <span class="status-icon">\n              <button type="button" class="btn-icon action">\n                '.concat($.createIcon({classes:["icon-close"],icon:"close"}),"\n                <span>").concat(n.textBtnCloseError,'</span>\n              </button>\n            </span>\n            <span class="description">').concat(e.name,'</span>\n            <div class="l-pull-right">\n              <span class="size">').concat(this.formatFileSize(e.size),'</span>\n            </div>\n          </div>\n          <div class="msg">\n            <p>').concat(t,"</p>\n          </div>\n        </div>")),$(".action",i).button().on("click.fileuploadadvanced",(function(){i.remove()})),this.dropArea.after(i)},isFileTypeAllowed:function(t){var e=this.settings.allowedTypes.toLowerCase().split(/[\s|]+/g),i=t.split(".").pop().toLowerCase();return!("*"!==this.settings.allowedTypes&&$.inArray(i,e)<0)},formatFileSize:function(t){var e=1e9,i=1e6,n=1e3;return"number"!=typeof t?"":t>=e?"".concat((t/e).toFixed(2)," GB"):t>=i?"".concat((t/i).toFixed(2)," MB"):"".concat((t/n).toFixed(2)," KB")},enable:function(){this.settings.isDisabled=!1,this.unbind(),this.element.find(".fileupload-wrapper").removeClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').removeAttr("disabled"),this.handleEvents()},disable:function(){this.settings.isDisabled=!0,this.unbind(),this.element.find(".fileupload-wrapper").addClass("is-disabled").find('.fileupload-adv-browse-lbl input[type="file"]').attr("disabled","disabled"),this.handleEvents()},unbind:function(){this.dropArea.find('.fileupload-adv-browse-lbl input[type="file"]').off("hidefocusremove.fileuploadadvanced hidefocusadd.fileuploadadvanced change.fileuploadadvanced"),this.dropArea.off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(document).off("dragenter.fileuploadadvanced dragover.fileuploadadvanced drop.fileuploadadvanced"),$(".action",this.element).off("click.fileuploadadvanced");var t=$(".fileupload-wrapper",this.element);return t.off().find("*").off(),t.remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,on)),this.unbind().init()},destroy:function(){this.unbind(),$(".fileupload-wrapper",this.element).remove(),$.removeData(this.element[0],"fileuploadadvanced")}},$.fn.fileuploadadvanced=function(t){return this.each((function(){var e=$.data(this,"fileuploadadvanced");e?e.updated(t):e=$.data(this,"fileuploadadvanced",new ln(this,t))}))};var cn={animate:!0,columns:3,editing:!1,easing:"blockslide",gutterSize:20,widgetWidth:360,widgetHeight:370,useSmall:!1,timeout:100};function dn(t,e){this.settings=C.mergeSettings(t,e,cn),this.element=$(t),this.init()}dn.prototype={get state(){var t=this.rowsAndCols.length,e=t?this.rowsAndCols[0].length:0,i=this.settings;return-1===this.rowsAndCols[t-1].indexOf(!1)&&(t-=1),void 0===this.editing&&(this.editing=i.editing),{rows:t,cols:e,containerHeight:i.gutterSize+(i.gutterSize+i.widgetHeight)*t,matrix:this.rowsAndCols,blocks:this.blocks,editing:this.editing}},init:function(){this.isTransitionsSupports=this.supportsTransitions(),this.setSmall(),this.setColumns(),this.initHeroWidget(),this.handleEvents(),this.initEdit(),this.resize(this,!1)},setColumns:function(){var t=this.settings.columns,e=parseInt(this.element.attr("data-columns"),10);isNaN(e)||t===e||t!==cn.columns||(t=e),this.columns=t},setSmall:function(){var t=this.settings,e=this.element.attr("data-use-small");if(t.useSmall||e&&"true"===e.toString().toLowerCase()){var i=cn,n={gutterSize:24,widgetWidth:260,widgetHeight:260};t.useSmall=!0,t.gutterSize===i.gutterSize&&(t.gutterSize=n.gutterSize),t.widgetWidth===i.widgetWidth&&(t.widgetWidth=n.widgetWidth),t.widgetHeight===i.widgetHeight&&(t.widgetHeight=n.widgetHeight)}},initColumns:function(t){t=t||0,this.rowsAndCols[t]=[];for(var e=0,i=this.columns;e<i;e++)this.rowsAndCols[t][e]=!0},initHeroWidget:function(){var t=$(".hero-widget");t.length>1&&(t=t.not(":first").remove()),this.heroWidget=t},initRowsAndCols:function(){this.rowsAndCols=[],this.initColumns()},initEdit:function(){var t=this,e=this,i=e.element.find(".card, .widget, .small-widget");void 0===e.editing&&(e.editing=e.settings.editing),e.editing?(i.attr("draggable",!0),i.css("cursor","move"),e.guide=$("<div>").addClass("drop-indicator").append("\n      <div class='edge'></div>\n      <div class='line'></div>\n      <div class='edge'></div>\n      "),i.each((function(i,n){var s=$(n),a=$("<button>").addClass("card-remove").append('\n        <span class="audible">Remove Widget</span>\n          <svg icon="close" soho-icon="" class="icon" aria-hidden="true" focusable="false" role="presentation">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-close"></use>\n          </svg>\n        ');if(!s.hasClass("no-remove")){var r=s.children(".widget-header");a.insertBefore(r).on("click.card-remove",(function(){if(t.settings&&"function"==typeof t.settings.onBeforeRemoveCard){var i=t.settings.onBeforeRemoveCard(s);i&&i.then&&"function"==typeof i.then?i.then((function(){s.triggerHandler("removecard",[s,e.state]),s.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[s,e.state])})):i&&(s.triggerHandler("removecard",[s,e.state]),s.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[s,e.state]))}else s.triggerHandler("removecard",[s,e.state]),s.remove(),e.refresh(!1),e.element.triggerHandler("removecard",[s,e.state])}))}})),i.on("mouseenter.card",(function(){var t=$(this),i=$("<div>").addClass("ui-resizable-handle ui-resizable-e").drag({axis:"x"}).on("dragstart.handle",(function(n){n.stopPropagation(),n.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(n){var s=n.clientX-t.offset().left;s<e.settings.widgetWidth/2?i.css({left:e.settings.widgetWidth/2}):t.width(s)})).on("mouseup.handle",(function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-width triple-width quad-width quintuple-width");var i=t.width()/e.settings.widgetWidth;i>4.5?t.addClass("quintuple-width"):i>3.5?t.addClass("quad-width"):i>2.5?t.addClass("triple-width"):i>1.5&&t.addClass("double-width"),$(".ui-resizable-handle").remove(),t.css({opacity:1,width:""}),e.refresh(!1),t.triggerHandler("resizecard",[t,e.state]),e.element.triggerHandler("resizecard",[t,e.state])}))})),n=$("<div>").addClass("ui-resizable-handle ui-resizable-s").drag({axis:"y"}).on("dragstart.handle",(function(i){i.stopPropagation(),i.preventDefault(),t.addClass("ui-resize-passive"),t.css({opacity:.9,zIndex:90}),$(window).on("mousemove.handle",(function(i){var s=i.clientY-t.offset().top;s<e.settings.widgetHeight?n.css({top:e.settings.widgetHeight}):t.height(s)})).on("mouseup.handle",(function(){t.removeClass("ui-resize-passive"),t.css({zIndex:"auto"}),$(window).off("mousemove.handle").off("mouseup.handle"),t.removeClass("double-height"),t.height()/e.settings.widgetHeight>1.5&&t.addClass("double-height"),$(".ui-resizable-handle").remove(),t.css({opacity:1,height:""}),e.refresh(!1),t.triggerHandler("resizecard",[t,e.state]),e.element.triggerHandler("resizecard",[t,e.state])}))}));0===t.has(".ui-resizable-handle").length&&t.append(i,n),t.addClass("editable-hover-border")})).on("mouseleave.card",(function(){var t=$(this);t.hasClass("ui-resize-passive")||$(".ui-resizable-handle").remove(),t.removeClass("editable-hover-border")})).on("dragstart.card",(function(){$(this).addClass("is-dragging")})).on("dragover.card",(function(t){t.preventDefault()})).on("dragenter.card",(function(t){t.preventDefault();var i=$(this),n=$(".is-dragging");i.is(n)&&0===$(".drop-indicator").length||(n.index()<i.index()?(e.guide.css("right","-14px"),e.guide.css("left","")):(e.guide.css("left","-14px"),e.guide.css("right","")),i.append(e.guide),e.refresh(!1))})).on("dragend.card",(function(){var t=$(this);if(t.hasClass("is-dragging")){var n=$(i).has(".drop-indicator");t.index()<n.index()?t.insertAfter(n):t.insertBefore(n),t.removeClass("is-dragging"),e.guide.remove(),e.refresh(!1),t.triggerHandler("reordercard",[t,e.state]),e.element.triggerHandler("reordercard",[t,e.state])}}))):(i.attr("draggable",!1),i.css("cursor","auto"),i.children(".card-remove").remove(),i.off("mouseenter.card mouseleave.card dragstart.card dragenter.card dragend.card"))},setEdit:function(t){void 0!==t&&(this.editing=t,this.initEdit(),this.refresh(!1))},getAvailability:function(t){for(var e=!1,i={},n=this.rowsAndCols.length,s=0,a=n;s<a&&!e;s++)for(var r=0,o=!0,l=this.rowsAndCols[s].length;r<l&&!e;r++)if(this.rowsAndCols[s][r]&&t.w+r<=l){if(t.w>1&&l>r+1)for(var c=0;c<t.w;c++)if(!this.rowsAndCols[s][r+c]){o=!1;break}if(t.h>1&&n>s+1)for(var d=0;d<t.h;d++)if(!this.rowsAndCols[s+d][r]){o=!1;break}o&&(i.row=s,i.col=r,e=!0)}return Object.getOwnPropertyNames(i).length||(this.initColumns(n),i.row=n,i.col=0),i},fitBlock:function(t,e,i){var n=!0;if(i.x=e,i.y=t,1===i.w&&1===i.h)this.rowsAndCols[t][e]=!1;else if(1!==i.w)for(var s=t,a=i.h+t;s<a;s++)for(var r=e,o=i.w+e;r<o;r++)this.rowsAndCols[s]||this.initColumns(s),this.rowsAndCols[s][r]=!1;else for(var l=t,c=i.h+t;l<c;l++)for(var d=e,h=i.h+e;d<h;d++)this.rowsAndCols[l]||this.initColumns(l),this.rowsAndCols[l][e]=!1;for(var u=0,p=this.rowsAndCols[t].length;u<p;u++)this.rowsAndCols[t][u]&&(n=!1);n&&(this.rowsAndCols[t+1]||this.initColumns(t+1))},setBlocks:function(){var t=this.element.find(".card, .widget, .small-widget");this.blocks=[];for(var e=0,i=t.length;e<i;e++){var n=$(t[e]),s=n.hasClass("double-height")?2:1,a=void 0;a=n.hasClass("sextuple-width")?6:n.hasClass("quintuple-width")?5:n.hasClass("quad-width")?4:n.hasClass("triple-width")?3:n.hasClass("double-width")?2:1,this.blocks.push({w:a,h:s,elem:n,text:n.text()})}if(this.columns>1)for(var r=0,o=0,l=0,c=this.blocks.length;r<c;r++)this.blocks[r].w>=this.columns&&r&&l&&l<=this.columns/2&&this.arrayIndexMove(this.blocks,r,o),(l+=this.blocks[r].w)>=this.columns&&(l=0,o=this.blocks[o].w>=this.columns?o+1:r)},arrayIndexMove:function(t,e,i){t.splice(i,0,t.splice(e,1)[0])},resize:function(t,e){var i,n=6*t.settings.widgetWidth+5*t.settings.gutterSize,s=5*t.settings.widgetWidth+4*t.settings.gutterSize,a=4*t.settings.widgetWidth+3*t.settings.gutterSize,r=3*t.settings.widgetWidth+2*t.settings.gutterSize,o=2*t.settings.widgetWidth+t.settings.gutterSize,l=t.settings.widgetWidth,c=n,d=t.element.outerWidth(),h=d>=n,u=d>=s&&d<=n,p=d>=a&&d<=s,g=d>=r&&d<=a,f=d>=o&&d<=r,m=d<=o,v=t.element.find("> .content");this.setColumns(),(h||6===t.columns)&&(i=6,c=n),(u||5===t.columns)&&(i=5,c=s),(p||4===t.columns)&&(i=4,c=a),(g||3===t.columns)&&(i=3,c=r),(f||2===t.columns)&&(i=2,c=o),(m||1===t.columns)&&(i=1,c=l),t.columns=i||this.settings.columns,v.length&&(v[0].style.marginLeft="-".concat(c/2,"px")),this.setBlocks(),this.initRowsAndCols();for(var b=0,y=t.blocks.length;b<y;b++){var w=t.blocks[b];w.elem.removeClass("to-single to-double to-triple to-quad to-quintuple"),w.w>t.columns&&(w.w=t.columns,1===t.columns?w.elem.addClass("to-single"):2===t.columns?w.elem.addClass("to-double"):3===t.columns?w.elem.addClass("to-triple"):4===t.columns?w.elem.addClass("to-quad"):5===t.columns&&w.elem.addClass("to-quintuple"));var x=t.getAvailability(w),C=t.settings.widgetWidth+t.settings.gutterSize,k=C*t.columns,T={left:B.isRTL()?k-(C*w.w+C*x.col):C*x.col,top:(t.settings.widgetHeight+t.settings.gutterSize)*x.row};if(e&&!this.editing){var S=t.settings.easing;"blockslide"===S?t.isTransitionsSupports?(t.applyCubicBezier(w.elem,[.09,.11,.24,.91]),w.elem[0].style.left="".concat(T.left,"px"),w.elem[0].style.top="".concat(T.top,"px")):w.elem.animate(T,t.settings.timeout):w.elem.animate(T,t.settings.timeout,S)}else t.isTransitionsSupports&&t.applyCubicBezier(w.elem,null),w.elem[0].style.left="".concat(T.left,"px"),w.elem[0].style.top="".concat(T.top,"px");t.fitBlock(x.row,x.col,w)}t.element.triggerHandler("resize",[t.columns,t.state])},applyCubicBezier:function(t,e){var i=e?"all .3s cubic-bezier(".concat(e,")"):"none";t[0].style["-webkit-transition"]=i,t[0].style["-moz-transition"]=i,t[0].style["-ms-transition"]=i,t[0].style["-o-transition"]=i,t[0].style.transition=i},supportsTransitions:function(){var t=document.createElement("p").style,e="transition";if("string"==typeof t[e])return!0;var i=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0,s=i.length;n<s;n++)if("string"==typeof t[i[n]+e])return!0;return!1},refresh:function(t){var e=this;setTimeout((function(){t=void 0!==t?t:e.settings.animate,e.resize(e,t)}),0)},detachEvents:function(){$("body").off("resize.homepage"),$(".application-menu").off("applicationmenuopen.homepage applicationmenuclose.homepage")},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,cn)),this.detachEvents().init()},destroy:function(){this.detachEvents(),$.removeData(this.element[0],"homepage")},handleEvents:function(){var t=this;$("body").on("resize.homepage",(function(){t.resize(t,t.settings.animate)})),$(".application-menu").on("applicationmenuopen.homepage applicationmenuclose.homepage",(function(){t.resize(t,t.settings.animate)}))}},$.fn.homepage=function(t){return this.each((function(){var e=$.data(this,"homepage");e?e.updated(t):e=$.data(this,"homepage",new dn(this,t))}))};var hn=[".pager-first > .btn-icon",".pager-prev > .btn-icon",".pager-next > .btn-icon",".pager-last > .btn-icon",".pager-no > .btn-icon",".pager-count input",".pager-pagesize button"].join(", "),un={componentAPI:void 0,type:"list",position:"bottom",activePage:1,hideOnOnePage:!1,source:null,pagesize:15,pagesizes:[15,25,50,75],showPageSizeSelector:!0,smallPageSizeSelector:!1,pageSizeSelectorText:"RecordsPerPage",pageSizeSelectorTextNoToken:"RecordsPerPageNoToken",onPageSizeChange:null,showFirstButton:!0,enableFirstButton:!0,showPreviousButton:!0,enablePreviousButton:!0,showNextButton:!0,enableNextButton:!0,showLastButton:!0,enableLastButton:!0,indeterminate:!1,onFirstPage:null,onPreviousPage:null,onNextPage:null,onLastPage:null,firstPageTooltip:"FirstPage",previousPageTooltip:"PreviousPage",nextPageTooltip:"NextPage",lastPageTooltip:"LastPage",pageSizeMenuSettings:{attachToBody:!1},attributes:null};function pn(t,e){this.settings=C.mergeSettings(t,e,un),this.settings.dataset=e.dataset,this.element=$(t),this.init()}pn.prototype={get state(){var t,e,i,n=0,s=1,a=this.settings.indeterminate,r=this.settings.pagesize,o=this.previousOperation,l=this.previousTrigger,c=this.settings.dataset;if(isNaN(this.serverDatasetTotal)){if(c&&c.length){if(n=c.length,this.isFilteredClientside)n=c.filter((function(t){return!t._isFilteredOut})).length}}else n=this.serverDatasetTotal;return this.grandTotal&&(i=this.grandTotal),s=a?999999999:n<1?1:Math.ceil(n/r),isNaN(this.filteredTotal)||(e=this.filteredTotal,a?s=999999999:t=e<1?1:Math.ceil(e/r)),{activePage:this.activePage,indeterminate:this.settings.indeterminate,grandTotal:i,pagesize:r,pages:s,trigger:l,total:n,type:o,filteredActivePage:this.filteredActivePage,filteredTotal:e,filteredPages:t}},get pagingInfo(){return F("state","pagingInfo"),this.state},get focusableElements(){return C.getArrayFromList(this.pagerBar[0].querySelectorAll(hn))},get numberButtons(){if(!this.isTable){var t=this.pagerBar[0].querySelectorAll("li:not(.pager-prev):not(.pager-next):not(.pager-first):not(.pager-last):not(.pager-pagesize)");return C.getArrayFromList(t)}},get pageSelectorInput(){if(!this.isListView)return this.pagerBar[0].querySelector(".pager-count input")},get pageSizeSelectorButton(){if(this.settings.showPageSizeSelector)return this.pagerBar[0].querySelector(".pager-pagesize button")},get showSmallPageSizeSelector(){return!!this.settings.showPageSizeSelector&&(!0===this.settings.smallPageSizeSelector||this.isListView&&this.element.parents(".list-detail").length)},init:function(){this.setup(),this.createPagerBar(),this.setActivePage(this.settings.activePage,!0),this.handleEvents()},setup:function(){if(this.element.attr("data-pagesize")){var t=Number(this.element.attr("data-pagesize"));isNaN(t)||(this.settings.pagesize=t),this.element.removeAttr("data-pagesize")}if(-1===this.settings.pagesizes.indexOf(this.settings.pagesize)){this.settings.pagesizes.push(this.settings.pagesize),this.settings.pagesizes=this.settings.pagesizes.sort((function(t,e){return t-e}))}this.handleDeprecatedSettings();var e=this.element.parents(".card, .widget");return this.element.is("tbody")&&(this.isTable=!0,this.settings.type="table",this.mainContainer=this.element.closest(".datagrid-container"),this.settings.componentAPI||(this.settings.componentAPI=this.mainContainer.data("datagrid")),e.length&&e[0].classList.add("has-datagrid")),this.element.is(".listview")&&(this.isTable=!1,this.isListView=!0,this.mainContainer=this.element,this.settings.componentAPI||(this.settings.componentAPI=this.element.data("listview"))),this.element.attr({role:"region","aria-label":B.translate("Pagination")}),this},createPagerBar:function(){if(!this.pagerBar&&(this.pagerBar=this.element.prev(".pager-toolbar"),0===this.pagerBar.length&&(this.pagerBar=$('<ul class="pager-toolbar"></ul>')),"standalone"===this.settings.type?(this.pagerBar.addClass("is-standalone"),this.isListView?this.mainContainer.after(this.pagerBar):this.element.append(this.pagerBar)):this.isTable?this.mainContainer.after(this.pagerBar):"bottom"===this.settings.position?this.element.after(this.pagerBar):this.element.before(this.pagerBar),this.isListView&&this.pagerBar.addClass("is-listview"),this.element.closest(".card, .widget").length)){var t=this;["widget","card"].forEach((function(e){var i=t.element.closest(".".concat(e,"-content"));if(i.length){var n=i.next(".".concat(e,"-footer"));n.length||(n=$('<div class="'.concat(e,'-footer"></div>')).insertAfter(i)),t.pagerBar.appendTo(n)}}))}},handleDeprecatedSettings:function(){void 0!==this.settings.attachPageSizeMenuToBody&&(F("pageSizeMenuSettings.attachToBody (setting)","attachPageSizeMenuToBody (setting)"),this.settings.pageSizeMenuSettings.attachToBody=this.settings.attachPageSizeMenuToBody,delete this.settings.attachPageSizeMenuToBody)},handleEvents:function(){var t=this;this.pagerBar.on("click.pager",".btn-icon",(function(e){var i=e.currentTarget,n=i.parentNode,s=document.querySelector(".datagrid-cell-wrapper .dropdown"),a=document.querySelector(".datagrid-dropdown-list");if(e.preventDefault(),$(this).attr("disabled"))return!1;if(a){var r=s.parentNode.parentNode;a.remove(),r.classList.remove("is-editing")}var o=t.state,l=o.activePage;if(o.filteredTotal&&(l=o.filteredActivePage),u.hasClass(n,"pager-prev"))return t.setActivePage(l-1,!1,"prev"),t.triggerPagingEvents(l),!1;if(u.hasClass(n,"pager-next"))return t.setActivePage((-1===l?1:l)+1,!1,"next"),t.triggerPagingEvents(l),!1;if(u.hasClass(n,"pager-first"))return t.setActivePage(1,!1,"first"),t.triggerPagingEvents(l),!1;if(u.hasClass(n,"pager-last"))return t.setActivePage(t.pageCount(),!1,"last"),t.triggerPagingEvents(l),!1;var c=Number(i.getAttribute("data-page"));return(isNaN(c)||c<1)&&(c=1),t.setActivePage(c,!1,"page"),t.triggerPagingEvents(l),!1})),t.pagerBar.on("keydown.pager",$(t.focusableElements),(function(t){if($(".popupmenu.is-open").length>0)return!0;var e=(t=t||window.event).which||t.keyCode||t.charCode||!1,i=37===e||40===e,n=39===e||38===e,s=t.target;if("INPUT"===s.nodeName&&(i=40===e,n=38===e),!i&&!n)return!0;var a="INPUT"===s.nodeName?s.parentNode.parentNode:s.parentNode,r=a.nextSibling,o=a.previousSibling,l=null===o,c=null===r;if(t.preventDefault(),i&&!l){var d=o.querySelector("button, input");return d.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),d.focus(),!1}if(i&&l){var h=a.parentNode.lastChild.querySelector("button, input");return h.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),h.focus(),!1}if(n&&!c){var u=r.querySelector("button, input");return u.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),u.focus(),!1}if(n&&c){var p=a.parentNode.firstChild.querySelector("button, input");p.removeAttribute("tabindex"),s.setAttribute("tabindex","-1"),p.focus()}return!1}))},reset:function(t,e){this.activePage=this.settings.activePage,this.previousOperation=t,this.previousTrigger=e,this.teardown(),this.init()},showPageSizeSelector:function(t){t="true"==="".concat(t).toLowerCase(),this.settings.showPageSizeSelector=t,t&&(this.isShowPageSizeSelectorCall=t)},showButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var i=".pager-".concat(t," .btn-icon");"previous"===t&&(i=".pager-prev .btn-icon");var n=this.pagerBar[0].querySelector(i);e="true"==="".concat(e).toLowerCase(),this.settings["show".concat(E.capitalize(t),"Button")]=e,n&&(e?n.parentNode.classList.remove("hidden"):n.parentNode.classList.add("hidden"))}},enableButton:function(t,e){if(-1!==["first","last","next","previous"].indexOf(t)){var i=".pager-".concat(t," .btn-icon");"previous"===t&&(i=".pager-prev .btn-icon");var n=this.pagerBar[0].querySelector(i);e="true"==="".concat(e).toLowerCase(),this.settings["enable".concat(E.capitalize(t),"Button")]=e,n&&(e?(n.disabled=!1,n.parentNode.classList.remove("is-disabled"),$(n).removeAttr("disabled")):(n.disabled=!0,n.parentNode.classList.add("is-disabled"),$(n).attr("disabled","disabled")))}},setActivePage:function(t,e,n){var s="number"==typeof t.searchActivePage||"number"==typeof t.filteredActivePage||"number"==typeof this.filteredActivePage,a=this.filteredActivePage||this.activePage||this.settings.activePage;return"object"===i(t)?a=s?t.filteredActivePage||t.searchActivePage:t.activePage?t.activePage:1:isNaN(t)||(a=t),s?this.filteredActivePage=a:this.activePage=a,this.previousOperation=n,this.render(),void 0===a||0===a||isNaN(a)||a===this.activePage&&!e?this.activePage:(this.settings.componentAPI&&this.settings.componentAPI.saveUserSettings&&this.settings.componentAPI.saveUserSettings(),a)},adjustPageCount:function(t){var e=this.state,i="number"==typeof e.filteredActivePage||"number"==typeof this.filteredActivePage,n=e.pages;return i&&e.filteredPages&&(n=e.filteredPages),(t<1||t>n)&&(t=this.filteredActivePage||this.activePage),t},pageCount:function(t){var e=this.isShowPageSizeSelectorCall;return delete this.isShowPageSizeSelectorCall,void 0===t&&this.settings.indeterminate&&(this._pageCount=this.settings.pagesize),void 0!==t||this.settings.source||e?(void 0!==t&&(this._pageCount=t),this._pageCount=this._pageCount||1,this.settings.indeterminate?999999999:this._pageCount):this._pageCount},renderButtons:function(){var t,e=this.activePage,i=this.state.pages,n="",s=!1,a=!1,r=!1,o=!1,l=!this.settings.enableFirstButton,c=!this.settings.enablePreviousButton,d=!this.settings.enableNextButton,h=!this.settings.enableLastButton,u=this.settings.indeterminate&&!0===this.firstPage,p=this.settings.indeterminate&&!0===this.lastPage,g=this.settings.dataset&&this.settings.dataset.length;(this.state.filteredPages&&(e=this.state.filteredActivePage,i=this.state.filteredPages),this.pagerBar)&&(null===(t=this.pagerBar)||void 0===t||null==t||t.children("li").find("> .btn-icon, > .btn-icon[disabled] .disabled-tooltip").each((function(t,e){var i=$(e);i.data("tooltip")&&i.data("tooltip").destroy()})));this.settings.showFirstButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(l=!0),s=!0),this.settings.showPreviousButton&&((u||!this.settings.indeterminate&&"standalone"!==this.settings.type&&1===e)&&(c=!0),a=!0),this.settings.showNextButton&&((p||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===i)&&(d=!0),r=!0),this.settings.showLastButton&&((p||!this.settings.indeterminate&&"standalone"!==this.settings.type&&e===i)&&(h=!0),o=!0);var f=[],m=this.settings.showPageSizeSelector?190:0,v=(this.pagerBar.width()-m)/40,b=Math.floor(v);if((a||r)&&(b-=1),(o||s)&&(b-=1),!this.isTable&&"standalone"!==this.settings.type&&g&&b>=i&&(l=!0,h=!0),!this.settings.indeterminate){for(var y=Math.floor(b/2),w=e-y,x=e+y;w<1;)++w,x<i&&++x;for(;x>i;)w>1&&--w,--x;for(var C=w;C<x+1;C++)f.push(C)}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l="",c="",d="",h="",u="";n&&(u=' data-page="'.concat(n,'"')),i&&(h=' title="'.concat(i,'"')),o&&(s+=" hidden"),a&&(s+=" selected",l=' aria-disabled="true"'),r&&(c=" disabled",l=' aria-disabled="true"',d='<div class="disabled-tooltip"'.concat(h,"></div>"),n||(h=""));var p='<li class="'.concat(s,'">\n        <button type="button" class="btn-icon"').concat(h).concat(u).concat(l).concat(c,">\n          ").concat(d,"<span>").concat(e,"</span>\n          ").concat(t,"\n        </button>\n      </li>");return p}if($(this.numberButtons).remove(),s&&(n+=k($.createIcon({icon:"first-page"}),B.translate("FirstPage"),this.settings.firstPageTooltip,null,"pager-first",!1,l,!1)),a&&(n+=k($.createIcon({icon:"previous-page"}),B.translate("PreviousPage"),this.settings.previousPageTooltip,null,"pager-prev",!1,c,!1)),!this.isTable&&g){var T="";f.forEach((function(t){T+=t===(e||1)?k(t,B.translate("PageOn"),null,t,"pager-no",!0,!1,!1):k(t,B.translate("Page"),null,t,"pager-no",!1,!1,!1)})),n+=T}r&&(n+=k($.createIcon({icon:"next-page"}),B.translate("NextPage"),this.settings.nextPageTooltip,null,"pager-next",!1,d,!1)),o&&(n+=k($.createIcon({icon:"last-page"}),B.translate("LastPage"),this.settings.lastPageTooltip,null,"pager-last",!1,h,!1)),this.pagerBar[0].innerHTML=n,o||s||this.settings.showPageSizeSelector?this.pagerBar[0].classList.remove("two-button"):this.pagerBar[0].classList.add("two-button"),this.pagerBar.children("li").find("> .btn-icon").button().tooltip(),this.pagerBar.children("li").find("> .btn-icon[disabled] .disabled-tooltip").tooltip()},renderPageSelectorInput:function(){if(this.isTable&&!this.settings.indeterminate){var t=this.activePage,e=this.state.pages||1;if(this.state.filteredPages&&(t=this.state.filteredActivePage,e=this.state.filteredPages),this.pageSelectorInput)e>1&&this.pagerBar.find(".pager-total-pages").text(e),this.pagerBar.find(".pager-count input").val(t);else{var i=B.translate("PageOf");i=(i=i.replace("{0}",'<input class="new-mask" name="pager-pageno" value="'.concat(t,'" autocomplete="off">'))).replace("{1}",'<span class="pager-total-pages">'.concat(e,"</span>")),$('<li class="pager-count"><label>'.concat(i," </label>")).insertAfter(this.pagerBar.find(".pager-prev"))}var n=null,s="".concat(e).replace(/\d/g,"#"),a=this,r={pattern:s,mode:"number",processOnInitialize:!1};$(this.pageSelectorInput).mask(r).on("focus",(function(){n=parseInt($(this).val(),10)})).on("blur",(function(){o($(this)),n=null})).on("keydown",(function(t){return 13!==t.which||(o($(this)),t.stopPropagation(),t.preventDefault(),!1)}))}function o(t){var e=a.adjustPageCount(parseInt(t.val(),10));if(n!==e){var i=a.activePage;a.state.filteredPages&&(i=a.state.filteredActivePage),t.val(a.setActivePage(e,!1,"page")),a.triggerPagingEvents(i)}else t.val(n)}},renderPageSizeSelectorButton:function(){var t=this;if(this.settings.showPageSizeSelector&&!(this.settings.pagesizes.length<2)){if(!this.pageSizeSelectorButton){var e=$('<li class="pager-pagesize"></li>'),i=$.createIcon({icon:"dropdown"}),n=B.translate(this.settings.pageSizeSelectorText).replace("{0}",this.settings.pagesize),s="",a="<span>".concat(n,"</span>");this.showSmallPageSizeSelector&&(s=' class="audible"',n=B.translate(this.settings.pageSizeSelectorTextNoToken),a='<span class="record-count">'.concat(this.settings.pagesize,"</span>\n        <span").concat(s,">").concat(n,"</span>"));var r=$('<button type="button" class="btn-menu">\n        '.concat(a,"\n        ").concat(i,"\n      </button>")).appendTo(e);e.appendTo(this.pagerBar);var o="";this.showSmallPageSizeSelector&&(o='<li class="heading">'.concat(n,"</li>"));for(var l=0;l<this.settings.pagesizes.length;l++){var c=this.settings.pagesizes[l];o+='<li class="'.concat(c===this.settings.pagesize?" is-checked":"",'"><a href="#">').concat(c,"</a></li>")}var d=$('<ul class="popupmenu is-selectable">'.concat(o,"</ul>"));r.after(d)}var h=$(this.pageSizeSelectorButton),u=C.extend({},{placementOpts:{parent:h,parentXAlignment:B.isRTL()?"left":"right",strategies:["flip"]}},this.settings.pageSizeMenuSettings);h.popupmenu(u),h.on("selected.pager",(function(e,i){t.changePageSize(i)}))}},render:function(){var t=this.state,e=t.pages;t.filteredPages&&(e=t.filteredPages),this.pageCount(e),this.pageSizeSelectorButton&&this.teardownPageSizeSelector(),this.renderButtons(),this.renderPageSelectorInput(),this.renderPageSizeSelectorButton(),this.renderBar()},renderBar:function(t){var e,i,n=this,s=(t=t?C.extend({},this.state,t):this.state).activePage;t.filteredActivePage&&(s=t.filteredActivePage),this.settings.showFirstButton||this.showButton("first",!1),this.settings.enableFirstButton||this.enableButton("first",!1),this.settings.showPreviousButton||this.showButton("previous",!1),this.settings.enablePreviousButton||this.enableButton("previous",!1),this.settings.showNextButton||this.showButton("next",!1),this.settings.enableNextButton||this.enableButton("next",!1),this.settings.showLastButton||this.showButton("last",!1),this.settings.enableLastButton||this.enableButton("last",!1),this.settings.showPageSizeSelector&&this.showPageSizeSelector(!0),void 0!==t.firstPage&&(!1===t.firstPage&&(this.enableButton("first",!0),this.enableButton("previous",!0)),!0!==t.firstPage&&1!==s||(this.enableButton("first",!1),this.enableButton("previous",!1))),void 0!==t.lastPage&&(!1===t.lastPage&&(this.enableButton("next",!0),this.enableButton("last",!0)),!0!==t.lastPage&&s!==this.pageCount()||(this.enableButton("next",!1),this.enableButton("last",!1)));var a=this.pagerBar[0]?this.pagerBar[0].classList:null;this.hidePagerBar(t)&&a?a.add("hidden"):this.settings.hideOnOnePage&&a&&a.contains("hidden")&&a.remove("hidden"),this.initTabIndexes(),C.addAttributes(this.pagerBar,this,this.settings.attributes),C.addAttributes(this.pagerBar.find(".pager-first button"),this,this.settings.attributes,"btn-first"),C.addAttributes(this.pagerBar.find(".pager-prev button"),this,this.settings.attributes,"btn-prev"),C.addAttributes(this.pagerBar.find(".pager-next button"),this,this.settings.attributes,"btn-next"),C.addAttributes(this.pagerBar.find(".pager-last button"),this,this.settings.attributes,"btn-last"),C.addAttributes(this.pagerBar.find(".pager-pagesize button"),this,this.settings.attributes,"btn-pagesize"),C.addAttributes(this.pagerBar.find("input"),this,this.settings.attributes,"pagesize-input"),this.pagerBar.find(".pager-pagesize .popupmenu li").each((function(){var t=$(this).find("a"),e=t.text();C.addAttributes(t,n,n.settings.attributes,"pagesize-opt-".concat(e))}));var r=null===(e=this.pagerBar.find(".btn-menu"))||void 0===e||null===(i=null==e?void 0:e.data("popupmenu"))||void 0===i||null==i?void 0:i.menu;r&&r.find("li").each((function(){var t=$(this).find("a"),e=t.text();C.addAttributes(t,n,n.settings.attributes,"pagesize-opt-".concat(e))}))},initTabIndexes:function(){var t=$(this.focusableElements);t.attr("tabindex","-1"),t.filter(":not([disabled])").first().removeAttr("tabindex")},triggerPagingEvents:function(t){var e=this.state;t||(t=this.state.activePage),"first"===e.type&&(this.settings.onFirstPage&&this.settings.onFirstPage(this,e),this.element.trigger("firstpage",e)),"prev"===e.type&&(this.settings.onPreviousPage&&this.settings.onPreviousPage(this,e),this.element.trigger("previouspage",e)),"next"===e.type&&(this.settings.onNextPage&&this.settings.onNextPage(this,e),this.element.trigger("nextpage",e)),"last"===e.type&&(this.settings.onLastPage&&this.settings.onLastPage(this,e),this.element.trigger("lastpage",e)),"pageinfo"!==e.type&&this.element.trigger("page",e)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),Array.isArray(t.pagesizes)&&t.pagesizes.length&&(this.settings.pagesizes=t.pagesizes);var e={activePage:this.settings.activePage,indeterminate:this.settings.indeterminate,pagesize:this.settings.pagesize};return this.handleDeprecatedSettings(),this.updatePagingInfo(e),this},changePageSize:function(t){var e=t;e.closest(".popupmenu").find(".is-checked").removeClass("is-checked"),e.parent("li").addClass("is-checked"),this.settings.pagesize=parseInt(e.text(),10),this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=this.settings.pagesize),this.setActivePage(1,!0,"first"),this.settings.onPageSizeChange&&this.settings.onPageSizeChange(this,{tag:t,pagesize:this.settings.pagesize,settings:this.settings}),this.element.trigger("pagesizechange",{tag:t,pagesize:this.settings.pagesize,settings:this.settings})},updatePagingInfo:function(t,e){if(t){if(t.pagesize&&(this.settings.pagesize=t.pagesize,this.isTable&&this.settings.componentAPI&&(this.settings.componentAPI.settings.pagesize=t.pagesize)),t.isFilteredClientside?(this.isFilteredClientside=!0,delete this.serverDatasetTotal):this.isFilteredClientside&&delete this.isFilteredClientside,delete this.firstPage,delete this.lastPage,void 0!==t.firstPage&&(this.firstPage=t.firstPage,this.settings.enableFirstButton=!t.firstPage,this.settings.enablePreviousButton=!t.firstPage),void 0!==t.lastPage&&(this.lastPage=t.lastPage,this.settings.enableNextButton=!t.lastPage,this.settings.enableLastButton=!t.lastPage),isNaN(t.grandTotal)||(this.grandTotal=t.grandTotal),this.isFilteredClientside||(this.serverDatasetTotal=t.total),isNaN(t.filteredTotal)?(this.filteredTotal||this.filteredActivePage)&&(delete this.filteredTotal,delete this.filteredActivePage):(this.filteredTotal=t.filteredTotal,this.filteredActivePage=t.searchActivePage||t.filteredActivePage||1),t.type||(t.type="pageinfo"),this.settings.source||this.settings.dataset)return this.setActivePage(t,!1,t.type),void("initial"===t.type||e||this.triggerPagingEvents());this.teardown(),this.render(),this.handleEvents()}},hidePagerBar:function(t){return!!(this.settings.hideOnOnePage&&t.total<=t.pagesize)||!(!t||!0!==t.firstPage||!0!==t.lastPage||!t.hideDisabledPagers)},teardown:function(){this.numberButtons&&this.numberButtons.forEach((function(t){var e=t.querySelector(".btn-icon"),i=$(e).data("button"),n=$(e).data("tooltip");i&&i.destroy(),n&&n.destroy()})),this.pagerBar.off(["click.".concat("pager"),"keydown.".concat("pager")].join(" ")),this.pageSelectorInput&&($(this.pageSelectorInput).off(["focus.".concat("pager"),"blur.".concat("pager"),"keydown.".concat("pager")].join(" ")),$(this.pageSelectorInput).data("mask").destroy()),this.pageSizeSelectorButton&&($(this.pageSizeSelectorButton).off("selected.".concat("pager")),this.teardownPageSizeSelector()),this.pagerBar[0].innerHTML="",delete this.firstPage,delete this.lastPage},teardownPageSizeSelector:function(){var t=$(this.pageSizeSelectorButton).data("popupmenu");if(t&&t.menu){var e=t.menu;t.destroy(),e.remove()}},destroy:function(){this.teardown(),this.pagerBar&&this.pagerBar.remove(),$.removeData(this.element[0],"pager")}},$.fn.pager=function(t){return this.each((function(){var e=$.data(this,"pager");e?e.updated(t):e=$.data(this,"pager",new pn(this,t))}))};var gn={dataset:[],template:null,description:null,paging:!1,pagesize:10,searchable:!1,highlight:!0,selectable:"single",selectOnFocus:!0,showCheckboxes:!0,hoverable:!0,emptyMessage:null,source:null,forceToRenderOnEmptyDs:!1,disableItemDeactivation:!1,allowDeselect:!0,showPageSizeSelector:!1,listFilterSettings:null,pagerSettings:{showFirstButton:!1,showLastButton:!1},searchTermMinSize:1,initializeContents:!1,attributes:null};function fn(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,gn),this.init(),this}fn.prototype={get pagerAPI(){return this.element.data("pager")},get pagerSettings(){var t={};this.settings.pagerSettings&&(t=this.settings.pagerSettings),t.dataset=this.settings.dataset,t.source=this.settings.source,t.type="list";for(var e=["pagesize","showPageSizeSelector"],i=0;i<e.length;i++)void 0===this.settings[e[i]]||t[e[i]]||(t[e[i]]=this.settings[e[i]]);return t},init:function(){this.setup(),this.handleEvents(),this.refresh(),this.selectedItems=[],this.lastSelectedItem=0,this.isSelectedAll=!1,this.sortInit("listview","click.listview","data-sortlist"),this.handleResize()},setup:function(){var t=this,e=this.element.closest(".card, .widget"),n=this.element.attr("data-selectable"),s=this.element.attr("data-select-onfocus");if(this.element.attr("data-pagesize")){var a=Number(this.element.attr("data-pagesize"));isNaN(a)||(this.settings.pagesize=a),this.element.removeAttr("data-pagesize")}if(!this.settings.dataset.length&&this.element.is("ul")&&this.element.children("li").length){var r=this.element.children("li");this.settings.template||(this.settings.template="{{#dataset}}<li>{{text}}</li>{{/dataset}}"),r.each((function(e,i){t.settings.dataset.push({text:$(i).text()})})),r.remove()}if(this.settings.dataset&&"string"==typeof this.settings.dataset){var o=window[this.settings.dataset];o&&o.length&&(this.settings.dataset=o)}n&&n.length&&(this.settings.selectable=n),s&&s.length&&(this.settings.selectOnFocus=JSON.parse(s)),this.actionButton=e.find(".btn-actions"),this.actionButton.length>0&&(this.actionButton.data("popupmenu")||this.actionButton.popupmenu()),this.element.attr({tabindex:"-1","x-ms-format-detection":"none"}),this.settings.attributes&&C.addAttributes(this.element,this,this.settings.attributes,"listview"),(this.element.is(".paginated")||!0===this.settings.paging)&&this.element.pager(this.pagerSettings);var l=this.element.parent(".card-content, .widget-content");if(l[0]&&(l[0].style.overflow="hidden"),this.settings.searchable){this.searchfield=this.element.parent().find(".searchfield, .autocomplete"),this.searchfield.length;var c={filterMode:"contains"};"object"===i(this.settings.listFilterSettings)&&(c=C.extend({},c,this.settings.listFilterSettings)),this.listfilter=new ge(c)}this.settings.emptyMessage&&(this.emptyMessageContainer=$("<div>").emptymessage(this.settings.emptyMessage))},getTotals:function(t){var e,i={count:t.length};if(t[0]){for(e in t[0])i[e]=0;for(var n=0;n<t.length;n++)for(e in t[n])i[e]+=parseFloat(t[n][e]);return i}},render:function(t,e){var n=this,s="function"==typeof this.settings.source,a={},r=t,o=0,l=r?r.length:0,c=this.settings.pagesize,d=t.length;if((e&&(c=e.pagesize||c,d=e.filteredTotal||d),!s&&this.pagerAPI&&(this.renderPager(e,!0),e=this.pagerAPI.state),d>c)&&(this.filteredDataset?e.filteredPages:e.pages)>1){var h=e.activePage>0?e.activePage-1:0;this.filteredDataset&&(h=e.filteredActivePage-1),o=e.pagesize*h,l=e.pagesize*(h+1),r=t.slice(o,l)}if("object"===i(fe)&&r&&this.settings.template){this.settings.template instanceof $?this.settings.template="".concat(this.settings.template.html()):"string"==typeof this.settings.template&&(E.containsHTML(this.settings.template)||(this.settings.template=$("#".concat(this.settings.template)).html())),this.settings.template.indexOf("{{#totals}}")>-1&&(a=this.getTotals(t));var p=fe.compile(this.settings.template,{dataset:r,totals:a});this.element.parent().is(".scrollable-flex-content")&&this.element.parent().find(".empty-message").remove(),r.length>0||this.settings.forceToRenderOnEmptyDs?this.element.html(p):n.emptyMessageContainer&&this.element.parent().is(".scrollable-flex-content")?(this.element.empty(),u.append(this.element.parent(),this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):n.emptyMessageContainer?(this.element.empty(),u.append(this.element,this.emptyMessageContainer[0].outerHTML,"<div><svg><use><span><b>")):0===r.length&&this.element.html(p||"<ul></ul>")}var g=this.element.closest(".card, .widget");$("ul",this.element).attr({role:"listbox","aria-label":this.settings.description||g.find(".card-title, .widget-title").text()||"List"});var f=this.element.find("li, tbody > tr").first(),v=this.element.find("li, tr"),b="multiple"===this.settings.selectable||"mixed"===this.settings.selectable;this.focusItem=f.attr("tabindex",0),this.settings.selectable||1!==f.find("a").length||f.removeAttr("tabindex");var y=v.length>r.length;v.each((function(t){var e=$(this);if(e.attr("role","option"),m.features.touch&&e.addClass("is-touch"),n.settings.attributes&&C.addAttributes(e,n,n.settings.attributes,"listview-item-".concat(t)),b){n.element.addClass("is-multiselect");var i=n.element.prevAll(".toolbar");i.length&&i.data("toolbar")&&i.data("toolbar").toggleMoreMenu(),n.settings.showCheckboxes&&0===e.children(".listview-selection-checkbox").length&&e.prepend('<label class="listview-selection-checkbox l-vertical-center inline inline-checkbox">\n              <input tabindex="-1" type="checkbox" class="checkbox">\n              <span class="label-text" role="presentation">\n                <span class="audible">'.concat(B.translate("Checkbox")," ").concat(B.translate("NotSelected"),".</span>\n              </span>\n            </label>"))}if(y){var s=o+t;if(s<n.settings.dataset.length){var a=n.settings.dataset[s];e.css("display",void 0===a._isFilteredOut||a._isFilteredOut?"":"none")}}else e.css("display","");e.attr({"aria-posinset":o+t+1,"aria-setsize":d}),e.hasClass("is-disabled")&&e.attr("aria-disabled","true"),n.settings.highlight&&n.searchTerm&&e.highlight(n.searchTerm)})),n.settings.initializeContents&&this.element.find("ul").initialize(),this.element.trigger("rendered",[r]),this.element.off("updated.listview").on("updated.listview",(function(t,e){n.updated(e)}))},renderPager:function(t,e){this.pagerAPI&&this.pagerAPI.updatePagingInfo(t,e)},getPageableElements:function(){var t=this.element.children();return t.is("ul")&&(t=t.children()),t},refresh:function(t,e){this.loadData(t,e),this.list&&this.render(this.list.data)},loadData:function(t,e,n){var s=!1,a=this;if(t=t||this.settings.dataset,this.filteredDataset&&(t=this.filteredDataset),e||(this.pagerAPI?(t.length!==this.pagerAPI.settings.dataset.length&&this.pagerAPI.updated({dataset:t}),e=this.pagerAPI.state):e={activePage:1}),this.filteredDataset?e.filteredTotal=t.length:e.total=t.length,Array.isArray(t)){var r=this.settings.source;if("string"!=typeof t||0!==t.indexOf("http")&&0!==t.indexOf("/")||(r=t,s=!0),!r&&!s||this.filteredDataset||n)this.render(t,e);else switch(i(r)){case"function":r(e,o);break;case"string":return void(0!==r.indexOf("http")&&0!==r.indexOf("/")||$.getJSON(r,o));default:this.settings.dataset=r,t=r,this.render(r,e)}}function o(e,i){a.settings.dataset=e,t=e;var n=a.pagerAPI?a.pagerAPI.activePage:1;"string"==typeof i&&(i={activePage:n,pagesize:a.settings.pagesize,total:t.length,type:i}),a.pagerAPI&&(a.renderPager(i,!0),i=a.pagerAPI.state),a.render(t,i)}},toggleAll:function(){this[this.isSelectedAll?"deselectItemsBetweenIndexes":"selectItemsBetweenIndexes"]([0,$("li, tbody tr",this.element).length-1]),this.isSelectedAll=!this.isSelectedAll},selectItemsBetweenIndexes:function(t){C.clearSelection(),t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++){var i=$("li, tbody tr",this.element).eq(e);i.is(".is-disabled, .is-selected")||this.select(i)}},deselectItemsBetweenIndexes:function(t){t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++){var i=$("li, tbody tr",this.element).eq(e);!i.is(".is-disabled")&&i.is(".is-selected")&&this.select(i)}},handleResize:function(){var t=$("li .listview-heading, tr .listview-heading",this.element),e=t.eq(1),i=e.width();e.length&&i&&(t[0].style.width="".concat(i,"px")),this.pagerAPI&&this.pagerAPI.render()},handleSearch:function(t,e){this.filter(e)},filter:function(t){if(t){var e=(t=$(t)).val().trim(),i={searchActivePage:1};if(e){if(e.length<this.settings.searchTermMinSize)this.resetSearch();else if(this.searchTerm!==e){this.searchTerm=e,this.element.unhighlight(),this.settings.dataset.forEach((function(t){t._isFilteredOut=!1}));var n=this.listfilter.filter(this.settings.dataset,this.searchTerm);n.length||(n=[]),i.filteredTotal=n.length,i.searchActivePage=1,n.forEach((function(t){t._isFilteredOut=!0})),this.filteredDataset=n,this.loadData(null,i),this.element.trigger("filtered",{elem:this.element,filteredResults:n,term:this.searchTerm})}}else{if(!this.searchTerm)return;this.resetSearch()}}},resetSearch:function(){this.element.unhighlight(),this.settings.dataset.forEach((function(t){delete t._isFilteredOut})),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var t={activePage:1,filteredTotal:void 0,searchActivePage:void 0};this.refresh(null,t)},focus:function(t){t.is(":hidden")||t.is(".is-disabled")||(this.focusItem&&this.focusItem.removeAttr("tabindex"),this.focusItem=t.attr("tabindex",0).focus(),this.settings.selectable||1!==t.find("a").length||(t.find("a").focus(),t.removeAttr("tabindex")),this.settings.selectOnFocus&&"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&this.select(t))},remove:function(t){"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t,!0),t.remove()},clear:function(){$(this.element.children()[0]).empty()},removeAllSelected:function(){var t=this;$.each(this.selectedItems,(function(e,i){t.remove(i)}))},clearAllSelected:function(){var t=this;$.each(this.selectedItems,(function(e,i){t.select(i)}))},sortInit:function(t,e,i){i&&""!==$.trim(i)&&$("[".concat(i,"]")).each((function(){var n=$(this),s=$.fn.parseOptions(n,i);n.on(e,(function(e){$(s.list).data(t).setSortColumn(s),e.preventDefault()}))}))},setSortColumn:function(t){var e=t.orderBy||this.list.sort.field,i=t.order;if(this.list.data||e){i=i?"desc"===i:!(this.list.sort&&this.list.sort[e]&&this.list.sort[e].reverse),(t.reloadApi||t.reloadApiNoSort)&&this.loadData(),t.reloadApiNoSort&&(e=this.list.sort.field,i=this.list.sort[e].reverse);var n=this.sortFunction(e,i);this.list.data.sort(n),this.render(this.list.data),this.list.sort={field:e},this.list.sort[e]={reverse:i},this.element.trigger("sorted",[this.element,this.list.sort])}},sortFunction:function(t,e,i){i||(i=function(t){return"string"==typeof(t=null==t?"":t)&&(t=t.toUpperCase(),isNaN(parseFloat(t))||(t=parseFloat(t))),t});var n=i?function(e){return i(e[t])}:function(e){return e[t]};return e=e?-1:1,function(t,i){return t=n(t),i=n(i),e*((t>i)-(i>t))}},deselect:function(t){this.settings.allowDeselect&&("number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),t.is(".is-selected")&&this.select(t))},unselect:function(t){return z(this.deselect,this.unselect).apply(this,[t])},select:function(t,e){var i,n=this,s="mixed"===n.settings.selectable;if(n.selectedItems=[],"number"==typeof t&&(t=$(this.element.children()[0]).children().eq(t)),(!(i=t.hasClass("is-selected"))||this.settings.allowDeselect)&&(t.is('[tabindex="0"]')||(this.focusItem&&this.focusItem.removeAttr("tabindex"),t.attr("tabindex",0)),!1!==this.settings.selectable&&"false"!==this.settings.selectable)){if("multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable&&(t.parent().children().removeAttr("aria-selected"),t.parent().find(".is-selected").removeClass("is-selected"),n.selectedItems[0]=$(this)),i?(n.selectedItems=[],t.removeClass("is-selected hide-selected-color")):this.settings.selectable&&(t.addClass("is-selected".concat(s?" hide-selected-color":"")),n.lastSelectedItem=t.index()),t.parent().find(".is-selected").each((function(t){n.selectedItems[t]=$(this)})),t.find(".listview-selection-checkbox input").prop("checked",!i),"multiple"===this.settings.selectable||"mixed"===this.settings.selectable){var a=i?"NotSelected":"Selected";t.attr("aria-selected",!i),t.find(".label-text .audible").text("".concat(B.translate("Checkbox")," ").concat(a,"."))}if(!e){for(var r=i?"unselected":"selected",o=[],l=0;l<this.selectedItems.length;l++){var c=this.selectedItems[l][0].getAttribute("aria-posinset");o.push(this.settings.dataset[c-1])}this.element.triggerHandler(r,{selectedItems:this.selectedItems,elem:t,selectedData:o}),"unselected"===r&&this.element.triggerHandler("deselected",{selectedItems:this.selectedItems,elem:t,selectedData:o})}var d=this.element.closest(".card, .widget");d.length||(d=this.element.parent());var h=d.find(".listview-toolbar, .contextual-toolbar"),u=h.data("toolbar");if(n.selectedItems.length>0){u&&u.toggleMoreMenu(),h.one("animateopencomplete",(function(){n.element.addClass("is-toolbar-open"),h.trigger("recalculate-buttons").removeClass("is-hidden")})),h[0]&&(h[0].style.display="block"),h.animateOpen({distance:40});var p=h.find(".title, .selection-count");p&&p.length||(p=$('<div class="title selection-count"></div>'),h.prepend(p)),p.text("".concat(n.selectedItems.length," ").concat(B?B.translate("Selected"):"Selected"))}else h.addClass("is-hidden").one("animateclosedcomplete",(function(t){t.stopPropagation(),this.style.display="none",n.element.removeClass("is-toolbar-open")})).animateClosed()}},toggleItemActivation:function(t){t.hasClass("is-activated")?this.settings.disableItemDeactivation||this.deactivateItem(t):this.activateItem(t)},activateItem:function(t){var e="number"==typeof t?t:t.index(),i=this.element.find("li.is-activated");"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),this.deactivateItem(i),!1!==this.element.triggerHandler("beforeactivate",[{index:e,elem:t,data:this.settings.dataset[e]}])&&(t.addClass("is-activated"),this.element.triggerHandler("itemactivated",[{index:e,elem:t,data:this.settings.dataset[e]}]))},activatedItem:function(){var t=this.element.find("li.is-activated"),e=t.index();return{index:e,elem:t,data:this.settings.dataset[e]}},deactivateItem:function(t){"number"==typeof t&&(t=this.element.find("ul").children().eq(t)),void 0===t&&(t=this.element.find("li.is-activated")),t.removeClass("is-activated");var e=t.index();e<0||this.element.triggerHandler("itemdeactivated",[{index:e,elem:t,data:this.settings.dataset[e]}])},getSelected:function(){return this.element.find(".is-selected")},updateSearch:function(){if(this.settings.searchable&&this.filteredDataset){delete this.filteredDataset,this.searchTerm&&delete this.searchTerm;var t=this.searchfield.data("searchfield");t&&t.xButton&&t.xButton.trigger("click")}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset)),this.updateSearch(),this.refresh(t&&t.dataset?t.dataset:null),this},disable:function(){this.element.addClass("is-disabled")},enable:function(){this.element.removeClass("is-disabled")},teardown:function(){return $("body").off("resize.listview"),this.element.prev(".listview-header").off("click.listview"),this.searchfield&&this.searchfield.off(["contents-checked.searchable-listview","cleared.searchable-listview"].join(" ")),this.element.off("change.selectable-listview",".listview-checkbox input"),this.element.off("contextmenu.listview longpress.listview dblclick.listview","li, tr"),this.element.off("click.listview","li, tr, input[checkbox]"),this.element.off("keydown.listview","li, tr, a"),this.element.off("focus.listview","li, tbody tr"),this.element.off("focus.listview click.listview touchend.listview keydown.listview change.selectable-listview updated.listview").empty(),this.filteredDataset&&delete this.filteredDataset,this.searchTerm&&delete this.searchTerm,this},destroy:function(){this.teardown(),this.element.removeData("listview")},handleEvents:function(){var t=this,e=!1,i=!1,n="multiple"===t.settings.selectable||"mixed"===t.settings.selectable;if(this.element.off("focus.listview","li, tbody tr").on("focus.listview","li, tbody tr",(function(n){var s=$(this);if(!(n.originalEvent&&n.originalEvent.target&&$(n.originalEvent.target).is(".icon-favorite"))){if(s.is(":first-child")&&s.hasClass("is-disabled")){var a=$.Event("keydown.listview");a.keyCode=40,e=!0,s.trigger(a)}e||s.hasClass("is-disabled")||!t.settings.selectOnFocus||"multiple"===t.settings.selectable||"mixed"===t.settings.selectable||(t.select(s),e=!0,i=!0)}})),this.element.off("keydown.listview","li, tr, a").on("keydown.listview","li, tr, a",(function(e){var i=$(this),s=i.is("a")?i.closest("li"):$(this),a=s.is("a")?s.closest("ul"):s.parent(),r=e.keyCode||e.charCode||0,o=e.metaKey;if(0===s.index()&&38===e.keyCode)return!1;if((40===r||38===r)&&!o){var l=40===e.keyCode?s.nextAll(":not(.is-disabled):visible:first"):s.prevAll(":not(.is-disabled):visible:first");l.length&&($(e.target).is(s)||e.shiftKey||i.is("a"))&&t.focus(l),e.preventDefault(),e.stopPropagation()}if(35===r||40===r&&o){var c=a.children().last();return t.focus(c),e.stopPropagation(),!1}if(36===r||38===r&&o){var d=a.children().first();return t.focus(d),e.stopPropagation(),!1}return 32===r&&$(e.target).is(s)&&(n&&e.shiftKey?t.selectItemsBetweenIndexes([t.lastSelectedItem,s.index()]):t.select(s),e.preventDefault()),n&&(e.ctrlKey||e.metaKey)&&65===r&&(t.toggleAll(),t.focus(s),e.preventDefault()),!0})),this.settings.selectable){this.element.addClass("is-selectable");var s=$(this.element).closest(".list-detail, .builder");this.element.off("click.listview","li, tr, input[checkbox]").on("click.listview","li, tr, input[checkbox]",(function(a){var r=$(this),o=$(a.target).closest(".listview-selection-checkbox").length>0,l="mixed"===t.settings.selectable,c=$(a.target);c.hasClass("icon-favorite")||c.hasClass("hyperlink")||(i||r.hasClass("is-disabled")||l&&!o||(e=!0,n&&a.shiftKey?(t.selectItemsBetweenIndexes([t.lastSelectedItem,r.index()]),a.preventDefault()):t.select(r),r.focus()),r.hasClass("is-disabled")||!l||o||(r.focus(),t.toggleItemActivation(r)),s.length>0&&$(window).outerWidth()<767&&!r.hasClass("is-disabled")&&!o&&t.element.trigger("drilldown",[r]),i=!1,a.preventDefault(),a.stopPropagation(),t.element.trigger("click",[{elem:r,data:t.settings.dataset[r.attr("aria-posinset")-1],index:r.index(),originalEvent:a}]))})),this.element.off("dblclick.listview","li, tr").on("dblclick.listview","li, tr",(function(e){var i=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("dblclick",[{elem:$(this),data:t.settings.dataset[i.attr("aria-posinset")-1],index:i.index(),originalEvent:e}]),!1})),this.element.off("contextmenu.listview longpress.listview","li, tr").on("contextmenu.listview longpress.listview","li, tr",(function(e){var i=$(this);return e.preventDefault(),e.stopPropagation(),t.element.trigger("contextmenu",[{elem:$(this),data:t.settings.dataset[i.attr("aria-posinset")-1],index:i.index(),originalEvent:e}]),!1}))}this.settings.hoverable&&"false"!==this.settings.hoverable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),this.settings.selectable&&"false"!==this.settings.selectable||(this.element.removeClass("is-selectable"),this.element.addClass("disable-hover")),"multiple"!==this.settings.selectable&&"mixed"!==this.settings.selectable||this.element.off("change.selectable-listview",".listview-checkbox input").on("change.selectable-listview",".listview-checkbox input",(function(t){$(this).parent().trigger("click"),t.stopPropagation()})),this.settings.searchable&&this.searchfield.off("contents-checked.searchable-listview").on("contents-checked.searchable-listview",(function(e){t.handleSearch(e,$(this))})).off("cleared.searchable-listview").on("cleared.searchable-listview",(function(){t.resetSearch(),t.element.trigger("filtered",{elem:t.element,filteredResults:[],term:""})})),this.pagerAPI&&this.element.off("page.listview").on("page.listview",(function(e,i){t.handlePageChange(i)})).off("pagesizechange.listview").on("pagesizechange.listview",(function(e,i){t.handlePageSizeChange(i)})),$("body").off("resize.listview").on("resize.listview",(function(e){t.handleResize(e)})),t.element.prev(".listview-header").off("click.listview").on("click.listview",(function(){var e=$(this).find(".plus-minus");e.hasClass("active")?(e.removeClass("active"),t.element.animateClosed()):(e.addClass("active"),t.element.animateOpen())}))},handlePageSizeChange:function(t){t.activePage=1,this.loadData(void 0,t)},handlePageChange:function(t){this.loadData(void 0,t)}},$.fn.listview=function(t){var e=$(this),i=e.attr("data-dataset"),n=e.attr("data-tmpl"),s=C.parseOptions(this)||{};s.dataset=s.dataset||i,s.template=s.template||n,window[s.dataset]&&(s.dataset=window[s.dataset]),s.template&&s.template.length&&(s.template=$("#".concat(s.template)).html());var a=C.extend({},t,s);return this.each((function(){var t=$.data(this,"listview");t?t.updated(a):t=$.data(this,"listview",new fn(this,a))}))};var mn={dataset:[],handle:".handle",btnAdd:"add",btnEdit:"edit",btnDelete:"delete",btnGoUp:"goup",btnGoDown:"godown",attributes:null,template:'<ul data-handle=".handle">{{#dataset}}{{#text}}<li{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>',templateNewItem:'<li data-value="{{text}}" role="option"><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="item-content"><p>{{text}}</p></div></li>',templateItemContent:"<p>{{text}}</p>"};function vn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,mn),e&&e.dataset&&(this.settings.dataset=e.dataset),this.init()}vn.prototype={init:function(){var t=this;this.loadListview().initDataset().setElements().handleEvents(),setTimeout((function(){t.setSelected()}),0)},loadListview:function(){var t,e=this.settings,i=$(".listview",this.element);return e.attributes&&(t=this.getLvAutomationAttributes("-listbuilder")),!e.dataset.length&&i.length&&$("li",i).length?this.listApi=i.listview({selectable:"single",attributes:t}).data("listview"):i.length&&(this.listApi=i.listview({dataset:e.dataset,template:e.template,selectable:"single",attributes:t}).data("listview")),this},getLvAutomationAttributes:function(t){var e,i=this,n=this.settings;if(n.attributes&&"string"==typeof t&&""!==t)if(Array.isArray(n.attributes))e=[],n.attributes.forEach((function(n){var s="function"==typeof n.value?n.value(i):n.value;e.push({name:n.name,value:s+t})}));else{var s="function"==typeof n.attributes.value?n.attributes.value(this):n.attributes.value;e={name:n.attributes.name,value:s+t}}return e},updateLvAutomationAttributes:function(t){if(this.settings.attributes&&t){for(var e,i=this.dataset.length-1,n=!0,s=1e3;n&&s>0;){var a="-listbuilder-listview-item-".concat(i);e=this.getLvAutomationAttributes(a),n=this.findAutomationAttributesItem(e),i++,s--}C.addAttributes(t,this,e)}},findAutomationAttributesItem:function(t){var e=!1;if(this.settings.attributes&&t&&Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var s=t[i];if(this.listApi.element.find("[".concat(s.name,'="').concat(s.value,'"]')).length){e=!0;break}}return e},initDataset:function(){var t=this.settings,e=$(".listview li",this.element);this.dataset=[];for(var i=0,n=e.length;i<n;i++){var s=void 0,a=$(e[i]);t.dataset?(s=JSON.parse(JSON.stringify(t.dataset[i]))).node=a:s=this.extractNodeData(a),this.dataset.push(s)}return this},extractNodeData:function(t){var e={node:t,text:$.trim($(".item-content",t).text())},i=t.attr("data-value");return void 0!==i&&(e.value=i),e},setElements:function(){var t=this,e=this.settings,i=function(e){return t.isjQuery(e)?e:"string"==typeof e?$('[data-action="'.concat(e,'"]'),t.element):null};e.btnAdd=i(e.btnAdd),e.btnGoUp=i(e.btnGoUp),e.btnGoDown=i(e.btnGoDown),e.btnEdit=i(e.btnEdit),e.btnDelete=i(e.btnDelete);var n="listbuilder-btn";return C.addAttributes(e.btnAdd,this,e.attributes,"".concat(n,"-add")),C.addAttributes(e.btnGoUp,this,e.attributes,"".concat(n,"-goup")),C.addAttributes(e.btnGoDown,this,e.attributes,"".concat(n,"-godown")),C.addAttributes(e.btnEdit,this,e.attributes,"".concat(n,"-edit")),C.addAttributes(e.btnDelete,this,e.attributes,"".concat(n,"-delete")),this.topButtons=e.btnAdd.add(e.btnGoUp).add(e.btnGoDown).add(e.btnEdit).add(e.btnDelete),this.topButtons.tooltip(),this.ul=$(".listview ul",this.element),this.arrangeApi=this.ul.arrange({handle:e.handle,placeholder:e.templateNewItem}).data("arrange"),this},handleEvents:function(){var t,e=this,i=this,n=i.settings,s=function(t,e){t.off("click.listbuilder").on("click.listbuilder",(function(){i[e]()}))};return s(n.btnAdd,"addItem"),s(n.btnGoUp,"moveItemUp"),s(n.btnGoDown,"moveItemDown"),s(n.btnEdit,"editItem"),s(n.btnDelete,"deleteItem"),this.arrangeApi.element.on("beforearrange.listbuilder",(function(t,i){var s=e.getDataByNode(i.start),a=n.templateItemContent.replace(/{{text}}/g,s.data.text);e.arrangeApi.placeholders.attr("data-value",s.data.text).find(".item-content").html(a)})).on("arrangeupdate.listbuilder",(function(i,n){e.updateAttributes(),e.arrayIndexMove(e.dataset,n.startIndex,n.endIndex),(t=e.getDataByNode(n.end)).indexBeforeMove=n.startIndex,e.element.triggerHandler("arrangeupdate",[t])})),$("li:not(.is-disabled) ".concat(this.arrangeApi.handle),this.ul).on("mousedown.listbuilder touchstart.listbuilder",(function(){var t=$(this);t.is(".is-selected")||t.trigger("click")})),$(".listview",this.element).off("selected.listbuilder").on("selected.listbuilder",(function(i,n){t=e.getDataByNode(n.elem[0]),e.element.triggerHandler("selected",[t])})),this.updatedEventsStr="arrangeupdate.listbuilder aftergoup.listbuilder aftergodown.listbuilder exiteditmode.listbuilder",this.element.off(this.updatedEventsStr).on(this.updatedEventsStr,(function(t,i){e.element.triggerHandler("updated",[i])})),this},addItem:function(){var t=this,e=this.settings;$.when(this.element.triggerHandler("beforeadd")).done((function(){var i,n,s=0,a=t.listApi.selectedItems[0],r=e.templateNewItem.replace(/{{text}}/g,B.translate("NewItem"));a&&a.length>0?(s=(n=t.getDataByNode(a)).index+1,$(r).insertAfter(a),i=$("li",t.ul).eq(s)):(t.ul.prepend(r),i=$("li:first-child",t.ul)),t.dataset.push(t.extractNodeData(i)),t.arrayIndexMove(t.dataset,t.dataset.length-1,s),t.updateAttributes(),t.updateLvAutomationAttributes(i),i.trigger("click"),t.arrangeApi.updated(),t.editItem(!0),n={index:s,data:t.dataset[s]},t.element.triggerHandler("afteradd",[n])}))},moveItemUp:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var i=t.getDataByNode(e);void 0!==i.index&&i.index>0&&$.when(t.element.triggerHandler("beforegoup",[i])).done((function(){var n=e.prev();e.insertBefore(n),t.updateAttributes(),t.arrayIndexMove(t.dataset,i.index,i.index-1),i.indexBeforeMove=i.index,i.index--,t.element.triggerHandler("aftergoup",[i])}))}},moveItemDown:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var i=t.getDataByNode(e);void 0!==i.index&&i.index<t.dataset.length-1&&$.when(t.element.triggerHandler("beforegodown",[i])).done((function(){var n=e.next();e.insertAfter(n),t.updateAttributes(),t.arrayIndexMove(t.dataset,i.index,i.index+1),i.indexBeforeMove=i.index,i.index++,t.element.triggerHandler("aftergodown",[i])}))}},editItem:function(t){var e=this.listApi.selectedItems[0];e&&e.length>0&&(e.is(".is-editing")?this.commitEdit(e,t):this.makeEditable(e,t))},makeEditable:function(t,e){var i=this,n=i.getDataByNode(t),s=$(".item-content",t);void 0!==n.index&&n.index<i.dataset.length&&$.when(i.element.triggerHandler("beforeedit",[n])).done((function(){var a=h.escapeHTML((s.text().trim()||"").toString()),r=$('<input name="edit-input" class="edit-input" type="text" value="'.concat(a,'" />'));t.addClass("is-editing"),s.html(r),setTimeout((function(){r.focus().select()}),0),r.on("click.listbuilder",(function(){return!1})).on("blur.listbuilder",(function(){return i.commitEdit(t,e)})).on("keypress.listbuilder",(function(n){13===(n.keyCode||n.charCode||0)&&(i.commitEdit(t,e),t.focus())})),i.element.triggerHandler("entereditmode",[n])}))},commitEdit:function(t,e){var i=this.settings,n=this.getDataByNode(t),s=$(".item-content",t),a=$(".edit-input",s);a.val(h.escapeHTML((a.val()||"").toString())),e&&(n.data.value=a.val()),n.data.text=a.val(),a.off("click.listbuilder blur.listbuilder keypress.listbuilder"),s.html(i.templateItemContent.replace(/{{text}}/g,a.val())),t.removeClass("is-editing"),this.element.triggerHandler("exiteditmode",[n])},deleteItem:function(){var t=this,e=t.listApi.selectedItems[0];if(e&&e.length>0){var i=t.getDataByNode(e);void 0!==i.index&&$.when(t.element.triggerHandler("beforedelete",[i])).done((function(){t.listApi.removeAllSelected(),t.updateAttributes(),t.dataset.splice(i.index,1),t.element.triggerHandler("afterdelete",[i])}))}},getDataByNode:function(t){for(var e={},i=0,n=this.dataset.length;i<n;i++){var s=this.dataset[i];if($(s.node).is(t)){e={index:i,data:s};break}}return e},arrayIndexMove:function(t,e,i){t.splice(i,0,t.splice(e,1)[0])},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},moveCursorToEnd:function(t){setTimeout((function(){if("number"==typeof t.selectionStart)t.selectionEnd=t.value.length,t.selectionStart=t.value.length;else if(void 0!==t.createTextRange){var e=t.createTextRange();e.collapse(!1),e.select()}}),100)},updateAttributes:function(){for(var t=$("li",this.ul),e=0,i=t.length;e<i;e++)$(t[e]).attr({"aria-posinset":e+1,"aria-setsize":i})},updateDataset:function(t){var e=this,i=$("li",this.ul),n=$(".listview",this.element).data("listview");n.deselectItemsBetweenIndexes([0,i.length-1]),this.settings.dataset=t,n.loadData(this.settings.dataset),this.initDataset().setElements().handleEvents(),setTimeout((function(){e.setSelected()}),0)},setSelected:function(){for(var t=$("li[selected]",this.ul),e=0,i=t.length;e<i;e++){var n=$(t[e]);n.removeAttr("selected"),n.is(".is-selected")||n.trigger("click")}return this},select:function(t){var e=this.getListItem(t);e&&!e.is(".is-selected")&&e.trigger("click")},unselect:function(t){var e=this.getListItem(t);e&&e.is(".is-selected")&&e.trigger("click")},getListItem:function(t){var e=$();if(this.isElement(t)&&$.contains(this.ul,t))e=this.isjQuery(t)?t:$(t);else{var i=parseInt(t,10),n=$("li",this.ul);!isNaN(i)&&i>-1&&i<n.length?e=n.eq(i):"first"==="".concat(t).toLowerCase()?e=n.first():"last"==="".concat(t).toLowerCase()&&(e=n.last())}return e.length<1?null:e.length>1?e.eq(0):e},isElement:function(t){return this.isjQuery(t)&&t.get(0)instanceof Element||t instanceof Element},enable:function(){this.element.removeClass("is-disabled").find(".toolbar .buttonset button").removeAttr("disabled").end().find(".toolbar .buttonset button[data-original-disabled]").attr("disabled","disabled").removeAttr("data-original-disabled"),this.ul.find("li").removeClass("is-disabled").end().find("li[data-original-disabled]").addClass("is-disabled").removeAttr("data-original-disabled")},disable:function(){this.element.addClass("is-disabled").find(".toolbar .buttonset button[disabled]").attr("data-original-disabled","disabled").end().find(".toolbar .buttonset button").attr("disabled","disabled"),this.ul.find("li.is-disabled").attr("data-original-disabled","is-disabled").end().find("li").addClass("is-disabled")},unbind:function(){if(this.element.off(this.updatedEventsStr),$(".listview",this.element).off("selected.listbuilder"),$("li ".concat(this.arrangeApi.handle),this.ul).off("mousedown.listbuilder touchstart.listbuilder"),this.arrangeApi.element.off("beforearrange.listbuilder arrangeupdate.listbuilder").destroy(),this.topButtons.off("click.listbuilder"),this.topButtons)for(var t=0,e=this.topButtons.length;t<e;t++){var i=$(this.topButtons[t]).data("tooltip");i&&"function"==typeof i.destroy&&i.destroy()}return this.listApi&&"function"==typeof this.listApi.destroy&&this.listApi.destroy(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,mn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"listbuilder")}},$.fn.listbuilder=function(t){return this.each((function(){var e=$.data(this,"listbuilder");e?e.updated(t):e=$.data(this,"listbuilder",new vn(this,t))}))};var bn=["click","immediate"],yn=[!1,"responsive","always"],wn={trigger:"click",buttons:null,isAlert:!1,content:null,cssClass:null,autoFocus:!0,id:null,frameHeight:180,frameWidth:46,beforeShow:null,useFlexToolbar:!1,showCloseBtn:!1,maxWidth:null,fullsize:yn[0],breakpoint:"phone-to-tablet",overlayOpacity:.7,noRefocus:!1,triggerButton:null,hideUnderneath:!1};function xn(t){return t.trigger&&-1===bn.indexOf(t.trigger)&&(t.trigger=wn.trigger),t.fullsize&&-1===yn.indexOf(t.fullsize)&&(t.fullsize=wn.fullsize),t.breakpoint&&-1===p.available.indexOf(t.breakpoint)&&(t.breakpoint=wn.breakpoint),t}function Cn(t,e){this.settings=C.mergeSettings(t,e,wn),this.settings=xn(this.settings),this.originalElement=$(t),this.element=$(t),this.init(),this.reStructure()}Cn.prototype={get isCAP(){return this.element.is(".contextual-action-panel")},get capAPI(){var t;return this.trigger&&this.trigger.length?t=this.trigger.data("contextualactionpanel"):this.mainContent&&this.mainContent.length&&this.mainContent.is("body")&&(t=this.mainContent.data("contextualactionpanel")),t},get isAttachedToBody(){return this.trigger.length&&this.trigger.is("body")},get visible(){return this.element.is(".is-visible")},set visible(t){this.element[0].classList[!0===t?"add":"remove"]("is-visible")},set active(t){this.element[0].classList[!0===t?"add":"remove"]("is-active")},get active(){return this.element[0].classList.contains("is-active")},get isOnTop(){var t=0,e=this.element;return $(".modal.is-visible").each((function(){t<this.style.zIndex&&(t=this.style.zIndex)})),t===e[0].style.zIndex},get currentlyNeedsFullsize(){return"always"===this.settings.fullsize||"responsive"===this.settings.fullsize&&p.isBelow(this.settings.breakpoint)},get closeBtn(){var t=this.capAPI;return t&&t.element instanceof $?t.closeButton[0]:this.element[0].querySelector(".modal-content > button.btn-close")},init:function(){var t=this;if(this.id=this.element.attr("id")||parseInt($(".modal").length,10)+1,this.namespace="".concat("modal","-").concat(this.id),this.trigger=$('[data-modal="'.concat(this.element.attr("id"),'"]')),this.element.is("body")&&(this.trigger=this.element),this.oldActive=this.settings.triggerButton?this.useJqEl(this.settings.triggerButton):this.trigger,"click"!==this.settings.trigger||this.isAttachedToBody||this.trigger.on("click.".concat(t.namespace),(function(e){$(e.currentTarget).is(t.trigger)&&t.open()})),"immediate"===this.settings.trigger){var e=new U({duration:1,timeoutCallback:function(){t.open()}});G.register(e)}if(t.isCancelled=!1,this.settings.content){this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent();var i=new U({duration:1,timeoutCallback:function(){t.open()}});G.register(i)}else{if(this.settings.beforeShow)return this.settings.trigger=this.settings.content instanceof jQuery?this.settings.trigger:"immediate",this.appendContent(),void this.callSource();this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset(),this.element[0].classList[this.settings.hideUnderneath?"add":"remove"]("hide-underneath"),this.registerModal(),this.element.appendTo("body"),this.element[0].style.display="none"}},appendContent:function(){var t=this,e=!1,i=this.settings.maxWidth?' style="max-width: '.concat(this.settings.maxWidth,'px;"'):"";if(this.element=$('\n      <div class="modal">\n        <div class="modal-content"'.concat(i,'>\n          <div class="modal-header"><h1 class="modal-title"></h1></div>\n          <div class="modal-body-wrapper">\n            <div class="modal-body"></div>\n          </div>\n        </div>\n      </div>\n    ')),this.settings.showCloseBtn&&!this.isCAP){var n=$('\n        <button type="button" class="btn-icon btn-close" title="'.concat(B.translate("Close"),'" aria-hidden="true">\n          ').concat($.createIcon("close"),'\n          <span class="audible">').concat(B.translate("Close"),"</span>\n        </button>\n      "));this.element.find(".modal-content").append(n),n.on("click.".concat(this.namespace),(function(){return t.close()})).tooltip()}this.settings.id&&(this.element.attr("id",this.settings.id),C.addAttributes(this.element,this,this.settings.attributes,"",!0)),$(this.settings.content).is(".modal")?(this.element=$(this.settings.content),e=this.element.parent().hasClass("modal-wrapper")):this.settings.content&&this.settings.content.length>0&&(this.settings.content instanceof jQuery&&this.settings.content.parent().is(".modal-body")?(e=!0,this.element=this.settings.content.closest(".modal")):this.element.find(".modal-body").append(this.settings.content),this.settings.content instanceof jQuery&&!this.settings.beforeShow&&(this.settings.content.removeClass("hidden is-hidden"),this.settings.content.show())),this.settings.beforeShow&&(this.busyIndicator=$('<div class="overlay busy"></div><div class="busy-indicator-container blocked-ui" aria-live="polite" role="status"><div class="busy-indicator active"><div class="bar one"></div><div class="bar two"></div><div class="bar three"></div><div class="bar four"></div><div class="bar five"></div></div><span>Loading...</span></div>'),$("body").append(this.busyIndicator)),e||this.element.appendTo("body"),this.settings.cssClass&&this.element.addClass(this.settings.cssClass),this.settings.title&&(this.element.find(".modal-title")[0].innerHTML=h.stripTags(this.settings.title,"<div><span><a><small><img><svg><i><b><use><br><strong><em>")),e||(this.isCAP?this.addButtons(this.settings.buttons):this.renderButtonset()),this.registerModal(),C.fixSVGIcons(this.element)},registerModal:function(){this.originalElement.is(this.element)||(this.originalElement.data("modalElementLink",this.element[0]),this.element.data("modal",this)),J.register(this)},reStructure:function(){var t=$(".modal-body",this.element),e=$("hr:first-child",t),i=$(".modal-buttonset",this.element);t&&t.length&&!t.parent().hasClass("modal-body-wrapper")&&t.wrap('<div class="modal-body-wrapper"></div>'),e&&e.length&&!e.parent().hasClass("modal-content")&&e.insertAfter(this.element.find(".modal-header")),i&&i.length&&!i.parent().hasClass("modal-content")&&i.insertAfter(this.element.find(".modal-body-wrapper"))},disableSubmit:function(){var t=this.element,e=t.find(".modal-buttonset button").filter(".btn-modal-primary").not(".no-validation"),i=t.find("select.dropdown[data-validate]"),n=t.find("[data-validate]:visible");if(i.each((function(){$(this).next(".dropdown-wrapper").is(":visible")&&(n=n.add(this))})),n.length>0){e.removeAttr("disabled");var s=!0;n.each((function(){var t=$(this);if(!(t.closest(".datagrid-filter-wrapper").length>0)){var i=t.is(".dropdown")&&t.next(".dropdown-wrapper").is(":visible")||null!==t[0].offsetParent;t.is(".required")?i&&!t.val()&&(s=!1):(t.validateField(),i&&!t.isValid()&&(s=!1)),i&&t.is(".error")&&(s=!1),s&&e.removeAttr("disabled")}})),s||e.is(":disabled")||e.attr("disabled","true")}},renderButtonset:function(){var t=this,e=this.settings.buttons,i={style:"modal"},n=this;if(!this.buttonsetElem){var s=this.element.find(".modal-buttonset");if(s&&s.length)i.detectHTMLButtons=!0;else{if(!Array.isArray(e)||!e.length)return;var a=this.element.find(".modal-body").parent(),r=this.settings.useFlexToolbar?"toolbar-section ":"",o='<div class="'.concat(r,'modal-buttonset"></div>');(s=$(o)).insertAfter(a),i.buttons=e}this.buttonsetElem=s,s.buttonset(i),this.buttonsetAPI=s.data("buttonset"),e=this.buttonsetAPI.toData().buttons}var l=this.buttonsetAPI.buttons,c=$(),d=100/l.length;l.forEach((function(i,s){var a=Array.isArray(e)&&e.length?e[s]:void 0,r=!1;a&&(i.element[0].setAttribute("id",e[s].id||C.uniqueId(i.element,"button","modal")),$(i.element).on("click.".concat(n.namespace),(function(t){var e=a.click;e&&(e.apply(n.element[0],[t,n]),r=!0)})),$(i.element).not(["[data-ng-click]","[ng-click]","[onclick]",":submit",".btn-menu",".btn-actions",".colorpicker",".fontpicker"].join(", ")).on("click.".concat(n.namespace),(function(t){r||($(t.target).is(".btn-cancel")&&(n.isCancelled=!0),n.close())})),a.validate&&i.element[0].classList.add("no-validation"),C.addAttributes(i.element,t,a.attributes,"",!0));i.element[0].style.width="".concat(d,"%"),c.add(i)}))},addButtons:function(t){var e,i=this,n=this.element.find(".modal-body").parent(),s=this.element.find(".flex-toolbar"),a=100,r=!1;if(this.modalButtons=t,!t){var o=this.element.find(".modal-buttonset button");a=100/o.length;for(var l=0,c=o.length;l<c;l++)o[l].style.width="".concat(a,"%");return o.button(),void o.not("[data-ng-click], [ng-click], [onclick], :submit").on("click.".concat(i.namespace),(function(t){$(t.target).is(".btn-cancel")&&(i.isCancelled=!0),i.close()}))}this.isCAP?(r=!0,e=this.element.find(".buttonset")):(e=this.element.find(".modal-buttonset")).length||(e=$('<div class="modal-buttonset"></div>').insertAfter(n)),a=100/t.length,t&&e.empty();for(var d=function(n,o){var l=$('<button type="button">\n        <span></span>\n      </button>'),c=l.find("span");c.text(n.text),l.attr("type",n.type||"button"),"separator"===n.cssClass&&(l=$('<div class="separator"></div>')),n.cssClass?l.attr("class",n.cssClass):n.isDefault?l.addClass("btn-modal-primary"):l.addClass("btn-modal"),n.disabled&&(l[0].disabled=!0===n.disabled),n.audible&&c.addClass("audible"),void 0===n.validate||n.validate||l.addClass("no-validation"),C.addAttributes(l,i,n.attributes,"",!0);for(var d={},h=["id","name","text"],u=0;u<h.length;u++)n[h[u]]&&(d[h[u]]=n[h[u]]);if("input"===n.type){var p=$('<label class="audible" for="filter">'.concat(n.text,"</label>")),g=$('<input class="searchfield">').attr(d);return s.length?s.find(".toolbar-section.search").append(p,g):e.append(p,g),void g.searchfield(n.searchfieldSettings)}n.icon&&"#"===n.icon.charAt(0)&&$.createIconElement({classes:["#icon-close"===n.icon?"icon-close":""],icon:n.icon.substr("#icon-".length)}).prependTo(l),l[0].setAttribute("id",n.id||C.uniqueId(i.element,"button","modal"));var f=t[o].click;l.on("click.".concat(i.namespace),(function(t){f?f.apply(i.element[0],[t,i]):i.close()})),r||(l[0].style.width="".concat(a,"%")),l.button(),(i.settings.useFlexToolbar||i.settings.centerTitle)&&n.align?("left"===n.align&&s.find(".toolbar-section").eq(0).append(l),"center"===n.align&&s.find(".toolbar-section").eq(1).find("h2").append(l),"right"===n.align&&s.find(".toolbar-section").eq(2).append(l)):e.append(l)},h=0;h<t.length;h++)d(t[h],h)},sizeInner:function(){var t=this.element.find(".detailed-message"),e=$(window).height()-t.offset().top-150;t[0].style.maxHeight="".concat(e,"px"),t[0].style.overflow="auto",t[0].style.width="".concat(t.width(),"px")},callSource:function(){if("function"==typeof this.settings.beforeShow){var t=this;this.settings.beforeShow((function(e){return!1!==e&&($("#modal-busyindicator").trigger("complete.busyindicator"),!0===e?(t.busyIndicator&&(t.busyIndicator.remove(),delete t.busyIndicator),!0):(e instanceof jQuery||(e=$(e)),t.open(!0),t.element.find(".modal-body").empty(),t.element.find(".modal-body").append(e),e.show(),!0))}),{})}},open:function(t){var e,i=this;$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden"),this.busyIndicator&&(this.busyIndicator.remove(),delete this.busyIndicator),this.settings.triggerButton?this.oldActive=this.useJqEl(this.settings.triggerButton):this.trigger&&0!==this.trigger.length&&!this.trigger.is("body")||(this.oldActive=$(":focus")),this.overlay||(this.overlay=$(J.overlayElem)),this.root||(this.root=$(J.rootElem));var n=this.element.parent();if(n.is(".modal-wrapper")||(this.element.wrap('<div class="modal-wrapper"></div>'),n=this.element.parent()),n.parent().is(this.root)||n.insertAfter(this.overlay),1===this.element.find(".detailed-message").length&&($("body").on("resize.".concat(this.namespace),(function(){i.sizeInner()})),this.sizeInner()),e=this.element.triggerHandler("beforeopen",[this]),$("body").triggerHandler("beforeopen",[this]),this.isCancelled=!1,!1!==e&&(t||(this.callSource(),!this.settings.beforeShow))){if(J.currentlyActive=this,this.settings.isAlert){var s=this.element.find("#message-title");C.addAttributes(s,this,this.settings.attributes,"title",!0);var a=this.element.find("#message-text");C.addAttributes(a,this,this.settings.attributes,"message",!0),this.element.attr("aria-labelledby",s.attr("id")),this.element.attr("aria-describedby",a.attr("id"))}else{var r=this.element.find("h1:first");C.addAttributes(r,this,this.settings.attributes,"title",!0),C.addAttributes(this.element.find(".btn-close"),this,this.settings.attributes,"btn-close",!0);var o=r.attr("id");o||(o="".concat(this.element.attr("id")?this.element.attr("id"):"h1","-title"),r.attr("id",o));var l=this.element.find(".modal-body"),c="".concat(this.element.attr("id")?this.element.attr("id"):"message","-text");this.element.attr("aria-labelledby",o),C.addAttributes(this.element,this,this.settings.attributes,"",!0),this.element.find(".toolbar .title").length?(this.element.find(".toolbar .title").attr("id",c),this.element.attr("aria-describedby",c)):(l.attr("id",c),this.element.attr("aria-describedby",c))}this.mainContent=$("body").children(".scrollable-container"),this.mainContent.length||(this.mainContent=$("body")),this.removeNoScroll=!this.mainContent.hasClass("no-scroll"),this.mainContent.addClass("no-scroll"),$("body").on("resize.".concat(this.namespace),(function(){i.resize()})),this.element[0].style.display="";var d=this,h=new U({duration:1,timeoutCallback:function(){d.resize(),d.element.attr("role",d.settings.isAlert?"alertdialog":"dialog"),d.element.attr("aria-modal","true")}}),u=new U({duration:J.modalFadeDuration,timeoutCallback:function(){d.visible=!0}});G.register(h),G.register(u),$(this.element).on("keypress.".concat(this.namespace),(function(t){var e=$(t.target);e.is(".editor, .searchfield, textarea, :button")||e.closest(".tab-list").length||$("#dropdown-list").length||13===t.which&&i.isOnTop&&!e.closest("form").find(":submit").length&&i.element.find(".btn-modal-primary:enabled").length&&(t.stopPropagation(),t.preventDefault(),(!e.hasClass("fileupload")&&!$(e).is(":input")||e.hasClass("colorpicker"))&&i.element.find(".btn-modal-primary:enabled").trigger("click"))})),$(".skip-link").on("focus.".concat(this.namespace),(function(t){t.preventDefault(),i.element.find(":focusable").first().focus()})),this.element.find(".paginated").on("afterpaging.".concat(this.namespace),(function(){i.resize()}));var p=new U({duration:5,timeoutCallback:function(){d.disableSubmit()}});G.register(p),this.element.find("[data-validate]").removeClass("disable-validation");var g=new U({duration:20,timeoutCallback:function(){var t;t=d,d.element.trigger("open",[t]),function(t){if(d.settings.autoFocus){d.changeObserver=new MutationObserver((function(){d.setFocusableElems()})),d.changeObserver.observe(d.element[0],{childList:!0,subtree:!0}),d.setFocusableElems();var e,i,n=$(d.focusableElems).not(".modal-header .searchfield").first();if(0===n.length&&(n=t.element.find(".btn-modal-primary")),1===n.length&&n.is(".btn-modal")&&(n=t.element.find(".btn-modal-primary")),!d.capAPI&&d.buttonsetAPI&&0===t.buttonsetElem.find(".btn-modal-primary").length){var s=$(".modal-buttonset button")[0];n=t.buttonsetElem.find(s)}if(n.is(".modal-wrapper a")&&(n=t.element.find(".modal-content .message a").removeClass("hide-focus")),n.is(".tab:not(.is-selected) a")&&(e=(i=n.closest(".tab-container")).find(".is-selected")).length)return n=e,void i.data("tabs").select(e.children("a").attr("href"));n.focus()}}(d)}});G.register(g);var f=new U({duration:30,timeoutCallback:function(){d.element.trigger("afteropen")}});G.register(f)}},resize:function(){var t,e,i=this.currentlyNeedsFullsize;i?this.element[0].classList.add("display-fullsize"):(this.element[0].classList.remove("display-fullsize"),t=.9*$(window).height()-this.settings.frameHeight,e=1*$(window).width()-this.settings.frameWidth);var n=this.element.find(".modal-body-wrapper");if(n.length&&(i?(n[0].style.maxHeight="",n[0].style.maxWidth=""):(n[0].style.maxHeight="".concat(t,"px"),n[0].style.maxWidth="".concat(e,"px"))),this.element.hasClass("lookup-modal")){var s=this.element.find(".datagrid-wrapper"),a=this.element.find(".pager-toolbar"),r=s.closest(".datagrid-container");t=t-(r.prev().is(".toolbar")?130:67)-(r.next().is(".pager-toolbar")?35:0)+(a.length?-15:0),i?(s[0].style.maxHeight="",s[0].style.maxWidth=""):(s[0].style.maxHeight="".concat(t,"px"),s[0].style.maxWidth="".concat(e,"px"))}this.element.hasClass("datagrid-columns-dialog")&&(n[0].style.overflow="hidden",t>220?(this.element.find(".modal-body")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.maxHeight="",this.element.find(".listview.alternate-bg")[0].style.height="",this.element.find(".listview.alternate-bg")[0].style.minHeight=""):(this.element.find(".modal-body")[0].style.height="".concat(t,"px"),this.element.find(".listview.alternate-bg")[0].style.maxHeight="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.height="".concat(t-41,"px"),this.element.find(".listview.alternate-bg")[0].style.minHeight=0));var o=this.element.find(".toolbar");o.length&&o.triggerHandler("recalculate-buttons")},isOpen:function(){return F("visible","isOpen"),this.visible},get openSubComponents(){var t=Xt(this.element.find("*"),["isOpen","visible"],["datepicker","dropdown","popupmenu","timepicker","tooltip"]),e=[];return t.forEach((function(t){var i=t.control;("function"==typeof i.isOpen&&i.isOpen()||"boolean"==typeof i.isOpen&&!0===i.isOpen||"boolean"==typeof i.visible&&!0===i.visible)&&e.push(i)})),e},get isFocused(){var t=!1,e=document.activeElement;this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach((function(i){if(!t){var n,s,a,r,o=$(i);if((o.is($(e))||"function"==typeof i.contains&&i.contains(e))&&(t=!0),o.is("div.dropdown, div.multiselect"))t=null===(n=o.parent().prev("select").data("dropdown"))||void 0===n||null==n?void 0:n.isFocused;if(o.is(".lookup"))t=null===(s=o.data("lookup"))||void 0===s||null==s?void 0:s.isFocused;if(o.is(".btn-menu, .btn-actions"))t=null===(a=o.data("popupmenu"))||void 0===a||null==a?void 0:a.isFocused;if(o.is(".searchfield"))t=null===(r=o.data("searchfield"))||void 0===r||null==r?void 0:r.isFocused}}));var i=$(e).parents(".tooltip, .popover");return i.length&&i.each((function(e,i){var n=$(i).data("tooltip");n&&n.isFocused&&(t=!0)})),t},setFocusableElems:function(){var t=u.focusableElems(this.element[0],["div.dropdown","div.multiselect"],["select","option"]);this.focusableElems=t,this.focusableElems.first=t[0],this.focusableElems.last=t[t.length-1]},setFocus:function(t){if(-1!==["last","first"].indexOf(t)){var e;switch(this.focusableElems||this.setFocusableElems(),t){case"last":e=this.focusableElems.last;break;case"first":e=this.focusableElems.first}e&&(e.focus(),e.classList.remove("hide-focus"))}},close:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i&&(!this.visible||this.openSubComponents.length))return!0;var n=this.element.triggerHandler("beforeclose");if(!1===n)return!1;var s=this,a=this.element.find("[data-validate]");a.addClass("disable-validation"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.isCAP&&this.element.addClass("is-animating"),this.mainContent&&this.removeNoScroll&&this.mainContent.removeClass("no-scroll"),$("body").off("resize.".concat(this.namespace," focusin.").concat(s.namespace)),this.element.off("keypress.".concat(this.namespace," keydown.").concat(this.namespace)),this.visible=!1,this.active=!1,delete this.dontCheckFocus,s.element.trigger("close",s.isCancelled),!this.settings.noRefocus&&this.isFocused&&document.activeElement.blur(),$("#validation-errors, #tooltip, #validation-tooltip").addClass("is-hidden");var r=$(this.closeBtn),o=r.data("tooltip");o&&(o.hide(),o.reopenDelay=!0),$(".skip-link").off("focus.".concat(this.namespace));var l=new U({duration:J.modalFadeDuration,timeoutCallback:function(){s.element.trigger("afterclose"),o&&delete o.reopenDelay,("immediate"===s.settings.trigger||t)&&(!s.isCAP||s.isCAP&&!s.capAPI)&&s.destroy(),e||J.refresh(),s.settings.noRefocus||(!s.oldActive&&s.settings.triggerButton&&(s.oldActive=s.useJqEl(s.settings.triggerButton)),s.oldActive&&$(s.oldActive).is("a:visible, button:visible, input:visible, textarea:visible")?s.oldActive.focus():s.trigger.parents(".toolbar, .formatter-toolbar").length<1&&s.trigger.focus())}});return G.register(l),!1},useJqEl:function(t){return t instanceof jQuery?t:$(t)},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element,t,this.settings),this.settings=xn(this.settings)),"immediate"===this.settings.trigger&&this.open(),this},destroy:function(){var t=this;function e(){t.trigger.off("click.".concat(t.namespace)),t.element.off("keypress.".concat(t.namespace," keydown.").concat(t.namespace," beforeclose.").concat(t.namespace," afterclose.").concat(t.namespace)),t.element.find("button, .btn-close").off("click.".concat(t.namespace)),t.element.find(".paginated").off("afterpaging.".concat(t.namespace)),$(".skip-link").off("focus.".concat(t.namespace)),$("body").off("resize.".concat(t.namespace)),$(t.element).off("keydown.".concat(t.namespace)),1===t.element.find(".detailed-message").length&&$("body").off("resize.".concat(t.namespace)),t.isCAP&&t.capAPI&&t.capAPI.destroy(),t.aboutAPI&&t.aboutAPI.destroy(!0),t.buttonsetAPI&&(t.buttonsetAPI.buttons.forEach((function(e){$(e.element).off("click.".concat(t.namespace))})),t.buttonsetAPI.destroy(),t.buttonsetElem.remove(),delete t.buttonsetAPI,delete t.buttonsetElem),delete t.focusableElems,t.trigger.off("click.".concat(t.namespace)),t.element[0].removeAttribute("data-modal");var e=t.element.parent(".modal-wrapper");e.length&&e.remove();var i=new U({duration:21,timeoutCallback:function(){var e=null,i=t.element?t.element.data("modal"):null;i?e=t.element[0]:(i=t.trigger?t.trigger.data("modal"):null)&&(e=t.trigger[0]),e&&i&&i.overlay&&$.removeData(e,"modal")}});G.register(i),J.unregister(t),t.originalElement instanceof $&&$.removeData(t.originalElement[0],"modalElementLink"),$.removeData(t.element[0],"modal")}this.element.trigger("beforedestroy")&&(this.visible?(this.element.one("afterclose.".concat(t.namespace),(function(){e()})),this.close(!0)):e())}};var kn={title:"Message Title",status:"",message:"Message Summary",width:"auto",buttons:null,cssClass:null,returnFocus:null,allowedTags:"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>",audibleLabel:"",overlayOpacity:.7,hideUnderneath:!1,attributes:null,noRefocus:!1};function Tn(t,e){this.element=$(t),this.settings=C.mergeSettings(t,e,kn),this.init()}Tn.prototype={init:function(){var t,e=this,i=this.settings.allowedTags,n=!0;this.settings.allowedTags.length>0||(n=!1),this.message=$('<div class="modal message"></div>'),this.messageContent=$('<div class="modal-content"></div>'),this.title=$('<h1 class="modal-title" id="message-title">'.concat(n?h.stripTags(this.settings.title,i):h.stripHTML(this.settings.title),"</h1>")).appendTo(this.messageContent).wrap('<div class="modal-header"></div>'),this.content=$('<div class="modal-body"><div class="message" id="message-text">'.concat(n?h.stripTags(this.settings.message,i):h.stripHTML(this.settings.message),"</div></div>")).appendTo(this.messageContent),""!==this.settings.audibleLabel&&this.title.prepend('<span class="audible">'.concat(B.translate(this.settings.audibleLabel),"</span>")),this.element.is("body")||(t=this.element,this.content.empty().append(t.show())),this.message.append(this.messageContent).appendTo("body"),this.message.modal({trigger:"immediate",buttons:this.settings.buttons,resizable:this.settings.resizable,close:this.settings.close,isAlert:!0,overlayOpacity:this.settings.overlayOpacity,hideUnderneath:this.settings.hideUnderneath,attributes:this.settings.attributes,noRefocus:this.settings.noRefocus}),"auto"!==this.settings.width&&(this.content.closest(".modal")[0].style.maxWidth="none",this.content.closest(".modal")[0].style.width=this.settings.width+(/(px|%)/i.test("".concat(this.settings.width))?"":"px")),this.settings.cssClass&&this.message.addClass(this.settings.cssClass),this.message.on("beforeclose.message",(function(){return e.element.triggerHandler("beforeclose")})).on("beforeopen.message",(function(){return e.element.triggerHandler("beforeopen")})).on("open.message",(function(){e.element.trigger("open")})).on("afterclose.message",(function(){e.destroy(),e.settings.returnFocus&&e.settings.returnFocus.focus(),$(document).off("keypress.message keydown.message")})),$(document).on("keypress.message keydown.message",(function(t){27===(t.which||t.keyCode)&&setTimeout((function(){var t=e.message.data("modal");void 0!==t&&t.close()}),0)})),"error"===this.settings.status?this.title.addClass("has-status is-error").prepend($.createIconElement("error")):"alert"===this.settings.status?this.title.addClass("has-status is-alert").prepend($.createIconElement("alert")):"success"===this.settings.status?this.title.addClass("has-status is-success").prepend($.createIconElement("success")):this.title.removeClass("has-status is-error is-alert is-success").find("svg").remove()},destroy:function(){var t=this.message.data("modal");void 0!==t&&t.destroy(),this.message.off("beforeclose.message beforeopen.message open.message afterclose.message").remove()}},$.fn.message=function(t){return this.each((function(){return new Tn(this,t)}))},$.fn.modal=function(t){return this.each((function(){var e=$.data(this,"modal"),i=$(this);if(i.is(".modal")||(e=i.closest(".modal").data("modal")),e&&t)return e.updated(t),void("function"==typeof e[t]&&e[t]());e&&!t||(e=$.data(this,"modal",new Cn(this,t)))}))},$.fn.monthview=function(t){return this.each((function(){var e=$.data(this,"monthview");e?e.updated(t):e=$.data(this,"monthview",new yi(this,t))}))};var Sn={closeOnSelect:!1,empty:!0,filterMode:"contains",maxSelected:void 0,moveSelected:"all",multiple:!0,showEmptyGroupHeaders:!1,showSelectAll:!1,showTags:!1,source:void 0,allTextString:null,selectedTextString:null};function An(t,e){this.settings=C.mergeSettings(t,e,Sn),this.element=$(t),this.init()}An.prototype={init:function(){this.build()},build:function(){return this.element.dropdown(this.settings),this.dropdown=this.element.data("dropdown"),this},enable:function(){this.dropdown.enable()},disable:function(){this.dropdown.disable()},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.build()},destroy:function(){this.dropdown.destroy(),this.element.off(),$.removeData(this.element[0],"multiselect")}},$.fn.multiselect=function(t){return this.each((function(){var e=$.data(this,"multiselect");e?e.updated(t):e=$.data(this,"multiselect",new An(this,t))}))};var $n={message:"Hi! Im a notification message.",type:"alert",parent:".header",link:"#",linkText:"Click here to view.",attributes:null};function En(t,e){this.settings=C.mergeSettings(t,e,$n),this.element=$(t),this.init()}En.prototype={init:function(){return this.build().handleEvents()},build:function(){this.notificationEl=document.createElement("div"),this.notificationEl.classList.add("notification"),this.notificationEl.classList.add(this.settings.type);var t='\n      <svg class="icon notification-icon icon-'.concat(this.settings.type,'" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-').concat(this.settings.type,'"></use>\n      </svg>'),e='<p class="notification-text">'.concat(this.settings.message);this.settings.linkText&&(e+='<a class="notification-link" href="'.concat(this.settings.link,'">').concat(this.settings.linkText,"</a>")),e+="</p>";var i='\n      <button type="text" class="notification-close">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-close"></use>\n        </svg>\n        <span class="audible">'.concat(B.translate("Close"),"</span>\n      </button>");this.notificationEl.innerHTML=t.concat(e,i);var n=document.querySelector(this.settings.parent);return n.parentNode.insertBefore(this.notificationEl,n.nextSibling),$(this.notificationEl).animateOpen(),C.addAttributes($(this.notificationEl),this,this.settings.attributes),C.addAttributes($(this.notificationEl).find(".notification-icon"),this,this.settings.attributes,"icon"),C.addAttributes($(this.notificationEl).find(".notification-text"),this,this.settings.attributes,"text"),C.addAttributes($(this.notificationEl).find(".notification-text a"),this,this.settings.attributes,"link"),C.addAttributes($(this.notificationEl).find("button.notification-close"),this,this.settings.attributes,"btn-close"),C.addAttributes($(this.notificationEl).find("button.notification-close .icon"),this,this.settings.attributes,"icon-close"),this},handleEvents:function(){var t=this;return this.element.off("updated.".concat("notification")).on("updated.".concat("notification"),(function(){t.updated()})),$(this.notificationEl).off("click.".concat("notification")).on("click.".concat("notification"),".notification-close",(function(){t.destroy()})),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,$n)),this.teardown().init()},teardown:function(){return this.element.off("updated.".concat("notification")),this.element.off("click.".concat("notification"),".notification-close"),this},destroy:function(){this.notificationEl&&this.notificationEl.parentNode&&this.notificationEl.parentNode.removeChild(this.notificationEl),this.teardown(),$.removeData(this.element[0],"notification")}},$.fn.notification=function(t){return this.each((function(){$.data(this,"notification",new En(this,t))}))};var Dn={value:0};function In(t,e){this.settings=C.mergeSettings(t,e,Dn),this.element=$(t),this.init()}In.prototype={init:function(){var t=this;return this.update(this.settings.value||this.element.attr("data-value")),this.element.off("updated.progress").on("updated.progress",(function(e){e.stopPropagation(),t.update()})),this},updateAria:function(t){var e=this;this.element.attr({role:"progressbar","aria-valuenow":t,"aria-valuemax":"100"});var i=this.element.parent();this.tooltipApi=this.tooltipApi||i.data("tooltip"),this.tooltipApi?(this.tooltipApi.content="".concat(t,"%"),this.tooltipApi.visible&&t<=100&&this.tooltipApi.tooltip.hasClass("process".concat(this.tooltipId))&&this.tooltipApi.tooltip.find(".tooltip-content").text(this.tooltipApi.content)):(i[0].setAttribute("title","".concat(t,"%")),i.tooltip(),this.tooltipApi=i.data("tooltip"),this.tooltipId=this.tooltipApi.uniqueId,i.on("aftershow.progress",(function(){e.tooltipApi.tooltip.addClass("process".concat(e.tooltipId))})).on("hide.progress mouseout.progress",(function(){e.tooltipApi.tooltip.removeClass("process".concat(e.tooltipId))})))},unbind:function(){var t=this.element.parent();return t.off("aftershow.progress hide.progress mouseout.progress"),this.tooltipApi=this.tooltipApi||t.data("tooltip"),this.tooltipApi&&(this.tooltipApi.destroy(),delete this.tooltipApi),this.tooltipId&&delete this.tooltipId,this.element.off("updated.progress"),this},update:function(t){var e=this.element[0].getAttribute("data-value")||0;/number|string/.test(i(t))&&(this.element[0].setAttribute("data-value",t),e=t),this.element[0].style.width="".concat(e,"%"),this.updateAria(e)},updated:function(t){return void 0!==t&&t.value&&(this.settings.value=t.value),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"progress")}},$.fn.progress=function(t){return this.each((function(){var e=$.data(this,"progress");e?e.updated(t):e=$.data(this,"progress",new In(this,t))}))};var Ln={keepOpen:!1,trigger:void 0,autoFocus:!1,toggleOnFocus:!1,firstLastTab:null};function Pn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ln),this.init(),F("Popover","Popdown")}Pn.prototype={init:function(){return this.setup().build().handleEvents()},setup:function(){var t=this;function e(e){return!!e&&("string"==typeof e&&(e.match("#")&&0===e.indexOf("#")||(e="#".concat(e)),e=$(e)),!!e.length&&(t.popdown=e,!0))}return this.popdown=$(),this.trigger=this.element,(this.settings.trigger instanceof $||u.isElement(this.settings.trigger))&&(this.trigger=$(this.settings.trigger)),this.trigger.is(".dropdown, .multiselect")&&(this.trigger=$("#".concat(this.element.attr("id"),"-shdo"))),e(this.trigger.attr("data-popdown"))||e(this.trigger.next(".popdown")),this.id=this.popdown.attr("id"),this.id||(this.id="popdown-".concat($("body").find(".popdown").index(this.popdown)),this.popdown.attr("id",this.id)),this},build:function(){this.popdown.addClass("popdown").removeClass("hidden"),this.popdown.children(".popdown-contents").length||this.popdown.children().wrap('<div class="popdown-contents"></div>'),this.arrow=$('<div class="arrow"></div>').prependTo(this.popdown),this.place();var t=this.trigger.attr("aria-expanded");return t&&void 0!==t||this.trigger.attr("aria-expanded",""),"true"===t&&this.open(),this.trigger&&this.trigger[0].setAttribute("aria-controls",this.id),this},handleEvents:function(){var t=this,e=this;return this.trigger.on("click.popdown",(function(){e.toggle()})).on("updated.popdown",(function(){e.updated()})),this.setFirstLastTab(),this.changeObserver=new MutationObserver((function(){t.setFocusableElems()})),this.changeObserver.observe(this.element[0],{childList:!0,subtree:!0}),this.setFocusableElems(),this.settings.toggleOnFocus&&this.trigger.on("focus.popdown",(function(){t.toggle()})),this},hasValidTriggerSetting:function(){return this.settings.trigger instanceof $||u.isElement(this.settings.trigger)},get isFocused(){return this.hasFocus()},hasFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=!1,i=document.activeElement;if(t instanceof HTMLElement||(t=void 0),this.trigger.is($(i)))return!0;if(this.popdown[0].contains(i))return!0;if(t){if(t.classList.contains("overlay"))return!0;if(this.popdown[0].contains(t))return!0}this.focusableElems||this.setFocusableElems(),this.focusableElems.forEach((function(n){if(!e){var s,a,r,o=$(n);if((o.is($(i))||"function"==typeof n.contains&&n.contains(i))&&(e=!0),o.is("div.dropdown, div.multiselect"))e=null===(s=o.parent().prev("select").data("dropdown"))||void 0===s||null==s?void 0:s.isFocused;if(o.is(".lookup")){var l,c=o.data("lookup");if(!(e=null==c||null==c?void 0:c.isFocused)&&t)e=null==c||null===(l=null==c?void 0:c.modal)||void 0===l||null==l?void 0:l.element[0].contains(t)}if(o.is(".btn-menu, .btn-actions"))e=null===(a=o.data("popupmenu"))||void 0===a||null==a?void 0:a.isFocused;if(o.is(".searchfield"))e=null===(r=o.data("searchfield"))||void 0===r||null==r?void 0:r.isFocused}}));var n=$(i).parents(".tooltip, .popover");return n.length&&n.each((function(t,i){var n=$(i).data("tooltip");n&&n.isFocused&&(e=!0)})),e},setFirstLastTab:function(){var t=this,e=this.settings;if(e.firstLastTab&&/function|boolean|object/.test(i(e.firstLastTab))){var n=null,s=null,a=null;if("object"===i(e.firstLastTab)?(e.firstLastTab.first&&((n=e.firstLastTab.first instanceof jQuery?e.firstLastTab.first:$(e.firstLastTab.first)).first(),this.popdown[0].contains(n[0])||(n=null)),e.firstLastTab.last&&((s=e.firstLastTab.last instanceof jQuery?e.firstLastTab.last:$(e.firstLastTab.last)).first(),this.popdown[0].contains(s[0])||(s=null)),"function"==typeof e.firstLastTab.callback&&(a=e.firstLastTab.callback)):"function"==typeof e.firstLastTab?a=e.firstLastTab:("boolean"==typeof e.firstLastTab||e.firstLastTab)&&(a=this.closeAndContinue),a){if(!n||!s||n&&!n.length||s&&!s.length){var r=this.popdown.find('input:not(:disabled):not([tabindex^="-"]),\n            select:not(:disabled):not([tabindex^="-"]),\n            textarea:not(:disabled):not([tabindex^="-"]),\n            [tabindex]:not(:disabled):not([tabindex^="-"])');(!n||n&&!n.length)&&(n=r.first()),(!s||s&&!s.length)&&(s=r.last())}this.focusableElem={first:n,last:s},n.on("keydown.popdown",(function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),a({e:e,self:t,first:n}))})),s.on("keydown.popdown",(function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),a({e:e,self:t,last:s}))}))}}},setFocusableElems:function(){var t=u.focusableElems(this.popdown[0],["div.dropdown","div.multiselect",".lookup-wrapper > span.trigger"],["select","option"]);this.focusableElems=t,this.focusableElems.first=t[0],this.focusableElems.last=t[t.length-1]},closeAndContinue:function(t){var e=$(document).find(":focusable"),i=e.index(t.self.trigger);-1!==(i=t.e.shiftKey?i-1<0?-1:i-1:i+1>=e.length?-1:i+1)&&e.eq(i).focus(),t.self.close()},isOpen:function(){return"true"===this.trigger.attr("aria-expanded")},open:function(){if(!this.isAnimating){var t=this;if(this.isAnimating=!0,this.trigger.attr("aria-expanded","true"),this.position(),this.popdown.addClass("visible"),this.settings.autoFocus)(this.focusableElems?this.focusableElems.first:this.popdown.find(":focusable").first()).focus();this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.addEventsTimer=new U({duration:30,timeoutCallback:function(){$("body").on("resize.popdown",(function(t){e(t)})),t.settings.keepOpen||$(document).on("click.popdown",(function(t){e(t)})),$(document).on("keydown.popdown",(function(i){var n=$(i.target).parents(".popdown");switch(i.which||i.keyCode){case 27:n.length&&t.close();break;case 9:e(i)}})),t.isAnimating=!1}}),G.register(this.addEventsTimer)}function e(e){t.focusableElems.includes(e.target)||t.hasFocus(e.target)?t.keyTarget=e.target:"BODY"===e.target.tagName&&t.keyTarget?delete t.keyTarget:t.close()}},close:function(){if(!this.isAnimating){this.addEventsTimer&&(this.addEventsTimer.destroy(!0),delete this.addEventsTimer),this.keyTarget&&delete this.keyTarget;var t=this;this.isAnimating=!0,this.trigger.attr("aria-expanded","false"),this.popdown.removeClass("visible"),$("body").off("resize.popdown"),$(document).off("click.popdown focusout.popdown keydown.popdown"),this.closeTimer&&(this.closeTimer.destroy(!0),delete this.closeTimer),this.closeTimer=new U({duration:30,timeoutCallback:function(){t.popdown[0].style.display="none",t.isAnimating=!1}}),G.register(this.closeTimer)}},toggle:function(){this.isOpen()?this.close():this.open()},place:function(){this.scrollparent=$("body"),this.popdown.detach().appendTo(this.scrollparent)},position:function(){var t={offset:{left:0,top:0},scrollDistance:{left:0,top:0}},e=window.innerHeight+$(document).scrollTop(),i=window.innerWidth-2+$(document).scrollLeft();this.popdown.removeAttr("style"),this.arrow.removeAttr("style"),this.scrollparent.length&&(t.offset=this.scrollparent.offset(),t.scrollDistance.top=this.scrollparent.scrollTop(),t.scrollDistance.left=this.scrollparent.scrollLeft(),e-=t.offset.top+t.scrollDistance.top,i-=t.offset.left+t.scrollDistance.left);var n,s=!1,a=!1,r=this.trigger,o=r.offset(),l=0,c=0;this.popdown.addClass("bottom"),this.popdown[0].style.left="".concat(o.left,"px"),this.popdown[0].style.top="".concat(o.top+r.outerHeight(!0)+11,"px"),this.arrow[0].style.left="".concat(r.outerWidth(!0)/2,"px"),this.arrow[0].style.top="".concat(-11,"px"),(n=this.popdown.offset()).left<0&&(s=!0,l=0-n.left);var d=n.left+this.popdown.outerWidth(!0);if(d>i&&(s=!0,l=d-i+(B.isRTL()?20:0)),s){this.popdown[0].style.left="".concat(n.left+-1*l,"px");var h=this.popdown[0].getBoundingClientRect(),u=r[0].getBoundingClientRect(),p=h.right-u.right+10;this.arrow[0].style.left="auto",this.arrow[0].style.right="".concat(p,"px"),n=this.popdown.offset()}n.top<0&&(a=!0,c=0-n.top);var g=n.top+this.popdown.outerHeight(!0);g>e&&(a=!0,c=g-e),a&&(this.arrow[0].style.display="none",this.popdown[0].style.top="".concat(n.top+-1*c,"px"),this.arrow[0].style.top="".concat(parseInt(this.arrow[0].style.top,10)- -1*c,"px"),n=this.popdown.offset()),(n.top<0||n.top+this.popdown.outerHeight(!0)>e)&&(this.popdown[0].style.top=0,g=(n=this.popdown.offset()).top+this.popdown.outerHeight(!0),this.popdown[0].style.height="".concat(parseInt(this.popdown[0].style.height,10)-(g-e),"px"))},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.hasValidTriggerSetting()&&(this.trigger=$(this.settings.trigger)),this},teardown:function(){return this.isOpen()&&this.close(),this.trigger&&this.trigger.off("updated.popdown click.popdown focus.popdown").removeAttr("aria-controls").removeAttr("aria-expanded"),this.changeObserver&&(this.changeObserver.disconnect(),delete this.changeObserver),this.focusableElem&&this.focusableElem.first instanceof jQuery&&(this.focusableElem.first.off("keydown.popdown"),this.focusableElem.last.off("keydown.popdown"),delete this.focusableElem),this.focusableElems&&this.focusableElems.first instanceof jQuery&&(this.focusableElems.first.off("keydown.popdown"),this.focusableElems.last.off("keydown.popdown"),delete this.focusableElems),this.originalParent&&this.originalParent.length&&this.popdown.detach().appendTo(this.originalParent),this.arrow.remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"popdown")}},$.fn.popdown=function(t){return this.each((function(){var e=$.data(this,"popdown");e?e.updated(t):e=$.data(this,"popdown",new Pn(this,t))}))};var Mn={};function Rn(t,e){this.settings=C.mergeSettings(t,e,Mn),this.element=$(t),this.init()}Rn.prototype={init:function(){this.handleEvents(),this.allInputs=this.element.find("input"),this.enable()},handleEvents:function(){for(var t=this,e=$("input",this.element),i=function(i,n){var s=$(e[i]),a=$(e[i+1]),r=function(t){return t.is(".is-filled")||t.is(".is-half")};s.on("click.".concat("rating"),(function(){t.element.is(".is-readonly")||t.val(r(s)&&!r(a)?i:i+1)}))},n=0,s=e.length;n<s;n++)i(n)},fillStar:function(t,e){$(t).addClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-filled")},emptyStar:function(t,e){$(t).removeClass("is-filled").removeClass("is-half").next(e).find("svg").changeIcon("star-outlined")},halfStar:function(t,e){$(t).addClass("is-half").removeClass("is-filled").next(e).find("svg").changeIcon("star-half")},val:function(t){if(0===arguments.length||""===t||isNaN(t)||-1===S.sign(t))return this.currentValue;this.currentValue=parseFloat(t,10);for(var e=Math.floor(this.currentValue),i=0,n=this.allInputs.length;i<n;i++){var s=$(this.allInputs[i]),a=s.parent().is(".inline")?"svg":"label",r=t%1!=0&&e===i;r?this.halfStar(s,a):i<t?this.fillStar(s,a):this.emptyStar(s,a),i+1===e&&s.prop("checked",!0)}return e<=0&&t>0&&$(this.allInputs[0]).prop("checked",!0),this.currentValue},readonly:function(){var t=$(this.element);t.addClass("is-readonly"),t.find("input").attr("disabled","")},enable:function(){$(this.element).removeClass("is-readonly").find("input").removeAttr("disabled")},unbind:function(){return this.element.find("input").off("click.".concat("rating")),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Mn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"rating")}},$.fn.rating=function(t){return this.each((function(){var e=$.data(this,"rating");e?e.updated(t):e=$.data(this,"rating",new Rn(this,t))}))};var Bn={};function On(t,e){this.settings=C.mergeSettings(t,e,Bn),this.element=$(t),this.init()}On.prototype={init:function(){this.handleKeys()},isCapslock:function(t){var e=!1,i=!1;return(t=t||window.event).which?e=t.which:t.keyCode&&(e=t.keyCode),t.shiftKey?i=t.shiftKey:t.modifiers&&(i=!!(4&t.modifiers)),!!(e>=97&&e<=122&&i)||e>=65&&e<=90&&!i},unbind:function(){return $("body").off("keypress.signin blur.signin change.signin"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Bn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"signin")},handleKeys:function(){var t=this,e=$.createIconElement({classes:"icon-capslock",icon:"capslock"});document.msCapsLockWarningOff=!0,this.element.on("keypress.signin",'[type="password"]',(function(i){var n=$(this),s=n.parent(".field"),a=$(".icon-capslock",s);t.isCapslock(i)&&!n.hasClass("error")?a.length||(s.append(e),$("body").toast({audibleOnly:!0,message:B.translate("CapsLockOn")})):a.remove()})).on("blur.signin change.signin",'[type="password"]',(function(){var t=$(this),i=t.closest(".field"),n=$(".icon-capslock",i);setTimeout((function(){n&&n.length&&(t.hasClass("error")?n.remove():i.append(e))}),150)}))}},$.fn.signin=function(t){return this.each((function(){var e=$.data(this,"signin");e?e.updated(t):e=$.data(this,"signin",new On(this,t))}))};var Fn={value:[50],min:0,max:100,range:!1,step:void 0,ticks:[],tooltipContent:void 0,tooltipPosition:"top",persistTooltip:!1,attributes:null};function Nn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Fn),this.init()}function zn(t){return t%1==0}function Hn(t,e){return e&&!isNaN(e)&&0!==e||(e=1),Math.round(t/e)*e}function qn(t,e){var i=t[0],n=t[1],s=e[0],a=e[1];return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-n,2))}Nn.prototype={init:function(){return this.buildSettings().addMarkup().bindEvents()},buildSettings:function(){var t,e=this;if(this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.settings||(this.settings={}),this.settings.value=void 0!==this.element.attr("value")?this.element.attr("value"):this.settings.value,this.settings.min=void 0!==this.element.attr("min")?parseInt(this.element.attr("min"),10):this.settings.min,this.settings.max=void 0!==this.element.attr("max")?parseInt(this.element.attr("max"),10):this.settings.max,this.settings.range=void 0!==this.element.attr("data-range")?"true"===this.element.attr("data-range"):this.settings.range,this.settings.step=isNaN(this.element.attr("step"))?this.settings.step:Number(this.element.attr("step")),""===this.settings.value&&(this.settings.value=this.settings.min),1===this.settings.step&&(this.settings.step=void 0),void 0!==this.element.attr("data-ticks")){try{t=JSON.parse(e.element.attr("data-ticks"))}catch(e){t=[]}$.isArray(t)&&(this.settings.ticks=t)}var i="true"===this.element.attr("data-tooltip-persist")||!0===this.element.attr("data-tooltip-persist");if(this.settings.persistTooltip=void 0!==this.element.attr("data-tooltip-persist")?i:this.settings.persistTooltip,this.settings.tooltip=this.settings.tooltipContent,void 0!==this.element.attr("data-tooltip-content"))try{e.settings.tooltip=JSON.parse(e.element.attr("data-tooltip-content"))}catch(t){e.settings.tooltip=["",""]}if("string"==typeof this.settings.tooltip)if(-1===this.settings.tooltip.indexOf(","))this.settings.tooltip=[this.settings.tooltip,""];else{var n=this.settings.tooltip.split(",");this.settings.tooltip=[n[0]],this.settings.tooltip.push(n[1]?n[1]:"")}this.settings.tooltip&&1===this.settings.tooltip.length&&this.settings.tooltip.push(""),this.ticks=[];var s={value:this.settings.min,description:e.getModifiedTextValue(this.settings.min)},a={value:this.settings.max,description:e.getModifiedTextValue(this.settings.max)};if(this.settings.ticks){var r=e.settings.ticks||[];if($.isArray(r)&&r.length>0){var o=r.filter((function(t){return t.value===e.settings.min})),l=r.filter((function(t){return t.value===e.settings.max}));o.length>0&&(s.description=o[0].description,s.color=o[0].color,r=$.grep(r,(function(t){return t!==o[0]}))),l.length>0&&(a.description=l[0].description,a.color=l[0].color,r=$.grep(r,(function(t){return t!==l[0]})))}e.ticks.push(s);for(var c=0;c<r.length;c++){var d={};void 0!==r[c].value&&(d.value=r[c].value,d.description=void 0!==r[c].description?r[c].description:"",d.color=r[c].color,e.ticks.push(d))}e.ticks.push(a)}else this.ticks.push(s,a);if($.isArray(this.settings.value))this.settings.value[0]=isNaN(this.settings.value[0])?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value[0],10);else if("number"==typeof this.settings.value)this.settings.value=[this.settings.value];else if(-1===this.settings.value.indexOf(","))this.settings.value=[isNaN(this.settings.value)?(this.settings.min+this.settings.max)/2:parseInt(this.settings.value,10)];else{var h=this.settings.value.split(",");h[0]=isNaN(h[0])?this.settings.min:parseInt(h[0],10),h[1]=isNaN(h[1])?this.settings.max:parseInt(h[1],10),this.settings.value=h}return this.settings.range&&!this.settings.value[1]&&this.settings.value.push(this.settings.max),this},addMarkup:function(){var t=this,e=!1;if("INPUT"!==t.element[0].tagName)throw new Error('Element with ID "'.concat(t.element.id,"\" cannot invoke a slider;  it's not an Input element."));t.originalElement={type:t.element.attr("type")},t.element.attr("type","hidden"),t.wrapper=$('<div class="slider-wrapper"></div>').attr("id","".concat(t.element.attr("id"),"-slider")).insertAfter(t.element),t.hitarea=$('<div class="slider-hit-area"></div>').appendTo(t.wrapper),t.range=$('<div class="slider-range"></div>').appendTo(t.wrapper),this.element.hasClass("vertical")&&(this.wrapper.addClass("vertical"),e=!0),this.isRtlHorizontal=B.isRTL()&&!e,this.isRtlVertical=B.isRTL()&&e;var i=this.element.attr("style");i&&(i.match(/min-height/)&&(this.wrapper[0].style.minHeight=this.element[0].style.minHeight,i=i.replace("min-height","")),i.match(/height/)&&(this.wrapper[0].style.height=this.element[0].style.height),i.match(/min-width/)&&(this.wrapper[0].style.minWidth=this.element[0].style.minWidth,i=i.replace("min-width","")),i.match(/width/)&&(this.wrapper[0].style.width=this.element[0].style.width)),t.handles=[];var n=t.element.prev("label").text(),s=$('<div class="slider-handle'.concat(t.settings.range?" lower":"",'" tabindex="0"></div>')).attr("aria-label","".concat(t.settings.range?B.translate("SliderMinimumHandle"):B.translate("SliderHandle")," ").concat(n));if(t.handles.push(s),t.settings.range){var a=$('<div class="slider-handle higher" tabindex="0"></div>').attr("aria-label","".concat(B.translate("SliderMaximumHandle")," ").concat(n));t.handles.push(a)}$.each(t.handles,(function(i,n){n.attr({role:"slider","aria-orientation":e?"vertical":"horizontal","aria-valuemin":t.settings.min,"aria-valuemax":t.settings.max}).hideFocus(),n.appendTo(t.wrapper)})),t.ticks.forEach((function(i){!function(i){var n=t.isRtlHorizontal?100-t.convertValueToPercentage(i.value):t.convertValueToPercentage(i.value),s="calc(".concat(n,"% - 4px)");i.element=$('<div class="tick" data-value="'.concat(i.value,'"></div>')),i.label=$('<span class="label">'.concat(i.description,"</span>")),i.element[0].style[e?"bottom":"left"]=s,i.element.append(i.label),t.wrapper.append(i.element),e||(i.label[0].style.left="".concat(-(i.label.outerWidth()/2-i.element.width()/2),"px"))}(i)})),t.value(t.settings.value),t.updateRange(),$.each(t.handles,(function(i,n){t.settings.tooltip&&(n.tooltip({content:function(){return"".concat(t.getModifiedTextValue(Math.floor(t.value()[i])))},placement:e?"right":t.settings.tooltipPosition,trigger:"focus",keepOpen:t.settings.persistTooltip}),n.removeAttr("aria-describedby"))})),!0===this.element.prop("readonly")?this.readonly():!0===this.element.prop("disabled")&&this.disable(),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.wrapper,this,this.settings.attributes,"wrapper",!0),C.addAttributes(this.hitarea,this,this.settings.attributes,"hitarea",!0),C.addAttributes(this.range,this,this.settings.attributes,"range",!0),C.addAttributes.apply(C,c(this.handles).concat([this,this.settings.attributes,"handle",!0]));for(var r=0,o=this.ticks.length;r<o;r++){var l=$(this.ticks[r].element);C.addAttributes(l,this,this.settings.attributes,"tick-".concat(r+1))}return t},handleRangeClick:function(t){if(t.preventDefault(),!this.isDisabled()){var e=this,i=this.wrapper.hasClass("vertical"),n="click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageX:t.pageX,s="click"!==t.originalEvent.type?t.originalEvent.changedTouches[0].pageY:t.pageY,a=n-e.wrapper.offset().left-$(document).scrollLeft(),r=s-e.wrapper.offset().top-$(document).scrollTop(),o=[a,r],l=[e.handles[0].offset().left+e.handles[0].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[0].offset().top+e.handles[0].height()/2-e.wrapper.offset().top-$(document).scrollTop()],c=e.value(),d=qn(o,l),h=c[0],u=e.handles[0];u.addClass("hide-focus");var p=function(){if(i){var t=e.wrapper.height();return(t-r)/t*100}return a/e.wrapper.width()*100}(),g=e.convertPercentageToValue(p);e.handles[1]&&(d>qn(o,[e.handles[1].offset().left+e.handles[1].width()/2-e.wrapper.offset().left-$(document).scrollLeft(),e.handles[1].offset().top+e.handles[1].height()/2-e.wrapper.offset().top-$(document).scrollTop()])?(e.value([void 0,g]),u=e.handles[1],h=c[1]):e.value([g])),e.checkHandleDifference(u,h,g);var f=e.settings.step?e.settings.step:0;g<h?e.decreaseValue(t,u,g,f):e.increaseValue(t,u,g,f),e.settings.tooltip||u.focus()}},activateHandle:function(t){t.addClass("is-active")},deactivateHandle:function(t){t.removeClass("is-active")},enableHandleDrag:function(t){if(!this.isDisabled()){var e=this,i={containment:"parent",axis:this.isVertical()?"y":"x",clone:!1};t.drag(i).on("drag.slider",(function(t,i){!function(t,i,n){if(!e.isDisabled()){var s=function(){if(e.isVertical()){var t=e.wrapper.height()-i.outerHeight();return(t-n.top)/t*100}return n.left/(e.wrapper.width()-i.outerWidth())*100}(),a=e.convertPercentageToValue(s);if(e.settings.range){var r=e.value();i.hasClass("higher")&&a<=r[0]&&(a=r[0]),i.hasClass("lower")&&a>=r[1]&&(a=r[1])}e.settings.step&&(a=Math.round(a/e.settings.step)*e.settings.step),t.defaultPrevented||(e.value(i.hasClass("higher")?[void 0,a]:[a]),e.updateRange(),e.updateTooltip(i),e.element.trigger("sliding",i,a))}}(t,$(t.currentTarget),i)})).on("dragstart",(function(){$(this).addClass("is-dragging"),e.range.addClass("is-dragging"),e.element.trigger("slidestart",t)})).on("dragend",(function(){$(this).removeClass("is-dragging"),e.range.removeClass("is-dragging"),e.element.trigger("slidestop",t)}))}},disableHandleDrag:function(t){t.off("drag.slider dragstart dragend"),this.range.removeClass("is-dragging"),t.removeClass("is-dragging");var e=t.data("drag");e&&e.destroy()},convertValueToPercentage:function(t){return(t-this.settings.min)/(this.settings.max-this.settings.min)*100},convertPercentageToValue:function(t){var e=t/100*(this.settings.max-this.settings.min)+this.settings.min;return this.isRtlHorizontal?this.settings.max-e+this.settings.min:e},getIncrement:function(){var t=.1*(this.settings.max-this.settings.min);return void 0!==this.settings.step&&t<=this.settings.step&&(t=this.settings.step),t},handleKeys:function(t,e){if(!e.isDisabled()){var i=t.which,n=$(t.currentTarget);switch(n.removeClass("hide-focus"),i){case 33:e.increaseValue(t,n,void 0,this.getIncrement());break;case 34:e.decreaseValue(t,n,void 0,this.getIncrement());break;case 35:e.increaseValue(t,n,this.settings.max);break;case 36:e.decreaseValue(t,n,this.settings.min);break;case 38:case 39:e.isRtlHorizontal&&39===i?e.decreaseValue(t,n):e.increaseValue(t,n);break;case 37:case 40:e.isRtlHorizontal&&37===i?e.increaseValue(t,n):e.decreaseValue(t,n)}}},increaseValue:function(t,e,i,n){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var s,a,r,o=this.value().slice(0),l=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher"))r=(a=(s=void 0!==i?i:o[1])+(l=zn(s)?l:isNaN(s%l)?0:s%l)<this.settings.max?s+l:this.settings.max)%l?a:Hn(a,l),this.value([void 0,r]);else{s=void 0!==i?i:o[0];var c=void 0===o[1]?this.settings.max:o[1];r=(a=s+(l=zn(s)?l:isNaN(s%l)?0:l-s%l)<c?s+l:c)%l?a:Hn(a,l),this.value([r])}this.checkHandleDifference(e,s,r),this.updateRange(),this.updateTooltip(e)},decreaseValue:function(t,e,i,n){t.preventDefault(),clearTimeout(e.data("animationTimeout"));var s,a,r,o=this.value(),l=void 0!==n?n:void 0!==this.settings.step?this.settings.step:1;if(e.hasClass("higher")){s=void 0!==i?i:o[1];var c=void 0===o[0]?this.settings.min:o[0];r=(a=s-(l=zn(s)?l:isNaN(s%l)?0:l-s%l)>c?s-l:c)%l?a:Hn(a,l),this.value([void 0,r])}else r=(a=(s=void 0!==i?i:o[0])-(l=zn(s)?l:isNaN(s%l)?0:s%l)>this.settings.min?s-l:this.settings.min)%l?a:Hn(a,l),this.value([r]);this.checkHandleDifference(e,s,r),this.updateRange(),this.updateTooltip(e)},updateRange:function(){for(var t=this,e=this.value(),i=[],n=this.getColorClosestToValue(),s=t.wrapper.hasClass("vertical"),a=0;a<this.ticks.length;a++){(this.settings.range?e[0]<this.ticks[a].value&&this.ticks[a].value<=e[1]:this.ticks[a].value<=e[0])?(this.ticks[a].element.addClass("complete"),n&&(this.ticks[a].element[0].style.backgroundColor=n,this.ticks[a].element.addClass("inherit"))):(this.ticks[a].element.removeClass("complete"),n&&(this.ticks[a].element[0].style.backgroundColor="",this.ticks[a].element.removeClass("inherit")))}n&&(this.range[0].style.backgroundColor=n,$.each(this.handles,(function(t,e){e[0].style.backgroundColor=n,e[0].style.borderColor=n}))),$.each(t.ticks,(function(e){t.ticks[e].label[0].style.color=""})),i[0]=this.convertValueToPercentage(e[0]),void 0!==e[1]&&(i[1]=this.convertValueToPercentage(e[1]));var r=s?["bottom","top"]:t.isRtlHorizontal?["right","left"]:["left","right"],o={};function l(t,e){var i=s?r[1]:r[0],n=s?100-e:e;t.css(i,"calc(".concat(n,"% - ").concat(t.outerWidth()/2,"px)"))}this.handles[1]?(o[r[0]]="".concat(i[0],"%"),o[r[1]]="".concat(100-i[1],"%")):(o[r[0]]="0%",o[r[1]]="".concat(100-i[0],"%")),this.range.css(o),this.handles[0].hasClass("is-animated")&&this.handles[0].data("animationTimeout",setTimeout((function(){t.handles[0].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")}),201)),l(this.handles[0],i[0]),this.handles[1]&&(this.handles[1].hasClass("is-animated")&&this.handles[1].data("animationTimeout",setTimeout((function(){t.handles[1].removeClass("is-animated").trigger("slide-animation-end"),t.range.removeClass("is-animated")}),201)),l(this.handles[1],i[1]),this.handles[0].attr("aria-valuemax",e[1]),this.handles[1].attr("aria-valuemin",e[0]))},checkHandleDifference:function(t,e,i){var n=this.convertValueToPercentage(e),s=this.convertValueToPercentage(i);Math.abs(n-s)>3&&(t.addClass("is-animated"),this.range.addClass("is-animated"))},updateTooltip:function(t){if(this.settings.tooltip){if(!t){var e,i=this.handles[0].data("tooltip");return this.handles[1]&&(e=this.handles[1].data("tooltip")),i.hide(),void(e&&e.hide())}var n=t.data("tooltip");t.hasClass("is-animated")?(n.hide(),t.one("slide-animation-end",(function(){s()}))):s()}function s(){n.position(),t.focus()}},getColorClosestToValue:function(){for(var t,e,i={light:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},dark:{default:"#ffffff","very-poor":"#a13030",poor:"#d66221",adequate:"#f2bc41",good:"#9cce7c","very-good":"#76b051",superior:"#488421"},contrast:{default:"#000000","very-poor":"#a13030",poor:"#d66221",adequate:"#e4882b",good:"#76b051","very-good":"#56932e",superior:"#397514"}}[Z.currentTheme.id.split("-")[2]],n=this.value()[0],s=0;s<this.ticks.length;s++)(e=this.ticks[s].color)&&n>=this.ticks[s].value&&(t=e,t=e.indexOf("#")>-1?e:i[e]||i.default);return t},value:function(t,e){var i=this;return void 0===t&&void 0===e||(t&&$.isArray(t)&&(void 0!==t[1]&&(e=t[1]),t=t[0]),void 0===t&&$.isArray(i._value)&&void 0!==i._value[0]&&(t=i._value[0]),void 0===e&&$.isArray(i._value)&&void 0!==i._value[1]&&(e=i._value[1]),i._value=[t,e],i.element.val(void 0!==e?i._value:i._value[0]),$.each(i.handles,(function(t,e){var n=i._value[t],s=i.getModifiedTextValue(n);$.each(i.ticks,(function(t,e){e.value===n&&(s=e.description)})),e.attr({"aria-valuenow":i._value[t],"aria-valuetext":s})})),0===this.element.next().find(".slider-handle.is-dragging").length&&i.element.trigger("change",{element:i.element,value:i._value})),i._value},getModifiedTextValue:function(t){return this.settings.tooltip?this.settings.tooltip[0]+t+this.settings.tooltip[1]:t},enable:function(){this.element.prop("disabled",!1),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),this.wrapper.removeClass("is-disabled");var t=this;return $.each(this.handles,(function(e,i){t.enableHandleDrag(i)})),this},disable:function(){var t=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!1),this.wrapper.removeClass("is-readonly"),setTimeout((function(){t.wrapper.addClass("is-disabled");var e=t;$.each(t.handles,(function(t,i){e.disableHandleDrag(i)}))})),this},readonly:function(){var t=this;return this.element.prop("disabled",!0),this.element.prop("readonly",!0),this.wrapper.removeClass("is-disabled"),this.wrapper.addClass("is-readonly"),$.each(this.handles,(function(e,i){t.disableHandleDrag(i)})),this},isDisabled:function(){return this.element.prop("disabled")},isVertical:function(){return this.wrapper.hasClass("vertical")},setValue:function(t,e){var i=this.value();this.checkHandleDifference(this.handles[0],i[0],t),this.handles[1]&&this.checkHandleDifference(this.handles[1],i[1],e);var n=this.value(t,e);return this.updateRange(),this.updateTooltip(),n},refresh:function(t,e){return z(this.setValue,this.refresh).apply(this,[t,e])},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.element.removeAttr("value"),this.teardown().init()},teardown:function(){var t=this;return $.each(t.handles,(function(e,i){t.disableHandleDrag(i),i.off("mousedown.slider click.slider blur.slider keydown.slider keyup.slider")})),this.wrapper.off("click.slider touchend.slider touchcancel.slider").remove(),this.element.attr("type",h.ensureAlphaNumeric(this.originalElement.type)),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"slider")},bindEvents:function(){var t=this;return $.each(t.handles,(function(e,i){i.on("mousedown.slider",(function(){t.isDisabled()||$(this).focus()})).on("click.slider",(function(t){t.preventDefault()})).on("keydown.slider",(function(e){t.activateHandle(i),t.handleKeys(e,t)})).on("keyup.slider blur.slider",(function(){t.deactivateHandle(i)})),t.enableHandleDrag(i)})),t.wrapper.on("click.slider touchend.slider touchcancel.slider",(function(e){t.handleRangeClick(e)})),t.element.on("updated.slider",(function(){t.updated()})),t}},$.fn.slider=function(t){return this.each((function(){var e=$.data(this,"slider");e?e.updated(t):e=$.data(this,"slider",new Nn(this,t))}))};var Vn={autocorrectOnBlur:!0,min:-2147483647,max:2147483647,step:null,maskOptions:null,attributes:null};function Wn(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Vn),this.init()}Wn.prototype={get isTouch(){return m.features.touch},get isWrapped(){return this.element.parent().is(".spinbox-wrapper")},get isInlineLabel(){return this.element.parent().is(".inline")},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.setInitialValue().addMarkup().bindEvents().setWidth()},setWidth:function(){var t=this.element[0].style;return t.width&&(this.element.parent()[0].style.width="".concat(parseInt(t.width,10)+2*this.element.parent().find(".down").outerWidth(),"px")),this},setInitialValue:function(){var t=this.checkForNumeric(this.element.val());return this.element.val(t),this.element.attr("data-trackdirty")&&this.element.data("original",t),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.element.attr("pattern","\\d*"),this.element.attr("max")?this.settings.max=this.element.attr("max"):this.settings.max&&this.element.attr("max",this.settings.max),this.element.attr("step")?this.settings.max=this.element.attr("step"):this.settings.step&&this.element.attr("step",this.settings.step),this.element.attr("min")?this.settings.min=this.element.attr("min"):this.settings.min&&this.element.attr("min",this.settings.min),this},addMarkup:function(){var t=this;if(this.isInlineLabel)this.inlineLabel.addClass("spinbox-wrapper");else if(!this.isWrapped){if(this.element.is(".field-options")){var e=this.element.closest(".field").find(".btn-actions");this.element.add(e).add(e.next(".popupmenu")).wrapAll('<span class="spinbox-wrapper"></span>')}else this.element.wrap('<span class="spinbox-wrapper"></span>')}this.isWrapped&&(this.buttons={down:this.element.parent().find(".down"),up:this.element.parent().find(".up")}),this.buttons.up.length||(this.buttons.up=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control up">+</span>')).insertAfter(this.element),this.buttons.up.button()),this.buttons.down.length||(this.buttons.down=$("<span ".concat(this.isTouch?"":'aria-hidden="true"',' class="spinbox-control down">-</span>')).insertBefore(this.element),this.buttons.down.button());var n=this.element[0].className;["input-xs","input-sm","input-mm","input-md","input-lg"].forEach((function(e){if(n.indexOf(e)>-1){var i=e.replace("input","spinbox");t.isWrapped?t.element.parent(".spinbox-wrapper").addClass(i):t.isInlineLabel&&t.inlineLabel.addClass(i)}}));var s=this.element.attr("min"),a=this.element.attr("max"),r={role:"spinbutton"};s||a||(a="9999999"),r.min=s||0,r.max=a,this.element.data("mask")&&"object"===i(this.element.data("mask"))&&this.element.data("mask").destroy(),r["aria-valuemin"]=s||0,r["aria-valuemax"]=a||0,this.element.attr(r),this.updateAria(this.element.val());var o={process:"number",patternOptions:{allowDecimal:!1,allowThousandsSeparator:!1,allowNegative:Math.min(this.settings.min,this.settings.max)<0,decimalLimit:0,integerLimit:String(this.settings.max).length}};return this.element.mask(this.settings.maskOptions||o),this.isDisabled()&&this.disable(),this.element.attr("readonly")&&this.readonly(),C.addAttributes(this.element.parent(),this,this.settings.attributes,"wrapper",!0),C.addAttributes(this.element,this,this.settings.attributes,"spinbox",!0),C.addAttributes(this.buttons.down,this,this.settings.attributes,"btn-down",!0),C.addAttributes(this.buttons.up,this,this.settings.attributes,"btn-up",!0),this},enableLongPress:function(t,e){e.addButtonStyle(t),e.longPressInterval=setInterval((function(){$(t.currentTarget).is(":hover")&&e.handleClick(t)}),250)},disableLongPress:function(t,e){e.removeButtonStyle(t),clearInterval(e.longPressInterval),e.longPressInterval=null},handleClick:function(t){(t.preventDefault(),this.isDisabled()||1!==t.which||this.isReadonly())||($(t.currentTarget).hasClass("up")?this.increaseValue():this.decreaseValue(),this.element.focus())},handleKeyDown:function(t,e){var i=t.which;if(-1!==$.inArray(i,[35,36,37,38,39,40])&&!this.isReadonly())switch(i){case 35:e.element.attr("min")&&e.element.val(e.element.attr("min"));break;case 36:e.element.attr("max")&&e.element.val(e.element.attr("max"));break;case 38:e.addButtonStyle(e.buttons.up),e.increaseValue();break;case 40:e.addButtonStyle(e.buttons.down),e.decreaseValue()}},handleKeyup:function(t,e){if(!e.isDisabled()&&!this.isReadonly()){var i=t.which;switch(i){case 38:case 39:B.isRTL()&&39===i?e.removeButtonStyle(e.buttons.down):e.removeButtonStyle(e.buttons.up);break;case 37:case 40:B.isRTL()&&39===i?e.removeButtonStyle(e.buttons.up):e.removeButtonStyle(e.buttons.down)}e.updateAria(e.element.val())}},handleAfterPaste:function(t){var e=Number(t.element.attr("min")),i=Number(t.element.attr("max")),n=Number(t.element.val());n<e&&(n=e),n>i&&(n=i),t.updateVal(n)},correctValue:function(t){var e=Number(this.element.val()),i=parseInt(this.element.attr("min"),10),n=parseInt(this.element.attr("max"),10);return e<i?(t&&t.preventDefault(),this.updateVal(i)):e>n?(t&&t.preventDefault(),this.updateVal(n)):void 0},increaseValue:function(){var t=this.element.attr("max"),e=this.checkForNumeric(this.element.val())+Number(this.element.attr("step")||1);return t&&e>t?this.updateVal(t):this.updateVal(e)},decreaseValue:function(){var t=this.element.attr("min"),e=this.checkForNumeric(this.element.val())-Number(this.element.attr("step")||1);return t&&e<t?this.updateVal(t):this.updateVal(e)},updateVal:function(t){this.element.val(t).trigger("change"),this.updateAria(t)},checkForNumeric:function(t){return""===t?t:$.isNumeric(t)?Number(t):(t=parseInt(t,10),$.isNumeric(t)?Number(t):0)},updateAria:function(t){var e=this.element.attr("min"),i=this.element.attr("max");t=this.checkForNumeric(t),this.element[0].setAttribute("aria-valuenow",t||"0"),this.element[0].setAttribute("autocomplete","off"),this.setIsDisabled(this.buttons.up,""!==t&&i&&t>=i?"disable":"enable"),this.setIsDisabled(this.buttons.down,""!==t&&e&&t<=e?"disable":"enable")},addButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.addClass("is-active")}},removeButtonStyle:function(t){if(!this.isDisabled()&&!this.isReadonly()){var e=t;t.currentTarget&&(e=$(t.currentTarget)),e.removeClass("is-active")}},enable:function(){this.element.prop("disabled",!1),this.element.parent(".spinbox-wrapper").removeClass("is-disabled is-readonly"),this.element.prop("readonly",!1)},disable:function(){var t=this;this.element.prop("disabled",!0),this.element.attr("disabled","disabled"),this.element.parent(".spinbox-wrapper").addClass("is-disabled"),setTimeout((function(){t.element.parent(".spinbox-wrapper").addClass("is-disabled")}))},readonly:function(){this.element.prop("readonly",!0),this.element.parent(".spinbox-wrapper").addClass("is-readonly")},isReadonly:function(){return this.element.prop("readonly")},isDisabled:function(){return this.element.prop("disabled")},setIsDisabled:function(t,e){t[(e=void 0===e||!(!e||"enable"===e))?"addClass":"removeClass"]("is-disabled")},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this},destroy:function(){var t=this.element.data("mask");for(var e in t&&"function"==typeof t.destroy&&t.destroy(),this.buttons){var i=$(e).data("button");i&&i.destroy()}this.buttons.up.off("click.spinbox mousedown.spinbox"),this.buttons.up.remove(),this.buttons.down.off("click.spinbox mousedown.spinbox"),this.buttons.down.remove(),this.element.off("focus.spinbox blur.spinbox keydown.spinbox keyup.spinbox"),this.element.unwrap(),$.removeData(this.element[0],"spinbox")},bindEvents:function(){var t=this,e=!1;return this.element.on("focus.spinbox",(function(){t.element.parent(".spinbox-wrapper").addClass("is-focused")})).on("blur.spinbox",(function(){t.element.parent(".spinbox-wrapper").removeClass("is-focused"),t.settings.autocorrectOnBlur&&t.correctValue()})).on("keydown.spinbox",(function(e){t.handleKeyDown(e,t)})).on("keyup.spinbox",(function(e){t.handleKeyup(e,t)})).on("afterpaste.mask",(function(){t.handleAfterPaste(t)})),this.buttons.up.add(this.buttons.down[0]).on("touchstart.spinbox mousedown.spinbox",(function(i){if(1===i.which){if(e||t.handleClick(i),t.isTouch)return;e=!0,t.enableLongPress(i,t),$(document).one("mouseup",(function(){t.disableLongPress(i,t),e=!1,t.element.focus()}))}})),this}},$.fn.spinbox=function(t){return this.each((function(){var e=$.data(this,"spinbox");e?e.updated(t):e=$.data(this,"spinbox",new Wn(this,t))}))};var jn={axis:"x",side:"left",resize:"immediate",containment:null,save:!0,maxWidth:{left:"auto",right:"auto"},attributes:null};function Un(t,e){this.settings=C.mergeSettings(t,e,jn),this.element=$(t),this.init()}Un.prototype={init:function(){return this.build().handleEvents()},build:function(){var t,e=this,i=this,n=this.settings,s=this.element,a=s.parent(),r="x"===n.axis?"left":"top",o=a.is(".content")?a.parent():a,l=$('<div class="splitter-drag-handle">'.concat($.createIcon("drag"),"</div>")),c=299,d=a.width();this.isRTL=B.isRTL(),setTimeout((function(){t=a.height()}),0),this.docBody=$("body"),this.isSplitterRightSide=s.is(".splitter-right")||"x"===n.axis&&"right"===n.side,this.isSplitterHorizontal=s.is(".splitter-horizontal")||"y"===n.axis,n.uniqueId=C.uniqueId(this.element,"splitter"),l.appendTo(s),l.prepend('<span class="audible">'.concat(B.translate("SplitterDragHandle"),"</span>"));var h=function(){var a=0,r=!1,o=function(e,n,s){i.splitTo(e,t),$(n)[s?"addClass":"removeClass"]("rotate")};e.splitterCollapseButton=$('<button type="button" class="splitter-btn" id="splitter-collapse-btn"><span class="audible">'.concat(B.translate("SplitterCollapseButton"),'</span><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-double-chevron"></use></svg></button>')),e.splitterCollapseButton.appendTo(s),s[0].offsetLeft>10&&e.splitterCollapseButton.addClass("rotate"),e.splitterCollapseButton.click((function(){if(!s.is("is-dragging")){if(i.isRTL&&!i.isSplitterHorizontal||!i.isSplitterRightSide&&"left"===n.side||i.isSplitterRightSide&&"right"===n.side){var t=i.getContainerWidth()-s.outerWidth(),e=t;r||(a=t-a,c=t-c);var l=s[0].offsetLeft;i.isSplitterRightSide&&"right"===n.side&&(l=s[0].offsetLeft+1),a>=e?l>=t?o(c,this,!0):(a=l,o(e,this,!1)):l<t?(a=l,o(e,this,!1)):(o(a,this,!0),a=e)}else{var d=s[0].offsetLeft;a<=0?d<=10?o(c,this,!0):(a=d,o(0,this,!1)):d>10?(a=d,o(0,this,!1)):(o(a,this,!0),a=0)}r=!0}}))};if(this.isSplitterRightSide){var u=o.prev();u.is(".main")?(this.leftSide=u,d=o.parent().outerWidth()-d):(this.leftSide=o,s.addClass("splitter-right")),o.addClass("is-right-side").next().addClass("flex-grow-shrink is-right-side").parent().addClass("splitter-container"),n.collapseButton&&h(),this.setSplitterContainer(o.parent())}else this.isSplitterHorizontal?(this.topPanel=s.prev(),d=this.topPanel.height(),a.addClass("splitter-container is-horizontal"),s.next().addClass("flex-grow-shrink"),s.addClass("splitter-horizontal")):(this.rightSide=o,this.leftSide=o.prev().parent(),o.prev().addClass("flex-grow-shrink").parent().addClass("splitter-container"),n.collapseButton&&h(),this.setSplitterContainer(o.parent()));if(this.isRTL&&!this.isSplitterHorizontal){var p=this.getContainerWidth();d=p>=d?p-d:d}return localStorage&&n.save&&!isNaN(parseInt(localStorage[n.uniqueId],10))&&(d=localStorage[n.uniqueId]),d=parseInt(d,10),this.isSplitterHorizontal?s[0].style.top="".concat(d,"px"):s[0].style.top=0,this.splitTo(d,t),d<=10&&this.splitterCollapseButton&&this.splitterCollapseButton.removeClass("rotate"),this.documentWidth=0,this.element.drag({axis:n.axis,containment:n.containment||"x"===n.axis?"document":"parent",containmentOffset:{left:0,top:0}}).on("dragstart.splitter",(function(){var t=o.parent().find("iframe");if(i.documentWidth=$(document).width(),t.length>0)for(var e=0,n=t.length;e<n;e++){var s=$(t[e]),a="".concat(parseInt(getComputedStyle(s.parent()[0]).width,10),"px"),r=$('<div class="overlay splitter-overlay"></div>');r.css("width",a),s.before(r)}})).on("dragend.splitter",(function(a,l){o.parent().find(".splitter-overlay").remove();var c=s[0].getBoundingClientRect(),d=window.innerWidth-c.left,h=e.isSplitterRightSide&&"right"===e.settings.side||!e.isSplitterRightSide&&"left"===e.settings.side;0===c.left&&(o[0].style.width="0px",l[r]=10),n.collapseButton&&(l[r]<=10||h&&d<=21?$("#splitter-collapse-btn").removeClass("rotate"):$("#splitter-collapse-btn").addClass("rotate")),"end"===n.resize&&i.splitTo(l[r],t),"immediate"===n.resize&&e.isRTL&&!e.isSplitterHorizontal&&setTimeout((function(){var n=parseInt(e.element.css("left"),10);i.splitTo(n,t)}),0)})).on("drag.splitter",(function(e,s){return!(s.left<=0)&&("immediate"===n.resize&&i.splitTo(s[r],t),!0)})),"y"===n.axis&&this.element.addClass("splitter-horizontal"),this.element.attr({"aria-dropeffect":"move",tabindex:"0","aria-grabbed":"false"}),C.addAttributes(this.element,this,this.settings.attributes,"",!0),C.addAttributes(this.element.find(".splitter-drag-handle"),this,this.settings.attributes,"handle",!0),C.addAttributes(this.element.find(".splitter-drag-handle svg.icon"),this,this.settings.attributes,"icon",!0),this},setSplitterContainer:function(t){this.container=this.element.closest(".splitter-container"),!this.container.length&&t&&t.length&&(t.addClass("splitter-container"),this.container=this.element.closest(".splitter-container"))},getContainerWidth:function(){var t;return(null===(t=this.container)||void 0===t||null==t?void 0:t.outerWidth())||0},toggleSelection:function(){this.element.toggleClass("is-dragging")},resizeTop:function(t,e,i){(e>i||e<0)&&(e=parseInt(i,10)/2),this.topPanel[0].style.height="".concat(e,"px")},resizeLeft:function(t,e){var i=this.isRTL?e+20:this.leftSide.outerWidth()-e;this.rightSide[0].style.width="".concat(i,"px"),t[0].style.left=""},resizeRight:function(t,e){var i=t.parent(),n=i.is(".content")?i.parent():i,s=e,a=e-1;if(this.isRTL&&!this.isSplitterHorizontal){var r=this.getContainerWidth();s=r>=e?r-e-20:e,a=e}(!this.isSplitterRightSide&&"left"===this.settings.side||this.isSplitterRightSide&&"right"===this.settings.side)&&(n[0].style.width="0px"),this.leftSide[0].style.width="".concat(s,"px"),t[0].style.left="".concat(a,"px")},splitTo:function(t,e){var i=this.settings,n=this.element;this.isSplitterRightSide?((!this.isRTL&&t>i.maxWidth.right||this.isRTL&&t<i.maxWidth.right)&&(t=i.maxWidth.right),this.resizeRight(n,t)):this.isSplitterHorizontal?this.resizeTop(n,t,e):((!this.isRTL&&t>i.maxWidth.left||this.isRTL&&t<i.maxWidth.left)&&(t=i.maxWidth.left),this.resizeLeft(n,t)),this.element.trigger("split",[t]),this.docBody.triggerHandler("resize",[this]),localStorage&&(localStorage[this.settings.uniqueId]=t),this.split=t,this.parentHeight=e},unbind:function(){return this.element.off("updated.".concat("splitter")),this},updated:function(t){return void 0!==t?(this.settings=C.mergeSettings(this.element,t,jn),this.destroy().init()):this},destroy:function(){this.unbind(),this.splitterCollapseButton&&this.splitterCollapseButton.remove(),$.removeData(this.element[0],"splitter")},handleEvents:function(){var t=this;return this.element.on("updated.".concat("splitter"),(function(){t.updated()})).on("keydown.".concat("splitter"),(function(e){32===e.which&&(t.toggleSelection(),e.preventDefault()),37===e.which&&t.splitTo(t.split-15,t.parentHeight),39===e.which&&t.splitTo(t.split+15,t.parentHeight)})),this}},$.fn.splitter=function(t){return this.each((function(){var e=$.data(this,"splitter");e?e.updated(t):e=$.data(this,"splitter",new Un(this,t))}))};var _n={searchable:!1,available:null,selected:null,additional:null,availableClass:".available",selectedClass:".selected",additionalClass:".full-access",availableBtn:".btn-moveto-selected",selectedBtnLeft:".btn-moveto-left",selectedBtnRight:".btn-moveto-right",additionalBtn:".btn-moveto-selected",draggable:{available:!0,selected:!0,additional:!0},attributes:null,template:'<ul data-swap-handle=".handle">{{#dataset}}{{#text}}<li data-id="{{id}}"{{#value}} data-value="{{value}}"{{/value}}{{#selected}} selected="selected"{{/selected}}{{#disabled}} class="is-disabled"{{/disabled}}><span class="handle" focusable="false" aria-hidden="true" role="presentation">&#8286;</span><div class="swaplist-item-content"><p>{{text}}</p></div></li>{{/text}}{{/dataset}}</ul>'};function Gn(t,e){this.settings=C.mergeSettings(t,e,_n),this.element=$(t),this.init()}Gn.prototype={init:function(){var t=this,e=this.settings;e.draggable=$.extend(!0,_n.draggable,e.draggable),this.isTouch=m.features.touch,this.isAdditional=$("".concat(e.additionalClass," .listview"),this.element).length>0,this.isTouch&&this.element.addClass("is-touch"),this.loadListview(),this.initDataset(),this.setElements(),this.isMultiSelectClass(),setTimeout((function(){t.makeDraggable(),t.handleEvents(),t.initSelected(e.availableClass),t.initSelected(e.additionalClass)}),0)},loadListview:function(){for(var t=this.settings,e=[{dataset:t.available,class:t.availableClass,draggable:t.draggable.available},{dataset:t.selected,class:t.selectedClass,draggable:t.draggable.selected},{dataset:t.additional,class:t.additionalClass,draggable:t.draggable.additional}],n=0,s=e.length;n<s;n++){var a=e[n],r=$("".concat(a.class," .listview"),this.element),o=r.data("listview"),l={dataset:a.dataset||[],selectable:"multiple",showCheckboxes:!1};(!0===t.searchable||"true"===t.searchable)&&$("".concat(a.class," .searchfield"),this.element).length>0&&(l.searchable=!0),!a.dataset&&r.length&&$("li",r).length?r.listview(l):r.length&&(o&&o.destroy(),-1===t.template.indexOf('data-id="{{id}}"')&&(t.template=t.template.replace("<li",'<li data-id="{{id}}"')),l.template=t.template,l.dataset=a.dataset||[],l.dataset.forEach((function(t){/string|number/.test(i(t.id))&&""!==t.id||(t.id="sw".concat((Date.now().toString(36)+Math.round(Math.random()*Math.pow(36,12)).toString(36).substr(2,5)).toLowerCase()))})),0===l.dataset.length&&(l.forceToRenderOnEmptyDs=!0),l.attributes=this.getLvAutomationAttributes(a.class),r.listview(l)),a.draggable||$("ul",r).addClass("is-not-droppable")}},getLvAutomationAttributes:function(t){var e,i=this,n=this.settings;if(n.attributes&&"string"==typeof t&&t.length>1){var s="-swaplist-".concat(t.substring(1));if(Array.isArray(n.attributes))e=[],n.attributes.forEach((function(t){var n="function"==typeof t.value?t.value(i):t.value;e.push({name:t.name,value:n+s})}));else{var a="function"==typeof n.attributes.value?n.attributes.value(this):n.attributes.value;e={name:n.attributes.name,value:a+s}}}return e},setElements:function(){var t=this,e=this.settings,i="";if(this.offset=null,this.containers=$("".concat(e.availableClass,",").concat(e.selectedClass,",").concat(e.additionalClass),this.element),this.actionButtons=$("".concat(e.availableBtn,",").concat(e.additionalBtn,",").concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.selectedButtons=$("".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),this.element),this.tabButtonsStr="".concat(e.availableBtn,", ").concat(e.additionalBtn,", ").concat(this.selectedButtons.length>1?e.selectedBtnRight:e.selectedBtnLeft),this.dragElements="ul:not(.is-not-droppable), ul:not(.is-not-droppable) li:not(.is-disabled)",this.dragStart="dragstart.swaplist touchstart.swaplist gesturestart.swaplist",this.dragEnterWhileDragging="dragenter.swaplist",this.dragOverWhileDragging="dragover.swaplist touchmove.swaplist gesturechange.swaplist",this.dragEnd="dragend.swaplist touchend.swaplist touchcancel.swaplist gestureend.swaplist",this.selections={items:[],owner:null,related:null,droptarget:null,isInSelection:null,isHandle:null,placeholder:null,placeholderTouch:null,dragged:null,draggedIndex:null},e.numOfSelectionsClass="num-of-selections",e.itemContentClass="swaplist-item-content",e.itemContentTempl=$('<div><p><span class="'.concat(e.numOfSelectionsClass,'">###</span>\n      <span class="').concat(e.numOfSelectionsClass,'-text">&nbsp;</span></p><div/>')),e.attributes){var n=[{btn:$("".concat(e.availableClass," ").concat(e.availableBtn),this.element),suffix:(e.availableClass||"").substring(1)},{btn:$("".concat(e.selectedClass," ").concat(e.selectedBtnLeft),this.element),suffix:"".concat((e.selectedClass||"").substring(1),"-left")},{btn:$("".concat(e.selectedClass," ").concat(e.selectedBtnRight),this.element),suffix:"".concat((e.selectedClass||"").substring(1),"-right")},{btn:$("".concat(e.additionalClass," ").concat(e.additionalBtn),this.element),suffix:(e.additionalClass||"").substring(1)}];n.forEach((function(t){t.suffix="swaplist-btn-".concat(t.suffix)})),n.forEach((function(i){return C.addAttributes(i.btn,t,e.attributes,i.suffix)}))}e.draggable.available||(i="".concat(e.availableClass," ").concat(e.availableBtn,",").concat(e.selectedBtnLeft),$(i,this.element).prop("disabled",!0)),e.draggable.selected||(i="".concat(e.selectedBtnLeft,",").concat(e.selectedBtnRight),e.draggable.available||(i+=",".concat(e.additionalClass," ").concat(e.additionalBtn)),this.isAdditional&&e.draggable.additional||(i+=",".concat(e.availableClass," ").concat(e.availableBtn)),$(i,this.element).prop("disabled",!0),$("".concat(e.additionalClass," ").concat(e.additionalBtn),this.element).addClass("is-rotate")),e.draggable.additional||$("".concat(e.additionalClass," ").concat(e.additionalBtn,",").concat(e.selectedBtnRight),this.element).prop("disabled",!0)},isMultiSelectClass:function(){for(var t=this.settings,e=[t.availableClass,t.selectedClass,t.additionalClass],i=0,n=e.length;i<n;i++){var s=$("".concat(e[i]," .listview"),this.element);$("li",s).length||s.addClass("is-multiselect")}},initSelected:function(t){if((t=this.isjQuery(t)?t:$(t,this.element)).length){for(var e=$(".listview",t).data("listview"),i=$("li[selected]",t),n=0,s=i.length;n<s;n++){var a=$(i[n]);a.removeAttr("selected"),e.select(a)}this.moveElements(t,this.settings.selectedClass)}},moveElements:function(t,e){if(null!==e){t="string"!=typeof t?t:$(t,this.element),e="string"!=typeof e?e:$(e,this.element);var i=$(".listview",t).data("listview");if(this.clearSelections(),this.selections.owner=t,this.selections.droptarget=e,this.isTouch){if(i.selectedItems)for(var n=0,s=i.selectedItems.length;n<s;n++)this.selections.items[n]=i.selectedItems[n].closest("li")}else this.selections.items=i.selectedItems;if(this.setSelectionsItems(this.selections.owner),this.unselectElements(i),this.selections.items.length){this.selections.move={items:this.selections.itemsData,from:this.getContainer(this.selections.itemsData)};var a=this.element.triggerHandler("beforeswap",[this.selections.move]);if("boolean"==typeof a&&!a||"string"==typeof a&&"false"===a.toLowerCase())return;var r=$("ul",e),o=$("li",r).length,l=this.selections.items.length+o;if(this.selections.items)for(var c=0,d=this.selections.items.length;c<d;c++){var h=$(this.selections.items[c]);h.attr({"aria-posinset":o+c+1,"aria-setsize":l}).find("mark.highlight").contents().unwrap(),r.append(h)}this.afterUpdate($(".listview",e).data("listview"))}}},getContainer:function(t){var e=this.settings;if("object"===i(t[0])&&t[0].node){var n=t[0].node.closest(".card"),s="";return n.is(e.availableClass)?s=e.availableClass:n.is(e.selectedClass)?s=e.selectedClass:n.is(e.additionalClass)&&(s=e.additionalClass),{container:n,class:s}}return null},unselectElements:function(t){if(t.selectedItems)for(var e=0,i=t.selectedItems.length;e<i;e++)t.select($(t.selectedItems[e]));t&&t.element&&t.element.find("li").attr("aria-selected",!1).removeClass("is-selected")},isDragAndDropSupports:function(){var t=document.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},isMatchMediaSupports:function(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia},viewport:function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t["".concat(e,"Width")],height:t["".concat(e,"Height")]}},isMaxWidth:function(t){return this.isMatchMediaSupports()&&window.matchMedia("(max-width: ".concat(t,"px)")).matches||this.viewport().width<=t},makeDraggable:function(){var t=this,e=$("ul",this.element);this.isDragAndDropSupports&&(this.handle=e.first().attr("data-swap-handle"),this.handle=!this.isTouch&&$(this.handle,e).length>0?this.handle:null,$(this.handle,e).addClass("draggable").off("mousedown.swaplist touchstart.swaplist").on("mousedown.swaplist touchstart.swaplist",(function(){t.selections.isHandle=!0})).off("mouseup.swaplist touchend.swaplist").on("mouseup.swaplist touchend.swaplist",(function(){t.selections.isHandle=!1})),this.targets=e.attr({"aria-dropeffect":"none"}),this.items=$("li:not(.is-disabled)",this.element).not("a[href], img").off("selectstart.swaplist").on("selectstart.swaplist",(function(){return this.dragDrop&&this.dragDrop(),!1})).end().attr({draggable:!0}).addClass(this.handle?"":"draggable"))},getElementByTouchInList:function(t,e,i){for(var n=!1,s=$(t),a=0,r=s.length;a<r;a++){var o=$(s[a]),l=o.offset();e<=l.left||e>=l.left+o.outerWidth()||i<=l.top||i>=l.top+o.outerHeight()||(n=o)}return n},draggTouchElement:function(t,e){var i=t.originalEvent.changedTouches[0];e[0].style.top="".concat(i.pageY-this.offset.y,"px"),e[0].style.left="".concat(i.pageX-this.offset.x,"px")},hasModifier:function(t){return t.ctrlKey||t.metaKey||t.shiftKey},addDropeffects:function(){if(this.targets)for(var t=0,e=this.targets.length;t<e;t++)$(this.targets[t]).attr({"aria-dropeffect":"move",tabindex:0});if(this.selections&&this.selections.items)for(var i=0,n=this.selections.items.length;i<n;i++)$(this.selections.items[i]).attr({"aria-grabbed":!0,tabindex:0})},clearDropeffects:function(){if(this.targets.attr({"aria-dropeffect":"none"}).removeAttr("tabindex"),this.selections&&this.selections.items)for(var t=0,e=this.selections.items.length;t<e;t++){var i=$(this.selections.items[t]);i.removeAttr("aria-grabbed".concat(i.is(":focus")?"":" tabindex"))}},clearSelections:function(){this.selections.items=[],this.selections.itemsData=[],this.selections.owner=null,this.selections.related=null,this.selections.droptarget=null,this.selections.isInSelection=null,this.selections.dragged=null,this.selections.placeholder=null,this.selections.placeholderTouch=null,$("ul, li",this.element).removeClass("over"),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove()},setSelectionsItems:function(t){t=this.isjQuery(t)?t:$(t,this.element);var e=$(".listview li",t),i=t.find(".listview").data("listview"),n=this.getDataList(t),s=!1;i&&i.filteredDataset&&(n=c(i.filteredDataset),s=!0);for(var a=0,r=e.length;a<r;a++){var o=$(e[a]),l=n[a];s&&(l.node=o,delete l._isFilteredOut),o.is(".is-selected")&&this.selections.itemsData.push(l)}},initDataset:function(){var t=this.settings,e=[{type:"available",dataset:t.available,class:t.availableClass},{type:"selected",dataset:t.selected,class:t.selectedClass},{type:"additional",dataset:t.additional,class:t.additionalClass}];this.dataset={available:[],selected:[]},this.isAdditional&&(this.dataset.additional=[]);for(var i=0,n=e.length;i<n;i++)for(var s=e[i],a=$("".concat(s.class," .listview li"),this.element),r=0,o=a.length;r<o;r++){var l=void 0,c=void 0,d=$(a[r]);s.dataset?delete(l=JSON.parse(JSON.stringify(s.dataset[r]))).selected:(l={text:$.trim($(".swaplist-item-content",d).text())},(c=d.attr("data-value"))&&(l.value=c)),this.dataset[s.type]&&(l.node=d,this.dataset[s.type].push(l))}},getDataList:function(t){var e=this.settings,i=this.dataset;return(t=this.isjQuery(t)?t:$(t,this.element)).is(e.additionalClass)?i.additional:t.is(e.selectedClass)?i.selected:t.is(e.availableClass)?i.available:[]},arrayIndexMove:function(t,e,i){t.splice(i,0,t.splice(e,1)[0])},syncDataset:function(t,e){var i=$(".listview li",e),n=t.find(".listview").data("listview"),s=e.find(".listview").data("listview"),a=this.getDataList(t),r=this.getDataList(e),o=function(t,e){if(t&&e){var i={owner:t.getAttribute("data-id"),item:e.getAttribute("data-id")};return void 0!==i.owner&&void 0!==i.item&&i.owner===i.item}return!1};if(t.is(e)){for(var l=[],c=0,d=i.length;c<d;c++)for(var h=i[c],u=0,p=a.length;u<p;u++){var g=a[u];if(o(g.node[0],h)){l.push(g);break}}a.splice(0,a.length);for(var f=0,m=l.length;f<m;f++)a.push(l[f])}else for(var v=0,b=this.selections.items.length;v<b;v++)for(var y=this.selections.items[v],w=!0,x=0,C=i.length;x<C&&w;x++)if($(i[x]).is(y))for(var k=0,T=a.length;k<T;k++){var S=a[k];if(o(S.node[0],y[0])){r.push(S),a.splice(k,1),this.arrayIndexMove(r,r.length-1,x),w=!1;break}}n.updated({dataset:a}),s.updated({dataset:r}),this.makeDraggable()},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},updateAttributes:function(t){for(var e=$("li",t),i=0,n=e.length;i<n;i++)$(e[i]).attr({"aria-posinset":i+1,"aria-setsize":n})},afterUpdate:function(t){var e=this.selections.droptarget.find("li:focus").index(),i=".card.".concat(this.selections.droptarget[0].classList[1]," li");t&&(this.selections.placeholder&&(t.select(this.selections.placeholder),this.selections.placeholder.focus()),this.unselectElements(t),this.syncDataset(this.selections.owner,this.selections.droptarget),this.updateAttributes($(".listview",this.selections.owner)),this.updateAttributes($(".listview",this.selections.droptarget)),this.selections.items.length&&(this.selections.move=$.extend(!0,this.selections.move,{to:this.getContainer([{node:this.selections.droptarget.find("li:first")}])}),this.element.triggerHandler("swapupdate",[this.selections.move]))),this.selections.items.forEach((function(t){t.show()})),this.clearDropeffects(),this.clearSelections(),this.items.removeClass("is-dragging is-dragging-touch"),e>=0&&this.element.find(i).eq(e).focus()},getItems:function(t){return t=this.isjQuery(t)?t:$(t,this.element),this.getDataList(t)},getAvailable:function(){return this.getDataList(this.settings.availableClass)},getSelected:function(){return this.getDataList(this.settings.selectedClass)},getAdditional:function(){return this.getDataList(this.settings.additionalClass)},draggedMakeSelected:function(t,e){var i=!1;if(!this.selections.isInSelection){if(t.selectedItems)for(var n=0,s=t.selectedItems.length;n<s;n++)if(e.is(t.selectedItems[n]))return i=!0,!1;i||(t.select(e),this.selections.isInSelection=!0)}return!0},updateDataset:function(t){for(var e=this.settings,i=[{type:"available",dataset:t.available,class:e.availableClass},{type:"selected",dataset:t.selected,class:e.selectedClass},{type:"additional",dataset:t.additional,class:e.additionalClass}],n=0,s=i.length;n<s;n++){var a=i[n],r=$("".concat(a.class," .listview"),this.element),o=r.data("listview");o&&(o.deselectItemsBetweenIndexes([0,$("li",r).length-1]),e[a.type]=a.dataset||[],o.loadData(e[a.type]))}this.initDataset(),this.makeDraggable(),this.initSelected(e.availableClass),this.initSelected(e.additionalClass)},unbind:function(){return this.actionButtons.off("click.swaplist"),this.containers.off("keydown.swaplist",".listview"),this.selectedButtons.off("keydown.swaplist"),this.element.off("keydown.swaplist",this.tabButtonsStr),this.element.off("".concat(this.dragStart," ").concat(this.dragEnterWhileDragging," ").concat(this.dragOverWhileDragging," ").concat(this.dragEnd),this.dragElements),$("#sl-placeholder-container, #sl-placeholder-touch, #sl-placeholder-touch2, #sl-placeholder").remove(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,_n)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"swaplist")},handleEvents:function(){var t=this,e=t.settings,i=t.selections;t.actionButtons.off("click.swaplist").on("click.swaplist",(function(){var i=$(this),n=i.closest(".card"),s=null;n.is(e.availableClass)?(s=e.draggable.selected?e.selectedClass:t.isAdditional&&e.draggable.additional?e.additionalClass:null,t.moveElements(e.availableClass,s)):n.is(e.additionalClass)?(s=e.draggable.selected?e.selectedClass:e.draggable.available?e.availableClass:null,t.moveElements(e.additionalClass,s)):n.is(e.selectedClass)&&(i.is(e.selectedBtnLeft)?t.moveElements(e.selectedClass,e.availableClass):i.is(e.selectedBtnRight)&&t.moveElements(e.selectedClass,e.additionalClass))})),t.containers.on("keydown.swaplist",".listview",(function(i){var n=$(this).closest(t.containers);77===(i=i||window.event).keyCode&&t.hasModifier(i)&&(!n.is(e.selectedClass)||n.is(e.selectedClass)&&1===t.selectedButtons.length?n.find(t.actionButtons).trigger("click.swaplist"):t.selectedButtons.first().focus(),i.preventDefault())})),t.selectedButtons.on("keydown.swaplist",(function(e){var i,n,s=$(this);13!==(e=e||window.event).keyCode&&32!==e.keyCode||(s.trigger("click.swaplist"),e.preventDefault()),(37===e.keyCode||39===e.keyCode)&&t.selectedButtons.length>1&&(i=t.selectedButtons.index(this),n=37===e.keyCode?i>0?i-1:t.selectedButtons.length-1:i<t.selectedButtons.length-1?i+1:0,t.selectedButtons[n].focus())})),t.element.on("keydown.swaplist",t.tabButtonsStr,(function(t){var e=$(this);if(9===(t.keyCode||t.which)&&!t.shiftKey){var i=e.closest(".card")[0],n=[].slice.call(i.querySelectorAll("li[tabindex]")),s=n.length,a=!1;if(s&&n.forEach((function(t){-1!==parseInt(t.getAttribute("tabindex"),10)&&(a=!0)})),!a){var r=i.querySelector("li");r&&r.setAttribute("tabindex",0)}}})),t.containers.on("filtered.swaplist",".listview",(function(){t.makeDraggable()})),t.element.on("mousedown.swaplist",t.dragElements,(function(e){t.handle&&$(e.target).closest("li").attr({draggable:$(e.target).is(".draggable")});e.stopPropagation()})).on(t.dragStart,t.dragElements,(function(n){if(n.stopImmediatePropagation(),!t.handle||i.isHandle){var s,a,r=$(n.target).closest("li"),o=$(".listview",r.closest(".card")).data("listview");if(o){t.isTouch||t.draggedMakeSelected(o,r),t.clearSelections(),i.owner=r.closest(".card"),i.dragged=r,i.draggedIndex=r.index(),i.placeholder=r.clone(!0),i.placeholder.attr("id","sl-placeholder"),t.setSelectionsItems(i.owner),i.items=o.selectedItems,t.selections.move={items:t.selections.itemsData,from:t.getContainer(t.selections.itemsData)};var l=t.element.triggerHandler("beforeswap",[t.selections.move]);if("boolean"==typeof l&&!l||"string"==typeof l&&"false"===l.toLowerCase())i.dragged=null;else{if($(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(i.items.length),$(".".concat(e.numOfSelectionsClass,"-text"),e.itemContentTempl).text(B.translate("ItemsSelected")),t.addDropeffects(),t.isTouch){s=r[0].getBoundingClientRect(),a=n.originalEvent.changedTouches[0],t.offset={x:a.pageX-s.left,y:a.pageY-s.top};for(var c=0,d=t.containers.length;c<d;c++)t.containers[c].style.zIndex="1";i.placeholderTouch=i.dragged.clone(!0),i.items.length>1&&!$("#sl-placeholder-touch2").length&&i.dragged.clone().addClass("is-dragging-touch").attr("id","sl-placeholder-touch2").insertBefore(i.dragged).hide(),i.placeholderTouch.attr("id","sl-placeholder-touch").removeClass("is-selected").hide(),(t.element.is(".one-third")&&t.isMaxWidth(766)?t.element.parent():t.element).prepend('<ul id="sl-placeholder-container"></ul>'),$("#sl-placeholder-container").append(i.placeholderTouch),$("#sl-placeholder-container")[0].style.width="".concat(i.owner.width(),"px"),$("#sl-placeholder-touch")[0].style.width="".concat(i.owner.width(),"px"),t.draggTouchElement(n,i.placeholderTouch)}else i.dragged.addClass("is-dragging"),n.originalEvent.dataTransfer.setData("text",""),i.items.length>1&&$(".".concat(e.itemContentClass),i.dragged).html(e.itemContentTempl.html());n.stopPropagation()}}}else n.stopPropagation()})).on(t.dragEnterWhileDragging,t.dragElements,(function(e){i.dragged&&(t.element.triggerHandler("draggingswap",[i.move]),i.related=e.target,$("ul, li",t.element).removeClass("over"),$(e.target).closest("ul, li").addClass("over"),i.droptarget=$(i.related).closest(".card"),$('[aria-grabbed="true"]',t.element).not(i.dragged).slideUp(),e.stopPropagation())})).on(t.dragOverWhileDragging,t.dragElements,(function(n){if(i.dragged){var s,a=$(this),r=$(".listview",i.dragged.closest(".card")).data("listview");if(t.isTouch){if(t.handle&&!i.isHandle)return;i.isInSelection||(t.draggedMakeSelected(r,i.dragged),i.items=r.selectedItems,$(".".concat(e.numOfSelectionsClass),e.itemContentTempl).html(i.items.length)),s=n.originalEvent.touches[0],a=t.getElementByTouchInList($("ul, li",t.element),s.pageX,s.pageY)||a,i.dragged.addClass("is-dragging"),i.placeholderTouch.addClass("is-dragging is-dragging-touch"),i.placeholderTouch.show(),$('[aria-grabbed="true"]',t.element).not(i.dragged).not(i.placeholderTouch).not("#sl-placeholder-touch2").slideUp(),i.items.length>1&&($(".".concat(e.itemContentClass),i.placeholderTouch.add("#sl-placeholder-touch2")).html(e.itemContentTempl.html()),$("#sl-placeholder-touch2").show(),i.dragged.hide()),t.draggTouchElement(n,i.placeholderTouch),t.element.triggerHandler("draggingswap",[i.move]),i.related=a,$("ul, li",this.element).removeClass("over"),a.closest("ul, li").addClass("over"),i.droptarget=i.related.closest(".card")}n.preventDefault(),n.stopPropagation()}})).on(t.dragEnd,t.dragElements,(function(n){if(i.dragged&&i.droptarget){var s=$(i.related).closest("li"),a=$("ul",i.droptarget),r=$("li",a).length,o=i.items.length+r;if(t.unselectElements($(".listview",i.owner).data("listview")),$.each(i.items,(function(t,e){if((e=$(e)).find("mark.highlight").contents().unwrap(),r&&!$(i.related).is("ul")){var n=s.index()<i.draggedIndex&&i.owner.is(i.droptarget),l=n?e:$(i.items[i.items.length-1-t]),c=s.index()+(n?t+1:t+2);e.attr({"aria-posinset":c,"aria-setsize":o}),s[n?"before":"after"](l)}else e.attr({"aria-posinset":r+t+1,"aria-setsize":o}),a.append(e);e.focus()})),i.items.length>1&&($(".".concat(e.itemContentClass),i.dragged).html($(".".concat(e.itemContentClass),i.placeholder).html()),t.isTouch&&i.dragged.show()),t.isTouch)for(var l=0,c=t.containers.length;l<c;l++)t.containers[l].style.zIndex="";t.makeDraggable(),i.isHandle=null,$('[aria-grabbed="true"]',t.element).show(),t.afterUpdate($(".listview",i.droptarget).data("listview")),n.preventDefault(),n.stopPropagation()}}))}},$.fn.swaplist=function(t){return this.each((function(){var e=$.data(this,"swaplist");e?e.updated(t):e=$.data(this,"swaplist",new Gn(this,t))}))};var Yn={scrollActionTarget:".js-scroll-target",classToAdd:"scrolled-down"};function Kn(t,e){this.settings=C.mergeSettings(t,e,Yn),this.element=$(t),this.init()}Kn.prototype={init:function(){this.handleEvents()},unbind:function(){var t=this.settings;return this.element.off("scroll.scrollaction"),t&&$(t.scrollActionTarget).removeClass(t.classToAdd),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Yn)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"scrollaction")},handleEvents:function(){var t=this,e=this.settings;this.lastScrollTop=0,this.element.on("scroll.scrollaction",(function(){var i=t.element.scrollTop();i>t.lastScrollTop?$(e.scrollActionTarget).addClass(e.classToAdd):$(e.scrollActionTarget).removeClass(e.classToAdd),t.lastScrollTop=i}))}},$.fn.scrollaction=function(t){return this.each((function(){var e=$.data(this,"scrollaction");e?e.updated(t):e=$.data(this,"scrollaction",new Kn(this,t))}))};var Xn={steps:null,completed:null,inProgress:null,iconType:null,completedText:null,extraText:"",completedColor:null,allCompletedColor:null,inProgressColor:null,attributes:null};function Qn(t,e){return this.init(t,e)}Qn.prototype={init:function(t,e){if(!this.element&&t instanceof HTMLElement&&(this.element=$(t)),"object"===i(e)||void 0===this.settings){var n=this.settings||Xn;this.settings=C.mergeSettings(this.element[0],e,n)}return this.render()},render:function(){var t=$('<div class="step-chart-steps"></div>'),e='\n      <svg class="icon {icon-name}" focusable="false" aria-hidden="true" role="presentation">\n        <use href="#icon-success"></use>\n      </svg>\n    ',i=null===this.settings.completed&&null===this.settings.steps;if(i&&(this.settings.completed=0,this.settings.steps=1),this.element.attr("data-options")&&(this.settings=C.parseSettings(this.element)),this.element.children().length>0)return this;for(var n=0;n<this.settings.steps;n++){var s=$('<div class="step-chart-step"></div>');C.addAttributes(s,this.settings,this.settings.attributes,"step".concat(n)),n<this.settings.completed&&(s.addClass("is-complete"),this.settings.completedColor&&s.css("background-color",this.settings.completedColor)),n===this.settings.inProgress-1&&(s.addClass("is-inprogress"),this.settings.inProgressColor&&s.css("background-color",this.settings.inProgressColor)),t.append(s)}var a=this.settings.completedText||B.translate("StepsCompleted");a=(a=a.replace("{0}",this.settings.completed)).replace("{1}",this.settings.steps),i&&(a=B?B.translate("NoData"):"No Data Available");var r=$('<span class="step-chart-label">'.concat(a,"</span>"));if(this.settings.steps===this.settings.completed&&(t.addClass("is-complete"),r.append(e.replace("{icon-name}","icon-success"))),this.settings.iconType&&r.append(e.replace("{icon-name}",this.settings.iconType)),this.settings.extraText){var o=this.settings.extraText;o=(o=(o="{1} Days Overdue"===(o="{0} Days Remaining"===o?B.translate("DaysRemaining"):o)?B.translate("DaysOverdue"):o).replace("{0}",this.settings.steps-this.settings.completed)).replace("{1}",this.settings.completed),r.append('<span class="step-chart-label-small">'.concat(o,"</span>"))}return this.element.append(r,t),this.settings.steps===this.settings.completed&&this.settings.allCompletedColor&&(t.find(".step-chart-step").css("background-color",this.settings.allCompletedColor),r.find(".icon").attr("style","fill: ".concat(this.settings.allCompletedColor,"!important"))),C.addAttributes(r,this.settings,this.settings.attributes,"label"),C.addAttributes(r.find(".icon"),this.settings,this.settings.attributes,"icon"),C.addAttributes(r.find(".step-chart-label-small"),this.settings,this.settings.attributes,"label-small"),this},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.element.empty(),this.render()},destroy:function(){return this.element.empty(),this.settings=null,$.removeData(this.element[0],"stepchart"),this}},$.fn.stepchart=function(t){return this.each((function(){var e=$.data(this,"stepchart");e?e.updated(t):(e=$.data(this,"stepchart",new Qn(this,t))).destroy=function(){this.teardown(),$.removeData(this,"stepchart")}}))};var Jn=["horizontal","vertical","module-tabs","header-tabs"],Zn={addTabButton:!1,addTabButtonCallback:null,appMenuTrigger:!1,appMenuTriggerText:void 0,appMenuTriggerTextAudible:!1,ajaxOptions:null,beforeActivate:void 0,containerElement:null,changeTabOnHashChange:!1,hashChangeCallback:null,lazyLoad:!0,moduleTabsTooltips:!1,multiTabsTooltips:!1,source:null,sourceArguments:{},tabCounts:!1,verticalResponsive:!1,attributes:null};function ts(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Zn),this.init()}ts.prototype={init:function(){return this.setup().build().setupEvents()},setup:function(){return this.tabsIndex=$(".tab-container").index(this.element),this.settings.multiTabsTooltips=this.element.closest(".multitabs-container").length>0,this},build:function(){var t,e=this,i=this,n=!1;(t=this.element.next(".tab-panel-container")).length||(t=this.element.children(".tab-panel-container"),this.isVerticalTabs()||(n=!0));var s=$("body > .page-container, .application-menu + .page-container");this.element.closest(".header").length>0&&s.length&&(t=s),this.element.next(".application-menu").length&&(t=this.element.next().next(".page-container"),n=!1),this.settings.containerElement&&$(this.settings.containerElement).length&&(t=$(this.settings.containerElement),n=!1),t&&t.length||(t=$('<div class="tab-panel-container"></div>'),n=!0),t[0].classList.contains("tab-panel-container")||t[0].classList.add("tab-panel-container"),n&&t.insertAfter(this.element),this.container=t;var a=this.element.children(".tab-list-container");!a.length&&this.isScrollableTabs()&&(a=$('<div class="tab-list-container"></div>').prependTo(this.element)),a.length&&(this.tablistContainer=a);var r=!0,o=this.element.closest(".header");Jn.forEach((function(t,i){e.element.hasClass(Jn[i])&&(r=!1)})),r&&(o.length?i.element.addClass("header-tabs"):i.element.addClass("horizontal")),i.settings.tabCounts&&i.element.addClass("has-counts"),this.tablist=this.element.children(".tab-list"),this.tablist.length||(this.tablistContainer&&(this.tablist=this.tablistContainer.children(".tab-list")),this.tablist.length||(this.tablist=$('<ul class="tab-list"></ul>'),this.tablistContainer?this.tablist.appendTo(this.tablistContainer):this.tablist.appendTo(this.element))),this.tablistContainer&&(this.tablist.parent().is(this.tablistContainer)||this.tablistContainer.append(this.tablist),this.tablistContainer.on("mousewheel.tabs",(function(t){t.deltaY&&(this.scrollLeft+=t.deltaY)}))),i.tablist.attr({class:"tab-list",role:"tablist","aria-multiselectable":"false"}),this.checkResponsive(!1),this.renderHelperMarkup(),i.anchors=i.tablist.children("li:not(.separator)").children("a"),i.anchors.each((function(){var t,e=$(this),n=e[0].textContent.toLowerCase().trim().split(" ").join("-");e.attr({role:"tab","aria-expanded":"false","aria-selected":"false",tabindex:"0"}).parent().attr("role","presentation").addClass("tab"),e.parent().hasClass("dismissible")&&!e.parent().children(".icon").length&&(t=$.createIconElement({icon:"close",classes:"icon close"})).insertAfter(e),i.settings.attributes&&(C.addAttributes(e,i,i.settings.attributes,"".concat(n,"-a")),t&&C.addAttributes(t,i,i.settings.attributes,"".concat(n,"-close-btn")));var s=e.nextAll("ul").first();s.length>0&&(s.addClass("dropdown-tab"),e.parent().addClass("has-popupmenu").popupmenu({menu:s,trigger:"click",attachToBody:!0,attributes:i.settings.attributes}),e.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected"),e.parent().children(".icon.icon-more").length||$.createIconElement({classes:"icon-more",icon:"dropdown"}).insertAfter(e));i.settings.tabCounts&&0===$(this).find(".count").length&&$(this).prepend('<span class="count">0 </span>'),(i.settings.moduleTabsTooltips||i.settings.multiTabsTooltips)&&e.on("beforeshow.toolbar",(function(){return"yes"===e.data("cutoffTitle")})).tooltip({content:"".concat(e.text().trim())})})),i.panels=$(),i.anchors.each((function(){var t,e=$(this),n=e.parent(),s=n.data("popupmenu"),a=e.attr("href");if("#"===a.substr(0,1)){if("#/"===a.substr(0,2)&&(a=a.replace("#/","#")),void 0!==a&&"#"!==a){if(t=$(a),n.is(":not(.has-popupmenu)")&&!t.length)return;if(i.settings.attributes){var r=e[0].textContent.toLowerCase().trim().split(" ").join("-");C.addAttributes(t,i,i.settings.attributes,"".concat(r,"-panel"))}e.data("panel-link",t),t.data("tab-link",e),i.panels=i.panels.add(t)}s&&s.menu.children("li").each((function(){var t=$(this),e=t.children("a"),n=e.attr("href"),s=$(n);if(e.data("panel-link",s),s.data("tab-link",e),i.panels=i.panels.add(s),i.anchors=i.anchors.add(e),t.hasClass("dismissible")){var a=t.children(".icon");a.length||(a=$.createIconElement({icon:"close",classes:"icon close"})),a.detach().appendTo(e)}})).on("click.popupmenu",".icon",(function(t){var e=$(this),n=e.closest("li");n.is(".dismissible")&&e.is(".icon")&&(t.preventDefault(),t.stopPropagation(),i.closeDismissibleTab(n.children("a").attr("href")))}))}})),i.panels.addClass("tab-panel").attr({role:"tabpanel"}).find("h3:first").attr("tabindex","0"),i.panels.each((function(){var t=$(this);t.parent().is(i.container)||i.container.append(t)}));var l,c,d=":not(.separator):not(.is-disabled):not(.is-hidden)",h=this.tablist.children("li".concat(d)),u=this.tablist.children("li.is-selected".concat(d)),p=u.children("a");return i.nestedTabControls=i.panels.find(".tab-container"),h.length&&(this.settings.changeTabOnHashChange&&(l=window.location.hash)&&l.length&&(c=h.find('a[href="'.concat(l,'"]'))).length&&(p=(u=c.first().parent()).children("a")),u.length||(p=(u=h.not(".add-tab-button, .application-menu-trigger").first()).children("a")),u.length&&this.activate(p.attr("href"),p)),this.isModuleTabs()&&this.element.children(".toolbar").length&&this.element.addClass("has-toolbar"),this.setOverflow(),this.positionFocusState(p),this.hasAnimatedBar()&&(this.animatedBar.addClass("no-transition"),this.focusBar(void 0,(function(){setTimeout((function(){e.animatedBar.removeClass("no-transition")}),0)}))),this.tablistContainer&&(this.tablistContainer.on("scroll.tabs",(function(){e.renderEdgeFading()})),this.renderEdgeFading()),"undefined"!=typeof ResizeObserver&&(this.ro=new ResizeObserver((function(){$("body").triggerHandler("resize")})),this.ro.observe(this.element[0]),this.containerElement&&this.ro.observe(this.containerElement[0])),this},renderHelperMarkup:function(){var t,e,i=this.tablistContainer||this.tablist;this.isModuleTabs()&&(i=this.tablist),this.focusState=this.element.find(".tab-focus-indicator"),this.focusState.length||(this.focusState=$('<div class="tab-focus-indicator" role="presentation"></div>').insertBefore(this.tablist)),this.hasAnimatedBar()?(this.animatedBar=this.element.find(".animated-bar"),this.animatedBar.length||(this.animatedBar=$('<div class="animated-bar" role="presentation"></div>')),this.animatedBar.insertBefore(this.tablist)):this.animatedBar&&this.animatedBar.length&&(this.animatedBar.off().removeData().remove(),this.animatedBar=void 0),this.moreButton||(this.moreButton=$()),this.isVerticalTabs()?this.moreButton.length&&(this.moreButton.off().removeData().remove(),this.moreButton=$()):(this.moreButton.length||(this.moreButton=i.next(".tab-more")),this.moreButton.length||(this.moreButton=$("<div>").attr({class:"tab-more"}),this.moreButton.append($('<span class="more-text">').text(B.translate("More"))),this.moreButton.append($.createIconElement({classes:"icon-more",icon:"dropdown"}))),i.after(this.moreButton)),null!==(t=this.moreButton)&&void 0!==t&&(null==t?void 0:t.length)&&this.settings.attributes&&C.addAttributes(this.moreButton,this,this.settings.attributes,"btn-more");var n=this.tablist.find(".application-menu-trigger");if(!0===this.settings.appMenuTrigger)if(this.isModuleTabs()){if(!n.length){var s=this.settings.appMenuTriggerTextAudible?' class="audible"':"";n=$('\n            <li class="tab application-menu-trigger">\n              <a href="#">\n                <span class="icon app-header">\n                  <span class="one"></span>\n                  <span class="two"></span>\n                  <span class="three"></span>\n                </span>\n                <span'.concat(s,">").concat(this.settings.appMenuTriggerText||B.translate("AppMenuTriggerText"),"</span>\n              </a>\n            </li>\n          ")),this.tablist.prepend(n)}}else this.isVerticalTabs()&&n.length&&n.off().removeData().remove();else n.length&&(this.isVerticalTabs()?n.off().removeData().remove():this.tablist.prepend(n));n.length&&(this.settings.attributes&&C.addAttributes(n,this,this.settings.attributes,"appmenu-trigger-btn"),$("#application-menu").data("applicationmenu").modifyTriggers([n.children("a")])),this.settings.addTabButton?this.addTabButton&&this.addTabButton.length||(this.addTabButton=$('\n          <div class="add-tab-button" tabindex="0" role="button">\n            <span aria-hidden="true" role="presentation">+</span>\n            <span class="audible">'.concat(B.translate("AddNewTab"),"</span>\n          </div>\n        ")),this.addTabButton.insertAfter(this.moreButton),this.element.addClass("has-add-button")):this.addTabButton&&this.addTabButton.length&&(this.addTabButton.off().removeData().remove(),this.addTabButton=void 0,this.element.removeClass("has-add-button")),null!==(e=this.addTabButton)&&void 0!==e&&(null==e?void 0:e.length)&&this.settings.attributes&&C.addAttributes(this.addTabButton,this,this.settings.attributes,"btn-add");var a=this.element.find(".more-actions-button .btn-actions");return a.length&&(this.moreActionsBtn=a),this},setupEvents:function(){var t=this,e=this,i=e.element.closest(".modal");return i.length&&i.on("afteropen.tabs",(function(){if(e.hasAnimatedBar()){var t=$(".tab.is-selected");e.focusBar(t)}})),this.tablist.on("mousedown.tabs","> li",(function(t){if(e.handleAddFocusData(t,$(this)),$(t.target).hasClass("close")&&$(t.target).parent().hasClass("has-popupmenu")){var i=$(this).data("popupmenu").menu,n=[];$.each(i[0].children,(function(t,e){n.push(e.children[0].href)})),e.closeDismissibleTabs(n)}return 3!==t.which&&e.handleTabClick(t,$(this))})).on("click.tabs","a",(function(t){var e=$(t.currentTarget);!0!==this.wasTapped?("touchend"===t.type&&(this.wasTapped=!0),"#"===e.attr("href").substr(0,1)&&t.preventDefault()):this.wasTapped=!1})).on("click.tabs",".icon",(function(t){var i=$(this);if(!i.is("[disabled]")&&!i.parent().hasClass("is-disabled")){var n=$(i).parent();n.hasClass("dismissible")&&(t.preventDefault(),t.stopPropagation(),e.closeDismissibleTab(n.children("a").attr("href")))}})).on("focus.tabs","a",(function(t){return e.handleTabFocus(t,$(this))})).on("blur.tabs","a",(function(){$(this).parent().removeClass("is-focused")})).on("keydown.tabs","a",(function(e){return t.handleTabKeyDown(e)})),e.tablist.find("li").filter(".has-popupmenu").each((function(t,i){var n=$(i),s=n.children("a");function a(t){t.altKey&&n.is(".dismissible")&&e.closeDismissibleTab(s.attr("href"))}n.data("popupmenu").menu.on("keydown.popupmenu","a",(function(t){switch(t.which){case 27:n.addClass("is-selected"),s.focus();break;case 8:case 46:a(t)}})),n.on("selected.tabs",(function(t,i){var n=$(this),a=$(i).attr("href");return!!e.activate(a,$(i))&&(e.positionFocusState(s),e.hasAnimatedBar()&&e.focusBar(n),s.focus(),e.scrollTabList(n),n.addClass("is-selected"),!1)}))})),e.tablist.find("li").filter(".dismissible").each((function(t,i){$(i).children("a").on("keydown.tabs",(function(t){e.handleDismissibleTabKeydown(t)}))})),this.setupHelperMarkupEvents(),this.panels.on("keydown.tabs",(function(t){e.handlePanelKeydown(t)})),this.element.on("focusout.tabs",(function(){var t=!$.contains(e.element[0],document.activeElement),i=0===e.tablist.children(".has-popupmenu.is-open").length;t&&i&&!e.moreButton.is(".is-selected, .popup-is-open")&&e.hideFocusState()})).on("updated.tabs",(function(t,i){e.updated(i)})).on("activated.tabs",(function(t){t.stopPropagation()})).on("add.tabs",(function(t,i,n,s){e.add(i,n,s)})).on("remove.tabs",(function(t,i){e.remove(i)})),$("body").on("resize.tabs".concat(this.tabsIndex),(function(){e.handleResize()})),e.handleResize(!0),$(".tab-panel input").on("error.tabs, valid.tabs",(function(){var t=$(".tab.is-selected");e.focusBar(t)})),this},setupHelperMarkupEvents:function(){var t,e=this;this.moreButton.on("click.tabs",(function(t){e.handleMoreButtonClick(t)})).on("keydown.tabs",(function(t){e.handleMoreButtonKeydown(t)})).on("focus.tabs",(function(t){e.handleMoreButtonFocus(t)})).on("mousedown.tabs",(function(t){e.handleAddFocusData(t,$(this))})),this.settings.addTabButton&&this.addTabButton.on("click.tabs",(function(){e.handleAddButton()})).on("keydown.tabs",(function(t){e.handleAddButtonKeydown(t)})).on("focus.tabs",(function(t){e.handleAddButtonFocus(t)})),null!==(t=this.moreActionsBtn)&&void 0!==t&&(null==t?void 0:t.length)&&this.moreActionsBtn.on("keydown.tabs",(function(t){e.handleMoreActionsButtonKeydown(t)}))},removeHelperMarkupEvents:function(){return this.moreButton&&this.moreButton.length&&this.moreButton.off("click.tabs keydown.tabs focus.tabs mousedown.tabs"),this.addTabButton&&this.addTabButton.length&&this.addTabButton.off("click.tabs keydown.tabs focus.tabs"),this},handleAddFocusData:function(t,e){var i=e;return i.is(".is-disabled")?(t.preventDefault(),!1):(i.is(this.moreButton)||(i=i.children("a")),this.hideFocusState(),i.data("focused-by-click",!0),!0)},handleTabClick:function(t,e){if(this.element.is(".is-disabled")||e&&(e.is(".is-disabled")||e.is(".separator")))return t.stopPropagation(),t.preventDefault(),!1;if(!this.handleAppMenuTabKeydown(t))return!0;var i=e.children("a");if(i.data("focused-by-click",!0),this.popupmenu&&this.popupmenu.element.hasClass("is-open")&&this.popupmenu.close(),e.is(".has-popupmenu"))return this.positionFocusState(i),!0;var n=i.attr("href");return e.is(".add-tab-button")&&(e=(i=this.handleAddButton()).parent(),n=i.attr("href"),this.element.trigger("tab-added",[i])),2===t.which?(e.is(".dismissible")&&$(t.target).is(".close")&&this.closeDismissibleTab(n),t.preventDefault(),!0):!this.activate(n,i)||(this.changeHash(n),this.focusState.removeClass("is-visible"),i.focus(),this.isScrollableTabs()&&this.scrollTabList(e),this.focusBar(e),this.positionFocusState(i),!0!==this.settings.lazyLoad||!this.isURL(n))},handleMoreButtonClick:function(t){return this.element.is(".is-disabled")||this.moreButton.is(".is-disabled")?(t.preventDefault(),t.stopPropagation(),!1):(this.moreButton.data("focused-by-click",!0),this.hasMoreButton()||t.stopPropagation(),this.moreButton.hasClass("popup-is-open")?(this.popupmenu.close(),this.moreButton.removeClass("popup-is-open")):this.buildPopupMenu(),this.hideFocusState(),!0)},hasMoreActions:function(){var t=this.element.find(".more-actions-button > .btn-actions");return t&&t.length>0},handleMoreActionsButtonKeydown:function(t){if(this.element.is(".is-disabled")||this.moreActionsBtn.is(".is-disabled"))return t.stopPropagation(),t.preventDefault(),!1;var e=this;var i,n,s=this.addTabButton&&this.addTabButton.length,a=this.tablist.children("li".concat(":not(.separator):not(.is-disabled):not(:hidden)"));switch(t.which){case 37:case 38:if(s)this.addTabButton.focus();else{var r=this.findLastVisibleTab();this.hasMoreButton()?(n=r.attr("href"),t.preventDefault(),setTimeout((function(){e.buildPopupMenu(n),e.positionFocusState(e.moreButton,!0)}),0)):i=r}break;case 39:case 40:i=a.first()}return i&&(t.preventDefault(),i.children("a").focus(),this.isScrollableTabs()&&this.scrollTabList(i)),!0},handleTabFocus:function(t,e){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var i=e.parent(),n=e.data("focused-by-click"),s=void 0===n||n&&!1===n;return $.removeData(e[0],"focused-by-click"),this.isTabOverflowed(i)?(this.buildPopupMenu(e.attr("href")),this.moreButton.addClass("is-focused"),this.positionFocusState(this.moreButton)):(i.addClass("is-focused"),this.positionFocusState(e,s)),!0},handleMoreButtonFocus:function(t){if(this.element.is(".is-disabled"))t.preventDefault();else{var e=this.moreButton.data("focused-by-click"),i=e&&!1===e;$.removeData(this.moreButton[0],"focused-by-click"),this.focusState.removeClass("is-visible"),this.positionFocusState(this.moreButton,i)}},handleTabKeyDown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey&&8!==t.which)return!0;var e=this,i=[8,13,32];function n(){return $.inArray(t.which,i)>-1}if(t.which<32&&!n()||t.which>46)return!0;if(n()&&!this.handleAppMenuTabKeydown(t))return!0;function s(i){t.preventDefault(),setTimeout((function(){e.buildPopupMenu(i)}),0)}var a,r=":not(.separator):not(.is-disabled):not(:hidden)",o=$(t.currentTarget).parent(),l=o.children("a"),c=e.tablist.children("li".concat(r)),d=B.isRTL();function h(){for(var t=c.index(o)-1;t>-1&&!a;){if(c.eq(t).is(r))return c.eq(t);t-=1}if(e.hasMoreActions())return e.moreActionsBtn;if(e.settings.addTabButton)return e.addTabButton;var i=e.tablist.children("li".concat(r)).last();return e.hasMoreButton()&&e.isScrollableTabs()&&s(i.find("a").attr("href")),i}function u(){for(var t=c.index(o)+1;t<c.length&&!a;){if(c.eq(t).is(r))return c.eq(t);t++}var i=e.tablist.children("li".concat(r)).first();return e.hasMoreButton()&&e.isScrollableTabs()?(s(i.find("a").attr("href")),i):e.settings.addTabButton?e.addTabButton:e.hasMoreActions()?e.moreActionsBtn:i}function p(){if(o.hasClass("has-popupmenu"))o.data("popupmenu").open();else{var t=l.attr("href");o.is(".add-tab-button")&&(l=e.handleAddButton(),o=l.parent(),t=l.attr("href"),e.element.trigger("tab-added",[l])),e.activate(t)&&(e.changeHash(t),e.focusBar(o),(l.attr("ng-click")||l.attr("data-ng-click"))&&l.click(),l[0].focus(),e.hideFocusState(),e.handleOutboundLink(t))}}switch(t.which){case 8:return t.altKey&&o.is(".dismissible")&&(t.preventDefault(),e.closeDismissibleTab(l.attr("href"))),!0;case 13:case 32:return p(),!1;case 38:a=h(),t.preventDefault();break;case 37:a=d?u():h(),t.preventDefault();break;case 40:a=u(),t.preventDefault();break;case 39:a=d?h():u(),t.preventDefault()}if(a){var g=a.is(".add-tab-button"),f=a.is(".btn-actions"),m=g||f?a:a.children("a");if(this.isTabOverflowed(a))return s(a.children("a").attr("href"));g?e.addTabButton.focus():f?e.moreActionsBtn.focus():(m.focus(),this.isScrollableTabs()&&(this.scrollTabList(m),e.positionFocusState(m,!0)))}return!0},handleDismissibleTabKeydown:function(t){var e=t.which,i=$(t.target);if(i.is("a")&&(i=i.parent()),t.altKey&&46===e){if(i.children("a").is("[disabled]")||i.hasClass("is-disabled"))return;t.preventDefault(),this.closeDismissibleTab(i.children("a").attr("href"))}},handleAppMenuTabKeydown:function(t){var e=$(t.target);if(!e.parent().is(".application-menu-trigger")&&!e.is(".application-menu-trigger"))return!0;var i=$("#application-menu");return!!i.length&&(t.preventDefault(),this.hideFocusState(),i.hasClass("is-open")?(i.trigger("close-applicationmenu"),!1):(i.trigger("open-applicationmenu"),!1))},handleMoreButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=this,i=B.isRTL();function n(){t.preventDefault(),e.buildPopupMenu(e.tablist.find(".is-selected").children("a").attr("href")),e.positionFocusState(e.moreButton,!0)}function s(){t.preventDefault(),e.findLastVisibleTab()}switch(t.which){case 37:if(i){n();break}s();break;case 38:s();break;case 13:case 32:t.preventDefault();break;case 39:if(i){s();break}n();break;case 40:n()}return!0},handlePanelKeydown:function(t){var e=t.which,i=$(t.target),n=this.anchors.filter("#".concat(i.attr("id")));return this.anchors.filter("#".concat(i.attr("id"))).parent().is(".dismissible")&&t.altKey&&46===e?(t.preventDefault(),this.closeDismissibleTab(n.attr("href"))):t.ctrlKey&&38===e&&$.contains(document.activeElement,i[0])?(t.preventDefault(),this.activate(n.attr("href"),n)):void 0},handleAddButton:function(){var t=this,e=this.settings.addTabButtonCallback;if(e&&"function"==typeof e){var n=e();return this.anchors.filter('[href="#'.concat(n,'"]'))}var s,a=this.tablist.children().index(this.addTabButton),r=(t.idCounter="number"==typeof t.idCounter?t.idCounter:-1,t.idCounter++,"new-tab-".concat(t.idCounter)),o={name:((s=r.toString().split("-")).forEach((function(t,e){s[e]=t.charAt(0).toUpperCase()+t.slice(1)})),s.join(" ")),content:"&nbsp;",isDismissible:!0};a<0&&(a=this.tablist.find("li:not(.separator)").length);var l=this.element.triggerHandler("before-tab-added",[r,o,a]);return l?(l.newId&&l.newId.length&&"string"==typeof l.newId&&(r=l.newId),l.settings&&"object"===i(l.settings)&&(o=l.settings),isNaN(l.newIndex)||(a=l.newIndex),this.add(r,o,a),this.anchors.filter('[href="#'.concat(r,'"]'))):(this.add(r,o,a),this.anchors.filter('[href="#'.concat(r,'"]')))},handleAddButtonKeydown:function(t){if(this.element.is(".is-disabled"))return t.preventDefault(),!1;var e=t.which;if([13,32,37,38,39,40].indexOf(e)<0)return!1;var i,n=this,s=B.isRTL(),a="li:not(.separator):not(.is-disabled):not(:hidden)";function r(){t.preventDefault(),i=n.tablist.find(a).last(),setTimeout((function(){n.buildPopupMenu(i.children("a").attr("href")),n.positionFocusState(n.moreButton,!0)}),0)}function o(){n.hasMoreActions()?n.moreActionsBtn.focus():i=n.tablist.find(a).first()}switch(e){case 37:if(s){o();break}r();break;case 38:r();break;case 13:case 32:return t.preventDefault(),this.handleAddButton();case 39:if(s){r();break}o();break;case 40:o()}return i&&(i.children("a").focus(),this.isScrollableTabs&&(t.preventDefault(),this.scrollTabList(i))),!0},handleAddButtonFocus:function(){this.tablist.find("li:not(.separator)").add(this.moreButton).removeClass("is-focused"),this.addTabButton.addClass("is-focused"),this.positionFocusState(this.addTabButton,!0)},handleResize:function(t){t||this.checkResponsive(!0),this.setOverflow();var e=this.tablist.find(".is-selected");(!e.length||this.moreButton.is(".is-selected")||this.isTabOverflowed(e))&&(e=this.moreButton),e.length?(this.focusBar(e),this.positionFocusState(e)):(this.defocusBar(),this.hideFocusState()),this.handleVerticalTabResize(),this.renderVisiblePanel(),this.renderEdgeFading()},checkResponsive:function(t){var e=this,i=e.element[0].classList;function n(){e.removeHelperMarkupEvents(),e.renderHelperMarkup(),e.setupHelperMarkupEvents()}function s(){i.contains("is-in-responsive-mode")&&(i.add("vertical"),i.remove("is-in-responsive-mode"),i.remove("header-tabs"),i.remove("alternate"),t&&n())}this.isResponsiveVerticalTabs()&&p.isBelow("phone-to-tablet")?i.contains("is-in-responsive-mode")||(i.add("is-in-responsive-mode"),i.add("header-tabs"),i.contains("is-personalizable")||i.add("alternate"),i.remove("vertical"),t&&n()):s()},handleVerticalTabResize:function(){if(this.isVerticalTabs()&&this.isNested()&&!this.isNestedInLayoutTabs()&&!this.isHidden()){var t=window.getComputedStyle(this.element[0]),e=t.getPropertyValue("height")+t.getPropertyValue("margin-top")+t.getPropertyValue("margin-bottom");this.tablist[0].style.height=e}},handleOutboundLink:function(t,e){"#"!==t.charAt(0)&&("/"!==t.charAt(0)||e&&!1!==e||(t=window.location.origin+t),window.location=t)},hasAnimatedBar:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},hasMoreButton:function(){return this.element[0].classList.contains("has-more-button")},isInResponsiveMode:function(){return this.element[0].classList.contains("is-in-responsive-mode")},isModuleTabs:function(){return this.element.hasClass("module-tabs")},isVerticalTabs:function(){return this.element.hasClass("vertical")},isResponsiveVerticalTabs:function(){return!0===this.settings.verticalResponsive},isHeaderTabs:function(){return this.element.hasClass("header-tabs")},isScrollableTabs:function(){return!this.isModuleTabs()&&!this.isVerticalTabs()},isHidden:function(){return this.element.is(":hidden")},isNested:function(){return this.element.closest(".tab-panel").length},isActive:function(t){return!(!t||!t.length||1===t.length&&t.indexOf("#")<1)&&this.getPanel(t)[0].classList.contains("can-show")},isNestedInLayoutTabs:function(){var t=this.element.closest(".module-tabs").length,e=this.element.closest(".header-tabs").length,i=this.element.closest(".tab-panel-container").length;return t>0||e>0||i>0},isTab:function(t){return t instanceof jQuery&&t.length&&t.is("li.tab")},isAnchor:function(t){return t instanceof jQuery&&t.length&&t.is("a")},getAnchor:function(t){return this.isAnchor(t)?t:(-1===t.indexOf("#")&&"/"!==t.charAt(0)&&(t="#".concat(t)),this.anchors.filter('[href="'.concat(t,'"]')))},getPanel:function(t){return this.isTab(t)&&(t=t.children("a")),this.isAnchor(t)&&(t=t.attr("href")),t&&""!==t&&"#"!==t?("#/"===t.substr(0,2)&&(t=t.replace("#/","#")),this.panels.filter('[id="'.concat(t.replace(/#/g,""),'"]'))):$()},getMenuItem:function(t){return this.isAnchor(t)&&(t=t.attr("href")),-1===t.indexOf("#")&&(t="#".concat(t)),this.moreMenu.children().children().filter('[data-href="'.concat(t,'"]')).parent()},getPreviousTab:function(t){for(var e=this.getTab(null,t),i="li:not(.separator):not(:hidden):not(.is-disabled)",n=this.tablist.find(i),s=n.index(e),a=n.eq(0===s?1:s-1);a.length&&!a.is(i);)a=n.eq(n.index(a)-1);if(a.is(".has-popupmenu")){var r=a.data("popupmenu");r&&(a=r.menu.children("li").first())}return a},activateAdjacentTab:function(t,e){var i=this.doGetTab(t,e);"string"==typeof t&&(e=t),i.is(".is-selected")?i.prevAll("li.tab").not(".hidden").not(".is-disabled").length>0?this.select($(i.prevAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):i.nextAll("li.tab").not(".hidden").length>0&&this.select($(i.nextAll("li.tab").not(".hidden").not(".is-disabled")[0]).find("a")[0].hash,!0):this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash,!0)},activatePreviousTab:function(t,e){var i=this.getTab(null,t);if(e&&e instanceof jQuery||(e=this.getPreviousTab(t)),!e.length)return this.hideFocusState(),this.defocusBar(),e;var n=e.children("a");if(i.is(".is-selected")){if(!this.activate(n.attr("href"),n))return e;n.focus()}return this.positionFocusState(n),this.focusBar(e),e},isURL:function(t){return!(!t||0===t.indexOf("#"))},activate:function(t,e){var i=this;if(i.isURL(t))return this.callSource(t,e,!0);for(var n,s,a,r=i.getAnchor(t),o=r.parent(),l=i.getPanel(t),c=l[0],d=i.anchors.parents().filter(".is-selected"),h=0;h<i.panels.length;h++)i.panels[h].classList.contains("is-visible")&&(n=$(i.panels[h]));if(n||(n=i.panels),!i.element.trigger("beforeactivated",[r]))return!1;function u(e){if(l.length<1){if(i.settings.source)return i.callSource(t,r),!0}else{n[0].classList.remove("can-show"),n[0].classList.remove("is-visible"),n.closeChildren(),i.element.trigger("activated",[r]),c.classList.add("can-show"),i.renderVisiblePanel(),c.offsetHeight;var h=new U({duration:S.convertDelayToFPS(150),timeoutCallback:function(){i.element.trigger("afteractivated",[r])}});G.register(h),c.classList.add("is-visible")}i.updateAria(r),d.add(i.moreButton).removeClass("is-selected"),o[0]&&o[0].classList.contains("tab")&&(s=o,a=o);var u,p=o.parents(".popupmenu");p.length&&(u=p.data("trigger")).length&&(s=u,a=u),i.isTabOverflowed(a)&&(a=i.moreButton,s=i.moreButton),i.focusBar(a),s&&s.addClass("is-selected");var g=l.find(".toolbar");return g.length&&g.each((function(){var t=$(this).data("toolbar");t&&"function"==typeof t.handleResize&&t.handleResize()})),C.fixSVGIcons(l[0]),e||!1}return this.settings.beforeActivate&&"function"==typeof this.settings.beforeActivate?this.settings.beforeActivate(d,o,u):u(!0)},renderEdgeFading:function(){if(this.isScrollableTabs()&&this.tablistContainer){var t=B.isRTL(),e=this.tablistContainer[0],i=e.scrollLeft,n=e.scrollWidth,s=parseInt(window.getComputedStyle(e).getPropertyValue("width"),10);t?(this.element[0].classList[i>0?"add":"remove"]("scrolled-left"),this.element[0].classList[n-i<=s?"remove":"add"]("scrolled-right")):(this.element[0].classList[i>0?"add":"remove"]("scrolled-right"),this.element[0].classList[n-i<=s?"remove":"add"]("scrolled-left"))}},callSource:function(t,e,n){var s=this;if((null==n||!1===n)&&!this.settings.source)return!1;if(!0!==this.settings.lazyLoad)return!1;var a=i(this.settings.source),r=function(i){if(null!=i){if(i=h.sanitizeHTML(i),n){var a=s.element[0].id||"",r=C.uniqueId(e,"tab",a);t="#".concat(r),e[0].setAttribute("href",t)}s.createTabPanel(t,i,!0),s.activate(t),s.element.triggerHandler("complete"),s.element.trigger("requestend",[t,i])}};function o(t,e){var i=$.extend({dataType:"html"},e,{url:t}),n=$.ajax(i);return n.done(r),n}if(this.container.triggerHandler("start"),this.container.trigger("requeststart"),n)return o(t,this.ajaxOptions);if("function"===a)return this.settings.source(r,t,this.settings.sourceArguments);if("string"===a){var l=t.replace(/#/g,""),c=this.settings.source.toString();if(!(c.indexOf(l)>-1)){var d="tab=".concat(l),u=c.indexOf("?"),p=c.indexOf("#"),g=c.length;u<0?(d="?".concat(d),p>-1&&(g=p+1)):(d+="&",g=u+1),c=E.splice(c,g,0,d)}return o(c,this.ajaxOptions)}return!1},renderVisiblePanel:function(){this.resizeNestedTabs()},changeHash:function(t){if(this.settings.changeTabOnHashChange){t||(t=""),t.replace(/#/g,"");var e=this.settings.hashChangeCallback;e&&"function"==typeof e?e(t):window.location.hash=t,this.element.triggerHandler("hash-change",[t])}},updateAria:function(t){t&&(this.anchors.attr({"aria-selected":"false","aria-expanded":"false",tabindex:"0"}),this.moreButton.attr({tabindex:"0"}),t.length&&this.element.is(":not(.is-disabled)")&&(t.parent().removeClass("is-selected"),this.isTabOverflowed(t.parent())?this.moreButton.attr({tabindex:"0"}):t.attr({"aria-selected":"true","aria-expanded":"true",tabindex:"0"}).parent().addClass("is-selected")))},resizeNestedTabs:function(){this.nestedTabControls.each((function(t,e){var i=$(e).data("tabs");i&&i.handleResize&&"function"==typeof i.handleResize&&i.handleResize(!0)}))},add:function(t,e,n){if(!t)return this;e||(e={});var s=0===this.tablist.find("li").not(".application-menu-trigger, .add-tab-button").length;function a(t){switch(i(t)){case"string":if(null!==t.match(/^#/g)){var e=$(t);t=e.length?e:t}}return t}t="".concat(t.replace(/#/g,"")),e.name=e.name?e.name.toString():"&nbsp;",e.isDismissible=!!e.isDismissible&&!0===e.isDismissible,e.isDropdown=!!e.isDropdown&&!0===e.isDropdown,e.content&&(e.content=a(e.content)),e.dropdown&&(e.dropdown=a(e.dropdown));var r,o=$('<li role="presentation" class="tab"></li>'),l=$('<a href="#'.concat(t,'" role="tab" aria-expanded="false" aria-selected="false" tabindex="0">').concat(h.escapeHTML(e.name),"</a>")),c=this.createTabPanel(t,e.content);o.html(l),e.isDismissible&&(r=$.createIconElement({icon:"close",classes:"close icon"}),C.addAttributes(r,this,e.attributes,"close-btn"),o.addClass("dismissible"),o.append(r)),this.settings.tabCounts&&l.prepend('<span class="count">0 </span>'),e.dropdown;var d=this.settings.attributes||[];if(Array.isArray(e.attributes)&&(d=d.concat(e.attributes)),d.length&&(C.addAttributes(l,this,d,"".concat(t,"-a")),C.addAttributes(c,this,d,"".concat(t,"-panel"))),function(t,e){var i,n=t.tablist.children("li"),s=n.not(".application-menu-trigger, .add-tab-button"),a=n.length-1;if(!n.length)return o.appendTo(t.tablist),void c.appendTo(t.container);var r=n.filter(".add-tab-button"),l=n.filter(".application-menu-trigger");(null==e||isNaN(e))&&(e=n.length),n.length>s.length&&(e>n.length-1&&r&&r.length&&(e-=1),function(t){return t<=0}(e)&&l&&l.length&&(e+=1));var d=n.eq(e).length>0;a=d?e:a,i="insertAfter",d&&(i="insertBefore"),o[i](n.eq(a)),c.appendTo(t.container)}(this,n),this.panels=$(this.panels.add(c)),this.anchors=$(this.anchors.add(l)),l.data("panel-link",c),c.data("tab-link",l),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&l.on("beforeshow.toolbar",(function(){return"yes"===l.data("cutoffTitle")})).tooltip({content:"".concat(l.text().trim())}),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),s){if(this.positionFocusState(l),this.focusBar(o),!this.activate(l.attr("href")))return this;l.focus()}return e.doActivate&&this.activate(l.attr("href")),this},remove:function(t,e){var i=this,n=this.doGetTab(null,t);if(!n||!n.length)return!1;var s=n.children("a"),a=this.getPanel(t),r=a&&a.length,o=this.tablist.children("li").index(n),l=".application-menu-trigger, .separator, .is-disabled",c=n.prev();if(!e&&!1===this.element.triggerHandler("beforeclose",[n]))return!1;var d=!1;n.hasClass("is-selected")?d=!0:c=$(this.tablist.children("li").not(l).filter(".is-selected")),r&&(this.panels=$(this.panels.not(a))),this.anchors=$(this.anchors.not(s)),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&s.off("beforeshow.toolbar").data("tooltip").destroy();var h=n.data("popupmenu");n.hasClass("has-popupmenu")&&h&&(h.menu.children("li").each((function(){i.remove($(this).children("a").attr("href"))})),h.destroy());var u=n.closest(".dropdown-tab"),p=u.data("trigger");n.find(".icon").off().removeData().remove(),n.off(),s.off(),n.removeData().remove(),r&&a.removeData().remove();var g,f=s.data("moremenu-link");f&&(f.parent().off().removeData().remove(),s.removeData()),(g=u).length&&0===g.children("li:not(.separator)").length&&(c=this.getPreviousTab(p),setTimeout((function(){i.remove(p)}),1)),p&&p.length&&p.data("popupmenu").close(),this.isModuleTabs()&&this.adjustModuleTabs(),this.setOverflow(),this.element.trigger("close",[n]);for(var m=o-1;m>-1;)m=-1,c.is(l)&&(c=this.tablist.children("li").not(l)[0],m-=1);if(c&&c.length||(c=this.tablist.children("li").not(l).first()),!c.length)return this.hideFocusState(),this.defocusBar(),this.element.trigger("afterclose",[n]),this;var v=c.children("a"),b=v;return this.positionFocusState(v),d&&(c.is(".has-popupmenu")&&c.data("popupmenu")&&(b=c.data("popupmenu").menu.children().first().children("a")),!this.activate(b.attr("href")))||(this.focusBar(c),v.focus(),this.element.trigger("afterclose",[n])),this},createTabPanel:function(t,e,i){t=t.replace(/#/g,"");var n=$('<div id="'.concat(h.stripTags(t),'" class="tab-panel" role="tabpanel"></div>'));return e instanceof $&&(e=e[0]),u.html(n[0],e||"","*"),!0===i&&this.container.append(n),this.panels=$(this.panels.add(n)),n},checkPopupMenuItems:function(t){function e(t){if(!t||!t.menu)return $();var e=t.menu.children("li");return e.length?e:(t.destroy(),$())}if(t.is(".has-popupmenu"))return e(t.data("popupmenu"));var i=t.closest(".dropdown-tab");return i.length?e(i.data("popupmenu")):$()},getTab:function(t,e){var i,n=this,s=$();return e instanceof $&&e.length>0?e.is("a")?e.parent():e:t?(i=$(t.currentTarget)).is(".tab")?i:i.closest(".tab").length?i.closest(".tab").first():null:e?function(t){if(!t||""===t||"#"===t)return null;-1===t.indexOf("#")&&(t="#".concat(t));var e=n.anchors.filter('[href="'.concat(t,'"]'));return e.length?e.parent():null}(e):s},doGetTab:function(t,e){return(t||e)&&(!t||t instanceof $.Event||"string"==typeof t)?t?"string"!=typeof t?this.getTab(t):this.getTab(null,t):this.getTab(null,e):$()},hide:function(t,e){var i=this.doGetTab(t,e);return this.activateAdjacentTab(t,e),i.addClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},show:function(t,e){return this.doGetTab(t,e).removeClass("hidden"),this.select($(this.element.find("li.tab.is-selected")[0]).find("a")[0].hash),this.focusBar(),this.positionFocusState(),this},disableTab:function(t,e){var i=this.doGetTab(t,e);return this.activateAdjacentTab(t,e),i.addClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},enableTab:function(t,e){return this.doGetTab(t,e).removeClass("is-disabled"),this.focusBar(),this.positionFocusState(),this},rename:function(t,e,i){if(t&&"string"==typeof t&&(i=e,e=t),i){var n,s=this.doGetTab(t,e),a=this.settings.tabCounts,r=this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips,o=s.children("a");a&&(n=o.find(".count").clone()),o.text(i.toString()),a&&o.prepend(n),r&&o.data("tooltip").setContent(i.trim());var l=this.tablist.children("li").length<2?s:void 0;this.positionFocusState(l),this.focusBar(l)}},updateCount:function(t,e,i){if(t&&"string"==typeof t&&(i=e,e=t),this.settings.tabCounts&&i){var n=this.doGetTab(t,e);n.children("a").find(".count").text("".concat(i.toString()," "));var s=this.tablist.children("li").length<2?n:void 0;this.positionFocusState(s),this.focusBar(s)}},getActiveTab:function(){var t=this.panels.filter(":visible");return this.anchors.filter('[href="#'.concat(t.first().attr("id"),'"]'))},getVisibleTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var i=$(this);t.isTabOverflowed(i)||(e=e.add(i))})),e},getOverflowTabs:function(){var t=this,e=$();return this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)").each((function(){var i=$(this);t.isTabOverflowed(i)&&(e=e.add(i))})),e},setOverflow:function(){var t,e,i,n=this,s=this.element[0],a=this.tablist[0],r=this.hasMoreButton(),o=this.isScrollableTabs();function l(){n.isModuleTabs()&&n.adjustModuleTabs()}l(),o?i=this.tablistContainer[0].scrollWidth>this.tablistContainer[0].offsetWidth:(t=window.getComputedStyle(a,null),e=parseInt(t.getPropertyValue("height"),10)+1,i=a.scrollHeight>e),i?r||(s.classList.add("has-more-button"),l()):r&&(s.classList.remove("has-more-button"),l()),this.adjustSpilloverNumber()},adjustModuleTabs:function(){var t=this,e=this.tablist.find("li:not(.separator):not(.application-menu-trigger):not(:hidden)"),i=this.tablist.find(".application-menu-trigger"),n=i.length>0,s=this.tablist.outerWidth(),a=120,r=n?i.outerWidth():0;if(e.children("a").removeAttr("style"),e.removeAttr("style").each((function(){var i=$(this);t.isTabOverflowed(i)&&(e=e.not(i))})),!e.length)return a=s-r+101,void(this.moreButton[0].style.width="".concat(a,"px"));var o,l=window.getComputedStyle(e.eq(0).children()[0]),c=parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10);this.moreButton[0].hasAttribute("style")&&this.moreButton[0].removeAttribute("style"),(a=(s-r)/e.length-1)<120&&(a=120);for(var d="no",h=1===this.element.closest(".side-by-side").length,u=0;u<e.length;u++){(o=e.eq(u).children("a"))[0].style.width="",(!0===this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&(d="no",parseInt(window.getComputedStyle(e[u]).width,10)>a-c&&(d="yes"),o.data("cutoffTitle",d));var p=0;"ios"===m.os.name&&m.devicespecs.isMobile&&h&&(p=25),e[u].style.width="".concat(a-p,"px"),o[0].style.width="".concat(a-p,"px")}this.adjustSpilloverNumber()},adjustSpilloverNumber:function(){var t=this.moreButton.find(".more-text"),e=this.tablist.find("li:not(.separator):not(.hidden):not(.is-disabled):not(.application-menu-trigger)"),i=this.getOverflowTabs();e.length<=i.length?t.text("".concat(B.translate("Tabs"))):t.text("".concat(B.translate("More")));var n=this.moreButton.find(".count");n.length||(n=$('<span class="count"></span>'),this.moreButton.children("span").first().prepend(n)),n.text("".concat(i.length," "))},select:function(t,e){var i=t.replace(/#/g,""),n=this.getAnchor(i);this.positionFocusState(void 0,!1),this.focusBar(n.parent()),this.activate(n.attr("href"))&&(this.changeHash(i),e||n.focus())},buildPopupMenu:function(t){var e=this;e.popupmenu&&(e.popupmenu.destroy(),$("#tab-container-popupmenu").off("focus.popupmenu").removeData().remove(),$(document).off("keydown.popupmenu"));var i=$("#tab-container-popupmenu"),n="";this.isScrollableTabs()&&(n=" is-selectable"),0===i.length?i=$('<ul id="tab-container-popupmenu" class="tab-list-spillover'.concat(n,'">')).appendTo("body"):i.html("");var s=e.tablist.children("li"),a=B.isRTL();function r(t){var n=$(t),s=n.children("a");if(!n.is(":hidden")&&(e.isScrollableTabs()||e.isTabOverflowed(n)))if(n.is(".separator"))n.clone().appendTo(i);else{var a=n.clone(),r=a.children("a");if(a[0].classList.remove("tab"),a[0].classList.contains("is-selected")&&(a[0].classList.remove("is-selected"),e.isScrollableTabs()&&a[0].classList.add("is-checked")),a[0].removeAttribute("style"),a.children(".icon").off().appendTo(r),a.appendTo(i),n.data("moremenu-link",r),r.find(".icon-more").removeData().remove(),r.data("original-tab",s),r.onclick=void 0,n.is(".has-popupmenu")){var o=$("#".concat(t.getAttribute("aria-controls"))),l=o.clone(),c=l.children("li");l[0].classList.remove("has-popupmenu"),c.each((function(t){var e=$(this).children("a"),i=o.children("li").eq(t).children("a");e.data("original-tab",i),i.data("moremenu-link",e)})),l.insertAfter(r)}}}for(var o=0;o<s.length;o++)r(s[o]);e.tablist.children("li:not(.separator)").removeClass("is-focused");var l=1;this.isScrollableTabs()||(l=3);var c=e.settings.attributes;e.moreButton.popupmenu({autoFocus:!1,attachToBody:!0,menu:"tab-container-popupmenu",trigger:"immediate",offset:{x:l},attributes:c}),e.moreButton.addClass("popup-is-open"),e.popupmenu=e.moreButton.data("popupmenu"),e.positionFocusState(e.moreButton),e.moreButton.on("close.tabs",(function(){$(this).off("close.tabs selected.tabs"),e.moreButton.removeClass("popup-is-open"),e.positionFocusState(void 0),e.focusBar()})).on("selected.tabs",(function(t,i){var n=i.attr("href"),s=n.substr(1,n.length),a=e.doGetTab(s)||$(),r=a?a.children("a"):$(),o=i.data("original-tab").parent();o.is(".add-tab-button")&&(o=(r=e.handleAddButton()).parent(),n=r.attr("href"),e.element.trigger("tab-added",[r])),e.activate(n),a.length&&r.length&&"function"==typeof r[0].onclick&&r[0].onclick.apply(r[0]),e.moreButton.focus(),e.scrollTabList(a)}));var d=e.popupmenu.menu;function h(t){var i=$(this),n=i.closest("li");if(n.is(".dismissible")&&i.is(".close")){if(t.preventDefault(),t.stopPropagation(),n.is(".dismissible")&&n.is(".has-popupmenu")&&n.is(".submenu")){var s=n.find(".wrapper").children().children(),a=[];$.each(s,(function(t,e){a.push(e.children[0].href)})),e.closeDismissibleTabs(a)}else e.closeDismissibleTab(n.children("a").attr("href"));e.popupmenu.close()}}d.on("destroy.popupmenu",(function(){d.off(),e.hideFocusState(),$("#tab-container-popupmenu").removeData().remove()})).on("touchend.popupmenu touchcancel.popupmenu",".icon",h).on("click.popupmenu",".icon",h),t?e.popupmenu.highlight(d.find('a[href="'.concat(t,'"]'))):e.tablist.children(".is-selected").length>0?e.popupmenu.highlight(d.find('a[href="'.concat(e.tablist.children(".is-selected").children("a").attr("href"),'"]'))):e.popupmenu.highlight(d.find("li:first-child > a")),$(document).bindFirst("keydown.popupmenu",(function(t){var i,n=t.which,s=$(t.target);function r(){return this===document.activeElement}switch(n){case 8:case 46:t.altKey&&s.parent().is(".dismissible")&&e.closeDismissibleTab(s.attr("href"));break;case 37:i=a?40:38,s.is("a")&&(s.parent().is(":not(:first-child)")&&t.preventDefault(),$(document).trigger({type:"keydown.popupmenu",which:i}));break;case 38:d.find("li:first-child > a").filter(r).length>0&&(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.findLastVisibleTab());break;case 39:i=a?38:40,s.is("a")&&!s.parent(".submenu").length&&$(document).trigger({type:"keydown.popupmenu",which:i});break;case 40:!function(){var i=d.find("li:last-child > a");if(i.filter(r).length>0&&i.parent().is(":not(.submenu)")){if(t.preventDefault(),$(document).off(t),e.popupmenu.close(),e.settings.addTabButton)return void e.addTabButton.focus();if(e.hasMoreActions())return void e.moreActionsBtn.focus();e.focusFirstVisibleTab()}}()}}))},isTabOverflowed:function(t){if(this.isVerticalTabs()||this.isScrollableTabs())return!1;this.tablist.scrollTop()>0&&this.tablist.scrollTop(0);var e=Math.round(t[0].getBoundingClientRect().top),i=Math.round(this.tablist[0].getBoundingClientRect().top+1);return this.isModuleTabs()&&(i+=1),e>i},findLastVisibleTab:function(){var t=this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)"),e=t.first();if(this.isScrollableTabs())return t.last().find("a").focus();for(;!this.isTabOverflowed(e);)e=t.eq(t.index(e)+1);return t.eq(t.index(e)-1).find("a").focus()},focusFirstVisibleTab:function(){this.tablist.children("li:not(.separator):not(.hidden):not(.is-disabled)").eq(0).find("a").focus()},focusBar:function(t,e){if(this.hasAnimatedBar()&&t instanceof $&&t.length){var i,n=this,s=t;if(this.animatedBar.removeClass("no-transition"),s&&void 0!==s&&s.length&&n.anchors.length)clearTimeout(n.animationTimeout),this.animatedBar.addClass("visible"),i=e,n.sizeBar(s),i&&"function"==typeof i&&i();else this.animatedBar.removeClass("visible")}},sizeBar:function(t){if(this.animatedBar&&(!this.animatedBar||this.animatedBar[0])){t=t||this.element.find(".tab.is-selected");var e=this.animatedBar[0].style,i=this.tablistContainer,n=i[0].scrollLeft,s=i[0].scrollWidth,a=s-this.tablistContainer[0].offsetWidth,r=window.getComputedStyle(t[0],null),o=parseInt(r.getPropertyValue("padding-right"),10)||0,l=parseInt(r.getPropertyValue("width"),10)||0;if(t.is(".tab")){var c=window.getComputedStyle(t.children("a")[0]);o+=parseInt(c.getPropertyValue("padding-right"),10)||0}var d=B.isRTL()?o+t.position().left+t.outerWidth(!0):t.position().left;B.isRTL()?e.right="".concat(s+o-(d+n)-a,"px"):e.left="".concat(d+n,"px"),e.width="".concat(l,"px"),this.focusState[0].style.width="".concat(l,"px")}},defocusBar:function(){if(this.hasAnimatedBar()){var t=this,e=B.isRTL()?0:t.animatedBar.position().left+t.animatedBar.outerWidth()/2;clearTimeout(t.animationTimeout),this.animatedBar[0].style.left="".concat(e,"px"),this.animatedBar[0].style.width=0,this.animationTimeout=setTimeout((function(){t.animatedBar&&t.animatedBar.length&&t.animatedBar.removeClass("visible").removeAttr("style")}),350)}},scrollTabList:function(t){if(this.tablistContainer&&t&&t instanceof $&&t.length){var e,i=u.getDimensions(t[0]),n=u.getDimensions(this.tablistContainer[0]),s=i.left,a=i.right;s<n.left+40&&(e=-1*Math.round(Math.abs(n.left-s))-40),a>n.right-40&&(e=Math.round(Math.abs(a-n.right))+40),0===e&&(e=void 0),this.tablistContainer.smoothScroll(e,250)}},hideFocusState:function(){this.focusState.removeClass("is-visible")},positionFocusState:function(t,e){if(void 0!==t?t=$(t):this.moreButton.hasClass("is-selected")?t=this.moreButton:this.tablist.children(".is-selected").length>0&&(t=this.tablist.children(".is-selected").children("a")),!t||void 0===t||!t.length||t.is(this.moreButton)&&this.isScrollableTabs())this.focusState.removeClass("is-visible");else{t.is("a")&&(t=t.parent()),t.is(".add-tab-button, .tab-more")?this.focusState.parent().is(this.element)||this.focusState.prependTo(this.element):this.focusState.parent().is(this.tablistContainer)||this.focusState.prependTo(this.tablistContainer);var i=this.focusState[0],n=u.getDimensions(t[0]),s=t[0].classList,a=!this.isHeaderTabs()||this.isHeaderTabs()&&this.element[0].classList.contains("alternate"),r=this.isVerticalTabs(),o=B.isRTL(),l=r?0:this.moreButton.outerWidth(!0),c=this.element,d=this.tablistContainer,h=d&&this.focusState.parent().is(d);n=function(t,e,i){var n,s,c,d=e[0].getBoundingClientRect();if(t.top-=d.top,r&&(t.top+=e[0].scrollTop),o?t.right=d.right-t.right:t.left-=d.left,i){if(c=i?i[0].scrollLeft:0,s=i?i[0].scrollWidth:0,o&&!r){var u=t.left;a?(c=i?i[0].scrollLeft:0,s=i?i[0].scrollWidth:0):(t.left=s-(t.right+c+l+32),t.right=s-(u+c+l+32))}else t.left+=c,t.right+=c;h&&(n=parseInt(window.getComputedStyle(e[0])["padding".concat(o?"Right":"Left")],10),t.left+=o?n:-1*n,t.right+=o?n:-1*n)}return a&&!r&&(t.height-=1),t}(n,c,d);var p="";Object.keys(n).forEach((function(t){p.length&&(p+=" "),p+="".concat(t,": ").concat(n[t],"px;")})),i.style.cssText=p;var g=s.contains("is-selected")?"add":"remove";i.classList[g]("is-selected");var f=!0===e?"add":"remove";i.classList[f]("is-visible")}},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown().init()},disableOtherTabs:function(){return this.disable(!0)},disable:function(t){t||this.element.prop("disabled",!0).addClass("is-disabled"),this.disabledElems||(this.disabledElems=[]);var e=this,i=this.tablist.children("li:not(.separator)");t&&(i=i.filter(":not(.application-menu-trigger)")),i.each((function(){var i=$(this),n=i.children("a");if(!(t&&e.isActive(n.attr("href"))||((i.is(".is-disabled")||!0===n.prop("disabled"))&&e.disabledElems.push({elem:i,originalTabindex:i.attr("tabindex"),originalDisabled:n.prop("disabled")}),i.addClass("is-disabled"),n.prop("disabled",!0),i.is(".application-menu-trigger")||i.is(".add-tab-button")))){var s=$(n.attr("href"));s.addClass("is-disabled"),s.find("*").each((function(){var t=$(this);t.is("input.dropdown, input.multiselect")||(("-1"===t.attr("tabindex")||t.attr("disabled"))&&e.disabledElems.push({elem:t,originalTabindex:t.attr("tabindex"),originalDisabled:t.prop("disabled")}),t.disable())}))}})),this.moreButton.addClass("is-disabled"),this.isModuleTabs()&&!t&&this.element.children(".toolbar").disable(),this.updateAria($())},enable:function(){this.element.prop("disabled",!1).removeClass("is-disabled");var t=this;this.tablist.children("li:not(.separator)").each((function(){var e=$(this),i=e.children("a");if(e.removeClass("is-disabled"),i.prop("disabled",!1),!e.is(".application-menu-trigger")&&!e.is(".add-tab-button")){var n=$(i.attr("href"));n.removeClass("is-disabled"),n.find("*").each((function(){var t=$(this);t.enable&&"function"==typeof t.enable&&t.enable()})),$.each(t.disabledElems,(function(t,e){var i=e.elem.is(".tab")?e.elem.children("a"):e.elem;e.elem.disable&&"function"==typeof e.elem.disable&&e.elem.disable(),e.elem.is("li")?e.elem.addClass("is-disabled"):e.elem.is("input.dropdown, input.multiselect")||(e.elem.attr("tabindex",e.originalTabindex),i.prop("disabled",e.originalDisabled))}))}})),this.moreButton.removeClass("is-disabled"),this.isModuleTabs()&&this.element.children(".toolbar").enable(),this.disabledElems=[],this.updateAria(this.tablist.find(".is-selected > a"))},closeDismissibleTab:function(t){return this.remove(t)},closeDismissibleTabs:function(t){var e=this;t.forEach((function(t){var i=t.match(/#.*/);return e.remove(i[0])}))},teardown:function(){this.panels.removeAttr("style"),this.tablist.off().removeAttr("role").removeAttr("aria-multiselectable");var t=this.tablist.children("li");if(t.off().removeAttr("role").removeClass("is-selected"),t.filter(".has-popupmenu").each((function(){var t=$(this).data("popupmenu");t&&(t.menu.children("li:not(.separator)").each((function(){var t=$(this).children("a"),e=t.data("panel-link");$.removeData(t[0],"panel-link"),e&&e.length&&$.removeData(e[0],"tab-link")})),t.destroy())})),this.panels.off(),this.anchors.off().removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabindex"),this.ro&&(this.ro.disconnect(),delete this.ro),(this.settings.moduleTabsTooltips||this.settings.multiTabsTooltips)&&this.anchors.each((function(){var t=$(this).data("tooltip");t&&"function"==typeof t.destroy&&t.destroy()})),this.element.off("focusout.tabs updated.tabs activated.tabs"),$("body").off("resize.tabs".concat(this.tabsIndex)),this.tabsIndex=void 0,this.moreButton.data("popupmenu")){var e=this.moreButton.data("popupmenu");e.menu.find("li:not(.separator)").each((function(){var t=$(this).children("a");t.data("original-tab")&&$.removeData(t[0],"original-tab")})),e.destroy()}return this.removeHelperMarkupEvents(),this.tablistContainer&&this.tablistContainer.off("mousewheel.tabs"),this.focusState.removeData().remove(),this.focusState=void 0,this.hasAnimatedBar()&&(this.animatedBar.removeData().remove(),this.animatedBar=void 0),$(".tab-panel input").off("error.tabs valid.tabs"),this.addTabButton&&(this.addTabButton.remove(),this.addTabButton=void 0),this.element.find(".close.icon").remove(),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"tabs")}},$.fn.tabs=function(t){return this.each((function(){var e=$.data(this,"tabs");e?e.updated(t):e=$.data(this,"tabs",new ts(this,t))}))},$.fn.verticaltabs=$.fn.tabs,$.fn.tag=function(t){return this.each((function(){var e=$.data(this,"tag");e?e.updated(t):e=$.data(this,"tag",new ii(this,t))}))},$.fn.taglist=function(t){return this.each((function(){var e=$.data(this,"taglist");e?e.updated(t):e=$.data(this,"taglist",new si(this,t))}))};var es={autoGrow:!1,autoGrowMaxHeight:null,characterCounter:!0,maxLength:null,printable:!0,charRemainingText:null,charMaxText:null,attributes:null};function is(t,e){this.settings=C.mergeSettings(t,e,es),this.element=$(t),this.init()}is.prototype={init:function(){this.element.is(":disabled")&&this.element.closest(".field").addClass("is-disabled"),this.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android"),this.element.addClass(this.element.is(".textarea-xs")?"input-xs":this.element.is(".textarea-sm")?"input-sm":this.element.is(".textarea-lg")?"input-lg":""),this.settings.characterCounter&&this.getMaxLength()&&(this.counter=$('<span class="textarea-wordcount">Chars Left..</span>').insertAfter(this.element)),this.settings.printable&&(this.printarea=$('<span class="textarea-print"></span>').insertBefore(this.element)),this.element.hasClass("autogrow")&&(this.settings.autoGrow=!0),this.setupAutoGrow(),this.handleEvents(),this.updateCounter()},isSelected:function(t){return"number"==typeof t.selectionStart?0===t.selectionStart&&t.selectionEnd===t.value.length:void 0!==document.selection&&document.selection.createRange().text===t.value},isPrintable:function(t,e){return e?t>64&&t<91||t>=33&&t<=38||t>=40&&t<=43||126===t||58===t||60===t||t>=123&&t<=125||94===t||95===t||t>=62&&t<=64:13===t||t>=48&&t<=57||t>=97&&t<=122||59===t||61===t||t>=44&&t<=47||96===t||t>=91&&t<=93||39===t},setupAutoGrow:function(){if(this.settings.autoGrow&&this.element.length){var t=this.element[0];this.settings.autoGrowMaxHeight&&(t.style.maxHeight="".concat(this.settings.autoGrowMaxHeight,"px")),t.style.overflow="hidden",this.autoGrow()}},autoGrow:function(){if(this.settings.autoGrow){var t=this.element[0],e=t.offSetHeight,i=this.settings.autoGrowMaxHeight||0,n=t.scrollHeight;if(i>0&&i<n){if(n=i,t.style.overflow="",e===n)return}else t.style.overflow="hidden";t.style.height="5px",t.style.height="".concat(t.scrollHeight+2,"px")}},countLinebreaks:function(t){return(t.match(/\n/g)||[]).length},updateCounter:function(){var t=this.element.val(),e=this.isChrome||this.isSafari,i=t.length+(e?this.countLinebreaks(t):0),n=this.getMaxLength(),s=parseInt(n,10)-i,a=(this.settings.charRemainingText?this.settings.charRemainingText:"CharactersLeft"===B.translate("CharactersLeft")?"Characters Left":B.translate("CharactersLeft")).replace("{0}",s.toString());this.counter&&(i>=n?(a=this.settings.charMaxText?this.settings.charMaxText.replace("{0}",n):B.translate("CharactersMax")+n,this.counter.text(a),this.counter.removeClass("almost-empty")):(this.counter.text(a),s<10?this.counter.addClass("almost-empty"):this.counter.removeClass("almost-empty"))),this.printarea.text(this.element.val())},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.removeAttr("disabled readonly").closest(".field").removeClass("is-disabled")},disable:function(){this.enable(),this.element.prop("disabled",!0)},isDisabled:function(){return this.element.prop("disabled")},readonly:function(){this.element.prop("readonly",!0)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.destroy(),this.init()},getMaxLength:function(){return this.settings.maxLength?this.settings.maxLength:this.element.attr("maxlength")?parseInt(this.element.attr("maxlength"),10):void 0},destroy:function(){this.printarea&&this.printarea.length&&this.printarea.remove(),this.counter&&this.counter.length&&this.counter.remove(),this.element.off()},handleEvents:function(){var t=this;this.element.on("keyup.textarea",(function(e){var i=t.element.val(),n=t.isChrome||t.isSafari,s=i.length+(n?t.countLinebreaks(i):0),a=t.getMaxLength();return t.updateCounter(),s>=a?(e.preventDefault(),!1):(t.settings.autoGrow&&t.autoGrow(),!0)})).on("focus.textarea",(function(){t.counter&&t.counter.addClass("focus")})).on("updated.textarea",(function(){t.updated()})).on("keypress.textarea",(function(e){var i=t.element.val(),n=t.isChrome||t.isSafari,s=i.length+(n?t.countLinebreaks(i):0),a=t.getMaxLength();[97,99,118,120].indexOf(e.which)>-1&&(e.metaKey||e.ctrlKey)?t.updateCounter():t.isPrintable(e.which,e.shiftKey)&&s>=a&&!t.isSelected(this)&&e.preventDefault()})).on("blur.textarea",(function(){t.updateCounter(),t.counter&&t.counter.removeClass("focus")}))}},$.fn.textarea=function(t){return this.each((function(){var e=$.data(this,"textarea");e?e.updated(t):e=$.data(this,"textarea",new is(this,t))}))},$.fn.toolbarsearchfield=$.fn.searchfield;var ns={};function ss(t,e){this.settings=C.mergeSettings(t,e,ns),this.element=$(t),this.init()}ss.prototype={init:function(){this.isIe="ie"===m.browser.name,this.isIeEdge="edge"===m.browser.name,this.handleEvents()},valMethod:function(t,e){switch(t.attr("type")){case"checkbox":case"radio":return t.prop("checked");case"file":if("boolean"==typeof e&&e){var i=t.attr("original");return void 0!==i?i:""}return t.parent().find('[type="text"]').val();default:if(t.is("textarea")&&1===t.closest(".editor-source").length){var n=t.is(":visible")?t.val():t.text();return this.trimEditorText(n)}return t.val()}},trimEditorText:function(t){return t.trim().replace(/>\s+</g,"><").replace(/\s+/g," ").replace(" has-tooltip","").replace(/<br(\s+)?\/?>/g,"<br>\n").replace(/<\/p>(\s+)/g,"</p>\n\n").replace(/<\/blockquote>(\s+)?/g,"</blockquote>\n\n")},getAbsolutePosition:function(t){var e=t.position();return t.parents().each((function(){if("relative"===window.getComputedStyle(this,null).position)return!1;e.left+=this.scrollLeft,e.top+=this.scrollTop})),{left:e.left,top:e.top}},unbind:function(){if(this.element.removeClass("dirty").off("resetdirty.dirty change.dirty doresetdirty.dirty"),this.settings&&"object"===i(this.settings.d)){var t=this.settings.d;$(".icon-dirty, .msg-dirty",t.field).add(t.icon).add(t.msg).remove()}return $.removeData(this.element[0],"original"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,ns)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"trackdirty")},handleEvents:function(){var t=this,e=this.element;if(e.is(".editor")){var i=e.parent().find("textarea");i.data("original",this.valMethod(i))}e.data("original",this.valMethod(e,!0)).on("resetdirty.dirty",(function(){if(e.is(".editor")){var i=e.parent().find("textarea");i.data("original",t.valMethod(i))}e.data("original",t.valMethod(e)).triggerHandler("doresetdirty.dirty")})).on("change.dirty doresetdirty.dirty",(function(i){var n=e,s=e.closest(".field, .radio-group"),a=$("label:visible",s),r={class:"",style:""};if(s.is(".field-fileupload")&&(n=s.find("input.fileupload-background-transparent")),s.is(".editor-container")&&(n=s.find(".editor-source")),a[0]||(a=e.next("label")),"true"===e.attr("data-trackdirty")){if(e.addClass("dirty"),e.is('[type="checkbox"], [type="radio"]')&&(r.class+=" dirty-".concat(e.attr("type")),r.class+=e.is(":checked")?" is-checked":""),e.is("select")&&(r.class+=" is-select",n=e.next(".dropdown-wrapper").find(".dropdown")),r.icon=n.prev(),!r.icon.is(".icon-dirty")){e.is(".colorpicker")&&!B.isRTL()&&(r.rect=t.getAbsolutePosition(e),r.style="left:".concat(r.rect.left,"px; top:").concat(r.rect.top,"px;")),r.icon='<span class="icon-dirty'.concat(r.class,'"></span>'),r.msg=B.translate("MsgDirty")||"",r.msg='<span class="audible msg-dirty">'.concat(r.msg,"</span>");var o=$($(n[0].parentElement).find("input")[0]);n=e.is('[type="radio"]')?o:n,0===$(n[0].parentElement).find(".icon-dirty").length&&(n.before(r.icon),a.append(r.msg),r.style&&n.prev(".icon-dirty")[0]&&(n.prev(".icon-dirty")[0].style.cssText=r.style)),r.icon=n.prev(),r.msg=a.find(".msg-dirty")}var l=e.data("original"),c=t.valMethod(e);if(r.field=s,t.settings.d=r,s.is(".editor-container")){var d=s.find("textarea");l=d.data("original"),c=s.find(".editor-source").is(":visible")?d.val():t.isIe||t.isIeEdge?e[0].innerHTML:d.text(),c=t.trimEditorText(c)}if(c===l||e.attr("multiple")&&C.equals(c,l))return e.removeClass("dirty"),$(".icon-dirty, .msg-dirty",s).add(r.icon).add(r.msg).remove(),void e.trigger("doresetdirty"===i.type?"afterresetdirty":"pristine");e.trigger("dirty")}}))}},$.fn.trackdirty=function(t){return this.each((function(){var e=$.data(this,"trackdirty");e?e.updated(t):e=$.data(this,"trackdirty",new ss(this,t))}))};var as={dataset:null,source:null,selectable:"single",hideCheckboxes:!1,menuId:null,useStepUI:!1,folderIconOpen:"open-folder",folderIconClosed:"closed-folder",sortable:!1,onBeforeSelect:null,onExpand:null,onCollapse:null,expandTarget:"node",useExpandTarget:!1,expandIconOpen:"plusminus-folder-open",expandIconClosed:"plusminus-folder-closed",expandPlusminusRotate:!0,showChildrenCount:!1,childrenAutoCount:!0};function rs(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,as),this.init()}rs.prototype={init:function(){this.isIe11="ie"===m.browser.name&&"11"===m.browser.version,this.initTree(),this.handleKeys(),this.setupEvents(),-1===this.loadData(this.settings.dataset)&&(this.syncDataset(),this.initSelected(),this.focusFirst(),this.attachMenu(this.settings.menuId),this.createSortable(),this.childrenCountInit())},initTree:function(){var t=this,e=this.settings,i=this.element.find("a"),n=this.element.attr("data-selectable");e.useExpandTarget&&(e.expandTarget="icon"),e.selectable=void 0===n||"single"!==n.toLowerCase()&&"multiple"!==n.toLowerCase()?e.selectable:n,this.isMultiselect="multiple"===e.selectable,e.hideCheckboxes=e.hideCheckboxes||!this.isMultiselect,this.element.addClass(this.isMultiselect?" is-multiselect":""),i.each((function(){var e=$(this);t.decorateNode(e)}))},initSelected:function(){var t=this;[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(e){e.setAttribute("role","none"),t.setNodeStatus($(e.querySelector("a")))})),this.syncDataset()},focusFirst:function(){var t=this.element[0].querySelector("a");t&&t.setAttribute("tabindex","0")},setFocus:function(t){(t=this.isjQuery(t)?t[0]:t)&&(t.focus(),u.removeClass(t,"hide-focus"))},decorateNode:function(t,e,i,n){var s,a=(t=this.isjQuery(t)?t:$(t))[0].getAttribute("data-badge"),r=t[0].getAttribute("data-alert-icon"),o=t.parentsUntil(this.element,"ul[role=group].is-disabled").length>0,l=u.hasClass(t[0],"is-disabled")||o;if(void 0!==a&&(a=C.parseSettings(t,"data-badge")),t[0].setAttribute("role","treeitem"),t[0].setAttribute("tabindex","-1"),t[0].setAttribute("aria-selected","false"),l){u.addClass(t[0],"is-disabled"),t[0].setAttribute("aria-disabled","true");var c=t.next();if(c[0]&&"ul"===c[0].tagName.toLowerCase()&&u.hasClass(c[0],"is-open"))[].slice.call(c[0].querySelectorAll("a")).forEach((function(t){u.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")})),[].slice.call(t[0].parentNode.querySelectorAll("ul")).forEach((function(t){return u.addClass(t,"is-disabled")}))}s=t.parentsUntil(this.element,"ul").length-1,t[0].setAttribute("aria-level",s+1);var d=t.parent().index();t[0].setAttribute("aria-posinset",d+1);var p=t.closest("li").siblings().length+1;t[0].setAttribute("aria-setsize",p);var g=t.next("ul"),f=!1;g[0]&&g.children().length>0&&(f=u.hasClass(g[0],"is-open"),t[0].setAttribute("aria-expanded",f?"true":"false"));var m=t.contents().filter((function(){return!$(this).is(".tree-badge, .tree-children-count")})).text();t[0].textContent="",0===t.children("svg.icon-tree").length&&(e||""===e?t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:e,classes:["icon-tree"]})):t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:"tree-node",classes:["icon-tree"]})),this.settings.useStepUI&&t[0].insertAdjacentHTML("afterbegin",$.createIcon({icon:r,classes:["step-alert","icon-".concat(r)]}))),g[0]&&t[0].insertAdjacentHTML("beforeend",this.getExpandTargetHtml(f)),!this.isMultiselect||this.settings.hideCheckboxes&&!1!==i||t[0].insertAdjacentHTML("beforeend",'<span class="tree-checkbox"></span>');var v=this.getBadgeHtml(a);""!==v&&t[0].insertAdjacentHTML("beforeend",v);var b=document.createElement("span");if(u.addClass(b,"tree-text"),b.textContent=m,b.innerHTML.indexOf("&lt;svg")>0&&(b.innerHTML=h.unescapeHTML(b.innerHTML)),t[0].appendChild(b),g[0]&&t[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml(n)),this.hasIconClass(t)&&this.setTreeIcon(t.find("svg.icon-tree"),t[0].getAttribute("class")),g[0]&&"ul"===g[0].tagName.toLowerCase()){var y=t[0].getAttribute("class");if(this.settings.useExpandTarget&&y&&!n){var w=y.match(/(icon-)[^\s]+/g);w&&(n={icon:w[0]})}g[0].setAttribute("role","group"),u.addClass(g[0].parentNode,"folder"),this.setFolderIcon(t,u.hasClass(g[0],"is-open"),n),y&&-1===y.indexOf("open")&&-1===y.indexOf("closed")&&(l&&u.addClass(t[0],"is-disabled"),this.setFolderIcon(t,u.hasClass(g[0],"is-open"),n)),this.hasIconClass(t)&&(y=t[0].getAttribute("class"),(/open|close/g.test(y)||!g[0]||this.settings.useExpandTarget)&&this.setTreeIcon(t.find("svg.icon-tree"),u.hasClass(g[0],"is-open")?y:y.replace("open","closed")))}t.hideFocus()},setTreeIcon:function(t,e){if(t&&"string"==typeof e){t=this.isjQuery(t)?t:$(t);var i=e.replace(/#?icon-|hide-focus|is-selected|is-active|\s?/gi,"");t.changeIcon(i)}},expandAll:function(t){var e=this,i=t;(i=void 0!==i?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(t){var i=t.previousElementSibling;if(u.addClass(t.parentNode,"is-open"),u.addClass(t,"is-open"),t.style.height="",i&&"a"===i.tagName.toLowerCase()){var n=i.querySelector("svg.icon-tree");e.setTreeIcon(n,e.settings.folderIconOpen),i.setAttribute("aria-expanded",!0),e.hasIconClass(i)&&e.setTreeIcon(n,i.getAttribute("class"))}}))},collapseAll:function(t){var e=this,i=t;(i=void 0!==i?this.isjQuery(i)?$.makeArray(i):i:[].slice.call(this.element[0].querySelectorAll("ul[role=group]"))).forEach((function(t){var i=t.previousElementSibling;if(u.removeClass(t.parentNode,"is-open"),u.removeClass(t,"is-open"),t.style.height=0,i&&"a"===i.tagName.toLowerCase()){var n=i.querySelector("svg.icon-tree");e.setTreeIcon(n,e.settings.folderIconClosed),i.setAttribute("aria-expanded",!1),u.removeClass(i,"is-selected"),e.hasIconClass(i)&&e.setTreeIcon(n,i.getAttribute("class").replace("open","closed"))}}))},isjQuery:function(t){return t&&(t instanceof jQuery||t.constructor.prototype.jquery)},selectNodeById:function(t){this.selectNodeByJquerySelector("#".concat(t))},selectNodeByJquerySelector:function(t){var e=this.isjQuery(t)?t:$(t);if(e.length&&!e.is(".is-disabled")){var i=e.parentsUntil(this.element,"ul[role=group]");this.expandAll(i),this.selectNode(e,!0)}},unSelectedNode:function(t,e){if(0!==t.length){var i=this;$("a",this.element).attr("tabindex","-1"),t.attr("tabindex","0"),$("a:not(.is-disabled)",t.parent()).attr("aria-selected","false").parent().removeClass("is-selected"),this.syncNode(t),this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(t){return u.removeClass(t,"is-active")})),u.addClass(t[0].parentNode,"is-active"),setTimeout((function(){var e=t.data("jsonData")||{};i.element.triggerHandler("unselected",{node:t,data:e})}),0)}},selectNode:function(t,e){var i,n=this,s=this.settings;0!==t.length&&("function"==typeof s.onBeforeSelect?(i=s.onBeforeSelect(t))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&n.selectNodeFinish(t,e)})):i&&n.selectNodeFinish(t,e):n.selectNodeFinish(t,e))},selectNodeFinish:function(t,e,i){if((this.isMultiselect||"icon"===this.settings.expandTarget)&&i)if("click"===i.type||"touch"===i.type){if(u.hasClass(i.target,"icon")&&u.hasClass(t[0].parentNode,"folder"))return}else if("keydown"===i.type){var n=i.charCode||i.keyCode;if(37===n||39===n)return}var s=this,a=[].slice.call(this.element[0].querySelectorAll("a"));if(a.forEach((function(t){return t.setAttribute("tabindex","-1")})),t[0].setAttribute("tabindex","0"),this.isMultiselect){[].slice.call(t[0].parentNode.querySelectorAll("a:not(.is-disabled)")).forEach((function(t){t.setAttribute("aria-selected","true"),u.addClass(t,"is-selected"),u.addClass(t.parentNode,"is-selected")}))}else{if(u.hasClass(t[0],"is-selected"))return;a.forEach((function(t){var e=$(t),i=e.data("jsonData");i&&(delete i.selected,e.data("jsonData",i)),t.setAttribute("aria-selected","false"),u.removeClass(t,"is-selected"),u.removeClass(t.parentNode,"is-selected")})),t[0].setAttribute("aria-selected","true"),u.addClass(t[0],"is-selected"),u.addClass(t[0].parentNode,"is-selected")}this.syncNode(t),this.loading||this.setNodeStatus(t),e&&t.focus(),[].slice.call(this.element[0].querySelectorAll("li")).forEach((function(t){return u.removeClass(t,"is-active")})),u.addClass(t[0].parentNode,"is-active"),setTimeout((function(){var e=t.data("jsonData")||{};s.element.triggerHandler("selected",{node:t,data:e})}),0)},setNodeStatus:function(t){var e,i=this,n=t.data("jsonData");if(this.isMultiselect){var s=function(t,e){t.forEach((function(t){var n=$(t.querySelector("a")),s=i.getSelectedStatus(n,e);"mixed"===s?(u.removeClass(t,"is-selected","is-partial"),u.addClass(t,"is-partial")):s?(u.removeClass(t,"is-selected","is-partial"),u.addClass(t,"is-selected")):u.removeClass(t,"is-selected","is-partial"),i.syncNode(n)}))},a=!1;s(e=[].slice.call(t[0].parentNode.querySelectorAll("li.folder")),a),a=!(!e.length&&n&&!n.selected),e=t.parentsUntil(this.element,"li.folder"),s(e=[].slice.call(e.toArray()),a)}else{var r=t[0],o=r.parentNode;n&&n.selected?(u.addClass(o,"is-selected"),u.addClass(r,"is-selected"),r.setAttribute("aria-selected",!0)):(u.removeClass(o,"is-selected","is-partial"),u.removeClass(r,"is-selected","is-partial"),r.setAttribute("aria-selected",!1))}},getSelectedStatus:function(t,e){var i,n=0,s=0,a=0;return t.parent().find("a").each((function(t){e&&0===t||(n++,(i=$(this).data("jsonData"))&&i.selected?s++:a++)})),n===s||n!==a&&"mixed"},toggleNode:function(t,e){var i,n=t.next(),s=this,a=this.settings;if(n[0]&&"ul"===n[0].tagName.toLowerCase()&&"group"===n[0].getAttribute("role")){var r=t.find("svg.icon-tree").getIconName();if(u.hasClass(n[0],"is-open")){if("function"==typeof a.onCollapse)(i=a.onCollapse(t))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&s.selectNodeFinish(t,focus,e)})):i&&s.selectNodeFinish(t,focus,e);else if("icon"===a.expandTarget){var o=t[0].parentNode;e&&u.hasClass(e.target,"icon")&&u.hasClass(o,"folder")&&s.selectNodeFinish(t,focus,e)}else s.selectNodeFinish(t,focus,e);t.closest(".folder").removeClass("is-open"),r===a.folderIconOpen||a.useExpandTarget?s.setFolderIcon(t,!1,!1,a.expandPlusminusRotate):/open|close/g.test(r)&&!a.useExpandTarget&&s.setTreeIcon(t.find("svg.icon-tree"),r.replace("open","closed").replace(/\s?is-selected/,""));var l=t.closest(".folder a");if(s.hasIconClass(l)){var c=l.attr("class");(/open|close/g.test(c)||a.useExpandTarget)&&s.setTreeIcon(l.find("svg.icon-tree"),c.replace("open","closed").replace(/\s?is-selected/,""))}s.isAnimating=!0,s.isMultiselect||"icon"!==!a.expandTarget||(s.unSelectedNode(t.parent().find("li.is-selected"),!1),u.removeClass(t[0],"is-selected")),n.one("animateclosedcomplete",(function(){u.removeClass(n[0],"is-open"),s.isAnimating=!1})).animateClosed(),t[0].setAttribute("aria-expanded","true"!==t[0].getAttribute("aria-expanded"))}else{if("function"==typeof a.onExpand)(i=a.onExpand(t))&&i.done&&"function"==typeof i.done?i.done((function(i){i&&s.selectNodeFinish(t,focus,e)})):i&&s.selectNodeFinish(t,focus,e);else if("icon"===a.expandTarget){var d=t[0].parentNode;e&&u.hasClass(e.target,"icon")&&u.hasClass(d,"folder")&&s.selectNodeFinish(t,focus,e)}else s.selectNodeFinish(t,focus,e);var h=t.data("jsonData");if(a.source&&h.children&&0===h.children.length){var p={node:t,data:t.data("jsonData")};return u.addClass(t[0],"is-loading"),s.loading=!0,void s.settings.source(p,(function(e){var i=h.id,r=s.findById(i);r.children=e,s.addChildNodes(r,t.parent()),u.removeClass(t[0],"is-loading"),s.loading=!1,s.accessNode(n,t),h.children=e,t.data("jsonData",h),u.hasClass(t[0].parentNode,"folder")&&s.childrenCountInit(t[0].parentNode),s.isMultiselect||"icon"!==!a.expandTarget||s.selectNode(t,!0),s.initSelected()}))}r===a.folderIconClosed||a.useExpandTarget?s.setFolderIcon(t,!0,!1,a.expandPlusminusRotate):/open|close/g.test(r)&&!a.useExpandTarget&&s.setTreeIcon(t.find("svg.icon-tree"),r.replace("closed","open").replace(/\s?is-selected/,"")),s.accessNode(n,t)}}},accessNode:function(t,e){var i=this,n=e.attr("class");e.closest(".folder").addClass("is-open");var s=e.find("svg.icon-tree").getIconName();if(s===this.settings.folderIconClosed||this.settings.useExpandTarget?this.setFolderIcon(e,!0,!1,this.settings.expandPlusminusRotate):/open|close/g.test(s)&&!this.settings.useExpandTarget&&this.setTreeIcon(e.find("svg.icon-tree"),s.replace("closed","open").replace(/\s?is-selected/,"")),this.hasIconClass(n)){var a=t[0]&&"ul"===t[0].tagName.toLowerCase();(/open|close/g.test(n)||!a||this.settings.useExpandTarget)&&this.setTreeIcon(e.find("svg.icon-tree"),n.replace("is-selected",""))}this.isAnimating=!0,t.one("animateopencomplete",(function(){i.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen(),e[0].setAttribute("aria-expanded","true"!==e[0].getAttribute("aria-expanded"))},openNode:function(t,e){var i=this,n=e.data("jsonData");if(i.settings.source&&n.children&&0===n.children.length){var s={node:e,data:e.data("jsonData")};return e.addClass("is-loading"),i.loading=!0,void i.settings.source(s,(function(s){var a=n.id,r=i.findById(a);r.children=s,i.addChildNodes(r,e.parent()),e.removeClass("is-loading"),i.loading=!1,i.accessNode(t,e),n.children=s,e.data("jsonData",n),i.selectNode(e,!0),i.initSelected()}))}i.accessNode(t,e)},hasIconClass:function(t){return"string"!=typeof t&&(this.isjQuery(t)&&(t=t.length>1?t.first()[0]:t[0]),t=t.getAttribute("class")),t&&t.indexOf("icon")>-1},closeNode:function(t,e){var i=this;i.setTreeIcon(e.closest(".folder").removeClass("is-open").end().find("svg.icon-tree"),i.settings.folderIconClosed),i.hasIconClass(e.closest(".folder a"))&&i.setTreeIcon(e.closest(".folder a").find("svg.icon-tree"),e.closest(".folder a").attr("class").replace("open","closed").replace(/\s?is-selected/,"")),i.isAnimating=!0,i.isMultiselect||(i.unSelectedNode(e.parent().find("li.is-selected"),!1),e.removeClass("is-selected")),t.one("animateclosedcomplete",(function(){t.removeClass("is-open"),i.isAnimating=!1})).animateClosed(),e.attr("aria-expanded","true"!==e.attr("aria-expanded"))},setupEvents:function(){var t=this;t.element.on("updated.tree",(function(e,i){t.updated(i),t.initTree()}))},handleKeys:function(){var t=this;this.element.on("click.tree","a:not(.is-clone)",(function(e){var i=$(this),n=this.parentNode;return C.clearSelection(),u.hasClass(i[0],"is-disabled")||u.hasClass(i[0],"is-loading")||(t.isMultiselect||"icon"===t.settings.expandTarget?u.hasClass(e.target,"icon")&&u.hasClass(n,"folder")?t.toggleNode(i,e):u.hasClass(n,"is-selected")||u.hasClass(n,"is-partial")?t.unSelectedNode(i,!0):t.selectNode(i,!0):(t.selectNode(i,!0),t.toggleNode(i,e)),e.stopPropagation()),t.popupEl&&t.popupEl.data("popupmenu")&&(t.popupEl.data("popupmenu").close(),t.popupEl=null),t.syncDataset(),!1})),this.element.on("focus.tree","a",(function(){if(0===parseInt(this.getAttribute("aria-level"),10)&&1===parseInt(this.getAttribute("aria-posinset"),10)&&u.hasClass(this,"is-disabled")){var t=$.Event("keydown.tree");return t.keyCode=40,void $(this).trigger(t)}})),this.element.on("keydown.tree","a",(function(e){var i,n,s=e.charCode||e.keyCode,a=$(this);if(!t.isAnimating){if(40===s){var r=t.getNextNode(a);t.setFocus(r)}if(38===s){var o=t.getPreviousNode(a);t.setFocus(o)}if(32===e.keyCode&&a.trigger("click.tree"),37===s)return B.isRTL()?a.next().hasClass("is-open")?(n=a.next().find("a:first"),t.setFocus(n)):t.toggleNode(a,e):a.next().hasClass("is-open")?t.toggleNode(a,e):(n=a.closest(".folder").find("a:first"),t.setFocus(n)),e.stopPropagation(),!1;if(39===s)return B.isRTL()?a.next().hasClass("is-open")?t.toggleNode(a,e):(i=a.closest(".folder").find("a:first"),t.setFocus(i)):a.next().hasClass("is-open")?(i=a.next().find("a:first"),t.setFocus(i)):(t.toggleNode(a,e),t.setFocus(a)),e.stopPropagation(),!1;36===s&&(i=t.element.find("a:first:visible"),t.setFocus(i)),35===s&&(i=t.element.find("a:last:visible"),t.setFocus(i))}})),this.element.on("keypress.tree","a",(function(e){var i=e.charCode||e.keyCode,n=$(this);if(i>=37&&i<=40||32===i)return e.stopPropagation(),!1;0!==e.which&&n.closest("li").nextAll().find("a:visible").each((function(){var i=$(this);if(i.text().substr(0,1).toLowerCase()===String.fromCharCode(e.which).toLowerCase())return t.setFocus(i),!1}))}))},loadData:function(t){if(!t)return-1;var e=this;e.element.empty(),e.loading=!0,t=this.arrangeDataset(t);var i="";e.jsonData=[];for(var n=0,s=t.length;n<s;n++)i+=e.getNodeHtml(t[n],n);e.element[0].insertAdjacentHTML("beforeend",i),[].slice.call(e.element[0].querySelectorAll('a[role="treeitem"]')).forEach((function(t,i){var n=$(t),s=e.jsonData[i];n.data("jsonData",s),s.selected&&e.selectNode(n,s.focus),e.addAutomationAttributes(n,s),n.is(".hide-focus")&&n.hideFocus()}));for(var a=[].slice.call(e.element[0].querySelectorAll("select.dropdown")),r=0;r<a.length;r++){var o=a[r];e.jsonData[r].disabled?$(o).dropdown().disable():$(o).dropdown().on("selected.tree",(function(){var t=e.findById(this.parentElement.previousElementSibling.id);t.text=this.value,e.updateNode(t)}))}e.jsonData=void 0,e.loading=!1,e.syncDataset(),e.initSelected(),e.focusFirst(),e.attachMenu(e.settings.menuId),e.createSortable(),this.childrenCountInit()},arrangeDataset:function(t){if(!this.hasKeyInData("parent",t))return t;t=t||this.settings.dataset;var e=JSON.parse(JSON.stringify(t));!function t(i){for(var n=0;n<i.length;n++)void 0!==i[n].parent&&(s=i[n],a=void 0,a=!1,function t(e){for(var i=0;i<e.length&&!a;i++)e[i].id===s.parent&&((n=e[i]).children=n.children||[],n.children.push(s),a=!0),void 0!==e[i].children&&t(e[i].children);var n}(e)),void 0!==i[n].children&&t(i[n].children);var s,a}(t);return function t(e,i){for(var n=0;n<e.length;n++)void 0!==e[n].children&&t(e[n].children,e[n].id),void 0===i&&void 0!==e[n].parent||void 0!==i&&void 0!==e[n].parent&&i!==e[n].parent?(e.splice(n,1),n--):delete e[n].parent}(e),this.settings.dataset=e,e},hasKeyInData:function(t,e){for(var n=!1,s=function e(s){for(var a in s)if(s.hasOwnProperty(a)){var r=s[a];if("object"!==i(r)||n?t===a&&(n=!0):e(r),n)break}},a=0,r=(e=e||this.settings.dataset).length;a<r&&!n;a++)s(e[a]);return n},getNodeHtml:function(t,e,n,s){var a="",r="";n=n||0,e+=1;var o=this.settings,l=s||t.disabled||!1,c=t.children&&Array.isArray(t.children),d={id:void 0!==t.id?' id="'.concat(t.id,'"'):"",href:' href="'.concat(void 0!==t.href?t.href:"#",'"'),expanded:' aria-expanded="'.concat(t.open?"true":"false",'"'),icon:t.icon||""===t.icon?t.icon:"tree-node",alertIcon:"",alertIconAttr:void 0!==t.alertIcon?' data-alert-icon="'.concat(t.alertIcon,'"'):"",text:'<span class="tree-text">'.concat(t.text,"</span>"),class:["hide-focus"],ariaDisabled:l?'aria-disabled="true"':"",checkbox:!this.isMultiselect||this.settings.hideCheckboxes&&!1!==t.hideCheckbox?"":'<span class="tree-checkbox"></span>',badge:"object"===i(t.badge)?this.getBadgeHtml(t.badge):"",expandTarget:c?this.getExpandTargetHtml(t.open):"",childrenCount:c?this.getChildrenCountHtml(t):""};this.jsonData.push(t),o.useStepUI&&(d.alertIcon='<svg class="icon step-alert icon-'.concat(t.alertIcon,'" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-').concat(t.alertIcon,'"></use>'));var h=c?"folder":"";if(""!==(h+=t.selected?" is-selected":"")&&(h+=t.open?" is-open":"",h=' class="'.concat(h,'"')),l&&d.class.push("is-disabled"),t.icon&&(d.icon=t.icon,(!c||c&&/open|closed/i.test(t.icon))&&d.class.push(t.icon)),c&&(!o.useExpandTarget||o.useExpandTarget&&!t.icon)&&(t.open?(d.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon:o.folderIconOpen,s=l):d.icon=t.icon&&/open|closed/i.test(t.icon)?t.icon.replace("open","closed"):o.folderIconClosed),d.icon="#icon-".concat(d.icon.replace(/^#?icon-?/,"")),d.class=' class="'.concat(d.class.join(" "),'"'),d.style="","dropdown"===t.type&&(d.style='style="display: none"',t.data)){a='<select class="dropdown" close-on-select="true">';for(var u=0;u<t.data.length;u++){var p=t.data[u];p.value===t.text?(r=p.text,a+='<option value="'.concat(p.value,'" selected>').concat(p.text,"</option>")):a+='<option value="'.concat(p.value,'">').concat(p.text,"</option>")}a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(r),a='<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',"</div>")}var g="\n      <li".concat(h,'>\n        <a role="treeitem" aria-selected="false" tabindex="-1" ').concat(d.style,'\n          aria-level="').concat(n,'"\n          aria-position="').concat(e,'"\n          aria-setsize="').concat(e,'"\n          ').concat(d.id+d.href+d.class+d.expanded+d.ariaDisabled+d.alertIconAttr,'>\n            <svg class="icon-tree icon" focusable="false" aria-hidden="true" role="presentation"><use href="').concat(d.icon,'"></use>\n            </svg>').concat(d.expandTarget+d.checkbox+d.alertIcon+d.badge+d.text+d.childrenCount,"\n        </a>\n        ").concat(a);if(c){g+='<ul class="folder'.concat(t.open?" is-open":"",'" role="group">');for(var f=0,m=t.children.length;f<m;f++)g+=this.getNodeHtml(t.children[f],f,n+1,s);g+="</ul>"}return g+="</li>"},getExpandTargetHtml:function(t){var e="";if(this.settings.useExpandTarget){var i=t?{icon:this.settings.expandIconOpen,class:"open"}:{icon:this.settings.expandIconClosed,class:"close"};e=$.createIcon({icon:i.icon,classes:["icon-expand-target","".concat("icon-expand-target","-").concat(i.class)]})}return e},getChildrenCountHtml:function(t){var e="";return this.settings.showChildrenCount&&(e='<span class="tree-children-count">\n          (<span class="tree-children-count-text">'.concat(this.getDataChildrenCount(t),"</span>)\n        </span>")),e},getDataChildrenCount:function(t){return t&&/string|number/.test(i(t.childrenCount))?parseInt(t.childrenCount,10):0},getActualChildrenCount:function(t){var e=0;if(t){var i=t.nextElementSibling;i&&"ul"===i.tagName.toLowerCase()&&(e=i.childElementCount)}return e},updateChildrenCount:function(t,e){if(t){var n=t.querySelector(".tree-children-count-text");n&&(0===(e=/string|number/.test(i(e))?parseInt(e,10):this.getActualChildrenCount(t))&&parseInt(n.textContent,10)>0&&"function"==typeof this.settings.source&&!u.hasClass(t.nextElementSibling,"is-open")||(n.textContent=e))}},updateAutoChildrenCount:function(t){var e=this;this.settings.showChildrenCount&&t&&[].slice.call(t.querySelectorAll("a")).forEach((function(t){return e.updateChildrenCount(t)}))},childrenCountInit:function(t){var e=this;(t=t||this.element,t=this.isjQuery(t)?t[0]:t,this.settings.showChildrenCount&&t)&&(this.settings.childrenAutoCount?this.updateAutoChildrenCount(t):[].slice.call(t.querySelectorAll("a[data-children-count]")).forEach((function(t){var i=t.getAttribute("data-children-count");void 0!==i&&e.updateChildrenCount(t,i)})))},setFolderIcon:function(t,e,i,n){var s=this.settings,a=this.isjQuery(t)?t:$(t);if(t=a[0]){var r,o={el:{tree:t.querySelector("svg.icon-tree"),expand:t.querySelector("svg.icon-expand-target")},icon:e?{tree:s.folderIconOpen,expand:s.expandIconOpen,rotate:"forward"}:{tree:s.folderIconClosed,expand:s.expandIconClosed,rotate:"backward"}};s.useExpandTarget?(r={el:o.el.expand,icon:o.icon.expand,rotateClass:"rotate-".concat(o.icon.rotate)},this.setTreeIcon(r.el,r.icon),n&&this.rotatePlusminus(r),(!(i=i||a.data("jsonData"))||i&&!i.icon)&&(r={el:o.el.tree,icon:o.icon.tree},this.setTreeIcon(r.el,r.icon))):(r={el:o.el.tree,icon:o.icon.tree},this.setTreeIcon(r.el,r.icon))}},rotatePlusminus:function(t){this.settings.useExpandTarget&&this.settings.expandPlusminusRotate&&(u.addClass(t.el,t.rotateClass),$(t.el).one("webkitAnimationEnd.tree oAnimationEnd.tree msAnimationEnd.tree animationend.tree",(function(){u.removeClass(t.el,t.rotateClass)})))},getBadgeHtml:function(t){var e={html:"",style:"",class:["badge","tree-badge"]};return t&&!t.remove&&(e.text="",void 0!==t.text&&(e.text=t.text.toString(),1===e.text.length&&e.class.push("round")),/info|good|error|alert|pending/i.test(t.type)?e.class.push(t.type):t.type&&"#"===t.type.charAt(0)&&7===t.type.length&&(e.style="background-color: ".concat(t.type," !important;")),t.backColor&&(e.style="background-color: ".concat(t.backColor," !important;")),t.foreColor&&(e.style+="color: ".concat(t.foreColor," !important;")),""!==e.style&&(e.style=' style="'.concat(e.style,'"')),""!==e.text&&(t.type&&-1!==t.type.indexOf("pending")&&(e.text=""),e.html='<span class="'.concat(e.class.join(" "),'"').concat(e.style,">").concat(e.text,"</span>"))),e.html},addToDataset:function(t,e){var i,n,s;if(t.parent&&(i=this.findById(t.parent)),e instanceof jQuery&&e.is("li")){var a=(n=this.findById($(e[0].parentNode.parentNode).find("a")[0].id)).children||n.node.data("jsonData").children;s=a.findIndex((function(t){return t.text.trim()===$(e).text().trim()})),a.splice(s,0,t)}return"bottom"!==e||t.parent||i||this.settings.dataset.push(t),"top"!==e||t.parent||i||this.settings.dataset.unshift(t),t.parent&&i&&(i.children||(i.children=[]),"bottom"===e?i.children.push(t):i.children.unshift(t)),!(t.parent&&!i)},findById:function(t,e){for(var i in e||(e=this.settings.dataset),e){var n,s,a=e[i];if(a.id===t)return a;if(a.children||null!==(n=a.node)&&void 0!==n&&null!==(s=null==n?void 0:n.data("jsonData"))&&void 0!==s&&(null==s?void 0:s.children)){var r,o,l=this.findById(t,a.children||(null===(r=a.node)||void 0===r||null===(o=null==r?void 0:r.data("jsonData"))||void 0===o||null==o?void 0:o.children));if(l)return l}}return null},getNodeByIdIfSelected:function(t,e){var i=this.findById(t,e);return i&&i.selected?i:null},getSelectedNodes:function(){var t,e,i=[];return $("li.is-selected",this.element).each((function(){t=$("a:first",this),e=t.data("jsonData"),i.push({node:t,data:e})})),i},getNextNode:function(t){var e=t.parent().next().find("a:first"),i=t.next();if(i.is("ul.is-open")&&(e=i.find("a:first")),e.hasClass("is-disabled")&&(e=e.parent().next().find("a:first")),0===e.length)for(var n=0,s=t;n<1e3&&!(e=(s=s.parent().closest(".folder")).next().find("a:first")).length;n++);return e.hasClass("is-disabled")&&(e=this.getNextNode(e)),e},getPreviousNode:function(t){var e=t.parent().prev().find("a:first"),i=e.parent();return i.is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(e=i.find("ul.is-open a:last")),e.hasClass("is-disabled")&&(i=(e=e.parent().prev().find("a:first")).parent()).is(".folder.is-open")&&i.find("ul.is-open a").length&&!i.find("ul.is-disabled").length&&(e=i.find("ul.is-open a:last")),0===e.length&&(e=t.closest("ul").prev("a")),e.hasClass("is-disabled")&&(e=this.getPreviousNode(e)),e},syncDataset:function(t){var e=[],i=this;t=t||this.element,[].slice.call(t.children("li").toArray()).forEach((function(t){var n=t.querySelector("a");n&&e.push(i.syncNode(n))})),this.settings.dataset=e,this.element.triggerHandler("rendered",{data:this.settings.dataset})},syncNode:function(t){var e,i=this,n=this.isjQuery(t)?t:$(t);if(t=n[0]){var s=t.parentNode,a=function(t,e){return u.hasClass(t,e)};e={node:n,id:t.getAttribute("id"),text:t.querySelector(".tree-text").textContent},(a(t,"is-open")||s&&"li"===s.tagName.toLowerCase()&&a(s,"is-open"))&&(e.open=!0);var r=t.getAttribute("href");r&&(e.href=r),a(s,"is-selected")&&(e.selected=!0),a(t,"is-disabled")&&(e.disabled=!0);var o=t.getAttribute("class");o&&o.indexOf("icon")>-1&&(e.icon=o);var l=n.next();if(l[0]&&"ul"===l[0].tagName.toLowerCase())e.children=[],[].slice.call(l.children("li").toArray()).forEach((function(t){var n=t.querySelector("a");n&&e.children.push(i.syncNode(n))}));var c=n.data("jsonData");c&&(delete c.selected,delete c.children,e=$.extend({},c,e));var d=C.parseSettings(n,"data-automation-attributes");d.attributes&&c&&(C.extend(c,d),this.addAutomationAttributes(n,c)),n.data("jsonData",e)}return e},addAutomationAttributes:function(t,e){if((t=this.isjQuery(t)?t:$(t)).length&&e.attributes){var i=t.find(".tree-text"),n=t.find(".icon-tree"),s=t.find(".icon-expand-target"),a=t.find(".tree-checkbox");C.addAttributes(t,this,e.attributes,"tree-link"),C.addAttributes(i,this,e.attributes,"tree-link-text"),C.addAttributes(n,this,e.attributes,"tree-icon"),C.addAttributes(s,this,e.attributes,"tree-icon-expand-target"),C.addAttributes(a,this,e.attributes,"tree-checkbox")}},addNode:function(t,e,n){var s,a,r,o=this,l="object"===i(t.badge)?JSON.stringify(t.badge):t.badge;t.href=void 0!==t.href?t.href:"#",e=e||"bottom";var c=document.createElement("a");void 0!==t.id&&c.setAttribute("id",t.id),c.setAttribute("href",t.href),void 0!==l&&c.setAttribute("data-badge",l),void 0!==t.alertIcon&&c.setAttribute("data-alert-icon",t.alertIcon),t.text&&(c.textContent=h.unescapeHTML(t.text)),t.disabled&&u.addClass(c,"is-disabled"),t.icon&&u.addClass(c,t.icon);var d=document.createElement("li");if(d.setAttribute("role","none"),t.open&&u.addClass(d,"is-open"),d.appendChild(c),"dropdown"===t.type&&(c.setAttribute("style","display: none"),t.data)){a='<select class="dropdown" close-on-select="true">';for(var p=0;p<t.data.length;p++)(r=t.data[p]).value===t.text?(s=r.text,a+='<option value="'.concat(r.value,'" selected>').concat(r.text,"</option>")):a+='<option value="'.concat(r.value,'">').concat(r.text,"</option>");a+='</select><div class="dropdown-wrapper"><div class="dropdown"><span>'.concat(s),a+='</span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>',$('<div class="treeDropdown" style="width: 80px; margin-left: 35px; margin-bottom: -15px">'.concat(a,"</div>")).appendTo(d),t.disabled?$(d).find("select.dropdown").dropdown().disable():$(d).find("select.dropdown").dropdown().on("selected.tree",(function(){var t=o.findById(this.parentElement.previousElementSibling.id);t.text=this.value,o.updateNode(t)}))}var g,f=!!this.loading||this.addToDataset(t,e);(t.parent instanceof jQuery&&(f=!0),e)&&((g="string"!=typeof e||/^(top|bottom|before|after)$/g.test(e)?e instanceof jQuery?e:$(e):$(/\.|#/.test(e[0])?e:"#".concat(e)).first()).length&&("before"===n&&($(d).insertBefore(g.is("li")?g:g.closest("li")),f=!0),"after"===n&&($(d).insertAfter(g.is("li")?g:g.closest("li")),f=!0),"top"===n&&g.is("ul")&&(g.prepend(d),f=!0)));if(!(e instanceof jQuery)||t.parent&&f||t.parent instanceof jQuery||/^(top|bottom|before|after)$/g.test(n)||(e[0].appendChild(d),f=!0),"bottom"!==e||t.parent&&f||this.element[0].appendChild(d),"top"!==e||t.parent&&f||this.element.prepend(d),t.parent){var m="top"===e?e:null;f&&"string"==typeof t.parent&&(d=this.element.find("#".concat(t.parent)).parent(),!t.disabled&&d.is(".is-selected")&&void 0===t.selected&&(t.selected=!0),this.addAsChild(t,d,m)),t.parent&&t.parent instanceof jQuery&&(d=t.parent,t.parent.is("a")&&(d=t.parent.parent()),this.addAsChild(t,d,m)),this.isjQuery(d)&&(t.node=d.find("ul li a#".concat(t.id)))}else void 0!==t.tempidsparent&&(t.parent=t.tempidsparent,delete t.tempidsparent),d=$(d),this.addChildNodes(t,d),t.node=d.children("a").first();return c=$(c),this.decorateNode(c,t.icon,t.hideCheckbox,t),this.childrenCountInit(c.parentsUntil(this.element,".folder:last")),t.selected&&this.selectNode(c,t.focus),c.data("jsonData",t),this.addAutomationAttributes(c,t),this.createSortable(),d},addAsChild:function(t,e,i){var n=(e=this.isjQuery(e)?e[0]:e).querySelector("ul"),s=!!n;s||(e.insertAdjacentHTML("beforeend",'<ul class="folder" role="group"></ul>'),n=e.querySelector("ul")),t.open&&u.addClass(n,"is-open"),s||this.decorateNode(e.querySelector("a")),void 0!==t.parent&&(t.tempidsparent=t.parent),t.parent="",this.addNode(t,$(n),i)},addChildNodes:function(t,e){var i=this,n=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");t.children?(n||(e.insertAdjacentHTML("beforeend",'<ul class="folder'.concat(t.open?" is-open":"",'" role="group"></ul>')),n=e.querySelector("ul")),n.innerHTML="",t.children&&t.children.forEach((function(t){return i.addNode(t,$(n))}))):n&&n.parentNode.removeChild(n)},isTrue:function(t){return null!=t&&("boolean"==typeof t&&!0===t||"string"==typeof t&&"true"===t.toLowerCase())},isFalse:function(t){return null!=t&&("boolean"==typeof t&&!1===t||"string"==typeof t&&"false"===t.toLowerCase())},updateNode:function(t){var e=t.node?{node:t.node}:this.findById(t.id);if(e&&e.node[0]){var i,n=e.node[0].parentNode,s=e.node[0].querySelector(".tree-text"),a=this.isTrue(t.disabled)||this.isFalse(t.enabled),r=this.isTrue(t.enabled)||this.isFalse(t.disabled),o=null===t.children;if(t.badge){var l=e.node[0].querySelector(".tree-badge");if(!l&&!t.badge.remove&&void 0!==t.badge.text&&""!==$.trim(t.badge.text)){var c=document.createElement("span");u.addClass(c,"tree-badge","badge"),s.parentNode.insertBefore(c,s),l=e.node[0].querySelector(".tree-badge")}l&&(void 0!==t.badge.text&&(t.badge.text=t.badge.text.toString(),l.textContent=t.badge.text,u.removeClass(l,"round"),1===t.badge.text.length&&u.addClass(l,"round")),void 0!==t.badge.type&&(u.removeClass(l,"info","good","error","alert","pending"),/info|good|error|alert|pending/i.test(t.badge.type)?u.addClass(l,t.badge.type):"#"===t.badge.type.charAt(0)&&7===t.badge.type.length&&(l.style.backgroundColor=t.badge.type),-1!==t.badge.type.indexOf("pending")&&(l.textContent="")),e.badge=t.badge,this.parseBool(t.badge.remove)&&(l.parentNode.removeChild(l),void 0!==e.badge&&delete e.badge))}if(t.text&&(s.textContent=t.text,e.text=t.text),null===t.icon){var d=e.node[0].nextElementSibling;d&&"ul"===d.tagName.toLowerCase()?this.setFolderIcon(e.node[0],u.hasClass(d,"is-open"),!1,this.settings.expandPlusminusRotate):this.setTreeIcon(e.node[0].querySelector("svg.icon-tree"),"icon-tree-node")}else if(t.icon){this.setTreeIcon(e.node[0].querySelector("svg.icon-tree"),t.icon),e.icon=t.icon;var h=e.node.data("jsonData");h&&(h.icon=t.icon,e.node.data("jsonData",h))}else t.children&&t.children.length&&!u.hasClass(n,"folder")&&this.convertFileToFolder(e.node);if(a)if(u.addClass(e.node[0],"is-disabled"),e.node[0].setAttribute("aria-disabled","true"),u.hasClass(n,"folder")&&u.hasClass(n,"is-open"))[].slice.call(n.querySelectorAll("a, ul[role=group]")).forEach((function(t){u.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")}));if(r)if(!(e.node.parentsUntil(this.element,"ul[role=group].is-disabled").length>0))if(u.removeClass(e.node[0],"is-disabled"),e.node[0].removeAttribute("aria-disabled"),u.hasClass(n,"folder")&&u.hasClass(n,"is-open"))[].slice.call(n.querySelectorAll("a, ul[role=group]")).forEach((function(t){u.removeClass(t,"is-disabled"),t.removeAttribute("aria-disabled")}));if(t.childrenCount&&this.updateChildrenCount(e.node[0],t.childrenCount),t.node&&this.syncDataset(),t.children||o)null!==(i=t.children)&&void 0!==i&&(null==i?void 0:i.length)?this.addChildNodes(t,n):this.removeChildren(t,n);this.syncDataset(),this.createSortable()}},parseBool:function(t){return!/^(false|0)$/i.test(t)&&!!t},removeChildren:function(t,e){var i=(e=this.isjQuery(e)?e[0]:e).querySelector("ul");this.setTreeIcon(e.querySelector("svg.icon-tree"),t.icon||"icon-tree-node"),u.removeClass(e,"folder","is-open"),i&&i.parentNode.removeChild(i)},removeNode:function(t){var e=this.findById(t.id),i=null;t instanceof jQuery?(i=(e=t).parentsUntil(this.element,".folder:last"),e.parent().remove()):e&&(i=e.node.parentsUntil(this.element,".folder:last"),e.node.parent().remove()),this.childrenCountInit(i),e&&this.syncDataset()},attachMenu:function(t){var e=this;function i(t,e){void 0===$(":focus")[0]&&null!=e&&(null==e?void 0:e.triggerElement)&&e.triggerElement.focus()}t&&this.element.off("contextmenu.tree").on("contextmenu.tree","a",(function(n){var s=$(this);return n.preventDefault(),e.popupEl=$(n.currentTarget).popupmenu({menuId:t,eventObj:n,trigger:"immediate",attachToBody:!0,returnFocus:i}).off("selected").on("selected",(function(t,i){e.element.triggerHandler("menuselect",{node:s,item:i})})),e.element.triggerHandler("menuopen",{menu:$("#".concat(t)),node:s}),!1}))},createSortable:function(){if(this.settings.sortable){var t,e,i,n=this;if(n.targetArrow=n.element[0].previousElementSibling,n.linkSelector="a:not(.is-dragging-clone):not(.is-disabled)",!n.targetArrow||n.targetArrow&&!u.hasClass(n.targetArrow,"tree-drag-target-arrow")){var s=document.createElement("div");u.addClass(s,"tree-drag-target-arrow"),n.element[0].parentNode.insertBefore(s,n.element[0]),n.targetArrow=n.element[0].previousElementSibling}e=setInterval((function(){n.loading||(clearInterval(e),[].slice.call(n.element[0].querySelectorAll(n.linkSelector)).forEach((function(e){var s=$(e);s.data("drag")||s.on("mousedown.tree",(function(t){t.preventDefault(),i=3!==t.which&&(!u.hasClass(t.target,"icon")||!u.hasClass(e.parentNode,"folder"))})).drag({clone:!0,cloneAppendTo:s.closest("li"),clonePosIsFixed:!0}).on("dragstart.tree",(function(a,r,o){if(!o||!i)return u.removeClass(e,"is-dragging"),void(o&&o[0].parentNode.removeChild(o[0]));(t=o)[0].removeAttribute("id"),u.addClass(t[0],"is-dragging-clone"),[].slice.call(t[0].querySelectorAll(".tree-checkbox, .tree-badge")).forEach((function(t){return t.parentNode.removeChild(t)}));var l=s.closest("ul");n.sortable={startIndex:$(n.linkSelector,n.element).index(s),startNode:s,startIcon:$("svg.icon-tree",s).getIconName(),startUl:l,startLi:s.closest("li"),startFolderNode:l.prev("a"),startWidth:s.outerWidth()},n.element.triggerHandler("sortstart",n.sortable),a.preventDefault(),a.stopImmediatePropagation()})).on("drag.tree",(function(e,i){t&&(t[0].style.left="".concat(i.left,"px"),t[0].style.top="".concat(i.top,"px"),t[0].style.opacity="1",n.setDragOver(t,i))})).on("dragend.tree",(function(e,i){var s;if(n.targetArrow.style.display="none",[].slice.call(n.element[0].querySelectorAll(n.linkSelector)).forEach((function(t){return u.removeClass(t,"is-over")})),t&&null!==(s=n.sortable)&&void 0!==s&&(null==s?void 0:s.overDirection)){t[0].style.left="".concat(i.left,"px"),t[0].style.top="".concat(i.top,"px");var a=n.sortable.startNode.parent(),r=n.sortable.overNode.parent();"over"===n.sortable.overDirection?(u.hasClass(r[0],"folder")||n.convertFileToFolder(n.sortable.overNode),r[0].querySelector("ul").appendChild(a[0]),u.hasClass(r[0],"is-open")||n.toggleNode(n.sortable.overNode,e)):"up"===n.sortable.overDirection?a.insertBefore(r):"down"===n.sortable.overDirection&&(u.hasClass(r[0],"is-open")&&u.hasClass(r[0],"folder")?$("ul:first",r).prepend(a):a.insertAfter(r)),!n.sortable.startUl[0].querySelector("li")&&n.sortable.startFolderNode.data("oldData")&&"file"===n.sortable.startFolderNode.data("oldData").type&&n.convertFolderToFile(n.sortable.startFolderNode),C.fixSVGIcons(a),n.element.triggerHandler("sortend",n.sortable),n.syncDataset(),n.isMultiselect&&n.initSelected(),n.updateAutoChildrenCount(n.element[0]),delete n.sortable}}))})))}),10)}},setDragOver:function(t,e){var i,n,s,a,r,o,l,c,d,h,p,g,f=this,m=t[0].querySelector("svg.icon-tree"),v=f.element[0].getBoundingClientRect(),b=20;if(f.sortable){var y=function(){f.sortable.overNode=null,f.sortable.overIndex=null,f.sortable.overDirection=null,f.targetArrow.style.display="none",f.setTreeIcon(m,"icon-cancel")};e.top>v.top-b&&e.top<v.bottom+b&&e.left>v.left-b-f.sortable.startWidth&&e.left<v.left+v.height+b?(b=2,(l=[].slice.call(f.element[0].querySelectorAll(f.linkSelector))).forEach((function(t,v){if(p=null,c=t.getBoundingClientRect(),e.top>c.top-b&&e.top<c.bottom+b){if(r=$(t),!!r.parentsUntil(f.element,".folder").filter((function(){return $("a:first",this).is(f.sortable.startNode)&&f.sortable.startLi.is(".folder")})).length)return void y();a=t.parentNode,d=c.left,o=r.closest("ul"),i=parseInt(a.style.marginTop,10)>0?2:0,n=v-1===f.sortable.startIndex&&o.is(f.sortable.startUl),s=v+1===f.sortable.startIndex&&o.is(f.sortable.startUl),l.forEach((function(t){return u.removeClass(t,"is-over")})),g=function(){p?(f.setTreeIcon(m,f.sortable.startIcon),"over"===p?(f.targetArrow.style.display="none",u.hasClass(t,"is-disabled")||u.addClass(t,"is-over")):(l.forEach((function(t){return u.removeClass(t,"is-over")})),h="up"===p?c.top-1.5-(u.hasClass(a,"is-active")?3:0):c.bottom+(a.nextElementSibling&&u.hasClass(a.nextElementSibling,"is-active")?-1:1.5)+i,f.targetArrow.style.left="".concat(d,"px"),f.targetArrow.style.top="".concat(h,"px"),f.targetArrow.style.display="block"),f.sortable.overNode=r,f.sortable.overIndex=v,f.sortable.overDirection=p):y()},v!==f.sortable.startIndex&&(e.left>c.left-b-f.sortable.startWidth&&e.left<c.right+b?p=!n&&e.top<c.top?"up":!s&&e.top>c.top+2*b?"down":"over":!n&&e.top<c.top?p="up":s||(p="down")),g()}}))):y()}},convertFileToFolder:function(t){var e=$("svg.icon-tree",t),i=document.createElement("ul");i.setAttribute("role","group"),u.addClass(i,"folder");var n={icon:e.getIconName(),type:"file"};if(this.hasIconClass(t)){var s=t.attr("class").replace(/\s?is-selected/,"");n.iconClass=s,this.settings.useExpandTarget||t.removeClass(s)}t.data("oldData",n);var a=t[0].parentNode;a&&"li"===a.tagName.toLowerCase()&&(u.addClass(a,"folder"),a.appendChild(i)),e[0].insertAdjacentHTML("afterend",this.getExpandTargetHtml(!1)),t[0].insertAdjacentHTML("beforeend",this.getChildrenCountHtml()),this.setTreeIcon(e,this.settings.folderIconClosed)},convertFolderToFile:function(t){var e=t.parent(".folder");e.removeClass("folder is-open"),$(".icon-expand-target, .tree-children-count",t).remove(),$("ul:first",e).remove(),e.length&&(this.setTreeIcon($("svg.icon-tree",t),t.data("oldData")?t.data("oldData").icon:"tree-node"),t.data("oldData")&&t.data("oldData").iconClass&&t.addClass(t.data("oldData").iconClass),t.data("oldData",null))},unbind:function(){return this.settings.sortable&&(this.element.find("a").each((function(){var t=$(this),e=t.data("drag");t.off("mousedown.tree"),e&&e.destroy&&e.destroy()})),this.element.prev(".tree-drag-target-arrow").remove()),this.element.off("contextmenu.tree updated.tree click.tree focus.tree keydown.tree keypress.tree"),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,as)),this.unbind().init()},destroy:function(){this.unbind(),this.element.empty(),$.removeData(this.element[0],"tree")},disable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){u.addClass(t,"is-disabled"),t.setAttribute("aria-disabled","true")}))},enable:function(){[].slice.call(this.element[0].querySelectorAll("a")).forEach((function(t){u.removeClass(t,"is-disabled"),t.removeAttribute("aria-disabled")}))},preserveEnablementState:function(){var t=[].slice.call(this.element[0].querySelectorAll("a")),e=[];return t.forEach((function(t){u.hasClass(t,"is-disabled")||!0===t.getAttribute("aria-disabled")?e.push({nodeId:t.id,state:"disabled"}):e.push({nodeId:t.id,state:"enabled"})})),this.settings.originalEnablementState=e,e},restoreEnablementState:function(){var t=this.settings,e=[].slice.call(this.element[0].querySelectorAll("a"));void 0!==t.originalEnablementState&&null!==t.originalEnablementState&&e.forEach((function(e){t.originalEnablementState.forEach((function(t){t.nodeId===e.id&&("disabled"===t.state?(u.addClass(e,"is-disabled"),e.setAttribute("aria-disabled","true")):(u.removeClass(e,"is-disabled"),e.removeAttribute("aria-disabled")))}))}))}},$.fn.tree=function(t){return this.each((function(){var e=$.data(this,"tree");e?e.updated(t):e=$.data(this,"tree",new rs(this,t))}))};var os={dataset:[],redrawOnResize:!0,margin:{top:20,right:20,bottom:20,left:20},colors:null,showLabel:!0,labelFormatter:".0%",showTitle:!0,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data"}};function ls(t,e){this.settings=C.mergeSettings(t,e,os),e&&e.dataset&&(this.settings.dataset=e.dataset),this.element=$(t),this.init()}ls.prototype={init:function(){return this.build().handleEvents(),this.element.trigger("rendered",[this.svg]),this},build:function(){return this.setupColors(),this.updateData(this.settings.dataset),this},setupColors:function(){if(!this.settings.colors||this.useBuiltInColors){var t=Z.themeColors().palette;this.settings.colors=[t.azure[100].value,t.azure[90].value,t.azure[80].value,t.azure[70].value,t.azure[60].value,t.azure[40].value,t.azure[30].value,t.azure[20].value,t.amethyst[100].value,t.amethyst[90].value,t.amethyst[80].value,t.amethyst[70].value,t.amethyst[60].value,t.amethyst[50].value,t.amethyst[40].value,t.amethyst[40].value,t.amethyst[30].value,t.amethyst[20].value,t.turquoise[100].value,t.turquoise[90].value,t.turquoise[80].value,t.turquoise[70].value,t.turquoise[60].value,t.turquoise[50].value,t.turquoise[40].value,t.turquoise[40].value,t.turquoise[30].value,t.turquoise[20].value],this.useBuiltInColors=!0}},updateData:function(t){var e=this,i=Object.create(this.settings.margin),n=this.element.parent().width()-i.left-i.right,s=this.element.parent().height()-i.top-i.bottom,a=d3.scaleOrdinal().range(this.settings.colors);if(0!==t.length){C.addAttributes(this.element,t,this.settings.attributes,"",!0),this.settings.showTitle&&t.name&&(d3.select(this.element[0]).append("div").attr("class","chart-treemap-title").text(t.name),s-=35,i.top-=19);var r=d3.treemap().size([n,s]);this.root=d3.select(this.element[0]).classed("chart-treemap",!0).append("div").style("position","relative").style("width","".concat(n+i.left+i.right,"px")).style("height","".concat(s+i.top+i.bottom,"px")).style("left","".concat(i.left,"px")).style("top","".concat(i.top,"px"));var o=d3.hierarchy(t,(function(t){return t.children})).sum((function(t){return t.value})),l=r(o);this.total=d3.sum(l.leaves(),(function(t){return t.value})),Me.appendTooltip(),this.root.datum(o).selectAll(".chart-treemap-node").data(l.leaves()).enter().append("div").attr("class","chart-treemap-node").style("left",(function(t){return"".concat(t.x0,"px")})).style("top",(function(t){return"".concat(t.y0,"px")})).style("width",(function(t){return"".concat(Math.max(0,t.x1-t.x0-1),"px")})).style("height",(function(t){return"".concat(Math.max(0,t.y1-t.y0-1),"px")})).style("background",(function(t){return t&&t.parent&&t.parent.data?a(t.parent.data.name):""})).call((function(t){t._groups.forEach((function(t){t.forEach((function(t){var i,n=t.__data__;C.addAttributes($(t),n,e.settings.attributes,null===(i=n.data.name)||void 0===i||null==i?void 0:i.toLowerCase(),!0)}))}))})).on("mouseenter.treemap",(function(t){var e=this.getBoundingClientRect(),i=this.querySelector(".chart-treemap-percent").innerText,n=t.parent.data.tooltip;if(!(!n&&e.width>60&&e.height>50)){n=n?(n=n.replace("%percent%",i)).replace("{{percent}}",i):"<p><b>".concat(t.data.name," </b> ").concat(i,"</p>");var s=Me.tooltipSize(n),a=e.left-s.width/2+12,r=e.top-s.height-6;Me.showTooltip(a,r,n,"top")}})).on("mouseleave.treemap",(function(){clearInterval(void 0),Me.hideTooltip()})),this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-text").text((function(t){return t.data.name})),this.settings.showLabel&&this.root.selectAll(".chart-treemap-node").append("span").attr("class","chart-treemap-percent").text((function(t){return d3.format(e.settings.labelFormatter)(t.value/e.total)}))}else this.element.emptymessage(this.settings.emptyMessage)},handleEvents:function(){var t=this;return this.element.on("updated.".concat("treemap"),(function(){t.updated()})),this.settings.redrawOnResize&&($("body").on("resize.".concat("treemap"),(function(){t.handleResize()})),this.element.on("resize.".concat("treemap"),(function(){t.handleResize()}))),$("html").on("themechanged.".concat("treemap"),(function(){t.updated()})),this},handleResize:function(){this.width!==this.element.width()&&(this.width=this.element.width(),this.element.is(":visible")&&this.updated())},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),t&&t.dataset&&(this.settings.dataset=t.dataset),this.setupColors(),this.element.empty(),this.build()},teardown:function(){return this.element.off("updated.".concat("treemap")),$("body").off("resize.".concat("treemap")),$("html").off("themechanged.".concat("treemap")),this},destroy:function(){this.element.empty().removeClass("chart-treemap"),Me.removeTooltip(),this.teardown(),$.removeData(this.element[0],"treemap")}},$.fn.treemap=function(t){return this.each((function(){var e=$.data(this,"treemap");e?e.updated(t):e=$.data(this,"treemap",new ls(this,t))}))},$.fn.weekview=function(t){return this.each((function(){var e=$.data(this,"weekview");e?e.updated(t):e=$.data(this,"weekview",new xi(this,t))}))};var cs={ticks:null,ticksTemplate:'<a class="tick {{state}}" href="{{href}}"><span class="label" data-shortlabel="{{shortLabel}}">{{label}}</span></a>'};function ds(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,cs),this.init()}function hs(t,e,i,n,s,a){var r=s.placeholder;if(r&&""===t){return"[object Function]"==={}.toString.call(r)?r=r(e,i,n,s,a):a&&r in a&&(r=a[r]),r}return""}function us(t,e,i,n,s){var a,r=n?n.disabled:null;return"function"==typeof r?r(t,e,i,n,s):null!=(a=r)&&("boolean"==typeof a&&!0===a||"string"==typeof a&&"true"===a.toLowerCase())}ds.prototype={init:function(){this.namespace=C.uniqueId({classList:["wizard"]}),this.build().handleEvents()},build:function(){return this.header=this.element.find(".wizard-header"),this.header.length||(this.header=$('<div class="wizard-header"></div>').appendTo(this.element)),this.bar=this.element.find(".bar"),this.bar.length||(this.bar=$('<div class="bar"></div>').appendTo(this.header)),this.completedRange=this.element.find(".completed-range"),this.completedRange.length||(this.completedRange=$('<div class="completed-range"></div>').appendTo(this.bar)),this.buildTicks().updateRange(),this},buildTicks:function(){var t=this.settings;if(this.ticks=this.bar.children(".tick"),!this.ticks.length&&t.ticks){for(var e=function(t,e){return t.replace(/{{(\w+)}}/g,(function(t,i){return e[i]}))},i={state:"",href:"#",label:""},n=0;n<t.ticks.length;n++){var s=e(t.ticksTemplate,$.extend({},i,t.ticks[n]));s=s.replace(/(\s(\w|-)+=("|')?)?undefined("|')?/gim,"");var a=$(s);t.ticks[n].ngClick&&a.attr("ng-click",t.ticks[n].ngClick),this.bar.append(a)}this.ticks=this.bar.children(".tick")}return this.positionTicks(),this.setLabelsData(),this.adjustLabels(),this.ticks.toArray().forEach((function(t){t.classList.contains("is-disabled")&&["onclick","ng-click"].forEach((function(e){return t.removeAttribute(e)}))})),this.header[0].style.opacity="1",this},setLabelsData:function(){var t=this,e=[].slice.call(this.bar[0].querySelectorAll(".label"));return this.labels=[],e.forEach((function(e){var i=e.textContent,n=e.getAttribute("data-shortlabel");n||(n=e.getAttribute("shortlabel"));var s={label:i,shortLabel:n,node:e,jqEl:$(e)};n&&"undefined"!==n||(e.removeAttribute("data-shortlabel"),e.removeAttribute("shortlabel"),delete s.shortLabel),t.labels.push(s)})),this},adjustLabels:function(){var t=this,e=this.header[0].getBoundingClientRect(),i=parseFloat(window.getComputedStyle(this.bar[0]).width),n=100/(this.labels.length-1)/100*i-15,s=[],a=[],r=function(e){delete e.isEllipsis,e.node.classList.remove("is-ellipsis"),e.node.style.width="",t.removeTooltip(e)},o=function(e){var i=t.labels[e].node;if(-1===s.indexOf(e)){var a=t.labels[e].shortLabel;a?(i.textContent=a,s.push(e),r(t.labels[e])):(i.classList.add("is-ellipsis"),i.style.width="".concat(n,"px"),t.setTooltip(t.labels[e]),t.labels[e].isEllipsis=!0)}i.style.left="-".concat((i.offsetWidth-i.parentNode.offsetWidth)/2,"px")},l=function(){var i=function(t,e,i){if(t.isEllipsis){var n=parseFloat(t.node.style.width)-e;t.node.style.width="".concat(n,"px"),t.node.style.left="-".concat((n-t.node.parentNode.offsetWidth)/2,"px")}else{var s=parseFloat(t.node.style.left)+e*(i?-1:1);t.node.style.left="".concat(s,"px")}},n=t.labels[0],s=n.node.rect||n.node.getBoundingClientRect();e.left>s.left&&i(n,e.left-s.left),s=(n=t.labels[t.labels.length-1]).node.rect||n.node.getBoundingClientRect(),e.right<s.right&&i(n,s.right-e.right,!0)};this.labels.forEach((function(t){var e=t.node;e.textContent=t.label,e.style.left="-".concat((e.offsetWidth-e.parentNode.offsetWidth)/2,"px"),r(t)})),l();var c=function(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)},d=function(){t.labels.forEach((function(t){t.rect=t.node.getBoundingClientRect()})),a=[];for(var e=0,i=t.labels.length;e<i;e++)if(e<i-1){var n=e+1;c(t.labels[e].rect,t.labels[n].rect)&&a.push([e,n])}},h=50;do{d(),a.forEach((function(e){var i=t.labels[e[0]].node,n=t.labels[e[1]].node,s=i.offsetWidth>n.offsetWidth?0:1,a=e[s],r=s?e[0]:e[1];o(a),c(t.labels[a].rect,t.labels[r].rect)&&o(r)})),l(),d(),h--}while(a.length&&h>0);return l(),this.labels.forEach((function(t){delete t.isEllipsis,delete t.rect})),this},setTooltip:function(t){var e=this;t.jqEl.tooltip({content:t.label,placement:"bottom"}).on("blur.".concat("wizard"),(function(){return e.removeTooltip(t)}))},removeTooltip:function(t){var e=t.jqEl.data("tooltip");e&&(e.element.off("blur.".concat("wizard")),e.destroy())},positionTicks:function(){var t=this.ticks.length,e=100/(t-1);this.ticks.toArray().forEach((function(i,n){var s=function(i){return i===t-1?100:e*i}(n),a=B&&B.isRTL()?100-s:s;i.style.left="".concat(a,"%"),i.classList.contains("is-disabled")&&i.setAttribute("tabindex","-1")}))},updateRange:function(){var t=function(t,e){return parseFloat(window.getComputedStyle(t)[e])},e=this.ticks.filter(".current").last(),i=0;return e.length&&(i=100*t(e[0],"left")/t(e.parent()[0],"width"),i=B&&B.isRTL()?100-i:i),this.completedRange[0].style.width="".concat(i,"%"),this},updated:function(t){return t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.buildTicks().updateRange(),this},teardown:function(){var t=this;return this.labels.forEach((function(e){t.removeTooltip(e),e.jqEl.off().removeData()})),delete this.labels,this.ticks.off("click.".concat("wizard")),this.element.off("updated.".concat("wizard")),$("body").off("resize.".concat(this.namespace)),this.ticks.remove(),this},select:function(t,e){return z(this.activate,this.select).apply(this,[t,e])},activate:function(t,e){if(void 0===t&&!e)return this;var i,n=this;if(void 0===t||null!=t&&t.type&&t.target||e||(e=t),e=void 0===e?(i=$(t.target)).is(".label")?i.parent():i:"number"==typeof e?n.ticks.eq(e):e,t&&(e.is("[disabled], .is-disabled")||!e.is("a")))return t.preventDefault(),t.stopPropagation(),this;if(!1===this.element.triggerHandler("beforeactivate",[e]))return this;var s=this.ticks.index(e);return this.ticks.removeClass("complete current").eq(s).addClass("current").prevAll(".tick").addClass("complete"),this.updateRange(),this.element.trigger("activated",[e]),setTimeout((function(){n.element.trigger("afteractivated",[e])}),300),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"wizard")},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("wizard"),(function(){e.updated()})),this.ticks.on("click.".concat("wizard"),(function(t){e.activate(t,$(this))})),$("body").on("resize.".concat(this.namespace),(function(){t.adjustLabels()})),this}},$.fn.wizard=function(t){return this.each((function(){var e=$.data(this,"wizard");e?e.updated(t):e=$.data(this,"wizard",new ds(this,t))}))};var ps={Text:function(t,e,i){return null==i||""===i?"":i.toString()},Input:function(t,e,i,n){return n.inlineEditor?'<label for="datagrid-inline-input-'.concat(t,"-").concat(e,'" class="audible">').concat(n.name,'</label><input id="datagrid-inline-input-').concat(t,"-").concat(e,'" class="').concat("right"===n.align?"is-number-mask":"",'" value="').concat(i,'">'):null==i||""===i?"":i.toString()},Placeholder:function(t,e,i,n,s){var a=hs(i,t,e,i,n,s);return""!==a?'<span class="is-placeholder">'.concat(a,"</span>"):null==i||""===i?"":i.toString()},Ellipsis:function(t,e,i,n){var s=null==i||""===i?"":i.toString();return n.textOverflow="ellipsis",s},Password:function(t,e,i){return(null==i||""===i?"":i.toString()).replace(/./g,"*")},Readonly:function(t,e,i){return'<span class="is-readonly">'.concat(null==i?"":i,"</span>")},RowNumber:function(t,e,i,n,s,a){var r,o=a.runningCount||1;return(null==a||null===(r=null==a?void 0:a.pagerAPI)||void 0===r||null==r?void 0:r.activePage)>1&&(o+=(a.pagerAPI.activePage-1)*a.pagerAPI.settings.pagesize),'<span class="is-readonly">'.concat(o,"</span>")},Date:function(t,e,i,n,s){var a,r=null==i?"":i;return"string"==typeof i&&i?(a=n.sourceFormat?B.parseDate(i,"string"==typeof n.sourceFormat?{pattern:n.sourceFormat}:n.sourceFormat):B.parseDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat))?r=B.formatDate(a,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat):"NaN/NaN/NaN"!==(r=B.formatDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat))&&r||""===r||(r=i):i&&(r=B.formatDate(i,"string"==typeof n.dateFormat?{pattern:n.dateFormat}:n.dateFormat)),n.editor&&!0!==s?'<span class="trigger">'.concat(r,"</span>").concat($.createIcon({icon:"calendar",classes:["icon-calendar"]})):r},Time:function(t,e,n,s,a){var r,o=null==n?"":n,l="object"===i(B)&&B.calendar().dateFormat?B.calendar().dateFormat.short:null,c="object"===i(B)&&B.calendar().timeFormat?B.calendar().timeFormat:null;return"string"==typeof n&&n?(r=B.formatDate(function(t){if(""===t)return null;var e=t.match(/(\d+)(?::(\d\d))(?::(\d\d))?\s*([pP]?)/i);if(null===e)return null;var i=function(t){return isNaN(parseInt(t,10))?0:parseInt(t,10)},n=new Date,s=i(e[1]);return s-=12===s?12:0,s+=e[4]?12:0,n.setHours(s),n.setMinutes(i(e[2])),n.setSeconds(i(e[3])),n}(n),{pattern:"".concat(l," ").concat(s.sourceFormat||s.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))):n&&(r=B.formatDate(n,{pattern:"".concat(l," ").concat(s.sourceFormat||s.timeFormat||c)}))&&(o=r.slice(r.indexOf(" "))),o=o.replace(/^\s/,""),s.editor&&!0!==a?'<span class="trigger">'.concat(o,"</span>").concat($.createIcon({icon:"clock",classes:["icon-clock"]})):o},Autocomplete:function(t,e,i){return null==i?"":i},Lookup:function(t,e,i,n,s){var a=null==i?"":i,r=!1,o=hs(a,t,e,i,n,s);return""!==o&&(r=!0),n.editor?(n.editorOptions&&"function"==typeof n.editorOptions.field&&(a=n.editorOptions.field(s,null,null),r=!1),null!=a&&""!==a||(a="",o&&(r=!0,a=o)),'<span class="trigger '.concat(r?"is-placeholder":"").concat("right"===n.align?"align-text-right":"",'">').concat(a,"</span>").concat($.createIcon({icon:"search-list",classes:["icon-search-list"]}))):r?'<span class="is-placeholder">'.concat(o,"</span>"):a},Decimal:function(t,e,i,n,s){var a=i;void 0!==B&&null!=a&&""!==a&&(a=B.formatNumber(i,n.numberFormat));var r=hs(a=null==a||"NaN"===a?"":a,t,e,i,n,s);return""!==r?'<span class="is-placeholder">'.concat(r,"</span>"):a},Integer:function(t,e,i,n){var s=i;return void 0!==B&&null!=s&&""!==s&&(s=B.formatNumber(i,n.numberFormat||{style:"integer"})),null==s||"NaN"===s?"":s},Hyperlink:function(t,e,i,n,s,a){var r=us(t,e,i,n,s)?" disabled":"",o=n.href||"#";if(n.href&&"function"==typeof n.href){if(null==(o=n.href(t,e,s,n)))return n.text||i}else o=o.replace("{{value}}",i);var l=n.text||i;return l||n.icon?n.icon?'<a href="'.concat(o,'"').concat(r,' class="btn-icon row-btn ').concat(n.cssClass||"",'" ').concat(a.settings.rowNavigation?'tabindex="-1"':"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">\n          ").concat($.createIcon({icon:n.icon,file:n.iconFile}),'\n          <span class="audible">').concat(l,"</span>\n        </a>"):'<a href="'.concat(o,'"').concat(r," ").concat(a.settings.rowNavigation?'tabindex="-1"':"",' class="hyperlink ').concat(n.cssClass||"",'"').concat(n.target?' target="'.concat(n.target,'"'):"").concat(n.hyperlinkTooltip?' title="'.concat(n.hyperlinkTooltip,'"'):"",">").concat(l,"</a>"):""},Template:function(t,e,i,n,s){var a=n.template,r="";return fe&&s&&a&&(r=fe.compile("{{#dataset}}".concat(a,"{{/dataset}}"),{dataset:s})),r},Drilldown:function(){var t=B.translate("Drilldown");return void 0===t&&(t=""),'<button type="button" tabindex="-1" class="btn-icon small datagrid-drilldown">\n         '.concat($.createIcon({icon:"drilldown"}),"\n        <span>").concat(t,"</span>\n      </button>")},RowReorder:function(){var t=B.translate("ReorderRows");return void 0===t&&(t="Reorder Rows"),'<div class="datagrid-reorder-icon draggable">\n         '.concat($.createIcon({icon:"drag"}),'\n        <span class="audible">').concat(t,"</span>\n      </div>")},Checkbox:function(t,e,i,n,s,a){var r;r=n.isChecked?n.isChecked(i):void 0!==i&&(!0===i||1===parseInt(i,10));var o='<span class="hidden" aria-hidden="true" role="presentation"> '.concat(B.translate(r?"Yes":"No"),"</span>"),l=a.wasJustUpdated;return a.wasJustUpdated=!1,'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(n.name,'" class="datagrid-checkbox\n     ').concat(r?"is-checked ".concat(l?" ":" no-animation"):"",'" aria-checked="').concat(r,'"></span>').concat(o,"</div>")},SelectionCheckbox:function(t,e,i,n,s,a){var r=void 0!==i&&!0===i;i||(r=a.isRowSelected(s));var o=" ";if(a.settings.columnIds.length>0)for(var l=0;l<a.settings.columnIds.length;l++)o+=s[a.settings.columnIds[l]];return o=h.ensureAlphaNumericWithSpaces(o),'<div class="datagrid-checkbox-wrapper"><span role="checkbox" aria-label="'.concat(n.name?n.name:B.translate("Select")+o,'" class="datagrid-checkbox datagrid-selection-checkbox').concat(r?" is-checked no-animate":"",'" aria-checked="').concat(r,'"></span></div>')},Actions:function(t,e,i,n){return'<button type="button" class="btn-actions" aria-haspopup="true" aria-expanded="false" aria-owns="'.concat(n.menuId,'">\n        <span class="audible">').concat(n.title||B.translate("More"),"</span>\n        ").concat($.createIcon({icon:"more"}),"\n      </button>")},Textarea:function(t,e,i){return'<span class="datagrid-multiline-text">'.concat(null==i?"":i,"</span>")},Editor:function(t,e,i,n){var s=null==i?"":i,a="is-editor";return a+=n.singleline?" is-singleline":" datagrid-multiline-text",a+=n.contentTooltip?" content-tooltip":"",'<div class="'.concat(a,'">').concat(h.unescapeHTML(s),"</div>")},Expander:function(t,e,i,n,s,a){var r=C.stringAttributes(a,a.settings.attributes,"btn-expand-row-".concat(t));return"<button ".concat(r,' type="button" aria-label="').concat(B.translate("ExpandCollapse"),'" class="btn-icon datagrid-expand-btn" tabindex="-1">\n      <span class="icon plus-minus"></span>\n      </button>').concat(i?"<span> ".concat(i,"</span>"):"")},GroupRow:function(t,e,i,n,s,a){var r=a.settings.groupable,o={left:"",center:"",right:""},l="",c=void 0===r.expanded||r.expanded;r.expanded&&"function"==typeof r.expanded&&(c=r.expanded(t,e,i,n,s,a));for(var d=0;d<r.fields.length;d++)l+=s[r.fields[d]]+(0===d?"":",");r.groupRowFormatter&&(l=r.groupRowFormatter(t,e,i,n,s,a));var h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(c?" is-expanded":"",'" tabindex="-1">\n    <span class="icon plus-minus').concat(c?" active":"",'"></span>\n    <span class="audible">').concat(B.translate("ExpandCollapse"),"</span>\n    </button><span> ").concat(l,"</span>");return o[a.getContainer(r.fields?r.fields[0]:"")]=h,o},GroupFooterRow:function(t,e,i,n,s,a){var r=a.settings.groupable,o={left:"",center:"",right:""},l=a.settings.frozenColumns.left.length,c=a.settings.frozenColumns.right.length,d=a.columnIdxById(r.aggregate),h=a.getContainer(r.aggregate);return o.left='<td role="gridcell" colspan="'.concat(l,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("left"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),o.center='<td role="gridcell" colspan="'.concat(d-l-c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("center"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),o.right='<td role="gridcell" colspan="'.concat(c,'"><div class="datagrid-cell-wrapper"></div></td><td role="gridcell"><div class="datagrid-cell-wrapper">').concat("right"===h?s.sum:"<span>&nbsp;</span>","</div></td>"),r.groupFooterRowFormatter&&(o[h]=r.groupFooterRowFormatter(d,t,e,i,n,s,a)),o},SummaryRow:function(t,e,i,n){var s="",a=n.summaryText||"";return"after"===n.summaryTextPlacement&&(s=a,a=""),void 0!==B&&n.numberFormat&&null!=i&&""!==i&&(i=B.formatNumber(+i,n.numberFormat)),a+(null==i||""===i?"":i.toString())+s},Tree:function(t,e,i,n,s,a){var r=!s||s.expanded,o=a&&a.settings.treeDepth&&a.settings.treeDepth[t]?a.settings.treeDepth[t].depth:0,l=s&&s.isAllChildrenFiltered,c=l?" disabled":"";r&&l&&(r=!1);var d="short"===a.settings.rowHeight?22:30,h='<button type="button" class="btn-icon datagrid-expand-btn'.concat(r?" is-expanded":"",'" tabindex="-1"').concat(o?' style="margin-left: '.concat(o?"".concat(d*(o-1),"px"):"",'"'):"").concat(c,'>\n      <span class="icon plus-minus ').concat(r?" active":"",'"></span>\n      <span class="audible">').concat(B.translate("ExpandCollapse"),"</span>\n      </button>").concat(i?" <span>".concat(i,"</span>"):""),u=' <span class="datagrid-tree-node"'.concat(o?' style="margin-left: '.concat(o?"".concat(d*o,"px"):"",'"'):"",">").concat(i,"</span>");return s&&s[n.children?n.children:"children"]?h:u},ClassRange:function(t,e,i,n){var s=n.ranges,a="",r="";if(!s)return{};for(var o=0;o<s.length;o++)i>=s[o].min&&i<=s[o].max&&(a=s[o].classes,r=s[o].text?s[o].text:a.split(" ")[0]),i===s[o].value&&(a=s[o].classes,r=s[o].text?s[o].text:i);return{classes:a,text:r}},Badge:function(t,e,i,n){var s=n.color,a=n.name;if(n.ranges){var r=ps.ClassRange(t,e,i,n);s=r.classes,a=r.text}return'<span class="badge '.concat(s,'">').concat(i,' <span class="audible">').concat(a,"</span></span>")},Tag:function(t,e,i,n){var s,a=ps.ClassRange(t,e,i,n);return null!=n&&null!==(s=null==n?void 0:n.editorOptions)&&void 0!==s&&(null==s?void 0:s.clickable)?'<span class="tag is-linkable hide-focus '.concat(a.classes,'"><a class="tag-content" href="#">#').concat(i,'</a><button class="btn-linkable" focusable="false" tabindex="-1">\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-caret-right"></use></svg>\n      </button></span>'):'<span class="tag '.concat(a.classes,' hide-focus"><span class="tag-content">').concat(i,"</span></span>")},Alert:function(t,e,i,n){var s=ps.ClassRange(t,e,i,n),a=$.createIcon({icon:"".concat(s.classes,"-alert"),classes:["icon","datagrid-alert-icon","icon-".concat(s.classes)]});return"".concat(a,'<span class="datagrid-alert-text">').concat("value"===s.text?i:s.text,"</span>")},Image:function(t,e,i,n){return'<img class="datagrid-img" src="'.concat(i,'" alt="').concat(n.alt?n.alt:B.translate("Image"),'"').concat(n.dimensions?' style="height:'.concat(n.dimensions.height,";width:").concat(n.dimensions.height,'"'):"","/>")},Color:function(t,e,i,n){var s=ps.ClassRange(t,e,i,n),a=null==i||""===i?"":i.toString();return'<span class="'.concat(s.classes,'">').concat(a,"</span>")},Colorpicker:function(t,e,i,n){var s=null==i||""===i?"":i.toString();if(n.inlineEditor)return s;var a="swatch".concat(""===i?" is-empty":"");return s='<span class="colorpicker-container trigger dropdown-trigger"><span class="'.concat(a,'" style="background-color: ').concat(i,'"></span><input class="colorpicker" id="colorpicker-').concat(e,'" name="colorpicker-').concat(e,'" type="text" role="combobox" aria-autocomplete="list" value="').concat(i,'">'),s+='<span class="trigger">'.concat($.createIcon({icon:"dropdown"}),"</span></span>")},Button:function(t,e,i,n,s,a){var r,o=us(t,e,i,n,s)?" disabled":"";r=n.text?n.text:null==i||""===i?"":i.toString();var l='<button type="button"'.concat(o,' class="').concat(n.icon?"btn-icon":"btn-secondary"," row-btn ").concat(n.cssClass?n.cssClass:"",'"').concat(a.settings.rowNavigation?' tabindex="-1"':""," >");return n.icon&&(l+=$.createIcon({icon:n.icon,file:n.iconFile})),l+="<span>".concat(r,"</span></button>")},Dropdown:function(t,e,i,n,s){var a,r,o=i,l=!1;if(n.options&&void 0!==i){a=n.caseInsensitive&&"string"==typeof i?i.toLowerCase():i;for(var c=0,d=n.options.length;c<d;c++)if(r=n.options[c],(n.caseInsensitive&&"string"==typeof r.value?r.value.toLowerCase():r.value)===a){o=r.label;break}}var h=hs(o,t,e,i,n,s);""!==h&&(l=!0,o=h);var u='<span class="trigger dropdown-trigger '.concat(l?"is-placeholder":"",'">').concat(o,"</span>").concat($.createIcon({icon:"dropdown"}));if(n.inlineEditor){u='<label for="full-dropdown" class="audible">'.concat(n.name,'</label><select id="datagrid-dropdown').concat(t,'" class="dropdown">');for(var p=0,g=n.options.length;p<g;p++){var f=n.options[p],m=void 0;m=void 0!==f.label?f.label:void 0!==f.value?f.value:"",u+="<option".concat(void 0===f.id?"":' id="'.concat(f.id,'"'),'  value="').concat(f.value,'"').concat(f.selected||f.value===a?" selected ":"",">").concat(m,"</option>")}u+='</select>\n      <div class="dropdown-wrapper is-inline">\n        <div class="dropdown"><span>'.concat(o,'</span></div>\n        <svg class="icon" focusable="false" aria-hidden="true" role="presentation">\n          <use href="#icon-dropdown"></use>\n        </svg>\n      </div>')}return u},Fileupload:function(t,e,i,n){var s=null==i||""===i?"":i.toString();return n.inlineEditor||(s=""===$.trim(s)?'<span class="trigger">'.concat(s,"</span>").concat($.createIcon({icon:"folder",classes:["icon-fileupload"]})):'<span class="trigger is-clearable">'.concat(s,"</span>").concat($.createIcon({icon:"close",classes:["icon-close"]})).concat($.createIcon({icon:"folder",classes:["icon-fileupload"]}))),s},Spinbox:function(t,e,i,n){var s=null==i||""===i?"":i.toString();return n.inlineEditor&&(s='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="').concat(i,'">\n        <span class="spinbox-control up">+</span></span>')),s},Favorite:function(t,e,i,n,s,a){var r;r=n.isChecked?n.isChecked(i):void 0!==i&&!0===i;var o=n.editor&&a.settings.editable;return r?'<span aria-label="'.concat(B.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-filled"}),"</span>"):n.showEmpty?'<span aria-label="'.concat(B.translate("Favorite"),'" class="icon-favorite').concat(o?" is-editable":"",'">').concat($.createIcon({icon:"star-outlined"}),"</span>"):""},Status:function(t,e,i,n,s){return s&&s.rowStatus?"".concat($.createIcon({icon:s.rowStatus.icon,classes:["icon","icon-".concat(s.rowStatus.icon)]}),'<span class="audible">').concat(s.rowStatus.text,"</span>"):"<span></span>"},TargetedAchievement:function(t,e,i,n){var s=100*i,a="".concat(s,"%"),r=ps.ClassRange(t,e,s,n),o=n.target;n.text&&(a=(a=(a=(a=(a=(a=(a=n.text).replace("{{value}}",i)).replace("<% value %>",i)).replace("<%value%>",i)).replace("{{percent}}",s)).replace("<% percent %>",s)).replace("<%percent%>",s),n.showPercentText=!0);var l=n.ranges&&r.classes?r.classes:"primary";return'<div class="total bar chart-completion-target chart-targeted-achievement">\n              <div class="target remaining bar" style="width: '.concat(o||0,'%;"></div>\n              <div class="completed bar ').concat(l,'" style="width: ').concat(s,'%;"></div>\n              ').concat(n.showPercentText?'<div class="chart-targeted-text l-center">'.concat(a,"</div>\n            </div>"):'<div class="audible">'.concat(s,"%</div>"))},ProcessIndicator:function(t,e,i){if(!i.steps)return"";for(var n='<div class="process-indicator compact responsive"><div class="display">',s=0;s<i.steps;s++){var a=s===(null==i||null==i?void 0:i.current)-1;n+='<div class="step">\n        <div class="lines">\n          <span class="indicator '.concat(a?" current processing":""," ").concat(s<(null==i||null==i?void 0:i.current)?" darker":"",'"></span>\n          <span class="separator ').concat(s<(null==i||null==i?void 0:i.current)?" darker":"",'"></span>\n        </div>\n      </div>')}return n+="</div></div>"}},gs={cleanExtra:function(t,e){var i=[];if(!e&&t)i=gs.datasetToHtml(t);else{var n=e.settings.groupable?e.originalDataset:e.settings.dataset;i=gs.appendRows(n,e.table[0].cloneNode(!0),e)}if(!t&&!i[0].querySelector("thead")){for(var s=i[0].querySelector("tbody"),a=i[0].createTHead(),r=a.insertRow(0),o=e.headerNodes(),l=0;l<o.length;l++){var c=o[l],d=r.insertCell(l);d.innerHTML=c.querySelector(".datagrid-header-text").textContent.trim(),d.setAttribute("class",c.classList),d.setAttribute("id",c.getAttribute("id")),c.getAttribute("data-exportable")&&d.setAttribute("data-exportable",c.getAttribute("data-exportable"))}s.parentNode.insertBefore(a,s)}(i=function(t){var e=function(t){t.parentNode&&t.parentNode.removeChild(t)},i=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach((function(t){t.classList.contains("is-hidden")||t.classList.contains("datagrid-expandable-row")?e(t):[].slice.call(t.querySelectorAll("th, td, div, span")).forEach((function(t){if(t.classList.contains("is-hidden"))e(t);else{var n=t.getAttribute("data-exportable");if(n&&"no"===n){var s=parseInt(t.id.slice(-1),10);return i.push(s+1),void e(t)}var a=t.getAttribute("aria-colindex");if("td"===t.tagName.toLowerCase()&&a&&-1!==i.indexOf(parseInt(a,10)))e(t);else{for([].slice.call(t.querySelectorAll(".is-hidden, .datagrid-expand-btn, .is-draggable-target, .handle, .sort-indicator, .datagrid-filter-wrapper")).forEach((function(t){return e(t)}));t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);var r=t.textContent;"="===r.substr(0,1)&&""!==r.substr(1,1)&&(t.textContent="'".concat(r,"'"))}}}))})),t}(i),e&&e.settings.exportConvertNegative)&&[].slice.call(i[0].querySelectorAll("td")).forEach((function(t){t.textContent=t.textContent.replace(/^(.+)(-$)/,"$2$1")}));return i},save:function(t,e,i){var n=(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],s="string"==typeof n&&/\b(xlsx|xls)\b/g.test(n),a=new Blob([t],{type:"application/csv;charset=utf-8;"});if(i&&!s){for(var r=[255,254],o=0;o<t.length;++o){var l=t.charCodeAt(o);r.push(255&l),r.push(l/256>>>0)}a=new Blob([new Uint8Array(r)],{type:"text/plain;charset=UTF-16LE;"})}if("ie"===m.browser.name||"edge"===m.browser.name)window.navigator.msSaveBlob&&navigator.msSaveBlob(a,e);else if(window.URL.createObjectURL){s&&(a=new Blob([t],{type:"application/vnd.ms-excel;charset=utf-8;"}));var c=URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=e,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}else{var h=document.createElement("a");h.href=this.base64(t),h.download=e,document.body.appendChild(h),h.click(),document.body.removeChild(h)}},datasetToHtml:function(t){for(var e="<tbody>",i=function(i,n){e+="<tr>",Object.keys(t[i]).forEach((function(n,s){t[i]&&Object.prototype.hasOwnProperty.call(t[i],n)&&(e+="<td>".concat(t[i][n],"</td>"))})),e+="</tr>"},n=0,s=t.length;n<s;n++)i(n);return e+="</tbody>",$("<table></table>").append(e)}};gs.appendRows=function(t,e,i){var n,s=(n=e)&&(n instanceof jQuery||n.constructor.prototype.jquery)?e:$(e);e=s[0];var a="",r=e.querySelector("tbody");r.innerHTML="";return t.forEach((function(t,e){!function t(e,n){if(!e._isFilteredOut){var s=i.rowHtml(e,n,n,!1,!1,n,!0),r=document.createElement("tr");if(r.innerHTML=s.left+s.center+s.right,a+=r.outerHTML,e.children)for(var o=0,l=e.children.length;o<l;o++)t(e.children[o],o)}}(t,e)})),r.insertAdjacentHTML("beforeend",a),s},gs.base64=function(t){return window.btoa?"data:application/vnd.ms-excel;base64,".concat(window.btoa(unescape(encodeURIComponent(t)))):"data:application/vnd.ms-excel;,".concat(unescape(encodeURIComponent(t)))},gs.copyToDataSet=function(t,e,i,n,s){for(var a=function(t,e,i,n){for(var s=0,a=t.length;s<a;s++){var r=e.columns[n];r.formatter!==ps.Readonly&&("input"===r.editor.name?("integer"===r.filterType||"decimal"===r.filterType||"number"===r.filterType)&&isNaN(t[s].trim())||(i[r.field]=t[s]):"input"===r.editor.name&&(isNaN(Date.parse(t[s]))||(i[r.field]=new Date(t[s])))),n++}},r=t.length,o=s.settings.columns.length,l=0;l<r;l++){var c=t[l].split("\t"),d=i;if(e<n.length){var h=n[e];a(c,s.settings,h,d)}else{for(var u={},p=0;p<o;p++)u[s.settings.columns[p].field]="";a(c,s.settings,u,d),n.push(u)}e++}s.renderRows(),s.syncSelectedUI(),s.pagerRefresh("bottom")},gs.exportToExcel=function(t,e,i,n){var s,a={worksheet:e||"Worksheet",table:gs.cleanExtra(i,n)[0].innerHTML};t="".concat(t||n.element[0].id||"Export",".xls"),gs.save((s=a,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:Panes></x:Panes><x:DisplayGridlines></x:DisplayGridlines></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table border="1px solid #999999">{table}</table></body></html>'.replace(/{(\w+)}/g,(function(t,e){return s[e]}))),t)},gs.exportToCsv=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sep=,",s=arguments.length>3?arguments[3]:void 0,a=function(t){return t&&"object"===i(t)&&t.constructor===Object},r=function(t){return/^(false|0+|null)$/gi.test(t)},o={firstLine:!0,char:",",flexChar:!0,flexUtf8:!0};if("sep=,"!==n&&!r(n)){var l=function(t){return'"'!==t?t:o.char};if(a(n))o.firstLine=!r(n.firstLine),o.flexChar=!r(n.flexChar),o.flexUtf8=!r(n.flexUtf8),"string"!=typeof n.char||1!==n.char.length||r(n.char)||(o.char=l(n.char));else if("string"==typeof n)if(1!==n.length||r(n)){if(/^sep=.$/.test(n)){var c=n.replace("sep=","");o.char=r(c)?o.char:l(c)}}else o.char=l(n)}var d=function(t,e){var i=e&&o.flexChar?"\t":o.char,n=[];return[].slice.call(t[0].querySelectorAll("tr")).forEach((function(t){var e=[];[].slice.call(t.querySelectorAll("td, th")).forEach((function(t){return e.push(t.textContent.replace(/\r?\n|\r/g,"").replace(/"/g,'""').trim())})),n.push(e.join('"'.concat(i,'"')))})),o.firstLine&&(o.flexUtf8&&!e||!o.flexUtf8&&","!==o.char)&&n.unshift(["sep=".concat(o.char)]),"".concat(o.flexUtf8?"":"\ufeff",'"').concat(n.join('"\n"'),'"')},h=gs.cleanExtra(e,s),u=!/^[\u0000-\u007f]*$/.test(h[0].textContent)&&o.flexUtf8,p=d(h,u);t="".concat(t||s.element[0].id||"Export",".csv"),gs.save(p,t,u)};var fs,ms,vs,bs,ys=(fs=C.equals,ms=function(t,e){return t.reduce((function(t,i){var n,s=function(t,e){for(var i={},n=0,s=e.length;n<s;n++)i[e[n]]=t[e[n]];return i}(i,e);return n=s,t.some((function(t){return fs(t,n)}))||t.push(s),t}),[])},vs=function(t,e){var i=[];return t.map((function(t,n){for(var s in e)if(e[s]!==t[s])return;t.idx=n,i.push(t)})),i},(bs=function(t,e){return ms(t,e).map((function(e){return{key:e,values:vs(t,e).map((function(t){return t}))}}))}).register=function(t,e){return bs[t]=function(t,i,n){return this.extra=n,bs(t,i).map(e,this)}},bs);ys.register("none",(function(t){return $.extend({},t.key,{values:t.values})})),ys.register("sum",(function(t){var e=this.extra,i=t.values.map((function(t){return t[e]})).filter((function(t){return null!=t}));return $.extend({},t.key,{values:t.values},{sum:i.reduce((function(t,e){return Number(t)+Number(e)}),0)})})),ys.register("max",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{max:Math.max.apply(Math,c(t.values.map((function(t){return t[e]})).filter((function(t){return null!=t}))))})})),ys.register("min",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{min:Math.min.apply(Math,c(t.values.map((function(t){return t[e]})).filter((function(t){return null!=t}))))})})),ys.register("avg",(function(t){var e=this.extra,i=t.values.map((function(t){return t[e]})).filter((function(t){return null!=t}));return $.extend({},t.key,{values:t.values},{avg:i.reduce((function(t,e){return Number(t)+Number(e)}),0)/i.length})})),ys.register("count",(function(t){var e=this.extra,i=t.values.map((function(t){return t[e]})).filter((function(t){return null!=t}));return $.extend({},t.key,{values:t.values},{count:i.length})})),ys.register("list",(function(t){var e=this.extra;return $.extend({},t.key,{values:t.values},{list:t.values.map((function(t){for(var i=[],n=0,s=e.list.length;n<s;n++){var a=!!e.exclude&&t[e.exclude];t[e.list[n]]&&!a&&i.push({value:t[e.list[n]],key:e.list[n]})}return i}))})}));var ws={aggregate:function(t,e){for(var i={},n=this,s=0,a=e.length;s<a;s++)e[s].aggregator&&function(){var a=e[s].field;n.sum=function(t,e){if(e._isFilteredOut)return t;var i;i=a.indexOf(".")>-1?a.split(".").reduce((function(t,e){return t?t[e]:""}),e):e[a],i=Number(i);var n=D.decimalPlaces(i),s=D.decimalPlaces(t);return Number((t+i).toFixed(Math.max(n,s)))};var r=t.reduce(n[e[s].aggregator],0);if(a.indexOf(".")>-1)for(var o=i,l=0,c=a.split(".").length;l<c;l++)l===a.split(".").length-1?o[a.split(".")[l]]=r:(a.split(".")[l]in o||(o[a.split(".")[l]]={}),o=o[a.split(".")[l]]);else i[a]=r}();return i}},xs="lookup-datagrid";function Cs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,n=[];return null!=t&&(null==t?void 0:t.length)||null!=e&&(null==e?void 0:e.length)?null!=e&&(null==e?void 0:e.length)?t.length?(t.forEach((function(t){var s=e.find((function(e){return e.name===t.name}));n.push(s||{name:t.name,value:"".concat(t.value,"-").concat(i)})})),n):e:n=t.map((function(t){return{name:t.name,value:"".concat(t.value,"-").concat(i)}})):n}var ks={click:null,field:"id",title:null,icon:"icon-search-list",buttons:[],options:null,beforeShow:null,modalContent:null,editable:!0,autoApply:!0,validator:null,autoWidth:!1,clickArguments:{},delimiter:",",minWidth:null,clearable:!1,attributes:null};function Ts(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,ks),this.init()}function Ss(t,e,i,n,s,a,r,o,l){if(a.align&&t.addClass("l-".concat(a.align,"-text")),a.maxLength&&t.attr("maxlength",a.maxLength),a.uppercase&&t.addClass("uppercase-text"),a.mask&&"function"==typeof a.mask){var c=a.mask(e,i,n,a,l);t.mask({pattern:c,mode:a.maskMode})}else if(a.maskOptions&&"function"==typeof a.maskOptions){var d=a.maskOptions(e,i,n,a,l);t.mask(d)}else a.mask&&t.mask({pattern:a.mask,mode:a.maskMode});var h={patternOptions:{allowNegative:!0,allowDecimal:!0,integerLimit:4,decimalLimit:2,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"},u=!1;a.maskOptions&&(u=!0),a.numberFormat&&(u=!0,h={patternOptions:{decimalLimit:a.numberFormat.maximumFractionDigits}}),a.maskOptions&&"function"==typeof a.maskOptions&&(u=!1),u&&(a.maskOptions=C.extend(!0,{},h,a.maskOptions),t.mask(a.maskOptions)),a.align&&"right"===a.align||t.removeClass("is-number-mask")}Ts.prototype={get isFocused(){var t,e=document.activeElement,i=this.element.is(e),n=this.element.parent(".lookup-wrapper")[0].contains(e),s=null===(t=this.modal)||void 0===t||null==t?void 0:t.element[0].contains(e);return i||n||s},init:function(){this.inlineLabel=this.element.closest("label"),this.inlineLabelText=this.inlineLabel.find(".label-text"),this.isInlineLabel=!!this.inlineLabelText.length,this.build(),this.handleEvents(),this.grid=null,this.selectedRows=null},build:function(){var t=this,e=this.element;var i,n=(i="lookup-wrapper",e.is(".input-xs")&&(i+=" xs"),e.is(".input-sm")&&(i+=" sm"),e.is(".input-lg")&&(i+=" lg"),i);if(this.element.is(".has-actions")&&(n+=" has-actions-wrapper"),this.icon=$('<span class="trigger"></span>').append($.createIcon(this.settings.icon)),"icon-search-list"!==this.settings.icon&&this.icon.addClass("has-custom-icon"),this.isInlineLabel)this.inlineLabel.addClass(n);else if(this.container=$('<span class="'.concat(n,'"></span>')),this.element.is(".field-options")){var s=this.element.closest(".field").find(".btn-actions");e.add(s).add(s.next(".popupmenu")).wrapAll(this.container)}else e.wrap(this.container);e.after(this.icon),e.hasClass("hidden")&&this.icon.addClass("hidden"),this.settings.autoWidth&&this.applyAutoWidth(),this.minWidth||(this.settings.minWidth=this.settings.options&&this.settings.options.paging?482:400),e.attr("data-mask")&&e.mask(),this.element.is(":disabled")&&this.disable(),this.settings.clearable&&e.searchfield({clearable:!0,attributes:this.settings.attributes}),this.settings.clearable&&this.settings.clear&&e.on("cleared",(function(e){t.settings.clear(e,t,t.settings.clearArguments)})),this.settings.editable||this.element.attr("readonly","true").addClass("is-not-editable"),this.element.parent(".lookup-wrapper").next().is(".btn-actions")&&(this.element.data("fieldoptions")&&this.element.data("fieldoptions").destroy(),this.element.fieldoptions()),this.addAria(),void 0===e.attr("autocomplete")&&e.attr("autocomplete","off"),Array.isArray(this.settings.attributes)&&(C.addAttributes(e,this,this.settings.attributes,"input"),C.addAttributes(this.icon,this,this.settings.attributes,"trigger"))},addAria:function(){this.label=this.isInlineLabel?this.inlineLabelText:$('label[for="'.concat(this.element.attr("id"),'"]'))},handleEvents:function(){var t=this;this.icon.on("click.lookup",(function(e){t.openDialog(e)})),this.element.on("keyup.lookup",(function(e){$("#autocomplete-list").length>0||40===e.which&&t.openDialog(e)}))},setTooltip:function(){var t=this;setTimeout((function(){var e=t.element[0].scrollWidth>t.element[0].offsetWidth,i=t.element.data("tooltip");e?t.element.tooltip({content:t.element.val()}):i&&!e&&i.destroy()}),100)},openDialog:function(t){var e=this;if(!this.isOpen&&(!1!==e.element.triggerHandler("beforeopen")&&!(e.isDisabled()||e.isReadonly()&&!e.element.hasClass("is-not-editable"))))if(e.settings.click)e.settings.click(t,this,e.settings.clickArguments);else{if(this.isOpen=!0,this.settings.beforeShow){return this.element.triggerHandler("start"),void this.settings.beforeShow(this,(function(t){return t&&e.createGrid(t),"boolean"==typeof t&&!1===t?(e.isOpen=!1,!1):(e.createModal(),e.element.triggerHandler("complete"),e.element.trigger("open",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid),!0)}))}if(this.settings.options){e.createModal(),e.element.trigger("open",[e.modal,e.grid]),e.modal.element.find(".btn-actions").removeClass("is-selected"),e.grid&&e.grid.cellNode(0,0,!0).attr("tabindex","0");var i=e.modal.element.find(".toolbar .more > .btn-actions");i.length&&setTimeout((function(){C.fixSVGIcons(i)}),600),e.element.trigger("afteropen",[e.modal,e.grid]),e.settings.validator&&e.settings.validator(e.element,e.modal,e.grid)}}},createModal:function(){var t=this,e='<div id="'.concat(xs,'"></div>'),i=$('label[for="'.concat(t.element.attr("id"),'"]'));var n,s,a,r,o,l,c=t.isInlineLabel?t.inlineLabelText:i.length?i.clone().find("span").remove().end().text():t.settings.title?t.settings.title:null!==(n=t.settings)&&void 0!==n&&null!==(s=null==n?void 0:n.options)&&void 0!==s&&null!==(a=null==s?void 0:s.toolbar)&&void 0!==a&&(null==a?void 0:a.title)?null===(r=t.settings)||void 0===r||null===(o=null==r?void 0:r.options)||void 0===o||null===(l=null==o?void 0:o.toolbar)||void 0===l||null==l?void 0:l.title:"",d=this.settings.modalContent;d&&d instanceof jQuery&&(e=d,d.show()),!d||d instanceof jQuery||(e=d);var h=this.settings.buttons;(this.settings.options&&"multiple"===this.settings.options.selectable&&0===h.length||!t.settings.autoApply&&0===h.length)&&(h=[{text:B.translate("Cancel"),click:function(e,i){i.oldActive=t.element,i.close()}},{text:B.translate("Apply"),click:function(e,i){i.oldActive=t.element,i.close(),t.insertRows()},isDefault:!0}]),this.settings.options&&"single"===this.settings.options.selectable&&0===h.length&&t.settings.autoApply&&(h=[{text:B.translate("Cancel"),click:function(e,i){i.oldActive=t.element,i.close()}},{text:B.translate("Apply"),click:function(e,i){i.oldActive=t.element,i.close(),t.insertRows()},isDefault:!0}]);var u=this.settings.options&&this.settings.options.toolbar&&this.settings.options.toolbar.keywordFilter;$("body").modal({triggerButton:this.element,title:c,content:e,buttons:h,cssClass:"lookup-modal".concat(u?"":" lookup-no-search"),attributes:Cs(this.settings.attributes,[],"modal")}).off("open.lookup").on("open.lookup",(function(){t.createGrid()})).off("close.lookup").on("close.lookup",(function(){delete t.isOpen,t.element.triggerHandler("close",[t.modal,t.grid]),t.setTooltip()})),t.modal=$("body").data("modal"),this.settings.title||t.modal.element.find(".modal-title").append(' <span class="datagrid-result-count"></span>'),t.modal.element.off("afterclose.lookup").on("afterclose.lookup",(function(){t.closeTearDown()})),setTimeout((function(){$(".modal.is-visible .searchfield").on("keypress.lookup",(function(t){return 13!==t.keyCode}))}),300)},closeTearDown:function(){var t=$(".modal.is-visible .searchfield").off("keypress.lookup");t.data()&&t.data("searchfield")&&t.data("searchfield").destroy(),t.data()&&t.data("searchfield")&&(t.data("searchfield").destroy(),t.removeData()),t=null,this.grid&&this.grid.destroy&&(this.grid.deSelectAllRows(),this.grid.clearFilter(),this.grid.destroy(),this.grid=null)},doMerge:function(){for(var t={},e=[],i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];for(var a=0;a<n.length;a++)for(var r=0;r<n[a].length;r++)!0!==t[n[a][r]]&&(e[e.length]=n[a][r],t[n[a][r]]=!0);return e},createGrid:function(t){var e,i,n,s,a=this,r=this;t?(s=t,xs=t.attr("id"),r.settings.options=t.data("datagrid").settings):s=r.modal.element.find("#".concat(xs)),this.settings.minWidth&&(s=this.applyMinWidth(s)),r.settings.options&&("single"===r.settings.options.selectable&&r.settings.autoApply&&(r.settings.options.cellNavigation=!1,s.find("tr").addClass("is-clickable")),r.settings.options.isList=!0,r.settings.attributes&&(r.settings.options.attributes=Cs(r.settings.attributes,[],"datagrid")),s.data("datagrid")||s.datagrid(r.settings.options)),r.grid=s.data("datagrid"),!this.settings.title&&r.modal&&r.modal.element.find(".title").not(".selection-count").remove();var o=null===(e=this.settings)||void 0===e||null===(i=null==e?void 0:e.options)||void 0===i||null===(n=null==i?void 0:i.toolbar)||void 0===n||null==n?void 0:n.keywordFilter;!o&&r.modal&&r.modal.element.find(".toolbar").appendTo(r.modal.element.find(".modal-header")),o&&r.grid&&(!r.grid.filterExpr||r.grid.filterExpr&&r.grid.filterExpr[0]&&""!==r.grid.filterExpr[0].value)&&r.grid.keywordSearch(""),s.off("selected.lookup");var l=r.element.val();l&&!this.settings.options.source&&r.selectGridRows(l),this.settings.options.source&&s.off("afterpaging.lookup").on("afterpaging.lookup",(function(){var t=r.element.val();a.selectGridRows(t)})),this.settings.options&&s.on("selected.lookup",(function(t,e){e&&0!==e.length&&(r.settings.validator&&r.settings.validator(r.element,r.modal,r.grid),"single"===r.settings.options.selectable&&r.settings.autoApply&&(r.modal.close(),r.insertRows()))})),this.settings.options.source&&this.grid.element.one("afterrender.lookup",(function(){if(!a.initValues||a.initValues&&!a.initValues.length){a.initValues=[];var t=a.element.val();if(t)(t.indexOf(a.settings.delimiter)>1?t.split(a.settings.delimiter):[t]).forEach((function(t){a.initValues.push({value:t,visited:!!a.grid.settings.dataset.filter((function(e){return function(t,e){return(t[a.settings.field]||"").toString()===e.toString()}(e,t)})).length})}))}}))},selectGridRows:function(t){var e=t,i=!1;if(t){if(this.grid&&this.settings.options.source)for(var n=this.grid._selectedRows.length-1;n>-1;n--)isNaN(this.grid._selectedRows[n].idx)&&this.grid._selectedRows.splice(n,1);if(e.indexOf(this.settings.delimiter)>1){for(var s=e.split(this.settings.delimiter),a=!1,r=0;r<s.length;r++)if(a=this.selectRowByValue(this.settings.field,s[r]),this.grid&&this.settings.options.source&&!a){for(var o={},l=!1,c=0;c<this.grid._selectedRows.length;c++)this.grid._selectedRows[c].data[this.settings.field].toString()===s[r].toString()&&(l=!0);l||(o[this.settings.field]=s[r],this.grid._selectedRows.push({data:o})),i=!0}if(i){this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(s.length," ").concat(B.translate("Selected"))),this.grid.syncSelectedUI()}this.selectRowByValue(this.settings.field,e)}else{var d=[];d.push(e);for(var h=!1,u=0;u<d.length;u++)if(h=this.selectRowByValue(this.settings.field,d[u]),this.grid&&this.settings.options.source&&!h){for(var p={},g=!1,f=0;f<this.grid._selectedRows.length;f++)this.grid._selectedRows[f].data[this.settings.field].toString()===d[u].toString()&&(g=!0);g||(p[this.settings.field]=d[u],this.grid._selectedRows.push({data:p})),i=!0}if(i){this.modal.element.find(".contextual-toolbar .selection-count").text("".concat(d.length," ").concat(B.translate("Selected"))),this.grid.syncSelectedUI()}}}},selectRowByValue:function(t,e){if(!this.settings.options)return!1;var i=this.settings.options.source?this.grid.settings.dataset:this.settings.options.dataset,n=[];if(!i)return!1;for(var s=0;s<i.length;s++){var a,r=!1;if("function"==typeof this.settings.match&&this.settings.match(e,i[s],this.element,this.grid)&&(r=!0),"function"!=typeof this.settings.match&&(null===(a=i[s][t])||void 0===a||null==a?void 0:a.toString())===(null==e||null==e?void 0:e.toString())&&(r=!0),r){var o=this.grid.settings.source?this.grid.actualRowIndex(this.grid.tableBody.find("tr").eq(s)):s;n.push(o)}}return!!(this.grid&&n.length>0)&&(this.grid.selectRows(n,!1,!0),!0)},insertRows:function(){var t=[];this.selectedRows=this.grid.selectedRows();for(var e=0;e<this.selectedRows.length;e++){var i="";i="function"==typeof this.settings.field?this.settings.field(this.selectedRows[e].data,this.element,this.grid):this.selectedRows[e].data[this.settings.field],t.push(i);var n=this.selectedRows[e].idx;this.settings.options.dataset&&this.settings.options.dataset[n]&&delete this.settings.options.dataset[n]._selected}t=t.filter((function(e,i){return t.indexOf(e)===i})),this.element.val(t.join(this.settings.delimiter)).trigger("change",[this.selectedRows]),this.element.trigger("input",[this.selectedRows]),this.applyAutoWidth(),this.element.focus()},enable:function(){this.element.prop("disabled",!1).prop("readonly",!1),this.element.parent().removeClass("is-disabled")},disable:function(){this.element.prop("disabled",!0),this.element.parent().addClass("is-disabled")},readonly:function(){this.element.prop("readonly",!0)},applyAutoWidth:function(){var t=this.element.val(),e=t.length,i=t===t.toUpperCase(),n=!isNaN(t);this.element.attr("size",e+(i&&!n?2:1))},applyMinWidth:function(t){if(null==this.settings.minWidth)return t;if($(window).width()>this.settings.minWidth){this.modal.element.addClass("has-minwidth");var e="".concat(this.settings.minWidth,"px");t.css({"min-width":e})}return t},isDisabled:function(){return this.element.prop("disabled")},isReadonly:function(){return this.element.prop("readonly")},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},updateDataset:function(t,e){this.settings.options.dataset=t,e&&e.activePage&&(this.settings.options.activePage=e.activePage),e&&e.pagesize&&(this.settings.options.pagesize=e.pagesize),this.grid&&this.grid.updateDataset(t,e)},destroy:function(){$(".modal .searchfield").off("keypress.lookup"),$("body").off("open.lookup close.lookup"),this.icon.off("click.lookup"),this.icon.remove(),this.element.off("keyup.lookup"),this.element.unwrap(),this.modal&&this.modal.element&&(this.modal.element.off("afterclose.lookup"),"function"==typeof this.modal.destroy&&this.modal.destroy()),$.removeData(this.element[0],"lookup")}},$.fn.lookup=function(t){return this.each((function(){var e=$.data(this,"lookup");e?e.updated(t):e=$.data(this,"lookup",new Ts(this,t))}))};var As={Input:function(t,e,i,n,s,a,r,o){this.name="input",this.originalValue=i,this.useValue=!!s.inlineEditor,this.init=function(){s.inlineEditor?this.input=n.find("input"):this.input=$('<input type="'.concat(s.inputType||"text",'" autocomplete="off"/>')).appendTo(n),Ss(this.input,t,e,i,0,s,0,0,o)},this.val=function(t){var e;return t&&this.input.val(t),s&&s.numberFormat&&"percent"===s.numberFormat.style?(e=this.input.val().trim().replace(/(\s%?|%)$/g,""),B.parseNumber(e)/100):this.input.val()},this.focus=function(){this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;s.inlineEditor||setTimeout((function(){t.input.remove()}),0)},this.init()},Textarea:function(t,e,i,n,s,a,r){this.name="textarea",this.originalValue=i,this.init=function(){n.addClass("datagrid-textarea-cell-wrapper");var t=n.get(0).scrollHeight,e=s.editorOptions&&s.editorOptions.minHeight?'style="min-height: '.concat(s.editorOptions.minHeight,'px"'):"";this.input=$("<textarea ".concat(e,' class="textarea">').concat(this.originalValue,"</textarea>")).appendTo(n);var i=s.editorOptions?s.editorOptions:{};"characterCounter"in i||(i.characterCounter=!1),this.api=this.input.data("autogrow-start-height",t).textarea(s.editorOptions).data("textarea"),this.input.on("click.textareaeditor",(function(t){t.stopPropagation()})),s.maxLength&&this.input.attr("maxlength",s.maxLength),s.uppercase&&this.input.addClass("uppercase-text")},this.val=function(t){return t&&this.input.focus().val(t),this.input.val()},this.focus=function(){this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;n.removeClass("datagrid-textarea-cell-wrapper"),setTimeout((function(){t.input.off("click.textareaeditor"),t.input.remove()}),0)},this.init()},Editor:function(t,e,i,n,s,a,r){this.name="editor",this.originalValue=i,this.init=function(){var t=this,e=$.extend({},{buttons:{editor:["header1","header2","separator","bold","italic","underline","separator","foreColor","separator","justifyLeft","justifyCenter","justifyRight"],source:[]},excludeButtons:{editor:[]}},s.editorOptions);this.editorWidth=r.setUnit(e.width||n.outerWidth()),delete e.width,n[0].innerHTML='<div class="editor-wrapper" style="width: '.concat(this.editorWidth,';">\n          <div class="editor" data-init="false">').concat(h.unescapeHTML(i),"</div>\n        </div>"),this.td=n.closest("td"),this.input=$(".editor",n),this.input.popover({content:$(".editor-wrapper",n),placementOpts:{x:0,y:"-".concat(parseInt(n[0].style.height,10)+35),parent:this.td,parentXAlignment:B.isRTL()?"right":"left",strategies:["flip","nudge","shrink"]},placement:"bottom",popover:!0,trigger:"immediate",tooltipElement:"#editor-popup",extraClass:"editor-popup",onHidden:function(){r.commitCellEdit(t.input)}}).editor(e).on("keydown.editor",(function(e){var i=e.which||e.keyCode||e.charCode||0;if((e.ctrlKey||e.metaKey)&&(13===i||10===i)){var n=t.input.data("tooltip");n&&(n.hide(),r.setNextActiveCell(e))}})),C.fixSVGIcons($("#editor-popup"))},this.val=function(){return h.escapeHTML(this.input.html())},this.focus=function(){var t=this;setTimeout((function(){t.input.focus()}),0)},this.destroy=function(){n.removeAttr("style"),r.quickEditMode=!1,this.input.data("editor")&&(this.input.destroy(),this.input.remove())},this.init()},Checkbox:function(t,e,i,n,s,a,r){this.name="checkbox",this.originalValue=i,this.useValue=!0,this.container=n,this.init=function(){this.input=$('<input type="checkbox" class="checkbox"/>').appendTo(n),this.input.after('<label class="checkbox-label"></label>'),s.align&&this.input.addClass("l-".concat(s.align,"-text"))},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=s.isChecked?s.isChecked(t):t,"click"!==a.type&&("keydown"!==a.type||32!==a.keyCode)||$(a.target).is(".datagrid-checkbox-wrapper, .datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(a)),this.input.prop("checked",e)},this.focus=function(){this.input.trigger("focusout"),this.container.parent().focus()},this.destroy=function(){var t=this;setTimeout((function(){t.input.next(".checkbox-label").remove(),t.input.remove()}),0)},this.init()},Colorpicker:function(t,e,i,n,s,a,r){this.name="colorpicker",this.originalValue=i,this.useValue=!0,i=h.stripTags(i),this.init=function(){this.input=$('<input id="colorpicker-'.concat(e,'" name="colorpicker-').concat(e,'" class="colorpicker" value="').concat(i,'" type="text" autocomplete="off"/>')).appendTo(n),this.input.colorpicker(s.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var e=this;this.input.trigger("openlist"),r.rowNodes(t).removeClass("is-hover-row"),this.input.focus(),r.settings.selectOnEdit&&this.input.select(),this.input.off("listclosed").on("listclosed",(function(){r.commitCellEdit(e.input),n.parent("td").focus()}))},this.destroy=function(){},this.init()},Dropdown:function(t,e,n,s,a,r,o,l){this.name="dropdown",this.originalValue=n,this.useValue=!0,this.cell=o.activeCell,this.init=function(){var c=this;if(a.inlineEditor)this.input=s.find("select");else{if(this.input=$('<select class="dropdown"></select>').appendTo(s),a.options){var d,h,u;n=o.fieldValue(l,a.field);for(var p=a.caseInsensitive&&"string"==typeof n?n.toLowerCase():n,g=0;g<a.options.length;g++)d=$("<option></option>"),h=a.options[g],u=a.caseInsensitive&&"string"==typeof h.value?h.value.toLowerCase():h.value,(h.selected||p===u)&&(d.attr("selected","true"),this.originalValue=u),d.attr("value",h.value).attr("id",h.id).attr("data-type",i(h.value)),d.text(h.label),this.input.append(d)}var f=a.editorOptions||{};f.cssClass&&/is-editing/g.test(f.cssClass)||(f.cssClass=f.cssClass||"",f.cssClass+=" is-editing"),this.input.dropdown(f),this.input.on("requestend",(function(){c.val(c.datasetValue)})),this.input.data("dropdown").settings.sourceArguments={column:a,container:s,grid:o,cell:e,event:r,row:t,rowData:l,value:n}}},this.val=function(t){if(this.datasetValue=t,void 0!==t){var e=a.caseInsensitive&&"string"==typeof t?t.toLowerCase():t;this.input.val(t),this.input.find("option").each((function(){var t=$(this),i=t.attr("value"),n=t.attr("data-type"),s=i;"number"===n?s=parseFloat(i):"boolean"===n?s="true"===i:"string"===n&&a.caseInsensitive&&(s=i.toLowerCase()),s===e&&t.attr("selected","true")}))}var i=this.input.find(":selected"),n=i.attr("value"),s=i.attr("data-type");return"number"===s?n=parseFloat(n):"boolean"===s&&(n="true"===n),void 0===n&&(n=i.text()),n},this.focus=function(){var e=this;"click"===r.type?(this.input.trigger("openlist"),o.rowNodes(t).removeClass("is-hover-row"),$("#dropdown-list input").focus()):this.input[0].parentNode.querySelector("div.dropdown").focus();if(!o.settings.selectOnEdit){var i=$("#dropdown-search")[0];if(i)if("number"==typeof i.selectionStart)i.selectionEnd=i.value.length,i.selectionStart=i.selectionEnd;else if(void 0!==i.createTextRange){var n=i.createTextRange();n.collapse(!1),n.select()}}this.input.off("listclosed").on("listclosed",(function(t,i){o.commitCellEdit(e.input),"select"!==i?"tab"===i&&setTimeout((function(){s.parent("td").focus()}),100):s.parent("td").focus()}))},this.destroy=function(){},this.init()},Date:function(t,e,i,n,s,a,r){this.name="date",this.originalValue=i,this.init=function(){this.input=$('<input class="datepicker" autocomplete="off"/>').appendTo(n),this.input.datepicker(s.editorOptions||{dateFormat:s.dateFormat})},this.val=function(i){return"0000"!==i&&"000000"!==i&&"00000000"!==i||(i=""),i&&this.input.val(i),ps.Date(t,e,this.input.val(),s,!0)},this.focus=function(){var t=this;this.input.focus(),r.settings.selectOnEdit&&this.input.select(),"click"===a.type&&$(a.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.input.on("listclosed",(function(){t.input.closest("td").removeClass("is-focused"),setTimeout((function(){t.input.trigger("focusout"),n.parent().focus(),r.setNextActiveCell(a)}),1)}))},this.destroy=function(){var t=this;setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Fileupload:function(t,e,i,n,s,a,r){var o=this,l=C.mergeSettings(void 0,s.editorOptions,{allowedTypes:"*"}),c=l.allowedTypes.split(/[\s|]+/g),d=C.uniqueId(this,"fileupload-".concat(t,"-").concat(e,"-")),u=l.useMultiple?" multiple":"",p=l.isDisabled?" disabled":"",g="";if(1===c.length)"*"!==c[0]&&(g=".".concat(h.ensureAlphaNumeric(c[0])));else for(var f=0,m=c.length;f<m;f++)g+=".".concat(h.ensureAlphaNumeric(c[f])+(f!==m-1?",":""));""!==g&&(g=' accept="'.concat(g,'"')),this.name="fileupload",this.originalValue=i,this.status="init",this.useValue=!0,this.init=function(){d=h.ensureAlphaNumeric(d),u=h.ensureAlphaNumeric(u),p=h.ensureAlphaNumeric(p),this.input=$('<input id="'.concat(d,'" name="').concat(d,'" class="fileupload" type="file" ').concat(g).concat(u).concat(p,' autocomplete="off"/>')),n.append("<label>".concat(this.input[0].outerHTML,"</label>")),this.api=this.input.fileupload(s.editorOptions).data("fileupload"),this.input.closest("td").addClass("is-fileupload").find("label:eq(1)").addClass("audible")},this.val=function(t){return t?(t=h.stripTags(t),this.input.attr("value",t),t):this.input.val()},this.focus=function(){var t=function(){""!==o.originalValue&&(o.status="clear"),r.commitCellEdit(o.input)},e=function(){o.api&&($("body").one("focusin.fileuploadeditor",(function(){setTimeout((function(){"change"!==o.status&&(o.status="cancel",r.commitCellEdit(o.input))}),100)})),o.api.fileInput.trigger("click"))};if(o.input.on("change.fileuploadeditor",(function(){o.status="change",r.commitCellEdit(o.input)})),"keydown"===a.type){var i=a.which||a.keyCode||a.charCode||0;8===i||46===i?t():13===i||10===i?e():r.commitCellEdit(o.input)}if("click"===a.type){var n=$(a.target);n.is(".icon-close")?t():n.is(".icon-fileupload")?e():r.commitCellEdit(o.input)}},this.destroy=function(){o.input.off("change.fileuploadeditor"),r.quickEditMode=!1,o.api&&o.api.destroy()},this.init()},Time:function(t,e,i,n,s,a,r){this.name="time",this.originalValue=i,this.init=function(){this.input=$('<input class="timepicker" autocomplete="off" />').appendTo(n),this.api=this.input.timepicker(s.editorOptions||"").data("timepicker")},this.val=function(t){return t&&this.input.val(t),this.input.val()},this.focus=function(){var t=this;this.input.focus(),r.settings.selectOnEdit&&this.input.select(),"click"===a.type&&$(a.target).is(".icon")&&(this.input.parent().find(".icon").trigger("click"),this.input.closest("td").addClass("is-focused")),this.api.trigger.on("hide.editortime",(function(){t.input.closest("td").removeClass("is-focused"),setTimeout((function(){t.input.trigger("focusout"),n.parent().focus(),r.setNextActiveCell(a)}),1)}))},this.destroy=function(){var t=this;t.api&&t.api.trigger&&t.api.trigger.off("hide.editortime"),setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Lookup:function(t,e,i,n,s,a,r,o){this.name="lookup",this.originalValue=i,this.init=function(){this.input=$('<input class="lookup '.concat("right"===s.align?"align-text-right":"",'" data-init="false" autocomplete="off" />')).appendTo(n),Ss(this.input,t,e,i,0,s,0,0,o),s.editorOptions||(s.editorOptions={}),s.editorOptions.options||(s.editorOptions.options={}),s.editorOptions.options.toolbar||(s.editorOptions.options.toolbar={}),s.editorOptions.options.toolbar.title||(s.editorOptions.options.toolbar.title=s.name),this.input.lookup(s.editorOptions),n.find("span.trigger").attr("tabindex","-1"),this.input.data("lookup").settings.clickArguments={column:s,container:n,grid:r,cell:e,event:a,row:t,rowData:o,value:i}},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){var t=this.input.data("lookup"),e=this.input.closest("td");"keydown"===a.type&&(this.input.focus(),r.settings.selectOnEdit&&this.input.select(),e.on("keydown.editorlookup",(function(t){40===t.keyCode&&(t.preventDefault(),t.stopPropagation())}))),"click"===a.type&&($(a.target).is("svg")?t.openDialog(a):(this.input.focus(),r.settings.selectOnEdit&&this.input.select(),e.on("touchcancel.editorlookup touchend.editorlookup",".trigger",(function(){t.openDialog()})))),this.input.on("change.editorlookup",(function(){r.quickEditMode=!1}))},this.destroy=function(){var t=this,e=this.input.closest("td");setTimeout((function(){r.quickEditMode=!1,e.off("keydown.editorlookup").find(".trigger").off("touchcancel.editorlookup touchend.editorlookup"),t.input.remove()}),0)},this.init()},Autocomplete:function(t,e,i,n,s,a,r){this.name="autocomplete",this.originalValue=i,this.init=function(){this.input=$('<input class="autocomplete datagrid-autocomplete" autocomplete="off" />').appendTo(n),s.editorOptions||(s.editorOptions={}),s.editorOptions.width=n.parent().width(),s.editorOptions.offset={left:-1,top:"medium"===r.settings.rowHeight?1:5},s.maxLength&&this.input.attr("maxlength",s.maxLength),s.uppercase&&this.input.addClass("uppercase-text"),this.input.autocomplete(s.editorOptions)},this.val=function(t){return t?this.input.val(t):this.input.val()},this.focus=function(){r.quickEditMode=!0,this.input.focus(),r.settings.selectOnEdit&&this.input.select()},this.destroy=function(){var t=this;setTimeout((function(){r.quickEditMode=!1,t.input.remove()}),0)},this.init()},Spinbox:function(t,e,i,n,s,a,r){var o=this;this.name="spinbox",this.originalValue=i,this.useValue=!0,this.init=function(){if(s.inlineEditor)o.input=n.find("input");else{var t='<label for="spinbox-'.concat(e,'" class="audible">Quantity</label>\n        <span class="spinbox-wrapper"><span class="spinbox-control down">-</span>\n        <input id="spinbox-').concat(e,'" name="spinbox-').concat(e,'" type="text" class="spinbox" value="\'+ ').concat(i,' +\'" autocomplete="off" />\n        <span class="spinbox-control up">+</span></span>');u.append(n,t,"<label><span><input>"),o.input=n.find("input"),s.editorOptions||(s.editorOptions={}),o.input.spinbox(s.editorOptions)}},this.val=function(t){return t&&o.input.val(t),parseInt(o.input.val(),10)},this.focus=function(){r.quickEditMode=!0,o.input.focus(),r.settings.selectOnEdit&&o.input.select()},this.destroy=function(){s.inlineEditor||setTimeout((function(){r.quickEditMode=!1;var t=o.val();o.input&&o.input.data("spinbox")&&o.input.data("spinbox").destroy(),o.input&&o.input.remove(),n.text(t)}),0)},this.init()},Favorite:function(t,e,i,n,s,a,r){this.name="favorite",this.useValue=!0,this.originalValue=i,this.init=function(){this.input=$('<span class="icon-favorite">'.concat($.createIcon({icon:i?"star-filled":"star-outlined"}),'<input type="checkbox"></span>')).appendTo(n),this.input=this.input.find("input")},this.val=function(t){var e;if(void 0===t)return this.input.prop("checked");e=s.isChecked?s.isChecked(t):t,"click"!==a.type&&("keydown"!==a.type||32!==a.keyCode)||$(a.target).is(".datagrid-cell-wrapper")||(e=!e,r.setNextActiveCell(a)),this.input.prop("checked",e),this.input.find("use").attr("href",e?"#icon-star-filled":"#icon-star-outlined")},this.focus=function(){this.input.trigger("focusout").focus()},this.destroy=function(){var t=this;setTimeout((function(){t.input.parent().remove()}),0)},this.init()}},$s={actionableMode:!1,cellNavigation:!0,rowNavigation:!0,showHoverState:!0,alternateRowShading:!1,columns:[],frozenColumns:{left:[],right:[],expandRowAcrossAllCells:!0},dataset:[],columnReorder:!1,saveColumns:!1,saveUserSettings:{},focusAfterSort:!1,editable:!1,selectOnEdit:!0,isRowDisabled:null,isList:!1,menuId:null,headerMenuId:null,menuSelected:null,menuBeforeOpen:null,headerMenuSelected:null,headerMenuBeforeOpen:null,uniqueId:null,rowHeight:"large",fixedRowHeight:null,selectable:!1,selectChildren:!0,onBeforeSelect:null,allowSelectAcrossPages:null,selectAllCurrentPage:!1,groupable:null,showNewRowIndicator:!0,stretchColumn:null,stretchColumnOnChange:!1,spacerColumn:!1,stickyHeader:!1,columnSizing:"all",twoLineHeader:!1,clickToSelect:!0,toolbar:!1,initializeToolbar:!0,columnIds:[],paging:!1,pagesize:25,pagesizes:[10,25,50,75],showPageSizeSelector:!0,indeterminate:!1,source:null,hidePagerOnOnePage:!1,filterable:!1,filterWhenTyping:!0,disableClientFilter:!1,disableClientSort:!1,resultsText:null,showFilterTotal:!0,virtualized:!1,virtualRowBuffer:10,rowReorder:!1,showDirty:!1,resizeMode:"flex",showSelectAllCheckBox:!0,allowOneExpandedRow:!0,enableTooltips:!1,disableRowDeactivation:!1,disableRowDeselection:!1,sizeColumnsEqually:!1,expandableRow:!1,exportConvertNegative:!1,columnGroups:null,treeGrid:!1,onPostRenderCell:null,onDestroyCell:null,onEditCell:null,onExpandRow:null,onExpandChildren:null,onCollapseChildren:null,onKeyDown:null,emptyMessage:{title:B?B.translate("NoData"):"No Data Available",info:"",icon:"icon-empty-no-data",height:null},searchExpandableRow:!0,allowChildExpandOnMatch:!1,attributes:null};function Es(t,e){this.settings=C.mergeSettings(t,e,$s),this.element=$(t),e.dataset&&(this.settings.dataset=e.dataset),void 0===this.settings.frozenColumns.expandRowAcrossAllCells&&(this.settings.frozenColumns.expandRowAcrossAllCells=$s.frozenColumns.expandRowAcrossAllCells),this.init()}Es.prototype={get pagerAPI(){var t;return this.tableBody&&this.tableBody.length&&(t=this.tableBody.data("pager")),t},init:function(){var t=$("html");this.isTouch=m.features.touch,this.isSafari=t.is(".is-safari"),this.isWindows=-1!==navigator.userAgent.indexOf("Windows"),this.appendTooltip(),this.initSettings(),this.setOriginalColumns(),this.removeToolbarOnDestroy=!1,this.nonVisibleCellErrors=[],this.recordCount=0,this.canvas=null,this.totalWidths={left:0,center:0,right:0},this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.editor=null,this.activeCell={node:null,cell:null,row:null},this.dontSyncUi=!1,this.widthPercent=!1,this.rowSpans=[],this.filterRowRendered=!1,this.scrollLeft=0,this.scrollTop=0,this._selectedRows=[],this.restoreColumns(),this.restoreUserSettings(),this.appendToolbar(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.firstRender(),this.handleEvents(),this.handleKeys(),this.element.trigger("rendered",[this.element,this.element.find("thead"),this.pagerAPI])},initSettings:function(){this.ignoredColumnById("rowStatus"),this.setInlineActionableMode(),this.sortColumn={sortField:null,sortAsc:!0},this.gridCount=$(".datagrid").length+1,this.lastSelectedRow=0,this.contextualToolbar=this.element.prev(".contextual-toolbar"),this.contextualToolbar.addClass("datagrid-contextual-toolbar")},ignoredColumnById:function(t){var e=this.settings;if(t&&e.columns&&(!e.columns||e.columns.length)){for(var i={index:-1},n=0,s=e.columns.length;n<s;n++)e.columns[n].id===t&&(i.index=n);i.index>-1&&e.columns.splice(i.index,1)}},setInlineActionableMode:function(){var t=this.settings;if(t.columns&&(!t.columns||t.columns.length)){for(var e={index:-1},i=0,n=t.columns.length;i<n;i++)t.columns[i].inlineEditor&&(e.index=i);this.inlineMode=e.index>-1,this.inlineMode?(this.element[0].classList.add("has-inline-editor"),this.settings.actionableMode=!0):this.element[0].classList.remove("has-inline-editor")}},render:function(t,e){if(e||(e={}),t&&(e.type="filterrow"),this.settings.source)return e.preserveSelected=this.settings.allowSelectAcrossPages,void this.triggerSource(e);this.loadData(this.settings.dataset,e)},firstRender:function(){if(this.hasLeftPane=this.settings.frozenColumns.left.length>0,this.hasRightPane=this.settings.frozenColumns.right.length>0,this.hasLeftPane&&(this.bodyWrapperLeft=$('<div class="datagrid-wrapper left"></div>'),this.tableLeft=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperLeft),this.element.append(this.bodyWrapperLeft)),this.bodyWrapperCenter=$('<div class="datagrid-wrapper center scrollable-x'.concat(this.hasRightPane?"":" scrollable-y",'"></div>')),this.table=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperCenter),this.element.append(this.bodyWrapperCenter),this.hasRightPane&&(this.bodyWrapperRight=$('<div class="datagrid-wrapper right scrollable-y"></div>'),this.tableRight=$("<table></table>").addClass("datagrid").attr("role",this.settings.treeGrid?"treegrid":"grid").appendTo(this.bodyWrapperRight),this.element.append(this.bodyWrapperRight)),this.element.removeClass("datagrid").addClass("datagrid-container").attr("x-ms-format-detection","none"),this.settings.stickyHeader&&this.element.removeClass("datagrid").addClass("is-sticky"),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight){var t="short"===this.settings.rowHeight?"small":this.settings.rowHeight;t="normal"===this.settings.rowHeight?"large":t,this.hasLeftPane&&this.tableLeft.addClass("".concat(t,"-rowheight")),this.table.addClass("".concat(t,"-rowheight")),this.hasRightPane&&this.tableRight.addClass("".concat(t,"-rowheight")),this.element.addClass("".concat(t,"-rowheight"))}(this.settings.isList?$(this.element).addClass("is-gridlist"):$(this.element).removeClass("is-gridlist"),this.table.empty(),this.clearCache(),this.container=this.element.closest(".datagrid-container"),this.renderRows(),this.renderHeader(),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(this.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));this.settings.emptyMessage&&(this.setEmptyMessage(this.settings.emptyMessage),this.checkEmptyMessage()),this.buttonSelector=".btn, .btn-secondary, .btn-primary, .btn-modal-primary, .btn-tertiary, .btn-icon, .btn-actions, .btn-menu, .btn-split",$(this.buttonSelector,this.table).button(),this.handlePaging(),this.triggerSource("initial")},addRow:function(t,e){var i,n,s=this,a=this,r=!1,o=0;e&&"top"!==e||(e="top",r=!0);var l={icon:"new",text:B.translate("New"),tooltip:B.translate("New")};(t=t||{}).rowStatus=t.rowStatus||l,this.saveDirtyRows();var c=this.settings.dataset;if(this.settings.groupable){c=this.originalDataset||c;var d=-1;if("string"==typeof e){var h=this.settings.groupable.fields[0],u=function(t,e,i,n){for(var s=0,a=t.length;s<a;s++){var r=n?a-1-s:s;if(t[r][e]===i)return r}return-1}(c,h,t[h],!r);d=u>-1?r?u:u+1:0,c.splice(d,0,t),o=d}else c.splice(e,0,t),o=e}else"string"==typeof e?(c[r?"unshift":"push"](t),o=r?o:c.length-1):(c.splice(e,0,t),o=e);this.restoreDirtyRows(),this.setRowGrouping(),this.settings.groupable||this.pagerRefresh(e),this._selectedRows.forEach((function(t){void 0!==t.pagingIdx&&t.pagingIdx>=o&&(t.idx++,t.pagingIdx++)})),this.clearCache(),this.renderRows(),this.settings.groupable&&(n=this.dataRowNode(o),o=this.visualRowIndex(n)),this.syncSelectedUI(),setTimeout((function(){a.setActiveCell(o,0),s.settings.groupable||(n=s.visualRowNode(o)),i={row:o,cell:0,target:n,value:t,oldValue:{}},a.element.triggerHandler("addrow",i)}),100)},pagerRefresh:function(t,e){if(this.pagerAPI){var i={};"string"==typeof t?i.activePage="top"===t?1:this.pagerAPI.state.pages:"number"==typeof t&&(i.activePage=Math.floor(t/(this.pagerAPI.settings.pagesize+1))),this.settings.source||(i.total=this.settings.dataset.length,i.pagesize=this.settings.pagesize),e&&(i.activePage=this.settings.pagesize*this.pagerAPI.activePage>this.settings.dataset.length?1:this.pagerAPI.activePage),this.renderPager(i,!0)}},removeRow:function(t,e,i){var n=this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')),s=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset,a=s[t];this.saveDirtyRows(),this.unselectRow(t,e),s.splice(t,1),this.restoreDirtyRows(),this.settings.selectable&&!this.settings.groupable&&this.settings.groupable&&this.originalDataset&&this.syncDatasetWithSelectedRows(),this.preventSelection=!0,e||(this.setRowGrouping(),this.pagerRefresh("top",!0),this.clearCache(),this.renderRows()),0!==this.nonVisibleCellErrors.length&&(this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(e){return e.row!==t})),this.showNonVisibleCellErrors()),delete this.preventSelection,this.syncSelectedUI();var r={row:t,cell:null,target:n,item:a,oldValue:a};return i?r:(this.element.trigger("rowremove",r),!0)},removeSelected:function(t){this._selectedRows.sort((function(t,e){return t.idx<e.idx?-1:t.idx>e.idx?1:0}));for(var e=[],i=this._selectedRows.length-1;i>=0;i--)e.push({row:this._selectedRows[i].idx,item:this._selectedRows[i],cell:null,target:null}),this.removeRow(this._selectedRows[i].idx,i>0,t);t&&this.element.trigger("rowremove",e)},updateDataset:function(t,e){if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var i=this.element.parent().find(".toolbar").find(".searchfield");i.val(""),i.parent().removeClass("has-text"),this.clearFilter()}this.loadData(t,e)},triggerSource:function(t,e,i){if(this.settings.source){var n=this,s={};this.pagerAPI&&(s=this.pagerAPI.state),"string"==typeof t?(s.type=t,s.trigger=i):t&&(s=C.extend({},s,t)),e&&"function"!=typeof e&&"string"==typeof e.type&&(s.type=e.type),!1!==this.element.triggerHandler("beforepaging",s)&&(this.sortColumn&&this.sortColumn.sortId&&(s.sortAsc=this.sortColumn.sortAsc,s.sortField=this.sortColumn.sortField,s.sortId=this.sortColumn.sortId),this.filterExpr&&this.filterExpr.length&&(s.filterExpr=this.filterExpr),this.element.trigger("paging",s),this.settings.source(s,(function(t,i){i.activePage>-1&&(n.activePage=i.activePage),i.grandTotal&&(n.grandTotal=i.grandTotal),n.loadData(t,i),e&&"function"==typeof e&&e(!0),n.element.trigger("afterpaging",s),n.afterPaging(s)})))}},afterPaging:function(t){this.settings.paging&&(this.settings.source&&(this.pagerAPI&&this.pagerAPI.hidePagerBar(t)?this.element.removeClass("paginated"):this.element.addClass("paginated"),t.total&&(this.recordCount=t.total,this.displayCounts(t.total))),!this.settings.source&&this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value))},loadData:function(t,e){var i,n;this.settings.dataset=t,e||(e={}),"filterrow"===e.type&&(e.activePage=this.pagerAPI&&this.pagerAPI.activePage||1,e.pagesize=this.settings.pagesize,e.total=e.total||-1,e.type="filterrow"),e.activePage||(e.activePage=1,e.pagesize=this.settings.pagesize,e.total=-1,this.settings.treeGrid&&(e.preserveSelected=!0)),this.settings.source&&e.grandTotal?this.grandTotal=e.grandTotal:this.grandTotal=null,this.pagerAPI&&this.settings.showDirty&&this.settings.source&&/first|last|next|prev|sorted/.test(e.type)&&(this.dirtyArray=void 0),this.settings.groupable&&this.settings.dataset[0]&&!this.settings.dataset[0].values&&(this._selectedRows=[],this.originalDataset=null,this.clearDirty()),this.setTreeDepth(),this.settings.source&&(this.originalDataset=null,this.setRowGrouping()),this.setTreeRootNodes(),e.preserveSelected||!this.settings.source||this.settings.allowSelectAcrossPages||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),e.preserveSelected||"initial"!==e.type&&e.type||(this.settings.selectAllCurrentPage?this.unSelectAllRowsCurrentPage():this.unSelectAllRows()),this.settings.disableClientFilter&&(this.restoreFilter=!0,this.restoreSortOrder=!0,this.savedFilter=this.filterConditions()),"initial"===e.type?(this.clearCache(),this.restoreUserSettings(),this.renderRows(),this.renderHeader()):0===this.element.find(".datagrid-filter-wrapper .is-open").length?(this.clearCache(),this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.renderRows()):(this.clearCache(),this.renderRows()),this.cellNode(0,0,!0).attr("tabindex","0"),this.renderPager(e,!0),this.displayCounts(),this.settings.paging&&this.settings.source&&null!==(i=e)&&void 0!==i&&(null==i?void 0:i.filterExpr)&&"all"===(null===(n=e.filterExpr[0])||void 0===n||null==n?void 0:n.column)&&this.highlightSearchRows(e.filterExpr[0].value)},uniqueId:function(t){return t=null==t?"":t,(this.settings.uniqueId?"".concat(this.settings.uniqueId,"-").concat(t):"".concat(window.location.pathname.split("/").pop().replace(/\.xhtml|\.shtml|\.html|\.htm|\.aspx|\.asp|\.jspx|\.jsp|\.php/g,"").replace(/[^-\w]+/g,"").replace(/\./g,"-").replace(/ /g,"-").replace(/%20/g,"-"),"-").concat(this.element.attr("id")||"datagrid","-").concat(this.gridCount||0).concat(t)).replace(/--/g,"-")},visibleColumns:function(t){for(var e=[],i=0;i<this.settings.columns.length;i++){var n=this.settings.columns[i];n.hidden||(t&&"selectionCheckbox"===n.id||e.push(n))}return e},getColumnGroup:function(t){for(var e=0,i=this.settings.columnGroups,n=0;n<i.length;n++)if(!i[n].hidden&&(e+=i[n].colspan)>=t)return this.uniqueId("-header-group-".concat(n));return""},updateColumnGroup:function(t,e){var i=this.settings.columnGroups;if(this.originalColGroups||(this.originalColGroups=C.deepCopy(i)),this.settings.groupable)for(var n=this.tableBody.find(".datagrid-rowgroup-header"),s=this.visibleColumns().length,a=0;a<n.length;a++)n[a].children[0].setAttribute("colspan",s);else if(i&&this.colGroups){var r=0,o=-1;this.originalColGroups.forEach((function(e,i){var n=parseInt(e.colspan,10);t>=r&&t<=r+n&&(o=i),r+=n}));var l=parseInt(this.colGroups[o].getAttribute("colspan"),10),c=this.colGroups[o].classList.contains("is-hidden");if(!e||!c)return e&&!c?(this.colGroups[o].classList.remove("is-hidden"),void this.colGroups[o].setAttribute("colspan",l+1)):void(l-1!=0?this.colGroups[o].setAttribute("colspan",l-1):this.colGroups[o].classList.add("is-hidden"));this.colGroups[o].classList.remove("is-hidden")}},updateGroupHeadersAfterColumnReorder:function(t,e){var i=this.settings.columnGroups;if(i){this.originalColGroups||(this.originalColGroups=C.deepCopy(i));var n=i.map((function(t){return parseInt(t.colspan,10)})),s={from:null,to:null,total:0};n.forEach((function(i,n){s.total+=i,s.total>t&&null===s.from&&(s.from=n),s.total>e&&null===s.to&&(s.to=n)})),s.from!==s.to&&(i[s.from].colspan-=1,i[s.to].colspan+=1)}},headerText:function(t){var e=t.name?t.name:"";return e||"drilldown"!==t.id?e:(e=B.translate("Drilldown"),'<span class="audible">'.concat(e,"</span>"))},getContainer:function(t){return this.settings.frozenColumns.left&&this.settings.frozenColumns.left.indexOf(t)>-1?"left":this.settings.frozenColumns.right&&this.settings.frozenColumns.right.indexOf(t)>-1?"right":"center"},renderHeader:function(){var t,e=this,i={left:"",center:"",right:""},n=this.settings.columnGroups;if(n){this.element.addClass("has-group-headers");var s,a=this.settings.columns,r=a.length,o=this.visibleColumns().length,l=n.map((function(t){return parseInt(t.colspan,10)})),c=function(){return l.reduce((function(t,e){return t+e}),0)},d=function(){var t=c();return t>r?t-r:r-t};if(i.left+='<tr role="row" class="datagrid-header-groups">',i.center+='<tr role="row" class="datagrid-header-groups">',i.right+='<tr role="row" class="datagrid-header-groups">',c()>r)for(var h=!0,p=l.length-1;p>=0&&h;p--)s=d(),l[p]>=s?(l[p]-=s,h=!1):l[p]=0;var g=0,f=0;if(l.forEach((function(s,o){for(var l=s,c=g+s;g<c;g++)g<r&&a[g].hidden&&l--;var d=n[o].hidden||l<1?' class="is-hidden"':"",h=' colspan="'.concat(l>0?l:1,'"'),u=n[o].align?"l-".concat(n[o].align,"-text"):"";t=e.uniqueId("-header-group-".concat(o)),l>0&&(f+=l);var p=e.getContainer(e.settings.columns[o].id);i[p]+="<th".concat(d).concat(h,' id="').concat(t,'" class="').concat(u,'"><div class="datagrid-column-wrapper"><span class="datagrid-header-text">').concat(n[o].name,"</span></div></th>")})),f<o){var m=' colspan="'.concat((s=o-f)>0?s:1,'"');e.hasRightPane?i.right+="<th".concat(m,"></th>"):i.center+="<th".concat(m,"></th>")}this.settings.spacerColumn&&(i.center+='<th class="datagrid-header-groups-spacer-column"></th>'),i.left+="</tr><tr>",i.center+="</tr><tr>",i.right+="</tr><tr>"}else i.left+='<tr role="row">',i.center+='<tr role="row">',i.right+='<tr role="row">';for(var v=0;v<this.settings.columns.length;v++){var b,y=e.settings.columns[v],w=e.getContainer(y.id),x=e.uniqueId("-header-".concat(v)),k=void 0===y.sortable||y.sortable,T=void 0===y.resizable||y.resizable,S=void 0===y.exportable||y.exportable,A="selectionCheckbox"===y.id,E=this.getHeaderAlignmentClass(y);(e.hasLeftPane||e.hasRightPane)&&(e.settings.frozenColumns.left&&e.settings.frozenColumns.left.indexOf(y.id)>-1||e.settings.frozenColumns.right&&e.settings.frozenColumns.right.indexOf(y.id)>-1)&&(y.hideable=!1),void 0===y.hideable&&(y.hideable=!0);var D="";D+=k?" is-sortable":"",D+=T?" is-resizable":"",D+=y.hidden?" is-hidden":"",D+=y.filterType?" is-filterable":"",D+="ellipsis"===y.textOverflow?" text-ellipsis":"",D=""!==(D+=""!==E?E:"")?' class="'.concat(D.substr(1),'"'):"";var I=C.stringAttributes(this,this.settings.attributes,"col-".concat(null===(b=y.id)||void 0===b||null==b?void 0:b.toLowerCase()));I||(I='id="'.concat(x,'"')),i[w]+='<th scope="col" role="columnheader" '.concat(I,' data-column-id="').concat(y.id,'"').concat(y.field?' data-field="'.concat(y.field,'"'):"").concat(y.headerTooltip?' title="'.concat(y.headerTooltip,'"'):"").concat(!1===y.reorderable?' data-reorder="false"':"").concat(n?' headers="'.concat(e.getColumnGroup(v),'"'):"",' data-exportable="').concat(S?"yes":"no",'"').concat(D,">");var L="";k&&(L="".concat('<div class="sort-indicator"><span class="sort-asc">').concat($.createIcon({icon:"dropdown"}),"</span>")+'<span class="sort-desc">'.concat($.createIcon({icon:"dropdown"}),"</div>")),i[w]+='<div class="'.concat(A?"datagrid-checkbox-wrapper ":"datagrid-column-wrapper").concat(E,'">\n      <span class="datagrid-header-text').concat(y.required?" required":"",'">').concat(e.headerText(this.settings.columns[v])).concat(" l-center-text"===E?L:"","</span>"),A&&(e.settings.showSelectAllCheckBox?i[w]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox" tabindex="0"></span>':i[w]+='<span aria-checked="false" class="datagrid-checkbox" aria-label="Selection" role="checkbox" style="display:none" tabindex="0"></span>'),k&&" l-center-text"!==E&&(i[w]+=L),i[w]+="</div>".concat(e.filterRowHtml(y,v),"</th>")}this.settings.spacerColumn&&(i.center+='<th class="datagrid-header-spacer-column"></th>'),i.left+="</tr>",i.center+="</tr>",i.right+="</tr>",void 0===e.headerRow?(e.hasLeftPane&&(e.headerRowLeft=$('<thead class="datagrid-header left">'.concat(i.left,"</thead>")),e.tableLeft.find("colgroup").after(e.headerRowLeft)),e.headerRow=$('<thead class="datagrid-header center">'.concat(i.center,"</thead>")),e.table.find("colgroup").after(e.headerRow),e.hasRightPane&&(e.headerRowRight=$('<thead class="datagrid-header right">'.concat(i.right,"</thead>")),e.tableRight.find("colgroup").after(e.headerRowRight))):(e.hasLeftPane&&u.html(e.headerRowLeft,i.left,"*"),u.html(e.headerRow,i.center,"*"),e.hasRightPane&&u.html(e.headerRowRight,i.right,"*")),n&&e.headerRow&&(e.colGroups=$.makeArray(this.container.find(".datagrid-header-groups th"))),e.syncHeaderCheckbox(this.settings.dataset),e.setScrollClass(),e.attachFilterRowEvents(),e.settings.columnReorder&&e.createDraggableColumns(),this.restoreSortOrder=!1,this.setSortIndicator(this.sortColumn.sortId,this.sortColumn.sortAsc),this.restoreFilter?(this.restoreFilter=!1,this.applyFilter(this.savedFilter,"restore"),this.savedFilter=null):this.filterExpr&&this.filterExpr.length>0&&this.setFilterConditions(this.filterExpr),this.activeEllipsisHeaderAll()},getHeaderAlignmentClass:function(t){return void 0===t.headerAlign?t.align?" l-".concat(t.align,"-text"):"":" l-".concat(t.headerAlign,"-text")},filterSetDatepicker:function(t,e,i){var n=t.data("datepicker"),s=t.data("is-range");i=i||{};var a=function(){n&&"function"==typeof n.destroy&&n.destroy(),t.datepicker(i)};n&&s||"in-range"!==e?n&&!s||"in-range"===e||(i.range={useRange:!1},t.removeData("is-range"),a()):(t.data("is-range",!0),i.range={useRange:!0},a())},filterRowHtml:function(t,e){var i="",n=this.getHeaderAlignmentClass(t);if(t.filterType){var s,a,r=t,o=this.uniqueId("-header-filter-".concat(e)),l=Array.isArray(r.filterRowEditorOptions)?r.filterRowEditorOptions:r.options,c="";if("select"===r.filterType&&l){for(var d=!1,h=0,u=l.length;h<u;h++)if(!l[h].label){d=!0;break}d||(c="<option></option>")}i='<div class="datagrid-filter-wrapper'.concat(n,'" ').concat(this.settings.filterable?"":' style="display:none"',">").concat(this.filterButtonHtml(r),'<label class="audible" for="').concat(o,'">').concat(r.name,"</label>");var p=C.stringAttributes(this,this.settings.attributes,"filter-".concat(null===(s=r.id)||void 0===s||null==s?void 0:s.toLowerCase()));switch(p||(p='id="'.concat(o,'"')),r.filterType){case"checkbox":break;case"date":i+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="datepicker" ').concat(p,"/>");break;case"integer":a={patternOptions:{allowNegative:!0,allowThousandsSeparator:!1,allowDecimal:!1,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"},r.maskOptions=C.extend(!0,{},a,r.maskOptions),i+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p," />");break;case"percent":case"decimal":var g={patternOptions:{allowNegative:!0,allowDecimal:!0,symbols:{thousands:B.currentLocale.data.numbers?B.currentLocale.data.numbers.group:",",decimal:B.currentLocale.data.numbers?B.currentLocale.data.numbers.decimal:".",negative:B.currentLocale.data.numbers?B.currentLocale.data.numbers.minusSign:"-"}},process:"number"};r.numberFormat?(a={patternOptions:{decimalLimit:r.numberFormat.maximumFractionDigits}},r.maskOptions=C.extend(!0,{},a,g,r.maskOptions)):r.maskOptions=C.extend(!0,{},g,r.maskOptions),i+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p," />");break;case"contents":case"select":if(i+="<select ".concat(p," ").concat("select"===r.filterType?'class="dropdown"':'multiple class="multiselect"').concat(r.filterDisabled?" disabled":"",">").concat(c),l)for(var f=0,m=l.length;f<m;f++){var v=l[f],b=r.caseInsensitive&&"string"==typeof v.value?v.value.toLowerCase():v.value;v&&""!==b&&(i+='<option value = "'.concat(b,'">').concat(v.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"multiselect":if(i+="<select ".concat(p,' class="multiselect" multiple').concat(r.filterDisabled?" disabled":"",">"),l)for(var y=0,w=l.length;y<w;y++){var x=l[y],k=r.caseInsensitive&&"string"==typeof x.value?x.value.toLowerCase():x.value;x&&"string"==typeof x.label&&(i+='<option value = "'.concat(k,'">').concat(x.label,"</option>"))}i+='</select><div class="dropdown-wrapper"><div class="dropdown"><span></span></div><svg class="icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-dropdown"></use></svg></div>';break;case"time":i+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="timepicker" ').concat(p,"/>");break;case"lookup":i+="<input ".concat(r.filterDisabled?" disabled":"",' type="text" class="lookup" ').concat(p," >");break;default:i+="<input".concat(r.filterDisabled?" disabled":"",' type="text" ').concat(p,"/>")}i+="</div>"}return t.filterType||(i='<div class="datagrid-filter-wrapper is-empty'.concat(" ".concat(n),'"></div>')),i},attachFilterRowEvents:function(){var t,e=this,i=this;this.settings.filterable&&(this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.off("click.datagrid-filter").on("click.datagrid-filter",".btn-filter",(function(){var t=$(this),e=t.data("popupmenu");return e?e.close(!0,!0):t.off("beforeopen.datagrid-filter").on("beforeopen.datagrid-filter",(function(){var e=t.next(".popupmenu-wrapper");C.fixSVGIcons(e),i.hideTooltip()})).popupmenu({trigger:"immediate",offset:{y:15},placementOpts:{strategies:["flip","nudge"]}}).off("selected.datagrid-filter").on("selected.datagrid-filter",(function(){var e=t.closest('th[role="columnheader"]'),n=i.columnById(e.attr("data-column-id"))[0];if(n&&/date|integer|decimal/.test(n.filterType)){var s=e.find("input"),a=e.find(".btn-filter .icon-dropdown:first").getIconName().replace("filter-","");if("date"===n.filterType)i.filterSetDatepicker(s,a,n.editorOptions);else{var r,o=(null===(r=n.maskOptions)||void 0===r||null==r?void 0:r.rangeNumberDelimeter)||"-",l="in-range"===a,c=s.data("mask"),d=l?{process:"rangeNumber",patternOptions:{delimeter:o}}:{process:"number",patternOptions:{delimeter:""}};c&&c.settings.process!==d.process&&(n.maskOptions=C.extend(!0,{},n.maskOptions,d),c.updated(d))}}i.applyFilter(null,"selected")})).off("close.datagrid-filter").on("close.datagrid-filter",(function(){var t=$(this).data("popupmenu");t&&t.destroy()})),!1})),this.element.off("keydown.datagrid-filter-input").on("keydown.datagrid-filter-input",".datagrid-filter-wrapper input",(function(e){return clearTimeout(t),e.stopPropagation(),13!==e.which||(i.applyFilter(null,"enter"),e.preventDefault(),e.stopPropagation(),!1)})),this.settings.filterWhenTyping&&this.element.off("keyup.datagrid-filter-input").on("keyup.datagrid-filter-input",".datagrid-filter-wrapper input",(function(n){13!==n.which&&(e.activeCell&&e.activeCell.isFocused&&(e.activeCell.isFocused=!1),clearTimeout(t),t=setTimeout((function(){i.applyFilter(null,"keyup")}),400))})),this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th").each((function(){var t=i.columnById($(this).attr("data-column-id"))[0],e=$(this);if(!t)return!0;e.find("select.dropdown").each((function(){var n=$(this);n.dropdown(t.editorOptions).on("selected.datagrid",(function(){i.applyFilter(null,"selected")})).on("listopened.datagrid",(function(){var t=n.data("dropdown");t&&(C.isInViewport(t.list[0])||i.adjustPosLeft(t.list[0]))})),n.data("dropdown").settings.sourceArguments={column:t,container:e,grid:i,cell:t,event:void 0,row:-1,rowData:{},value:void 0}})),e.find("select.multiselect").each((function(){var n=this,s=$(this);s.multiselect(t.editorOptions).on("selected.datagrid",(function(){var t=$(n);$("#".concat(t.attr("id"))).val(t.val()),i.applyFilter(null,"selected")})),s.data("dropdown").settings.sourceArguments={column:t,container:e,grid:i,cell:t,event:void 0,row:-1,rowData:{},value:void 0}})),t.maskOptions&&e.find("input").mask(t.maskOptions),t.mask&&e.find("input").mask(t.mask);var n=e.find(".datepicker");n.length&&"function"==typeof $().datepicker&&n.datepicker(t.editorOptions||{dateFormat:t.dateFormat}).on("listclosed.datepicker",(function(){i.applyFilter(null,"selected")}));var s=e.find(".lookup");s.length&&"function"==typeof $().lookup&&(t.editorOptions&&(t.editorOptions.clickArguments?t.editorOptions.clickArguments.grid=i:t.editorOptions.clickArguments={grid:i},t.editorOptions.clearArguments?t.editorOptions.clearArguments.grid=i:t.editorOptions.clearArguments={grid:i}),s.lookup(t.editorOptions||{}),i.settings.filterWhenTyping&&s.on("change",(function(){i.applyFilter(null,"selected")})));var a=e.find(".timepicker");return a.length&&"function"==typeof $().timepicker&&a.timepicker(t.editorOptions||{timeFormat:t.timeFormat}),t.mask&&e.find("input").mask({pattern:t.mask,mode:t.maskMode}),null})),i.filterRowRendered=!0)},filterItemHtml:function(t,e,i){var n=$.createIcon({classes:"icon icon-filter",icon:"filter-".concat(t)});return'<li class="'.concat(t," ").concat(i?" is-checked":"",'"><a href="#">').concat(n,"<span>").concat(B.translate(e),"</span></a></li>")},filterButtonHtml:function(t){var e;if(!t.filterType)return"";var i=this,n=t.filterDisabled,s=$.isArray(t.filterConditions)?t.filterConditions:[],a=function(t,e,n){var a,r,o=!(!s.length||s[0]!==t)||n;return!s.length||(a=t,r=r||s,$.inArray(a,r)>-1)?i.filterItemHtml(t,e,o):""},r=C.stringAttributes(this,this.settings.attributes,"btn-filter-".concat(null===(e=t.id)||void 0===e||null==e?void 0:e.toLowerCase())),o=function(t,e){return'<button type="button" '.concat(r,' class="btn-menu btn-filter').concat(e?" ".concat(e):"",'" data-init="false" ').concat(n?" disabled":"").concat(t?' data-default="'.concat(t,'"'):"",' type="button"><span class="audible">Filter</span>')+'<svg class="icon-dropdown icon" focusable="false" aria-hidden="true" role="presentation"><use href="#icon-filter-{{icon}}"></use></svg>'.concat($.createIcon({icon:"dropdown",classes:"icon-dropdown"}),'</button><ul class="popupmenu has-icons is-translatable is-selectable">')},l="",c="";return"contents"===t.filterType||"select"===t.filterType||"multiselect"===t.filterType?"":("text"===t.filterType&&(c=s.length?s[0]:"contains",l=0===s.length?(l=o(c)+a("contains","Contains",!0)+a("does-not-contain","DoesNotContain")+a("equals","Equals")+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")+a("end-with","EndsWith")+a("does-not-end-with","DoesNotEndWith")+a("start-with","StartsWith")+a("does-not-start-with","DoesNotStartWith")).replace("{{icon}}",c):(l=o(c)+s.map((function(t){return a(t,function(t){switch(t=t.split("-").map((function(t){return t=t.charAt(0).toUpperCase()+t.slice(1)})).join("")){case"StartWith":t=t.replace("StartWith","StartsWith");break;case"EndWith":t=t.replace("EndWith","EndsWith");break;case"LessEquals":t=t.replace("LessEquals","LessOrEquals");break;case"GreaterEquals":t=t.replace("GreaterEquals","GreaterOrEquals")}return t}(t))})).join("")).replace("{{icon}}",c)),"checkbox"===t.filterType&&(l=(l+=o(c=s.length?s[0]:"selected-notselected","btn-filter-checkbox")+a("selected-notselected","All",!0)+a("selected","Selected")+a("not-selected","NotSelected")).replace("{{icon}}",c)),"checkbox"!==t.filterType&&"text"!==t.filterType&&(l=(l+=o(c=s.length?s[0]:"equals")+a("equals","Equals","lookup"===t.filterType||"integer"===t.filterType||"decimal"===t.filterType||"date"===t.filterType||"time"===t.filterType)+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")).replace("{{icon}}",c)),/\b(date|integer|decimal|percent)\b/g.test(t.filterType)&&(l+=a("in-range","InRange")),/\b(integer|decimal|date|time|percent)\b/g.test(t.filterType)&&(l=(l+="".concat(a("less-than","LessThan")).concat(a("less-equals","LessOrEquals")).concat(a("greater-than","GreaterThan")).concat(a("greater-equals","GreaterOrEquals"))).replace("{{icon}}","less-than")),"lookup"===t.filterType&&(l=(l=o(c=s.length?s[0]:"contains")+a("contains","Contains",!0)+a("does-not-contain","DoesNotContain")+a("equals","Equals")+a("does-not-equal","DoesNotEqual")+a("is-empty","IsEmpty")+a("is-not-empty","IsNotEmpty")+a("end-with","EndsWith")+a("does-not-end-with","DoesNotEndWith")+a("start-with","StartsWith")+a("does-not-start-with","DoesNotStartWith")+a("less-than","LessThan")+a("less-equals","LessOrEquals")+a("greater-than","GreaterThan")+a("greater-equals","GreaterOrEquals")).replace("{{icon}}",c)),l+="</ul>")},toggleFilterRow:function(){this.settings.filterable?(this.element.find(".datagrid-filter-wrapper").hide(),this.settings.filterable=!1,this.filterRowRendered=!1,this.element.removeClass("has-filterable-columns"),this.element.removeClass("has-two-line-header"),this.element.triggerHandler("closefilterrow")):(this.settings.filterable=!0,this.filterRowRendered=!0,this.element.addClass("has-filterable-columns"),this.settings.twoLineHeader&&this.element.addClass("has-two-line-header"),this.element.find(".datagrid-filter-wrapper").show(),this.element.triggerHandler("openfilterrow"),this.attachFilterRowEvents()),this.setupTooltips()},applyFilter:function(t,e){var n=this,s=!1,a=function t(e){for(var i=0,n=e.length;i<n;i++)void 0!==e[i]._isFilteredOut&&delete e[i]._isFilteredOut,e[i].children&&t(e[i].children)};t?this.setFilterConditions(t):t=this.filterConditions(),void 0===this.filterExpr&&(this.filterExpr=[]),this.pagerAPI&&JSON.stringify(t)!==JSON.stringify(this.filterExpr)&&(this.filterExpr=t,s=!0,this.settings.treeGrid&&a(this.settings.dataset));var r=function(e){for(var s=!0,a=function(i){var a=n.columnById(t[i].columnId)[0];if(void 0===a)return{v:!1};var r,o=e&&void 0!==e[a.field]?e[a.field]:n.fieldValue(e,a.field),l=null==o?"":o.toString().toLowerCase(),c=t[i].value.toString().toLowerCase(),d=null,h=null,u=null,p=!1;if("percent"===a.filterType&&(c=(c/100).toString(),"decimal"==="".concat(a.name).toLowerCase()?(o=ps.Decimal(!1,!1,o,a),c=ps.Decimal(!1,!1,c,a)):"integer"==="".concat(a.name).toLowerCase()&&(o=ps.Integer(!1,!1,o,a),c=ps.Integer(!1,!1,c,a))),"text"===a.filterType){var g=a.formatter,f=t[i].columnId;l=null==(o=(o=n.formatValue(g,i,f,o,a,e,n)).replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").trim().toLowerCase())?"":o.toString().toLowerCase()}if("contents"!==a.filterType&&"select"!==a.filterType&&"multiselect"!==a.filterType||(o=null==o?"":o.toString().toLowerCase()),!("number"!=typeof o&&(isNaN(o)||""===o||t[i].value instanceof Array)||/^(date|time|text)$/.test(a.filterType)))if(o=null===o?o:parseFloat(o),a&&"rangeNumber"===(null===(r=a.maskOptions)||void 0===r||null==r?void 0:r.process)){var m,v=null===(m=a.maskOptions.patternOptions)||void 0===m||null==m?void 0:m.delimeter;v=")".concat(v,"("),"("===c.substr(0,1)&&(c=c.substr(1)),")"===c.substr(-1)&&(c=c.substr(0,c.length-1)),c=c.split(v).map((function(t){return B.parseNumber(t)})).sort((function(t,e){return t-e})),p=!0}else c=B.parseNumber(c),p=!1;if("date"===a.filterType||"time"===a.filterType){"string"==typeof o&&(o=a.formatter(!1,!1,o,a,!0));var b=function(e,n){return(n=B.parseDate(n,t[i].format))&&("time"===a.filterType&&(n.setDate(1),n.setMonth(0),n.setYear(0)),n=n.getTime()),e instanceof Date?(e=new Date(e.getTime()),"time"===a.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):a.editorOptions&&a.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()):"string"==typeof e&&e&&(e=a.sourceFormat?B.parseDate(e,"string"==typeof a.sourceFormat?{pattern:a.sourceFormat}:a.sourceFormat):B.parseDate(e,{pattern:t[i].format}))&&("time"===a.filterType?(e.setDate(1),e.setMonth(0),e.setYear(0)):a.editorOptions&&a.editorOptions.showTime||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e=e.getTime()),{rValue:e,cValue:n}},y=null;if("in-range"===t[i].operator){var w=n.settings.columns.indexOf(a),x=n.element.find(".datagrid-header th:eq(".concat(w,") .datagrid-filter-wrapper input")).data("datepicker");x&&(h=x.settings.range.separator,(d=x.settings.range.data)&&d.start?y=b(o,d.start):h&&c.indexOf(h)>-1&&(y=b(o,(u=c.split(h))[0])))}else y=b(o,t[i].value);o=y?y.rValue:o,c=y?y.cValue:c}switch(t[i].operator){case"equals":if(t[i].value instanceof Array){s=!1;for(var C=0;C<t[i].value.length;C++){t[i].value[C].toLowerCase()===o&&(""!==o.toString()||""===t[i].value[C])&&(s=!0)}}else s=o===c&&""!==o;break;case"does-not-equal":s=o!==c;break;case"contains":s=l.indexOf(c)>-1&&""!==o.toString();break;case"does-not-contain":s=-1===l.indexOf(c);break;case"end-with":s=l.lastIndexOf(c)===l.length-c.toString().length&&""!==l&&l.length>=c.toString().length;break;case"start-with":s=0===l.indexOf(c)&&""!==l;break;case"does-not-end-with":s=!(s=l.lastIndexOf(c)===l.length-c.toString().length&&""!==l&&l.length>=c.toString().length);break;case"does-not-start-with":s=!(0===l.indexOf(c)&&""!==l);break;case"is-empty":s=""===l;break;case"is-not-empty":if(""===o){s=""!==o;break}s=!(null===o);break;case"in-range":if(s=!1,d&&d.startDate&&d.endDate){var k=d.startDate.getTime(),T=d.endDate.getTime();s=o>=k&&o<=T&&null!==o}else if(u){var S=B.parseDate(u[0],t[i].format),A=B.parseDate(u[1],t[i].format);S&&A&&(S=S.getTime(),A=A.getTime(),s=o>=S&&o<=A&&null!==o)}if(p){var $=""!==o&&null!==o;s=o>=c[0]&&o<=c[1]&&$}break;case"less-than":s=o<c&&""!==o&&null!==o;break;case"less-equals":s=o<=c&&""!==o&&null!==o;break;case"greater-than":s=o>c&&""!==o&&null!==o;break;case"greater-equals":s=o>=c&&""!==o&&null!==o;break;case"selected":if(a&&a.isChecked){s=a.isChecked(o);break}s=("1"===l||"true"===l||!0===o||1===o)&&""!==l;break;case"not-selected":if(a&&a.isChecked){s=!a.isChecked(o);break}s="0"===l||"false"===l||!1===o||0===o||""===l;break;case"selected-notselected":s=!0}return s?void 0:{v:!1}},r=0;r<t.length;r++){var o=a(r);if("object"===i(o))return o.v}return s};if(!this.settings.disableClientFilter)if(this.settings.treeGrid){!function(){for(var e=!0,i=0,n=t.length;i<n;i++)"checkbox"!==t[i].filterType&&""===t[i].value.toString().trim()||(e=!1);return e}()?function t(e){for(var i=!0,n=0,s=e.length;n<s;n++){var a=e[n];a.children?t(a.children)?(a._isFilteredOut=!r(a),a._isFilteredOut||(i=!1)):i=!1:(a._isFilteredOut=!r(a),a._isFilteredOut||(i=!1))}return i}(this.settings.dataset):a(this.settings.dataset)}else if(this.settings.groupable)for(var o,l=0,c=this.settings.dataset.length;l<c;l++){for(var d=!0,h=0,u=this.settings.dataset[l].values.length;h<u;h++)o=!r(this.settings.dataset[l].values[h]),this.settings.dataset[l].values[h]._isFilteredOut=o,o||(d=!1);this.settings.dataset[l]._isFilteredOut=d}else for(var p,g=0,f=this.settings.dataset.length;g<f;g++)p=!r(this.settings.dataset[g]),this.settings.dataset[g]._isFilteredOut=p;if(this.setChildExpandOnMatch(),this.settings.source||(this.clearCache(),this.renderRows()),s){var m={trigger:e,type:"filtered"};this.settings.source&&(m.preserveSelected=this.settings.allowSelectAcrossPages),this.setSearchActivePage(m)}this.settings.disableClientFilter&&"restore"===e||(this.element.trigger("filtered",{op:"apply",conditions:t,trigger:e}),this.saveUserSettings())},adjustPosLeft:function(t){var e=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth;e.left<0&&e.right<=i?t.style.left="".concat(20,"px"):e.left>=0&&!(e.right<=i)&&(t.style.left="".concat(i-e.width-20,"px"))},setChildExpandOnMatch:function(){var t=this.settings;if(t.treeGrid){!function t(e){for(var i=!1,n=0,s=e.length;n<s;n++){var a,r=e[n];r._isFilteredOut&&!i&&null!==(a=r.children)&&void 0!==a&&(null==a?void 0:a.length)&&(r._isFilteredOut=!t(r.children)),"boolean"!=typeof r._isFilteredOut||r._isFilteredOut||(i=!0)}return i}(t.dataset),function e(i,n){for(var s=0,a=i.length;s<a;s++){var r=i[s],o=r.children,l=o?o.length:0;if(l){if(!r._isFilteredOut)if(t.allowChildExpandOnMatch)for(var c=0;c<l;c++)o[c]._isFilteredOut=!1;else{for(var d=!0,h=0;h<l;h++)o[h]._isFilteredOut||(d=!1);r.isAllChildrenFiltered=d}e(o)}}}(t.dataset)}},clearFilter:function(){this.settings.filterable&&(this.clearFilterFields(),this.applyFilter(),this.element.trigger("filtered",{op:"clear",conditions:[]}))},clearFilterFields:function(){this.settings.filterable&&(this.element.find(".datagrid-header input, select").each((function(){var t=$(this);t.val(""),t.is("select")&&t.find("option").each((function(){$(this).prop("selected",!1)})),t.trigger("updated")})),this.element.find(".datagrid-header .btn-filter").each((function(){var t=$(this),e=t.next(),i=e.find("li:first");t.find("svg:first > use").attr("href","#icon-filter-".concat(t.attr("data-default"))),e.find(".is-checked").removeClass("is-checked"),i.addClass("is-checked")})))},setFilterConditions:function(t){this.clearFilterFields();for(var e=0;e<t.length;e++){var i=this.element.find('.datagrid-header th[data-column-id="'.concat(t[e].columnId,'"]')),n=i.find("input, select"),s=i.find(".btn-filter"),a=s.next();if(void 0===t[e].value&&(t[e].value=""),n.val(t[e].value),n.is(".lookup")&&1===n.parent().find("svg.close").length&&t[e].value&&n.parent().find("svg.close").removeClass("is-empty"),n.is("select")){var r=t[e].value instanceof Array?t[e].value[0]:t[e].value;if(t[e].innerHTML&&(n[0].innerHTML=t[e].innerHTML),n.find('option[value="'.concat(r,'"]')).length)if(t[e].value instanceof Array&&!t[e].selectedOptions){var o=n[0].querySelectorAll("option");n.val("");for(var l=0;l<o.length;l++)o[l].selected=!1;for(var c=0;c<t[e].value.length;c++)n.find('option[value="'.concat(t[e].value[c],'"]')).prop("selected",!0)}else n.find('option[value="'.concat(t[e].value,'"]')).prop("selected",!0);else{var d=n.data("dropdown");d&&d.setCode(t[e].value)}n.trigger("updated")}s.find("svg:first > use").attr("href","#icon-filter-".concat(t[e].operator)),a.find(".is-checked").removeClass("is-checked"),a.find(".".concat(t[e].operator)).addClass("is-checked")}},filterConditions:function(){if(this.filterExpr&&1===this.filterExpr.length&&this.filterExpr[0].keywordSearch)return delete this.filterExpr[0].keywordSearch,this.filterExpr;var t=[],e=this;return this.element.find("th.is-filterable").each((function(){var i,n=$(this),s=n.find(".btn-filter"),a=n.find("input, select"),r=a.is("select"),o=s.find(".icon-dropdown:first"),l=null;if((s.length||r)&&"selected-notselected"!==(i=r?"equals":o.getIconName().replace("filter-",""))&&!(""===a.val()&&-1===["is-not-empty","is-empty","selected","not-selected"].indexOf(i)||a.val()instanceof Array&&0===a.val().length)){var c=a.val()?a.val():"";a.attr("data-mask-mode")&&"number"===a.attr("data-mask-mode")&&(c=B.parseNumber(c));var d={columnId:n.attr("data-column-id"),operator:i,value:c};a.data("datepicker")&&(l=a.data("datepicker").pattern,d.format=l),a.data("timepicker")&&(l=a.data("timepicker").settings.timeFormat,d.format=l),a.is("select")&&(d.innerHTML=a[0].innerHTML);var h=e.columnById(d.columnId);h&&h[0]&&(d.filterType=h[0].filterType),t.push(d)}})),t},getExtraTop:function(){var t=this.settings,e={default:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},filterable:{extraSmall:0,short:0,small:0,medium:0,normal:0,large:0},group:{extraSmall:-22,short:-25,small:-25,medium:-30,normal:-39,large:-39},groupFilter:{extraSmall:-28,short:-29,small:-29,medium:-32,normal:-39,large:-39}},i="extra-small"===t.rowHeight?"extraSmall":t.rowHeight;return t.columnGroups?t.filterable?e.groupFilter[i]:e.group[i]:t.filterable?e.filterable[i]:e.default[i]},getTargetHeight:function(){var t=this.settings,e={default:{extraSmall:20,short:20,small:20,medium:28,normal:35,large:35},filterable:{extraSmall:47,short:53,small:53,medium:54,normal:60,large:60},group:{extraSmall:43,short:46,small:46,medium:56,normal:74,large:74},groupFilter:{extraSmall:80,small:80,short:83,medium:87,normal:103,large:103}},i="extra-small"===t.rowHeight?"extraSmall":t.rowHeight;return t.columnGroups?t.filterable&&this.filterRowRendered?e.groupFilter[i]:e.group[i]:t.filterable&&this.filterRowRendered?e.filterable[i]:e.default[i]},getCellPadding:function(){return{"extra-small":8,short:8,small:8,medium:16,normal:16,large:16}[this.settings.rowHeight]},createDraggableColumns:function(){var t=this,e=t.headerNodes().not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column"),i=$(".drag-target-arrows",t.element);i.length||(t.element.prepend('<span class="drag-target-arrows" style="height: '.concat(t.getTargetHeight(),'px;"></span>')),i=$(".drag-target-arrows",t.element)),e.not('[data-reorder="false"]').prepend('</span><span class="handle">'.concat($.createIcon({icon:"drag"}),"</span>")),e.prepend('<span class="is-draggable-target"></span>'),e.last().append('<span class="is-draggable-target last"></span>'),t.element.addClass("has-draggable-columns"),$(".handle",e).each((function(){var n=null,s=null,a=null,r=0,o=$(this),l=o.parent();o.on("mousedown.datagrid",(function(o){o.preventDefault(),l.drag({clone:!0,cloneAppendTo:e.first().parent().parent(),clonePosIsFixed:!0}).on("dragstart.datagrid",(function(e,i,c){(n=c).removeAttr("id").addClass("is-dragging-clone").css({left:B.isRTL()?i.right-n.width():i.left,top:i.top,height:l.height(),border:0}),$(".is-draggable-target",n).remove(),t.setDraggableColumnTargets(),r=t.getExtraTop(),s=l.position(),a={top:i.top-s.top,left:i.left-s.left};var d=t.targetColumn(s);t.draggableStatus.startIndex=d,o.stopImmediatePropagation()})).on("drag.datagrid",(function(c,d){n[0].style.left="".concat(parseInt(B.isRTL()?d.left+d.offset.x-d.clone.width():d.left,10),"px"),n[0].style.top="".concat(parseInt(d.top,10),"px"),s={top:d.top-a.top,left:d.left-a.left},B.isRTL()&&(s.left=parseInt(n[0].style.left,10));var h=0,u=null,p=null,g=t.targetColumn(s);if($(".is-draggable-target",e).add(i).removeClass("is-over"),-1!==g)for(var f=0,m=t.draggableColumnTargets.length;f<m;f++)if(h=f+1,(u=t.draggableColumnTargets[f]).index===g&&u.index!==t.draggableStatus.startIndex){u.index>t.draggableStatus.startIndex&&h<m&&(u=t.draggableColumnTargets[h]),u.el.addClass("is-over"),i.addClass("is-over"),p=u.el[0].getBoundingClientRect(),i[0].style.left="".concat(parseInt(p.left+(B.isRTL()?2:0),10),"px");var v=0;u.el.hasClass("last")&&(v=-(l.height()-3)),i[0].style.top="".concat(parseInt(p.top,10)+1+r+v,"px")}o.stopImmediatePropagation()})).on("dragend.datagrid",(function(r,o){B.isRTL()||(n[0].style.left="".concat(parseInt(o.left,10),"px"),n[0].style.top="".concat(parseInt(o.top,10),"px")),s={top:o.top-a.top,left:o.left-a.left},B.isRTL()&&(s.left=parseInt(n[0].style.left,10));var c,d,h,u,p=t.targetColumn(s),g=l.data("drag"),f=[];if(g&&g.destroy&&g.destroy(),t.draggableStatus.endIndex=p,$(".is-draggable-target",e).add(i).removeClass("is-over"),-1!==t.draggableStatus.endIndex&&t.draggableStatus.startIndex!==t.draggableStatus.endIndex){for(c=0,d=t.settings.columns.length;c<d;c++)t.settings.columns[c].hidden||"selectionCheckbox"===t.settings.columns[c].id||f.push(c);h=f[t.draggableStatus.startIndex]||0,u=f[t.draggableStatus.endIndex]||0,t.updateGroupHeadersAfterColumnReorder(h,u),t.arrayIndexMove(t.settings.columns,h,u),t.updateColumns(t.settings.columns)}}))}))}))},setDraggableColumnTargets:function(){var t,e,i=this,n=i.headerNodes().not(".is-hidden").not('[data-column-id="selectionCheckbox"]').not(".datagrid-header-spacer-column");i.draggableColumnTargets=[],i.draggableStatus={},$(".is-draggable-target.last",n.last()).length||n.last().append($(".is-draggable-target.last",i.headerNodes())),$(".is-draggable-target",n).each((function(s){var a=$(this).is(".last")?s-1:s;t=n.eq(a),e=t.position(),20,i.draggableColumnTargets.push({el:$(this),index:a,pos:e,width:t.outerWidth(),height:t.outerHeight(),dropArea:{x1:e.left-20,x2:e.left+t.outerWidth()+20,y1:e.top-20+i.getExtraTop(),y2:e.top+t.outerHeight()+20}})}))},targetColumn:function(t){var e,i,n,s=-1;for(i=0,n=this.draggableColumnTargets.length-1;i<n;i++)if(e=this.draggableColumnTargets[i],t.left>e.dropArea.x1&&t.left<e.dropArea.x2&&t.top>e.dropArea.y1&&t.top<e.dropArea.y2&&(s=e.index,B.isRTL()))return s;return s},arrayIndexMove:function(t,e,i){t.splice(i,0,t.splice(e,1)[0])},createDraggableRows:function(){var t=this;this.settings.rowReorder&&(this.tableBody.children().filter((function(){return $(this).find(".datagrid-reorder-icon").length<1})).attr("data-arrange-exclude",!0),this.tableBody.arrange({placeholder:'<tr class="datagrid-reorder-placeholder"><td colspan="'.concat(this.visibleColumns().length,'"></td></tr>'),handle:".datagrid-reorder-icon",isVisualItems:!0}).off("beforearrange.datagrid").on("beforearrange.datagrid",(function(e,i){t.isSafari&&i.start.css({display:"inline-block"})})).off("arrangeupdate.datagrid").on("arrangeupdate.datagrid",(function(e,i){t.isSafari&&i.end.css({display:""}),t.reorderRow(i.startIndex,i.endIndex,i)})))},reorderRow:function(t,e,i){var n=e>t,s=this.tableBody.find("tr").eq(t),a=this.tableBody.find("tr").eq(e),r={start:this.dataRowIndex(i?i.start:a)};r.end=r.start+(e-t),this.arrayIndexMove(this.settings.dataset,r.start,r.end),i?(this.settings.rowTemplate||this.settings.expandableRow)&&(n?(this.tableBody.find("tr").eq(2*t).insertAfter(i.end),i.end.next().next().insertAfter(i.over)):this.tableBody.find("tr").eq(2*t).next().insertAfter(i.end)):s[n?"insertAfter":"insertBefore"](a);for(var o=this.tableBody.find("tr:not(.datagrid-expandable-row)"),l=0;l<o.length;l++)o[l].setAttribute("data-index",l),o[l].setAttribute("aria-rowindex",this.pagingRowIndex(l+1));this.element.trigger("rowreorder",[{endIndex:e,startIndex:t,over:a,start:s}]),this.syncSelectedRowsIdx()},fieldValue:function(t,e){if(!e||!t)return"";var i,n=(i=e.indexOf(".")>-1?e.split(".").reduce((function(t,e){return t?t[e]:""}),t):t[e])||0===i||!1===i?i:"";return n=h.escapeHTML(n)},setTreeRootNodes:function(){this.settings.treeGrid&&(this.settings.treeRootNodes=this.settings.treeDepth.filter((function(t){return 1===t.depth})))},setTreeDepth:function(t){if(this.settings.treeGrid){var e=this,i=0,n=function t(n,s){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];i++,e.settings.treeDepth.push({idx:i,depth:s,parents:r.slice(),node:n});var o=null===(a=n.children)||void 0===a||null==a?void 0:a.length;if(o){r.push(i-1);for(var l=0;l<o;l++)t(n.children[l],s+1,r.slice())}};t=t||this.settings.dataset,e.settings.treeDepth=[];for(var s=0,a=t.length;s<a;s++)n(t[s],1)}},setRowGrouping:function(){var t=this.settings.groupable;t&&(this.originalDataset?this.settings.dataset=this.originalDataset:this.originalDataset=this.settings.dataset.slice(),t.aggregator&&"none"!==t.aggregator?"sum"!==t.aggregator?"max"!==t.aggregator?"min"!==t.aggregator?"avg"!==t.aggregator?"count"!==t.aggregator?"list"!==t.aggregator?this.settings.dataset=ys(this.settings.dataset,t.fields):this.settings.dataset=ys.list(this.settings.dataset,t.fields,t.aggregatorOptions):this.settings.dataset=ys.count(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=ys.avg(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=ys.min(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=ys.max(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=ys.sum(this.settings.dataset,t.fields,t.aggregate):this.settings.dataset=ys.none(this.settings.dataset,t.fields))},renderRows:function(){var t="",e="",i="",n=0,s=this.settings,a=this.table.find("tbody"),r=1;if(this.pagerAPI){var o=this.pagerAPI.state;r=o.filteredActivePage?o.filteredActivePage:o.activePage}for(this.bodyColGroupHtmlLeft="<colgroup>",this.bodyColGroupHtml="<colgroup>",this.bodyColGroupHtmlRight="<colgroup>",this.triggerDestroyCell(),this.settings.columns&&0!==this.settings.columns.length||this.settings.columns.push({id:"blank",value:"",field:""}),this.currentPageRows=[],n=0;n<this.settings.columns.length;n++){var l=this.settings.columns[n],c=this.getContainer(l.id),d=this.columnWidth(l,n);switch(c){case"left":this.bodyColGroupHtmlLeft+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;case"right":this.bodyColGroupHtmlRight+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>");break;default:this.bodyColGroupHtml+="<col".concat(d).concat(l.hidden?' class="is-hidden"':"","></col>")}l.colspan&&(this.hasColSpans=!0)}this.emptyMessageContainer&&this.emptyMessageContainer.hide(),0===a.length&&(this.hasLeftPane&&(this.tableBodyLeft=$("<tbody></tbody>"),this.tableLeft.append(this.tableBodyLeft)),this.tableBody=$("<tbody></tbody>"),this.table.append(this.tableBody),this.hasRightPane&&(this.tableBodyRight=$("<tbody></tbody>"),this.tableRight.append(this.tableBodyRight))),this.groupArray=[],this.recordCount=0,this.filteredCount=0,this.runningCount=0,s.treeGrid&&s.paging&&!s.source&&r>1&&(this.recordCount=s.treeRootNodes[s.pagesize*r-s.pagesize].idx-1),this.restoreSortOrder&&this.sortDataset();for(var h=!1,p=0;p<s.dataset.length;p++){if(s.paging&&!s.source){if(1===r&&p-this.filteredCount>=s.pagesize){s.dataset[p]._isFilteredOut?this.filteredCount++:this.recordCount++;continue}if(r>1&&!(p-this.filteredCount>=s.pagesize*(r-1)&&p-this.filteredCount<s.pagesize*r)){s.dataset[p]._isFilteredOut?this.filteredCount++:this.filteredCount&&this.recordCount++;continue}}if(!s.virtualized||this.isRowVisible(this.recordCount))if((!s.treeGrid&&s.dataset[p])._isFilteredOut)this.filteredCount++;else if(this.settings.groupable){if(s.dataset[p].values){for(var g=s.dataset[p].values.length,f=0,m=0;m<g;m++)s.dataset[p].values[m]._isFilteredOut&&f++;if(f===g)continue}if(!this.settings.groupable.suppressGroupRow){var v=this.rowHtml(s.dataset[p],this.recordCount,p,!0);this.hasLeftPane&&v.left&&(e+=v.left),v.center&&(t+=v.center),this.hasRightPane&&v.right&&(i+=v.right)}if(this.settings.groupable.showOnlyGroupRow&&s.dataset[p].values[0]){var b=s.dataset[p].values[0];s.dataset[p].list&&(b.list=s.dataset[p].list),b.values=s.dataset[p].values;var y=this.rowHtml(b,this.recordCount,p);this.hasLeftPane&&y.left&&(e+=y.left),y.center&&(t+=y.center),this.hasRightPane&&y.right&&(i+=y.right),this.recordCount++,this.groupArray.push({group:p,node:0});continue}for(var w=0;w<s.dataset[p].values.length;w++)if(!s.dataset[p].values[w]._isFilteredOut){var x=this.rowHtml(s.dataset[p].values[w],this.recordCount,s.dataset[p].values[w].idx);this.hasLeftPane&&x.left&&(e+=x.left),x.center&&(t+=x.center),this.hasRightPane&&x.right&&(i+=x.right),this.recordCount++,this.groupArray.push({group:p,node:w})}if(this.settings.groupable.groupFooterRow){var C=this.rowHtml(s.dataset[p],this.recordCount,p,!0,!0);this.hasLeftPane&&C.left&&(e+=C.left),C.center&&(t+=C.center),this.hasRightPane&&C.right&&(i+=C.right)}}else{var k=p;s.treeGrid&&(k=this.recordCount),this.runningCount++;var T,S=this.rowHtml(s.dataset[p],k,p);if(this.hasLeftPane&&S.left&&(e+=S.left),S.center)t+=S.center,s.treeGrid&&null!==(T=this.filterExpr)&&void 0!==T&&(null==T?void 0:T.length)&&$("<table>".concat(S.center,"</table>")).find("tr:first").is(".is-hidden")&&this.filteredCount++;this.hasRightPane&&S.right&&(i+=S.right),s.dataset[p]._isFilteredOut||this.recordCount++,this.visibleRowCount=k+1,s.dataset[p].rowStatus&&(h=!0)}else this.recordCount++}if(this.settings.summaryRow){this.element.addClass("has-summary-row");var A=this.calculateTotals(),E=this.rowHtml(A,this.recordCount,null,!1,!0);this.hasLeftPane&&E.left&&(e+=E.left),E.center&&(t+=E.center),this.hasRightPane&&E.right&&(i+=E.right)}"<colgroup>"!==this.bodyColGroupHtml&&(this.settings.spacerColumn&&(this.bodyColGroupHtml+='<col style="width: 100%">'),this.bodyColGroupHtmlLeft+="</colgroup>",this.bodyColGroupHtml+="</colgroup>",this.bodyColGroupHtmlRight+="</colgroup>",this.bodyColGroupLeft&&this.bodyColGroupLeft.remove(),this.bodyColGroup&&this.bodyColGroup.remove(),this.bodyColGroupRight&&this.bodyColGroupRight.remove(),this.hasLeftPane&&(this.bodyColGroupLeft=$(this.bodyColGroupHtmlLeft),(this.headerRowLeft||this.tableBodyLeft).before(this.bodyColGroupLeft)),this.bodyColGroup=$(this.bodyColGroupHtml),(this.headerRow||this.tableBody).before(this.bodyColGroup),this.hasRightPane&&(this.bodyColGroupRight=$(this.bodyColGroupHtmlRight),(this.headerRowRight||this.tableBodyRight).before(this.bodyColGroupRight))),this.hasLeftPane&&u.html(this.tableBodyLeft,e,"*"),u.html(this.tableBody,t,"*"),this.hasRightPane&&u.html(this.tableBodyRight,i,"*"),this.setVirtualHeight(),this.setScrollClass(),this.setupTooltips(h),this.afterRender()},afterRender:function(){var t=this,e=this;if(this.settings.fixedRowHeight&&"auto"===this.settings.fixedRowHeight&&this.settings.frozenColumns&&e.tableBody.find("tr").each((function(t){var i,n=0,s=0,a=$(this);i=a.height(),e.tableBodyLeft&&(n=e.tableBodyLeft.find("tr").eq(t).height()),e.tableBodyRight&&(s=e.tableBodyLeft.find("tr").eq(t).height());var r=Math.max(n,i,s);return a.css("height",r),e.tableBodyLeft&&(n=e.tableBodyLeft.find("tr").eq(t).css("height",r)),e.tableBodyRight&&(s=e.tableBodyLeft.find("tr").eq(t).css("height",r)),!0})),this.settings.onPostRenderCell)for(var i=function(t){var i=e.settings.columns[t];i.component&&e.tableBody.find("tr").each((function(){var t,n,s=$(this),a=e.settings.treeGrid?e.actualPagingRowIndex(e.actualRowIndex(s)):e.dataRowIndex(s),r=s.attr("data-lineage"),o=e.rowData(a),l=e.columnIdxById(i.id)-((null===(t=e.settings.frozenColumns)||void 0===t||null===(n=null==t?void 0:t.left)||void 0===n||null==n?void 0:n.length)||0),c={row:r||a,cell:l,value:o,rowData:o,col:i,api:e};e.settings.onPostRenderCell(s.find("td").eq(l).find(".datagrid-cell-wrapper .content")[0],c)}))},n=0;n<this.settings.columns.length;n++)i(n);var s=e.tableBody.find("select.dropdown");s.dropdown&&s.dropdown(),e.tableBody.find(".dropdown-wrapper.is-inline").prev("select").on("listclosed",(function(){var t=$(this),i=t.val(),n=t.closest("tr");e.updateCellNode(n.attr("aria-rowindex"),t.closest("td").index(),i,!1,!0)}));var a=e.tableBody.find(".spinbox");a.spinbox&&a.spinbox(),e.settings.source||e.displayCounts(),e.setAlternateRowShading(),e.createDraggableRows();var r=document.activeElement;(e.activeCell.isFocused&&(!r||r&&"body"===r.tagName.toLowerCase())&&e.setActiveCell(e.activeCell.row,e.activeCell.cell),e.settings.paging&&e.settings.source&&!e.settings.allowSelectAcrossPages&&(e.preventSelection||(e._selectedRows=[]),e.syncSelectedUI()),e.settings.paging&&e.settings.source&&e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),e.settings.paging&&!e.settings.source&&null===e.settings.allowSelectAcrossPages&&(e.syncSelectedRows(),e.syncSelectedUI()),this.stretchColumnDiff<0)&&(this.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(this.stretchColumnWidth,"px"));setTimeout((function(){e.element.trigger("afterrender",{body:e.container.find("tbody"),header:e.container.find("thead"),pager:e.pagerAPI}),t.activateFirstCell()}))},activateFirstCell:function(){this.activeCell&&this.activeCell.node||(this.activeCell={node:this.cellNode(0,0).attr("tabindex","0"),isFocused:!1,cell:0,row:0})},triggerDestroyCell:function(){var t=this,e=this;if(e.tableBody&&this.settings.onPostRenderCell&&this.settings.onDestroyCell){var i=e.tableBody.find("tr");if(0===i.length)return;for(var n=function(n){var s=t.settings.columns[n];s.component&&i.each((function(){var t=$(this),i=t.index(),n=e.columnIdxById(s.id),a={row:t.index(),cell:n,value:e.settings.dataset[i],col:s,api:e};e.settings.onDestroyCell(t.find("td").eq(n).find(".datagrid-cell-wrapper .content")[0],a)}))},s=0;s<this.settings.columns.length;s++)n(s)}},cacheVirtualStats:function(){var t=this.element[0].offsetHeight,e=this.bodyWrapperCenter[0].scrollTop,i="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?40:"medium"===this.settings.rowHeight?30:25,n=t-i,s="normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?50:"medium"===this.settings.rowHeight?40:30;"extra-small"===this.settings.rowHeight&&(i=22,s=27),this.virtualRange={rowHeight:s,top:Math.max(e-(this.settings.virtualRowBuffer-1)*s,0),bottom:e+n+(this.settings.virtualRowBuffer-1)*s,totalHeight:s*this.settings.dataset.length,bodyHeight:n}},isRowVisible:function(t){if(!this.settings.virtualized)return!(this.settings.paging&&!this.settings.source&&t&&this.pagerAPI)||(this.pagerAPI.activePage-1)*this.settings.pagesize<=t&&this.pagerAPI.activePage*this.settings.pagesize>=t;0===t&&this.cacheVirtualStats();var e=t*this.virtualRange.rowHeight;return e>=this.virtualRange.top&&e<this.virtualRange.bottom},setVirtualHeight:function(){if(this.settings.virtualized&&this.virtualRange){var t=this.virtualRange.totalHeight-this.virtualRange.bottom,e=this.virtualRange.top;this.topSpacer=this.tableBody.find(".datagrid-virtual-row-top"),this.bottomSpacer=this.tableBody.find(".datagrid-virtual-row-bottom"),e>0&&!this.topSpacer.length&&(this.topSpacer=$('<tr class="datagrid-virtual-row-top" style="height: '.concat(e,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.prepend(this.topSpacer)),e>0&&this.topSpacer.length&&this.topSpacer.css("height","".concat(e,"px")),0===e&&(this.topSpacer.length||this.virtualRange.topRow<=1)&&this.topSpacer.remove(),t>0&&!this.bottomSpacer.length&&(this.bottomSpacer=$('<tr class="datagrid-virtual-row-bottom" style="height: '.concat(t,'px"><td colspan="').concat(this.visibleColumns().length,'"></td></tr>')),this.tableBody.append(this.bottomSpacer)),t>0&&this.bottomSpacer.length&&this.bottomSpacer.css("height","".concat(t,"px")),t<=0&&(this.bottomSpacer.length||this.virtualRange.bottomRow>=this.settings.dataset.length)&&this.bottomSpacer.remove()}},setAlternateRowShading:function(){this.settings.alternateRowShading&&this.settings.treeGrid&&$('tr[role="row"]:visible',this.tableBody).removeClass("alt-shading").filter(":odd").addClass("alt-shading")},formatValue:function(t,e,i,n,s,a,r){return r=r||this,void 0===t&&(t=this.defaultFormatter),"string"==typeof t?ps[t](e,i,n,s,a,r).toString():t(e,i,n,s,a,r).toString()},rowHtml:function(t,e,i,n,s,a,r){var o,l,c,d=this.settings.summaryRow&&!n&&s,h=this.pagerAPI?this.pagerAPI.activePage:1,u={left:"",center:"",right:""},p=this.settings.treeDepth?this.settings.treeDepth[e]:0,g=0,f=!1;if(!t)return"";var m=!1;this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&(this.settings.isRowDisabled(i,t)&&(m=!0));if(t.isRowDisabled&&(m=!0),l=p=p?p.depth:0,this.settings.treeDepth&&this.settings.treeDepth.length)if(t._isFilteredOut)f=!0;else{var v,b=this.settings.treeDepth[e];if(b&&b.depth>1&&null!==(v=b.parents)&&void 0!==v&&(null==v?void 0:v.length))for(var y=0,w=b.parents.length;y<w;y++){var x=b.parents[y],C=this.settings.treeDepth[x];if(C.node&&void 0!==C.node.expanded&&!C.node.expanded){f=!0;break}}}if(this.settings.groupable&&!s){var k=this.settings.groupable;f=void 0!==k.expanded&&!k.expanded,k.expanded&&"function"==typeof k.expanded&&(f=!k.expanded(e,0,null,null,t,this),this.isFooterHidden=f)}var T=this.settings.frozenColumns.left.length,S=this.settings.frozenColumns.right.length,A=this.visibleColumns().length-T-S;if(this.settings.groupable&&n&&!s){var $=ps.GroupRow(e,0,null,null,t,this);return u.left='<tr class="datagrid-rowgroup-header'.concat(f?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(T,'">').concat($.left||"<span>&nbsp;</span>","</td></tr>"),u.center='<tr class="datagrid-rowgroup-header'.concat(f?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(A,'">').concat($.center||"<span>&nbsp;</span>","</td></tr>"),u.right='<tr class="datagrid-rowgroup-header'.concat(f?"":" is-expanded",'" role="rowgroup"><td role="gridcell" colspan="').concat(S,'">').concat($.right||"<span>&nbsp;</span>","</td></tr>"),u}if(this.settings.groupable&&n&&s){var E=ps.GroupFooterRow(e,0,null,null,t,this);return u.left='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.left||"<span>&nbsp;</span>","</tr>"),u.center='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.center||"<span>&nbsp;</span>","</tr>"),u.right='<tr class="datagrid-row datagrid-rowgroup-footer'.concat(this.isFooterHidden?" is-hidden":"",'" role="rowgroup">').concat(E.right||"<span>&nbsp;</span>","</tr>"),this.isFooterHidden=!1,u}var D=e+1+(this.settings.source&&!this.settings.indeterminate?(h-1)*this.settings.pagesize:0);o=this.recordCount%2==0;var I=this.isRowSelected(t),L=t._rowactivated,P={class:"",svg:""};t&&t.rowStatus&&("new"!==t.rowStatus.icon||this.settings.showNewRowIndicator)&&(P.show=!0,P.class=" rowstatus-row-".concat(t.rowStatus.icon),P.icon="success"===t.rowStatus.icon?"#icon-check":"#icon-exclamation",P.title=""!==t.rowStatus.tooltip?' title="'.concat(t.rowStatus.tooltip,'"'):"",P.svg='<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"'.concat(P.title,'><use href="').concat(P.icon,'"></use></svg>'));var M="";if(this.settings.fixedRowHeight&&"function"==typeof this.settings.fixedRowHeight&&(M=' style="height: '.concat(this.settings.fixedRowHeight(this.recordCount,D,i,t),'"px" ')),this.settings.fixedRowHeight&&"number"==typeof this.settings.fixedRowHeight&&(M=' style="height: '.concat(this.settings.fixedRowHeight,'px" ')),this.currentPageRows){var R={ariaRowindex:D,actualIndexLineage:a,dataIndex:i,isFilteredOut:t._isFilteredOut};this.currentPageRows.push(R)}for(u.center='<tr role="row" aria-rowindex="'.concat(D,'"')+' data-index="'.concat(i,'"').concat(a?' data-lineage="'.concat(a,'"'):"").concat(this.settings.treeGrid&&t.children?' aria-expanded="'.concat(t.expanded?'true"':'false"'):"").concat(this.settings.treeGrid?' aria-level="'.concat(l,'"'):"").concat(m?' aria-disabled="true"':"").concat(I?' aria-selected="true"':"",' class="datagrid-row').concat(P.class).concat(f?" is-hidden":"").concat(t._isFilteredOut?" is-filtered":"").concat(L?" is-rowactivated":"").concat(m?" is-rowdisabled":"").concat(I?"mixed"===this.settings.selectable?" is-selected hide-selected-color":" is-selected":"").concat(this.settings.alternateRowShading&&!o?" alt-shading":"").concat(d?" datagrid-summary-row":"").concat(this.settings.cellNavigation||!1===this.settings.selectable?"":" is-clickable").concat(this.settings.treeGrid?t.children?" datagrid-tree-parent":l>1?" datagrid-tree-child":"":"",'"').concat(M,">"),u.left=u.center,u.right=u.center,g=0;g<this.settings.columns.length;g++){var B,O,F=this.settings.columns[g],N=this.getContainer(F.id),z="",H=F.summaryRowFormatter||F.formatter||this.defaultFormatter,q=d?H:F.formatter||this.defaultFormatter,V=this.formatValue(q,e,g,this.fieldValue(t,this.settings.columns[g].field),this.settings.columns[g],t,this);if(0===V.indexOf('<span class="is-readonly">')&&(F.readonly=!0),(V.indexOf("datagrid-checkbox")>-1||V.indexOf("btn-actions")>-1)&&(z+=" l-center-text"),V.indexOf("trigger")>-1&&(z+=" datagrid-trigger-cell"),-1===V.indexOf("trigger")&&F&&F.editor){var W=this.getEditorName(F.editor);["colorpicker","dropdown","time","lookup","date"].indexOf(W)>=0&&(z+=" datagrid-trigger-cell datagrid-no-default-formatter")}if(F.editor&&this.settings.editable&&(z+=" has-editor"),F.expanded&&(this.treeExpansionField=F.expanded),F.align&&(z+=" l-".concat(F.align,"-text")),"ellipsis"===F.textOverflow&&(z+=" text-ellipsis"),F.uppercase&&(z+=" uppercase-text"),z+=F.readonly?" is-readonly":"",z+=F.hidden?" is-hidden":"",F.isEditable&&!F.readonly){var j=this.fieldValue(t,this.settings.columns[g].field);F.isEditable(D-1,g,j,F,t)||(z+=" is-readonly")}var U="selectionCheckbox"===F.id||!F.readonly&&void 0!==F.editor?"":'aria-readonly="true"';if(F.isReadonly&&!F.readonly&&"selectionCheckbox"!==F.id){var _=this.fieldValue(t,this.settings.columns[g].field);F.isReadonly(this.recordCount,g,_,F,t)&&(z+=" is-cell-readonly",U='aria-readonly="true"')}var G=this.fieldValue(t,this.settings.columns[g].field);F.cssClass&&"function"==typeof F.cssClass&&(z+=" ".concat(F.cssClass(this.recordCount,g,G,F,t))),F.cssClass&&"string"==typeof F.cssClass&&(z+=" ".concat(F.cssClass)),z+=F.focusable?" is-focusable":"",z+="Actions"===q.name?" has-btn-actions":"";var Y=this.calculateRowspan(G,e,F);if(""!==Y){var K=0;if(c>0&&!F.hidden){var X,Q;c-=1,z+=" is-spanned-hidden";var J=null===(X=this.settings)||void 0===X||null===(Q=null==X?void 0:X.frozenColumns)||void 0===Q||null==Q?void 0:Q.left.length;J>0&&g===J&&(z=z.replace(" is-spanned-hidden"," is-spanned-invisible"),(K=c+1)>0&&this.visibleColumns().length-g===K&&(z+=" is-spanned-last")),J>0&&g<J&&(z=z.replace(" is-spanned-hidden"," is-spanned-last"))}if(F.colspan&&"function"==typeof F.colspan&&!c){var Z=this.fieldValue(t,this.settings.columns[g].field);if((K=F.colspan(D-1,g,Z,F,t,this))>0){var tt,et;c=K-1;var it=null===(tt=this.settings)||void 0===tt||null===(et=null==tt?void 0:tt.frozenColumns)||void 0===et||null==et?void 0:et.left.length;it>0&&g<it&&(z+=" is-spanned-last")}if(K>0){var nt,st;c=K-1;var at=null===(nt=this.settings)||void 0===nt||null===(st=null==nt?void 0:nt.frozenColumns)||void 0===st||null==st?void 0:st.left.length;at>0&&g<at&&-1===z.indexOf("is-spanned-last")&&(z+=" is-spanned-last")}K>0&&-1===z.indexOf("is-spanned-last")&&this.visibleColumns().length-1===K&&(z+=" is-spanned-last")}0!==g&&(P.class="",P.svg=""),""!==P.class&&(z+=" rowstatus-cell"),this.isCellDirty(this.settings.groupable?i:e,g)&&(z+=" is-dirty-cell"),""!==z&&(z=z.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "));var rt=null===(B=this.settings.attributes)||void 0===B||null==B?void 0:B.filter((function(t){return"id"===t.name})),ot='aria-describedby="'.concat(1===(null==rt||null==rt?void 0:rt.length)?"".concat(rt[0].value,"-col-").concat(null===(O=F.id)||void 0===O||null==O?void 0:O.toLowerCase()):this.uniqueId("-header-".concat(g)),'"');if(u[N]+='<td role="gridcell" '.concat(U,' aria-colindex="').concat(g+1,'"')+" ".concat(ot).concat(I?' aria-selected="true"':"").concat(z?' class="'.concat(z,'"'):"").concat(K?' colspan="'.concat(K,'"'):"").concat(F.tooltip&&"string"==typeof F.tooltip?' title="'.concat(F.tooltip.replace("{{value}}",G),'"'):"").concat(this.settings.columnGroups?'headers = "'.concat(this.uniqueId("-header-".concat(g))," ").concat(this.getColumnGroup(g),'"'):"").concat(Y||"",">").concat(P.svg,'<div class="datagrid-cell-wrapper">'),F.contentVisible)F.contentVisible(e+1,g,G,F,t)||(V="");this.settings.onPostRenderCell&&F.component&&(u[N]+='<div class="content"></div>',V=""),u[N]+="".concat(V,"</div></td>")}}if(this.settings.spacerColumn&&(u.center+='<td class="datagrid-spacer-column"></td>'),u.left+="</tr>",u.center+="</tr>",u.right+="</tr>",this.settings.rowTemplate){var lt=this.settings.rowTemplate,ct=t,dt=this.settings.rowTemplateHeight||107,ht="";fe&&ct&&(ht=fe.compile("{{#dataset}}".concat(lt,"{{/dataset}}"),{dataset:ct})),this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(dt,'px"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(A+(this.settings.spacerColumn?1:0),'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding">').concat(ht,"</div></div>\n        </td></tr>"),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div style="height: ').concat(dt,'px"></div></div>\n          </td></tr>'))}if(this.settings.expandableRow&&(this.hasLeftPane&&(u.left+='<tr class="datagrid-expandable-row"><td colspan="'.concat(T,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>')),u.center+='<tr class="datagrid-expandable-row"><td colspan="'.concat(A,'">\n        <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n        </td></tr>'),this.hasRightPane&&(u.right+='<tr class="datagrid-expandable-row no-border"><td colspan="'.concat(S,'">\n          <div class="datagrid-row-detail"><div class="datagrid-row-detail-padding"></div></div>\n          </td></tr>'))),!t.children||r||t._isFilteredOut){if(this.settings.treeGrid&&!r&&t._isFilteredOut)if(t.children){var ut=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i+=e.length;for(var n=0,s=e.length;n<s;n++)e[n].children&&(i=t(e[n].children,i));return i}(t.children);this.recordCount+=ut+(t._isFilteredOut&&1===l?1:0)}else 1===l&&this.recordCount++}else for(var pt=0,gt=t.children.length;pt<gt;pt++){var ft=a?"".concat(a,".").concat(i):"".concat(i);this.recordCount++;var mt=this.rowHtml(t.children[pt],this.recordCount,pt,!1,!1,ft);u.left+=mt.left,u.center+=mt.center,u.right+=mt.right}return u},getEditorName:function(t){if(!t)return"";var e=t.name;if(!function(){}.name){e=(t.toString().match(/function (.+?)\(/)||[,""])[1]}return e?e.toLowerCase():""},calculateTextWidth:function(t){var e=t.name||"",i=0,n=0,s=0,a="",r=!1;if(t.formatter===ps.Colorpicker)a="";else if(t.formatter===ps.Dropdown&&t.options&&"data"!==this.settings.columnSizing){for(var o="",l=0;l<t.options.length;l++)t.options[l].label.length>o.length&&(o=t.options[l].label);o=this.formatValue(t.formatter,0,0,o,t,null,this),a=o=h.stripHTML(o)}else{var c=0,d=this.settings.dataset;this.settings.groupable&&(d=this.originalDataset);for(var u=0;u<d.length;u++){var p=this.fieldValue(d[u],t.field),g=d[u];if(r=(p=this.formatValue(t.formatter,u,0,p,t,g,this)).toString().indexOf("btn-secondary")>-1,c=(p=h.stripHTML(p)).toString().length,this.settings.groupable&&g)for(var f=0;f<g.length;f++){var m=this.fieldValue(g[f],t.field);m=this.formatValue(t.formatter,u,0,m,t,g,this),(c=(m=h.stripHTML(m)).toString().length)>i&&(i=c,a=m)}c>i&&(i=c,a=p)}if(this.filterExpr&&this.filterExpr.length>0){var v=$.grep(this.filterExpr,(function(e){return e.columnId===t.id}));if(v&&1===v.length){var b=v[0].value;(c=b.toString().length)>i&&(i=c,a=b)}}if(""===a&&(t.formatter===ps.Date||t.formatter===ps.Time)){var y=new Date(9999,11,31,23,59,59,999);y=this.formatValue(t.formatter,0,0,y,t,null,this),a=y=h.stripHTML(y)}}var w=!!t.formatter&&t.formatter.toString().indexOf('<span class="tag')>-1,x=!!t.formatter&&t.formatter.toString().indexOf("datagrid-alert-icon")>-1,C=t.formatter===ps.Date||t.formatter===ps.Time||t.formatter===ps.Lookup||t.formatter===ps.Colorpicker||t.formatter===ps.Dropdown;s+=2*this.getCellPadding(),x&&(s+=20),w&&(s+=10),r&&(s+=50),this.settings.editable&&t.editor===As.Spinbox&&(s+=46),!this.settings.editable||t.formatter!==ps.Dropdown&&t.formatter!==ps.Lookup&&t.editor!==As.Time||(s+=10),this.settings.editable&&t.editor===As.Date&&(s+=5),n=this.calculateTextRenderWidth(a)+s,t.formatter===ps.Colorpicker&&(n=150);var k=void 0===t.sortable||t.sortable?2*this.getCellPadding()+15:2*this.getCellPadding(),T=this.calculateTextRenderWidth(e,!0)+k;return t.filterType&&this.settings.filterable&&(T<2*this.getCellPadding()&&(T=5*this.getCellPadding()+n+36),"checkbox"!==t.filterType&&(""!==a?T<n+(2*this.getCellPadding()+32)&&""!==a&&(T=n+(2*this.getCellPadding()+32)):T<100&&(T=100)),"ellipsis"!==(null==t||null==t?void 0:t.textOverflow)||"small"!==this.settings.rowHeight&&"extra-small"!==this.settings.rowHeight||(T+=6)),"data"===this.settings.columnSizing&&(T=50+2*this.getCellPadding()+(C?25:0)),"header"===this.settings.columnSizing&&(n=0),Math.ceil(Math.max(n,T))},calculateTextRenderWidth:function(t,e){this.canvas=this.canvas||(this.canvas=document.createElement("canvas"));var i=this.canvas.getContext("2d");return this.fontCached&&this.fontHeaderCached||(this.fontCached=Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1?"400 16px arial":"400 14px arial",this.fontHeaderCached=Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1?"600 14px arial":"700 12px arial","extra-small"===this.settings.rowHeight&&(this.fontCached=Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1?"400 14px arial":"400 12px arial",this.fontHeaderCached=Z.currentTheme.id&&Z.currentTheme.id.indexOf("uplift")>-1?"600 14px arial":"700 12px arial")),i.font=this.fontCached,e&&(i.font=this.fontHeaderCached),i.measureText(t).width},setScrollClass:function(){var t=parseInt(this.bodyWrapperCenter[0].offsetHeight,10),e=this.headerRow?this.headerRow[0].offsetHeight:0,i=parseInt(this.tableBody[0].offsetHeight,10);if(this.element.removeClass("has-vertical-scroll has-visible-last-row"),i<t-e&&this.element.addClass("has-visible-last-row"),this.hasLeftPane||this.hasRightPane){var n=parseInt(this.bodyWrapperCenter[0].scrollHeight,10)>t+2,s=parseInt(this.bodyWrapperCenter[0].offsetWidth,10),a=parseInt(this.bodyWrapperCenter[0].scrollWidth,10)>s;n&&this.element.addClass("has-vertical-scroll"),a&&this.element.addClass("has-horizontal-scroll")}},clearCache:function(){this.totalWidths.left=0,this.totalWidths.center=0,this.totalWidths.right=0,this.elemWidth=0,this.stretchColumnWidth=0,this.stretchColumnDiff=0,this.stretchColumnIdx=-1,this.fontCached=null,this.fontHeaderCached=null,this.fixColumnIds()},fixColumnIds:function(){for(var t=0;t<this.settings.columns.length;t++){var e=this.settings.columns[t],i=this.columnById(e.id);if(i.length>1)for(var n=1;n<i.length;n++)i[n].id="".concat(i[n].id,"-").concat(n)}},getStretchColumnIdx:function(){var t=this,e=t.stretchColumnIdx;return-1===e&&"last"!==t.settings.stretchColumn&&t.headerNodes().each((function(i){$(this).attr("data-column-id")===t.settings.stretchColumn&&(e=i)})),e},columnWidth:function(t,e){return this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1),this.calculateColumnWidth(t,e)},calculateColumnWidth:function(t,e){var i,n,s,a=this.visibleColumns(!0),r=e===this.visibleColumns().length-1,o=this.getContainer(t.id);this.elemWidth||(this.elemWidth=this.element.outerWidth(),0===this.elemWidth&&(this.elemWidth=this.element.closest(".tab-container").outerWidth()),this.widthSpecified=!1,this.widthPixel=!1),t.width&&(this.widthSpecified=!0,this.widthPercent=!1),!this.widthPixel&&t.width&&(this.widthPixel="string"!=typeof t.width);var l=t.width;"string"==typeof t.width&&-1===t.width.indexOf("px")&&(this.widthPercent=!0,s=t.width.replace("%",""));var c=this.calculateTextWidth(t);if(this.widthSpecified&&l||(l=Math.max(c,l||0)),(!this.widthSpecified||void 0===t.width)&&this.settings.sizeColumnsEqually&&-1===["selectionCheckbox","expander","drilldown","rowStatus","favorite"].indexOf(t.id)){var d=Math.round(this.elemWidth/a.length);l=d-(r?2:0),d<c&&(l=c)}if("selectionCheckbox"!==t.id&&"favorite"!==t.id||(l=43,t.width=l),"favorite"===t.id&&(l=62,t.width=l),!t.width&&(null===(i=t.formatter)||void 0===i||null===(n=null==i?void 0:i.toString())||void 0===n||null==n?void 0:n.indexOf("ProcessIndicator"))>-1&&(l=155,t.width=l),"expander"===t.id&&(l=55,t.width=l),"rowStatus"===t.id&&(l=62,t.width=l),"rowReorder"===t.id&&(l=62,t.width=l),"drilldown"===t.id&&(l=62,t.width=l),t.minWidth&&l<t.minWidth&&(l=t.minWidth),t.minWidth&&l>t.maxWidth&&(l=t.maxWidth),this.totalWidths[o]+=t.hidden?0:l,"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&this.settings.stretchColumn===t.id)return this.stretchColumnIdx=e,this.stretchColumnWidth=l,' style="width: 99%"';if(r){var h=this.elemWidth-this.totalWidths[o];"last"!==this.settings.stretchColumn&&null!==this.settings.stretchColumn&&(this.stretchColumnDiff=h),this.hasLeftPane&&this.tableLeft.css("width",this.totalWidths.left),this.hasRightPane&&this.tableRight.css("width",this.totalWidths.right)}return this.widthPercent||void 0!==l?' style="width: '.concat(this.widthPercent?"".concat(s,"%"):"".concat(l,"px"),'"'):""},calculateRowspan:function(t,e,i){var n=0,s=null;if(!i.rowspan)return null;for(var a=0;a<this.settings.dataset.length;a++)t===this.settings.dataset[a][i.field]&&(n++,null===s&&(s=a));return e===s?' rowspan ="'.concat(n,'"'):""},calculateTotals:function(){return this.settings.totals=ws.aggregate(this.settings.dataset,this.settings.columns),this.settings.totals},setUnit:function(t){return t+(/(px|%)/i.test("".concat(t))?"":"px")},setupTooltips:function(t,e){if(t||e||this.settings.enableTooltips){var i,n=this,s={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};this.settings.filterable?(s.headerColumn="".concat(s.th," .datagrid-column-wrapper"),s.headerFilter="".concat(s.th," .datagrid-filter-wrapper .btn-menu"),s.header="".concat(s.headerColumn,", ").concat(s.headerFilter)):s.header=s.th,s.iconAlert="".concat(s.td," .icon-alert"),s.iconSuccess="".concat(s.td," .icon-success"),s.iconError="".concat(s.td," .icon-error"),s.iconInfo="".concat(s.td," .icon-info"),s.icons="".concat(s.iconAlert,", ").concat(s.iconSuccess,", ").concat(s.iconError,", ").concat(s.iconInfo),t&&this.settings.enableTooltips?s.str="".concat(s.header,", ").concat(s.td,", ").concat(s.icons,", ").concat(s.rowstatus):s.str=t?"".concat(s.header,", ").concat(s.rowstatus):"".concat(s.header,", ").concat(s.td,", ").concat(s.icons);var a=function(t,e){e=void 0===e?400:e,i=setTimeout((function(){var e=u.hasClass(t,"datagrid-column-wrapper"),i=!!u.hasClass(t.parentNode,"datagrid-filter-wrapper")&&t.parentNode.querySelectorAll(".popupmenu.is-open").length>0,s=$(t).data("gridtooltip")||n.cacheTooltip(t),a=e?t.parentNode:t,r=n.getOuterWidth(a);s&&(s.forced||s.textwidth>r-35)&&!i&&n.showTooltip(s)}),e)},r=function(t,e){e=void 0===e?400:e,clearTimeout(i),setTimeout((function(){n.hideTooltip(),u.hasClass(t.parentNode,"datagrid-filter-wrapper")&&n.removeTooltipData(t)}),e)};this.element.off("mouseenter.gridtooltip focus.gridtooltip",s.str).on("mouseenter.gridtooltip focus.gridtooltip",s.str,(function(){a(this)})).off("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",s.str).on("mouseleave.gridtooltip click.gridtooltip blur.gridtooltip",s.str,(function(){r(this)})).off("longpress.gridtooltip",s.str).on("longpress.gridtooltip",s.str,(function(){a(this,0)})).off("keydown.gridtooltip",s.str).on("keydown.gridtooltip",s.str,(function(t){var e=t.which||t.keyCode||t.charCode||0,i=!1;return t.shiftKey&&112===e?a(this,0):27===e&&(i=n.isGridtooltip(),r(this,0)),i&&t.preventDefault(),!i})),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").on("mouseenter.tableerrortooltip",".icon",(function(){a(this)})).off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").on("mouseleave.tableerrortooltip click.tableerrortooltip",".icon",(function(){r(this)})).off("longpress.tableerrortooltip",".icon").on("longpress.tableerrortooltip",".icon",(function(){a(this,0)}))}},getOuterWidth:function(t){var e=getComputedStyle(t),i=t.offsetWidth;return i+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)},closest:function(t,e){return t&&(e(t)?t:this.closest(t.parentNode,e))},headerNodes:function(){return this.headerRow?this.element.find(".datagrid-header tr:not(.datagrid-header-groups) th"):$()},colGroupNodes:function(){return this.headerRow?this.element.find("colgroup col"):$()},updateRow:function(t,e){var i=this.settings,n=e;n||(n=i.treeGrid?i.treeDepth[t].node:this.getActiveDataset()[t]);for(var s=0;s<this.settings.columns.length;s++){var a=this.settings.columns[s];a.hidden||this.updateCellNode(t,s,this.fieldValue(n,a.field),!0)}this.settings.dataset[t]=C.extend(!0,this.settings.dataset[t],e),this.settings.rowReorder&&this.tableBody.data("arrange")&&this.tableBody.data("arrange").updated()},updateColumns:function(t,e){void 0===e&&(e=null);var i=[];this.settings.filterable&&this.filterRowRendered&&(i=this.filterConditions()),this.settings.columns=t,e&&(this.settings.columnGroups=e),this.rerender(),this.element.trigger("columnchange",[{type:"updatecolumns",columns:this.settings.columns}]),this.saveUserSettings(),this.settings.filterable&&this.filterRowRendered&&this.setFilterConditions(i)},saveUserSettings:function(){this.element.trigger("settingschanged",[{rowHeight:this.settings.rowHeight,columns:this.settings.columns,sortOrder:this.sortColumn,pagesize:this.settings.pagesize,showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.pagerAPI?this.pagerAPI.activePage:1,filter:this.filterConditions()}]);var t=this.settings.saveUserSettings;!$.isEmptyObject(t)&&this.canUseLocalStorage()&&(t.columns&&(localStorage[this.uniqueId("usersettings-columns")]=this.copyThenStringify(this.settings.columns)),t.rowHeight&&(localStorage[this.uniqueId("usersettings-row-height")]=this.settings.rowHeight),t.sortOrder&&(localStorage[this.uniqueId("usersettings-sort-order")]=JSON.stringify(this.sortColumn)),t.pagesize&&(localStorage[this.uniqueId("usersettings-pagesize")]=this.settings.pagesize),t.showPageSizeSelector&&(localStorage[this.uniqueId("usersettings-show-pagesize-selector")]=this.settings.showPageSizeSelector),t.activePage&&this.pagerAPI&&(localStorage[this.uniqueId("usersettings-active-page")]=this.pagerAPI.activePage),t.filter&&(localStorage[this.uniqueId("usersettings-filter")]=JSON.stringify(this.filterConditions())))},canUseLocalStorage:function(){try{if(localStorage.getItem)return!0}catch(t){return!1}return!1},setOriginalColumns:function(){this.originalColumns=C.deepCopy(this.settings.columns)},columnsFromString:function(t,e){if(!t)return[];var i=JSON.parse(t);if(!i)return[];for(var n=0;n<i.length;n++){var s=void 0,a=this.columnById(i[n].id),r=a.width;a&&(s=i[n].hidden,$.extend(i[n],a[0]),void 0!==s?i[n].hidden=s:delete i[n].hidden,e&&(i[n].width=r))}return i},restoreColumns:function(t){if(this.settings.saveColumns&&this.canUseLocalStorage())if(t)this.updateColumns(t);else{var e=localStorage[this.uniqueId("columns")];!t&&e&&(this.originalColumns=C.deepCopy(this.settings.columns),this.settings.columns=this.columnsFromString(e))}},restoreUserSettings:function(t){var e=this.settings.saveUserSettings;if(t||!$.isEmptyObject(e)&&this.canUseLocalStorage())if(t){if(t.columns&&this.updateColumns(t.columns),t.rowHeight&&this.rowHeight(t.rowHeight),t.sortOrder&&this.setSortColumn(t.sortOrder.sortId,t.sortOrder.sortAsc),t.pagesize&&(this.settings.pagesize=parseInt(t.pagesize,10),this.pagerAPI.settings.pagesize=parseInt(t.pagesize,10),t.activePage||this.pagerAPI.setActivePage(1,!0)),t.showPageSizeSelector&&(this.settings.showPageSizeSelector=t.showPageSizeSelector,this.pagerAPI.showPageSizeSelector(t.showPageSizeSelector)),t.filter&&this.applyFilter(t.filter,"restore"),t.activePage){var i=parseInt(t.activePage,10);this.pagerAPI.setActivePage(i,!0),this.restoreActivePage=!0}}else{if(e.columns){var n=localStorage[this.uniqueId("usersettings-columns")];n&&(this.settings.columns=this.columnsFromString(n))}if(e.rowHeight){var s=localStorage[this.uniqueId("usersettings-row-height")];s&&(this.settings.rowHeight=s)}if(e.sortOrder){var a=localStorage[this.uniqueId("usersettings-sort-order")];a&&(this.sortColumn=JSON.parse(a),this.restoreSortOrder=!0)}if(e.pagesize){var r=localStorage[this.uniqueId("usersettings-pagesize")];r&&(this.settings.pagesize=parseInt(r,10))}if(e.showPageSizeSelector){var o=localStorage[this.uniqueId("usersettings-show-pagesize-selector")];(o="true"===o.toString().toLowerCase())&&(this.settings.showPageSizeSelector=o)}if(e.activePage){var l=localStorage[this.uniqueId("usersettings-active-page")];l&&(this.savedActivePage=parseInt(l,10),this.restoreActivePage=!0)}if(e.filter){var c=localStorage[this.uniqueId("usersettings-filter")];c&&(this.savedFilter=JSON.parse(c),this.restoreFilter=!0)}}},copyThenStringify:function(t){if(!t)return JSON.stringify(t);var e=t.map((function(t){var e=C.extend({},t);return e.editorOptions&&delete e.editorOptions,e}));return JSON.stringify(e)},resetColumns:function(){if(this.canUseLocalStorage()&&localStorage.removeItem(this.uniqueId("columns")),this.originalColumns){var t=C.deepCopy(this.originalColumns),e=this.settings.columnGroups&&this.originalColGroups?this.originalColGroups:null;this.updateColumns(t,e)}this.clearFilter()},hideColumn:function(t){var e,i,n,s=this.columnIdxById(t);if(!(-1===s||null!==(e=this.settings.columns[s])&&void 0!==e&&(null==e?void 0:e.hidden))){this.settings.columns[s].hidden=!0,this.headerNodes().eq(s).addClass("is-hidden"),this.colGroupNodes().eq(s).addClass("is-hidden");var a=(null===(i=this.settings)||void 0===i||null===(n=null==i?void 0:i.frozenColumns)||void 0===n||null==n?void 0:n.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(s-a+1,")")).addClass("is-hidden"),this.bodyColGroup.find("col").eq(s-a).addClass("is-hidden"),this.updateColumnGroup(s,!1),this.hasColSpans){var r=this.element.find(".datagrid-header th").eq(s).attr("colspan");if(r&&r>0){r-=1;for(var o=0;o<r;o++)s+=r,this.tableBody.find("> tr > td:nth-child(".concat(s+1,")")).addClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"hidecolumn",index:s,columns:this.settings.columns}]),this.saveUserSettings()}},syncExpandableRowColspan:function(){var t=this.visibleColumns().length;this.tableBody.find(".datagrid-expandable-row > td").attr("colspan",t)},showColumn:function(t){var e,i,n=this.columnIdxById(t);if(-1!==n&&this.settings.columns[n].hidden){this.settings.columns[n].hidden=!1,this.headerNodes().eq(n).removeClass("is-hidden"),this.colGroupNodes().eq(n).removeClass("is-hidden");var s=(null===(e=this.settings)||void 0===e||null===(i=null==e?void 0:e.frozenColumns)||void 0===i||null==i?void 0:i.left.length)||0;if(this.tableBody.find("> tr > td:nth-child(".concat(n-s+1,")")).removeClass("is-hidden"),this.bodyColGroup.find("col").eq(n-s).removeClass("is-hidden"),this.updateColumnGroup(n,!0),this.hasColSpans){var a=this.element.find(".datagrid-header th").eq(n).attr("colspan");if(a&&a>0){a-=1;for(var r=0;r<a;r++)n+=a,this.tableBody.find("> tr > td:nth-child(".concat(n+1,")")).removeClass("is-hidden")}}(this.settings.rowTemplate||this.settings.expandableRow)&&this.syncExpandableRowColspan(),this.element.trigger("columnchange",[{type:"showcolumn",index:n,columns:this.settings.columns}]),this.saveUserSettings()}},exportToCsv:function(t,e,i){gs.exportToCsv(t,e,i,this)},exportToExcel:function(t,e,i){gs.exportToExcel(t,e,i,this)},copyToDataSet:function(t,e,i,n){gs.copyToDataSet(t,e,i,n,this)},personalizeColumns:function(){var t=this,e=this,i='<div class="listview-search alternate-bg"><label class="audible" for="gridfilter">Search</label><input class="searchfield" placeholder="'.concat(B.translate("SearchColumnName"),'" name="searchfield" id="gridfilter"></div>');i+='<div class="listview alternate-bg" id="search-listview"><ul></ul></div>',$("body").modal({title:B.translate("PersonalizeColumns"),content:i,cssClass:"full-width datagrid-columns-dialog",buttons:[{text:B.translate("Close"),click:function(t,e){e.close(),$("body").off("beforeopen.datagrid")}}]}).off("beforeopen.datagrid").on("beforeopen.datagrid",(function(i,n){n&&(e.isColumnsChanged=!1,n.element.find(".searchfield").searchfield({clearable:!0}),n.element.find(".listview").listview({source:t.settings.columns,template:'\n            <ul>\n            {{#dataset}}\n              {{#name}}\n              <li>\n                <a href="#" target="_self" tabindex="-1">\n                  <label class="inline">\n                    <input tabindex="-1" type="checkbox" class="checkbox" {{^hideable}}disabled{{/hideable}} {{^hidden}}checked{{/hidden}} data-column-id="{{id}}"/>\n                    <span class="label-text">{{name}}</span>\n                  </label>\n                </a>\n              </li>\n              {{/name}}\n            {{/dataset}}\n            </ul>',searchable:!0,selectOnFocus:!1,listFilterSettings:{filterMode:"contains",searchableTextCallback:function(t){return t.name||t.id}}}).off("selected.datagrid").on("selected.datagrid",(function(t,i){var n=i.elem.find(".checkbox"),s=n.attr("data-column-id"),a=n.prop("checked");if(i.elem.removeClass("is-selected hide-selected-color"),!n.is(":disabled")){e.isColumnsChanged=!0;var r={node:{},api:$(this).data("listview")};if(r.api){var o=e.columnIdxById(s);-1!==o&&r.api.settings.dataset[o]&&(r.node=r.api.settings.dataset[o])}a?(e.hideColumn(s),n.prop("checked",!1),r.node.hidden=!0):(e.showColumn(s),n.prop("checked",!0),r.node.hidden=!1),e.settings.groupable&&e.rerender()}})),n.element.on("close.datagrid",(function(){e.isColumnsChanged=!1})),n.element.on("keydown.datagrid",(function(t){27===t.keyCode&&(n.close(),$("body").off("beforeopen.datagrid"))})))}))},setColumnWidth:function(t,e,i){var n=parseFloat(e),s=this.columnById(t)[0],a=-1;if(n&&t&&("string"==typeof t&&this.headerNodes().each((function(e){$(this).attr("data-column-id")===t&&(a=e)})),"number"!=typeof e&&(e=n/100*this.element.width()),!(Math.abs(e-s.width)<2))){if("number"==typeof s.colspan&&(e/=s.colspan),s&&(s.width=e),i)this.bodyColGroup.find("col").eq(a)[0].style.width="".concat(e,"px");this.element.trigger("columnchange",[{type:"resizecolumn",index:a,columns:this.settings.columns}]),this.saveUserSettings()}},isEllipsisActiveHeader:function(t){return(void 0===(t=t||{}).sortable||t.sortable)&&"ellipsis"===t.textOverflow},activeEllipsisHeaderAll:function(){for(var t=0,e=this.settings.columns.length;t<e;t++){var i=this.settings.columns[t].id,n=this.columnById(i)[0];if(this.isEllipsisActiveHeader(n)){var s=this.element[0].querySelector('.datagrid-header th[data-column-id="'.concat(i,'"]'));this.activeEllipsisHeader(s)}}},activeEllipsisHeader:function(t){if(t){var e=t.querySelector(".datagrid-column-wrapper .datagrid-header-text"),i=t.scrollWidth<e.scrollWidth+65;t.classList[i?"add":"remove"]("is-ellipsis-active")}},createResizeHandle:function(){var t=this,e=this;if(!this.resizeHandle){var i,n,s,a,r;this.resizeHandle=$('<div class="resize-handle" aria-hidden="true"></div>'),this.settings.columnGroups&&(this.resizeHandle[0].style.height="80px"),this.settings.filterable&&(this.resizeHandle[0].style.height="62px"),this.element.find("table").before(this.resizeHandle);var o=!1;this.resizeHandle.drag({axis:"x"}).on("dragstart.datagrid",(function(){e.currentHeader&&(e.dragging=!0,o=!1,n=e.currentHeader.attr("data-column-id"),i=e.columnById(n)[0],e.isEllipsisActiveHeader(i)&&e.currentHeader[0].classList.add("is-ellipsis-active"))})).on("drag.datagrid",(function(l,c){if(e.currentHeader&&i){var d=i.minWidth||12,h=i.maxWidth||2e3,p=e.currentHeader,g=p.index(),f="left"===e.getContainer(p.attr("data-column-id"));t.dragging=!0;var m=c.left+5,v=t.bodyColGroup.find("col").eq(g)[0];f&&(v=t.bodyColGroupLeft.find("col").eq(g)[0]);var b=parseInt(e.currentHeader.width(),10),y=parseInt(v.style.width||b,10);v.style.width.indexOf("%")>-1&&(y=b);var w=parseFloat(e.currentHeader.offsetParent().offset().left),x=parseFloat(e.currentHeader.offset().left),C=0===g?0:x-w-2;e.hasLeftPane&&!f&&0===g&&(C=x-w-2);var k=b-(m-C);if((s=y-k)<d||s>h)e.resizeHandle.css("cursor","inherit");else if(s!==y)if(v.style.width="".concat(s,"px"),(g===t.settings.frozenColumns.left.length-1||g<=t.settings.frozenColumns.left.length-1&&k>0)&&"left"===t.getContainer(n)&&(t.totalWidths.left+=k<0?Math.abs(k):-k,t.tableLeft.css("width",t.totalWidths.left)),K.pressedKeys.get("Shift")&&(o=!0),"fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o){var T=B.isRTL()?g+1:g-1,S=e.settings.columns[T];if(!S)return;var A=S.minWidth||12,$=S.maxWidth||1e3,E=B.isRTL()?u.getPreviousSibling(e.currentHeader,":not(.is-hidden)"):u.getNextSibling(e.currentHeader,":not(.is-hidden)");r=E.getAttribute("data-column-id");var D=B.isRTL()?u.getPreviousSibling(v,":not(.is-hidden)"):u.getNextSibling(v,":not(.is-hidden)"),I=parseInt(E.offsetWidth,10),L=parseInt(D.style.width||I,10);if(D.style.width.indexOf("%")>-1&&(L=I),(a=L+k)<A||a>$)return void e.resizeHandle.css("cursor","inherit");if(a===L||!D)return;D.style.width="".concat(a,"px")}}})).on("dragend.datagrid",(function(){t.dragging=!1,e.isEllipsisActiveHeader(i)&&e.activeEllipsisHeader(e.currentHeader[0]),e.setColumnWidth(n,s),r&&("fit"===t.settings.resizeMode&&!o||"flex"===t.settings.resizeMode&&o)&&e.setColumnWidth(r,a)}))}},displayCounts:function(t){var e,i,n,s,a,r=this,o=r.tableBody.find("tr:visible").length,l=0,c="",d=[],h=r.settings.paging&&!r.settings.source,p=function(t){return B.formatNumber(t,{style:"integer"})};(!h&&t||(this.recordCount=r.settings.dataset.length,o=r.settings.dataset.length),(this.settings.treeGrid&&h||!t)&&(this.filteredCount=r.settings.dataset.filter((function(t){return t._isFilteredOut})).length,o=r.settings.dataset.length,this.recordCount=r.settings.dataset.filter((function(t){return!t._isFilteredOut})).length),r.settings.groupable&&(l=o,o=r.originalDataset.length,c=(c="({0} ".concat(B.translate(1===l?"Group":"Groups"),")")).replace("{0}",p(l))),r.contextualToolbar&&r.contextualToolbar.length&&(r._selectedRows.forEach((function(t){d.push(t.idx);var e=d.filter((function(t,e){return d.indexOf(t)===e}));r.contextualToolbar.find(".selection-count").text("".concat(e.length," ").concat(B.translate("Selected")))})),r.settings.allowSelectAcrossPages&&r.contextualToolbar.find(".selection-count").text("".concat(r._selectedRows.length," ").concat(B.translate("Selected")))),t&&-1!==t&&(o=t),void 0===t&&this.settings.source&&(o=r.settings.dataset.length),void 0===t&&this.settings.source&&null!==(e=this.pagerAPI)&&void 0!==e&&null!==(i=null==e?void 0:e.state)&&void 0!==i&&(null==i?void 0:i.total))&&(o=null===(n=this.pagerAPI)||void 0===n||null===(s=null==n?void 0:n.state)||void 0===s||null==s?void 0:s.total);if(r.settings.showFilterTotal&&r.filteredCount>0)a=(a=(a="(".concat(B.translate(1===o?"ResultOf":"ResultsOf"),")")).replace("{0}",p(o-r.filteredCount))).replace("{1}",p(o));else{var g=B.translate(1===o?"Result":"Results");a=(a=-1===g.indexOf("{0}")?"({0} ".concat(g,")"):g).replace("{0}",p(o))}if(r.settings.resultsText)if("function"==typeof r.settings.resultsText)if(r.grandTotal)a=r.settings.resultsText(r,r.grandTotal,o===r.grandTotal?0:o);else{var f=0===r.filteredCount?0:o-r.filteredCount;a=r.settings.resultsText(r,o,f)}else a=r.settings.resultsText;if(r.toolbar){u.html(r.toolbar.find(".datagrid-result-count"),a,"<span>"),u.html(r.toolbar.find(".datagrid-group-count"),c,"<span>"),r.toolbar[0].setAttribute("aria-label",r.toolbar.find(".title").text()),r.toolbar.find(".datagrid-row-count").text(o),C.addAttributes(r.toolbar.find(".title"),this,this.settings.attributes,"title"),C.addAttributes(r.toolbar.find(".btn-actions"),this,this.settings.attributes,"actions");var m=r.toolbar.find("#gridfilter");C.addAttributes(m,this,this.settings.attributes,"search"),m.prev("label").attr("for",m.attr("id"))}u.html(r.element.closest(".modal").find(".datagrid-result-count"),a,"<span>"),this.lastCount=o,this.checkEmptyMessage()},setEmptyMessage:function(t){this.element["small"===(null==t||null==t?void 0:t.height)?"addClass":"removeClass"]("empty-message-height-small"),this.emptyMessage?(this.emptyMessage.settings=t,this.emptyMessage.updated()):(this.emptyMessageContainer=$('<div class="empty-message-container"><div></div></div>'),this.element.append(this.emptyMessageContainer).addClass("has-empty-message"),this.emptyMessage=this.emptyMessageContainer.find("div").emptymessage(t).data("emptymessage"),this.checkEmptyMessage())},checkEmptyMessage:function(){this.emptyMessage&&this.emptyMessageContainer&&(0===this.recordCount?(this.emptyMessageContainer.show(),this.element.addClass("is-empty")):(this.emptyMessageContainer.hide(),this.element.removeClass("is-empty")))},triggerRowEvent:function(t,e,i){var n=$(e.target),s=n.closest("tr"),a=n.closest("td"),r=a.index(),o=this.settings.treeGrid?this.actualRowIndex(s):this.dataRowIndex(s),l=!0;(n.is("a")||n.closest("a").length)&&(i=!1),i&&(e.stopPropagation(),e.preventDefault());var c=this.settings.dataset[o];if(this.settings.groupable&&(s.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")?l=!1:(o=this.actualPagingRowIndex(this.actualRowIndex(s)),(c=this.settings.dataset[this.groupArray[o].group])&&c.values&&(c=c.values[this.groupArray[o].node]))),l){var d={row:o,rowElem:s,cell:r,cellElem:a,item:c,originalEvent:e};this.element.trigger(t,[d])}return!1},handleScrollY:function(t){var e=t.currentTarget.scrollTop;e!==this.scrollTop&&this.bodyWrapperCenter&&(this.bodyWrapperLeft||this.bodyWrapperRight)&&(this.scrollTop=e,this.bodyWrapperLeft&&(this.bodyWrapperLeft[0].scrollTop=this.scrollTop),this.bodyWrapperRight&&(this.bodyWrapperRight[0].scrollTop=this.scrollTop),this.bodyWrapperCenter[0].scrollTop=this.scrollTop)},rerender:function(){this.clearCache(),this.renderRows(),this.renderHeader()},handleEvents:function(){var t=this,e=this;if(!e.settings.cellNavigation&&e.settings.rowNavigation&&e.element.on("focus.datagrid","tbody > tr",(function(){e.rowNodes($(this)).addClass("is-active-row")})).on("blur.datagrid","tbody > tr",(function(){e.rowNodes($(this)).removeClass("is-active-row")})),this.settings.paging&&this.tableBody.on("page.".concat("datagrid"),(function(i,n){"filtered"===n.type&&t.settings.source||(e.saveUserSettings(),e.render(null,n),e.afterPaging(n))})).on("pagesizechange.".concat("datagrid"),(function(t,i){e.render(null,i),e.afterPaging(i)})),e.settings.showHoverState&&e.element.off("mouseenter.datagrid, mouseleave.datagrid").on("mouseenter.datagrid","tbody > tr",(function(){e.rowNodes($(this)).addClass("is-hover-row")})).on("mouseleave.datagrid","tbody > tr",(function(){e.rowNodes($(this)).removeClass("is-hover-row")})),(this.hasLeftPane||this.hasRightPane)&&(e.element.find(".datagrid-wrapper").on("scroll.table",(function(t){e.handleScrollY(t)})),e.element.find(".datagrid-wrapper").on("wheel.table",(function(t){0!==t.originalEvent.deltaY&&(t.currentTarget.scrollTop+=t.originalEvent.deltaY,t.preventDefault(),e.handleScrollY(t))}))),this.settings.virtualized){var i=0,n=0;e.bodyWrapperCenter.on("scroll.vtable",f((function(){var t=this.scrollTop,n=t>e.virtualRange.bottom-e.virtualRange.bodyHeight-25,s=t<e.virtualRange.top+25;t!==i&&(s||n)&&(i=this.scrollTop,e.clearCache(),e.renderRows())}),0)),$("body").on("resize.vtable",(function(){this.offsetHeight!==n&&(n=this.scrollTop,e.clearCache(),e.renderRows())}))}this.element.off("click.datagrid-header").on("click.datagrid-header",".datagrid-header th.is-sortable, .datagrid-header th.btn-filter",(function(t){var i=$(t.target).parent();return i.is(".datagrid-filter-wrapper")||i.is(".lookup-wrapper")||i.is(".has-close-icon-button")||(t.stopPropagation(),e.setSortColumn($(this).attr("data-column-id"))),!1})),this.element.off("click.datagrid-links").on("click.datagrid-links","tbody .datagrid-row a",(function(t){var e=t.currentTarget.getAttribute("href");e&&"#"!==e||t.preventDefault()})),e.settings.editable&&this.element.off("paste.datagrid").on("paste.datagrid",(function(t){var i;i=t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData?t.originalEvent.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");var n=/\n/.exec(i),s=/\r/.exec(i),a=/\r\n/.exec(i);if((!e.activeCell||!e.activeCell.node.hasClass("is-readonly"))&&(i&&s||n||a)){var r=n?i.split("\n"):i.split("\r");a&&(r=i.split("\r\n")),r.pop();var o=parseInt($(t.target)[0].parentElement.parentElement.parentElement.getAttribute("data-index"),10),l=parseInt($(t.target)[0].parentElement.parentElement.getAttribute("aria-colindex"),10)-1;e.editor&&e.editor.input&&e.commitCellEdit(),e.copyToDataSet(r,o,l,e.settings.dataset)}})),this.element.off("click.datagrid").on("click.datagrid","tbody td",(function(t){var i=null,n=null,s=$(t.target),a=s.closest("td");if(1!==$(t.currentTarget).closest(".datagrid-expandable-row").length||"gridcell"===$(t.currentTarget).attr("role"))if(!a.is(".has-btn-actions")||s.is(".btn-actions")){if(s.parents("td").length>1&&(t.preventDefault(),t.stopPropagation()),e.triggerRowEvent("click",t,!0),e.setActiveCell(a),s.is(".datagrid-expand-btn"))return i=$(this).closest("tr"),n=e.actualRowIndex(i),e.toggleRowDetail(n),e.toggleGroupChildren(i),e.toggleChildren(t,n),!1;var r=s.is(".datagrid-selection-checkbox")||1===s.find(".datagrid-selection-checkbox").length,o=!!e.settings.clickToSelect||r;s.is(".datagrid-drilldown")&&(o=!1),"mixed"===e.settings.selectable&&((o=r)||(t.shiftKey&&e.activatedRow().length&&(e.selectRowsBetweenIndexes([e.activatedRow()[0].row,s.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()),e.toggleRowActivation(s.closest("tr")))),o&&"multiple"===e.settings.selectable&&t.shiftKey?(e.selectRowsBetweenIndexes([e.lastSelectedRow,s.closest("tr").attr("aria-rowindex")-1]),t.preventDefault()):o&&e.toggleRowSelection(s.closest("tr"));var l=a.attr("aria-colindex")-1,c=e.columnSettings(l);if(!c||s.is(".datagrid-checkbox")||c.editor!==As.Checkbox){var d=e.makeCellEditable(e.activeCell.rowIndex,e.activeCell.cell,t);if(c.click&&"function"==typeof c.click&&s.is("button, input[checkbox], a, a.search-mode i")||s.parent().is("button")){var h=$(this).closest("tr"),u=e.actualRowIndex(h);n=e.dataRowIndex(h);var p=e.settings.treeGrid?e.settings.treeDepth[u].node:e.settings.dataset[n];if(a.hasClass("is-focusable")&&!s.is(e.buttonSelector)&&!s.parent("button").is(e.buttonSelector))return;e.settings.groupable&&(h.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer")||(u=e.actualPagingRowIndex(e.actualRowIndex(h)),(p=e.settings.dataset[e.groupArray[u].group])&&p.values&&(p=p.values[e.groupArray[u].node]))),(!a.hasClass("is-cell-readonly")&&!s.is("[disabled]")&&s.is("button, input[checkbox], a, a.search-mode i")||s.parent().is("button"))&&c.click(t,[{row:u,cell:e.activeCell.cell,item:p,originalEvent:t}]),s.is("[disabled]")&&c.formatter===ps.Hyperlink&&(t.stopImmediatePropagation(),t.preventDefault())}if(c.menuId){e.closePrevPopupmenu();var g=$(this).find("button");g.popupmenu({attachToBody:!0,menuId:c.menuId,trigger:"immediate",offset:{y:5},returnFocus:function(){return a.focus()}}).off("close.gridpopupbtn").on("close.gridpopupbtn",(function(){var t=$(this);t.data("popupmenu")&&!t.data("tooltip")&&t.data("popupmenu").destroy()})),c.selected&&g.off("selected.gridpopupbtn").on("selected.gridpopupbtn",c.selected)}d&&setTimeout((function(){$("textarea, input",a).length&&!$(".dropdown,[type=file],[type=image],[type=button],[type=submit],[type=reset],[type=checkbox],[type=radio]",a).length&&(e.quickEditMode=!0)}),0)}}else e.setActiveCell(a)})),"last"!==this.stretchColumn&&($(window).on("orientationchange.datagrid",(function(){t.rerender()})),$(window).on("resize.datagrid",(function(){var i=0;for(t.clearCache(),i=0;i<e.settings.columns.length;i++){var n=e.settings.columns[i];e.columnWidth(n,i)}(e.stretchColumnDiff>0||e.stretchColumnWidth>0)&&(e.bodyColGroup.find("col").eq(e.getStretchColumnIdx())[0].style.width="".concat(e.stretchColumnDiff>0?"99%":"".concat(e.stretchColumnWidth,"px")))}))),this.element.off("dblclick.datagrid").on("dblclick.datagrid","tbody tr",(function(t){e.triggerRowEvent("dblclick",t,!0)})),this.element.off("contextmenu.datagrid").on("contextmenu.datagrid","tbody td",(function(t){var i=$(t.currentTarget);t.stopPropagation(),e.closePrevPopupmenu(),e.triggerRowEvent("contextmenu",t,!!e.settings.menuId);var n=function(){return e.settings.menuId&&$("#".concat(e.settings.menuId)).length>0};return!n()||!C.isSubscribedTo(e.element[0],t,"contextmenu","datagrid")&&!n()||(t.preventDefault(),e.setActiveCell(parseInt(i.parent().attr("aria-rowindex"),10)-1,parseInt(i.attr("aria-colindex"),10)-1),e.activeCell.node.focus(),i.popupmenu({menuId:e.settings.menuId,eventObj:t,beforeOpen:e.settings.menuBeforeOpen,attachToBody:!0,trigger:"immediate"}).off("selected.gridpopuptr").on("selected.gridpopuptr",(function(t,i){e.settings.menuSelected&&e.settings.menuSelected(t,i)})).off("close.gridpopuptr").on("close.gridpopuptr",(function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()})),!1)})),this.headerRow.add(this.headerRowLeft).off("mousemove.datagrid").on("mousemove.datagrid","th",(function(t){if(!e.dragging&&(e.currentHeader=$(t.target).closest("th"),e.currentHeader.hasClass("is-resizable")&&!e.currentHeader.hasClass("datagrid-header-spacer-column"))){var i=e.currentHeader.closest(".header-detail"),n=i.length?parseInt(i.css("margin-left"),10):0,s=parseInt(e.currentHeader.position().left,10)-(n||0)+e.element.scrollLeft(),a=s+e.currentHeader.outerWidth(),r=t.pageX-s>a-t.pageX,o=0;o=r?a-5:s-5;var l=e.currentHeader.parent().find("th:visible").index(e.currentHeader);(0===l&&(B.isRTL()?r:!r)||l===e.visibleColumns().length)&&(o="-999"),B.isRTL()||r||(e.currentHeader=e.currentHeader.prevAll(":visible").not(".is-hidden").first()),B.isRTL()&&!r&&(e.currentHeader=e.currentHeader.nextAll(":visible").not(".is-hidden").first()),e.currentHeader.hasClass("is-resizable")&&(e.createResizeHandle(),e.resizeHandle[0].style.left="".concat(o,"px"),e.resizeHandle[0].style.cursor="")}})).off("contextmenu.datagrid").on("contextmenu.datagrid","th",(function(t){return!e.settings.headerMenuId||(t.preventDefault(),e.closePrevPopupmenu(),$(t.currentTarget).popupmenu({menuId:e.settings.headerMenuId,eventObj:t,attachToBody:!0,beforeOpen:e.settings.headerMenuBeforeOpen,trigger:"immediate"}).off("selected.gridpopupth").on("selected.gridpopupth",(function(t,i){e.settings.headerMenuSelected(t,i)})).off("close.gridpopupth").on("close.gridpopupth",(function(){var t=$(this);t.data("popupmenu")&&t.data("popupmenu").destroy()})),!1)})),this.element.off("click.datagrid-header-select").on("click.datagrid-header-select","th .datagrid-checkbox",(function(){var t=$(this);t.hasClass("is-checked")?(t.removeClass("is-checked").attr("aria-checked","false"),e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows()):(t.addClass("is-checked").attr("aria-checked","true"),e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows())})),this.element.off("focusout.datagrid").on("focusout.datagrid","tbody td input, tbody td textarea, tbody div.dropdown",(function(t){var i=t.target;$(i).is("input.lookup, input.timepicker, input.datepicker, input.spinbox, input.colorpicker")?setTimeout((function(){var t=$("*:focus");if(!$(".lookup-modal.is-visible, #timepicker-popup, #monthview-popup, #colorpicker-menu").length&&e.editor){if(t.is(".spinbox, .trigger, .code-block-actions")||!$(i).is(":visible"))return;if(t&&e.editor.className&&t.closest(e.editor.className).length>0)return;e.commitCellEdit()}}),150):$("#dropdown-list, .autocomplete.popupmenu.is-open, #timepicker-popup, .is-editing .code-block").is(":visible")||e.editor&&e.editor.input&&e.commitCellEdit()}))},closePrevPopupmenu:function(){[].slice.call(this.element[0].querySelectorAll(".is-open:not(.popupmenu)")).forEach((function(t){var e=$(t);e.data("popupmenu")&&e.trigger("close")}))},refreshSelectedRowHeight:function(){var t=this.element.parent().find(".toolbar:not(.contextual-toolbar)").find(".btn-actions").data("popupmenu");if(null!=t&&(null==t?void 0:t.wrapper)){var e=t.wrapper.find('[data-option="row-extra-small"]'),i=t.wrapper.find('[data-option="row-small"]'),n=t.wrapper.find('[data-option="row-short"]'),s=t.wrapper.find('[data-option="row-medium"]'),a=t.wrapper.find('[data-option="row-normal"]'),r=t.wrapper.find('[data-option="row-large"]');"extra-small"===this.settings.rowHeight&&(e.parent().addClass("is-checked"),i.parent().removeClass("is-checked"),n.parent().removeClass("is-checked"),s.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"short"!==this.settings.rowHeight&&"small"!==this.settings.rowHeight||(e.parent().removeClass("is-checked"),i.parent().addClass("is-checked"),n.parent().addClass("is-checked"),s.parent().removeClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"medium"===this.settings.rowHeight&&(e.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),s.parent().addClass("is-checked"),a.parent().removeClass("is-checked"),r.parent().removeClass("is-checked")),"normal"!==this.settings.rowHeight&&"large"!==this.settings.rowHeight||(e.parent().removeClass("is-checked"),i.parent().removeClass("is-checked"),n.parent().addClass("is-checked"),s.parent().removeClass("is-checked"),a.parent().addClass("is-checked"),r.parent().addClass("is-checked")),$(".drag-target-arrows",this.element).css("height","".concat(this.getTargetHeight(),"px"))}},appendToolbar:function(){var t=null,e="",n=null,s=this;if(this.settings.toolbar){if(1===this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)").length)t=this.element.parent().find(".toolbar:not(.contextual-toolbar), .flex-toolbar:not(.contextual-toolbar)"),this.refreshSelectedRowHeight();else{t=$('<div class="toolbar" role="toolbar"></div>'),this.removeToolbarOnDestroy=!0,this.settings.toolbar.title&&(e=$('<div class="title">'.concat(this.settings.toolbar.title,"  </div>"))),e||(e=t.find(".title")),t.append(e),this.settings.toolbar.results&&e.append('<span class="datagrid-result-count"></span>');var a=$('<div class="buttonset"></div>').appendTo(t);if(this.settings.toolbar.keywordFilter){var r=$('<label class="audible" for="gridfilter">'.concat(B.translate("Keyword"),"</label>")),o=$('<input class="searchfield" name="searchfield" placeholder="'.concat(B.translate("Keyword"),'" id="gridfilter">'));a.append(r),this.settings.toolbar.collapsibleFilter||o.attr("data-options",'{ "collapsible": false }'),a.append(o)}this.settings.toolbar.dateFilter&&a.append('<button class="btn" type="button">'.concat($.createIcon({icon:"calendar"}),"<span>").concat(B.translate("Date"),"</span></button>")),this.settings.toolbar.actions&&((n=$('<div class="more"></div>').insertAfter(a)).append('<button class="btn-actions" title="More" type="button">'.concat($.createIcon({icon:"more"}),'<span class="audible">Grid Features</span></button>')),t.addClass("has-more-button"));var l=$('<ul class="popupmenu"></ul>');if(this.settings.toolbar.personalize&&l.append('<li><a href="#" data-option="personalize-columns">'.concat(B.translate("PersonalizeColumns"),"</a></li>")),this.settings.toolbar.resetLayout&&l.append('<li><a href="#" data-option="reset-layout">'.concat(B.translate("ResetDefault"),"</a></li>")),this.settings.toolbar.exportToExcel&&l.append('<li><a href="#" data-option="export-to-excel">'.concat(B.translate("ExportToExcel"),"</a></li>")),this.settings.toolbar.advancedFilter&&l.append('<li><a href="#">'.concat(B.translate("AdvancedFilter"),"</a></li>")),this.settings.toolbar.views&&l.append('<li><a href="#">'.concat(B.translate("SaveCurrentView"),"</a></li> ")+'<li class="separator"></li> '+'<li class="heading">'.concat(B.translate("SavedViews"),"</li>")+'<li><a href="#">View One</a></li>'),this.settings.toolbar.rowHeight&&l.append("".concat('<li class="separator single-selectable-section"></li><li class="heading">').concat(B.translate("RowHeight"),"</li>")+'<li class="is-selectable'.concat("extra-small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-extra-small">').concat(B.translate("ExtraSmall"),"</a></li>")+'<li class="is-selectable'.concat("short"===this.settings.rowHeight||"small"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-small">').concat(B.translate("Small"),"</a></li>")+'<li class="is-selectable'.concat("medium"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-medium">').concat(B.translate("Medium"),"</a></li>")+'<li class="is-selectable'.concat("normal"===this.settings.rowHeight||"large"===this.settings.rowHeight?" is-checked":"",'"><a href="#" data-option="row-large">').concat(B.translate("Large"),"</a></li>")),!0===this.settings.toolbar.filterRow&&l.append("".concat('<li class="separator"></li><li class="heading">').concat(B.translate("Filter"),"</li>")+'<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(B.translate("ShowFilterRow"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="run-filter">'.concat(B.translate("RunFilter"),"</a></li>")+'<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(B.translate("ClearFilter"),"</a></li>")),"object"===i(this.settings.toolbar.filterRow)){var c='<li class="separator"></li>';this.settings.toolbar.filterRow.showFilter&&(c+='<li class="'.concat(this.settings.filterable?"is-checked ":"",'is-toggleable"><a href="#" data-option="show-filter-row">').concat(B.translate("ShowFilterRow"),"</a></li>")),this.settings.toolbar.filterRow.runFilter&&!this.settings.filterWhenTyping&&(c+='<li class="is-indented"><a href="#" data-option="run-filter">'.concat(B.translate("RunFilter"),"</a></li>")),this.settings.toolbar.filterRow.clearFilter&&(c+='<li class="is-indented"><a href="#" data-option="clear-filter">'.concat(B.translate("ClearFilter"),"</a></li>")),l.append(c)}this.settings.toolbar.actions&&n.append(l),this.element.prev().is(".contextual-toolbar")?this.element.prev().before(t):this.element.before(t)}var d=t.find(".btn-actions"),h=t.is(".flex-toolbar");this.settings.stickyHeader&&t.addClass("is-sticky"),h||d.popupmenu();if((h?t:d).on("selected",(function(t,e,i){var n=e.attr?e.attr("data-option"):i.attr("data-option");n&&("row-extra-small"!==n&&"row-small"!==n&&"row-short"!==n&&"row-medium"!==n&&"row-normal"!==n&&"row-large"!==n||s.rowHeight(n.substr(4)),"personalize-columns"===n&&s.personalizeColumns(),"reset-layout"===n&&s.resetColumns(),"export-to-excel"===n&&s.exportToExcel(),"show-filter-row"===n&&s.toggleFilterRow(),"run-filter"===n&&s.applyFilter(null,"menu"),"clear-filter"===n&&s.clearFilter())})),this.settings.initializeToolbar&&!t.data("toolbar")&&!t.hasClass("flex-toolbar")){var u=$.fn.parseOptions(t);this.settings.toolbar.fullWidth&&(u.rightAligned=!0),t.toolbar(u)}if(this.settings.initializeToolbar&&t.hasClass("flex-toolbar")&&!t.data("toolbarFlex")){var p=$.fn.parseOptions(t);t.toolbarFlex(p)}if(this.settings.toolbar&&this.settings.toolbar.keywordFilter){var g=t.find(".searchfield"),f=g.parent().find(".close.icon");g.off("keypress.datagrid").on("keypress.datagrid",(function(t){13!==t.keyCode&&"change"!==t.type||(t.preventDefault(),s.keywordSearch(g.val()))})),f.off("click.datagrid").on("click.datagrid",(function(){s.keywordSearch(g.val())}))}if(this.settings.toolbar&&this.settings.toolbar.contextualToolbar){this.element.before('\n        <div class="contextual-toolbar datagrid-contextual-toolbar toolbar is-hidden">\n          <div class="title selection-count">1 Selected</div>\n        </div>'),this.contextualToolbar=this.element.prev(".contextual-toolbar")}this.toolbar=t,this.element.addClass("has-toolbar")}},rowHeight:function(t){var e=[];t&&(this.settings.rowHeight!==t&&e.push({before:this.settings.rowHeight,after:t}),this.settings.rowHeight=t);var i=this.settings.rowHeight;return"short"===i&&(i="small"),"large"===i&&(i="normal"),this.element.add(this.table).add(this.tableLeft).add(this.tableRight).removeClass("extra-small-rowheight small-rowheight short-rowheight medium-rowheight normal-rowheight large-rowheight").addClass("".concat(i,"-rowheight")),this.virtualRange&&this.virtualRange.rowHeight&&(this.virtualRange.rowHeight="normal"===t||"large"===t?40:"medium"===t?30:25,"extra-small"===t&&(this.virtualRange.rowHeight=22)),this.saveUserSettings(),this.refreshSelectedRowHeight(),this.rerender(),e.length&&this.element.triggerHandler("rowheightchanged",e),this.settings.rowHeight},keywordSearch:function(t){this.element.find('tr[role="row"]').removeClass("is-filtered").show(),this.filterExpr=[],this.element.find(".datagrid-expandable-row").each((function(){var t=$(this);t.prev().find(".datagrid-expand-btn").removeClass("is-expanded"),t.prev().find(".plus-minus").removeClass("active"),t.removeClass("is-expanded").css("display",""),t.find(".datagrid-row-detail").css("height","")})),this.element.find(".search-mode").each((function(){var t=$(this),e=t.text();t.text(e.replace("<i>","").replace("</i>",""))})),t=(t||"").toLowerCase(),this.filterExpr.push({column:"all",operator:"contains",value:t,keywordSearch:!0}),this.filterKeywordSearch(),this.clearCache(),this.renderRows(),this.setSearchActivePage({trigger:"searched",type:"filtered"}),this.settings.paging&&this.settings.source||this.highlightSearchRows(t)},setSearchActivePage:function(t){if(this.pagerAPI){var e=this;t||(t={});var i=!0;this.filterExpr&&1===this.filterExpr.length?""!==this.filterExpr[0].value?(t.activePage=this.pagerAPI.filteredActivePage||1,this.settings.source&&this.settings.allowSelectAcrossPages&&t.activePage!==this.activePage&&(i=!1)):""===this.filterExpr[0].value&&this.pagerAPI.filteredActivePage&&(t=n(t)):this.restoreActivePage||(t=n(t),this.restoreActivePage=!1),i&&(t.activePage=this.activePage),this.renderPager(t)}function n(t){return t.activePage=1,e.grandTotal&&(t.grandTotal=e.grandTotal),t}},filterKeywordSearch:function(){var t,e,i,n,s=this,a=s.filterExpr,r=function(t,e){var i=!1,n=function(i){var n=s.columnById(i)[0],r=s.fieldValue(t,n.field),o=s.settings.columns.indexOf(n);return s.formatValue(n.formatter,e,o,r,n,t,s).toLowerCase().replace(/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/gi,"").indexOf(a.value)>-1};return"all"===a.column?s.element.find("th:visible").each((function(){var t=$(this).attr("data-column-id");if(t&&(i=n(t)))return!1})):a.columnId&&(i=n(a.columnId)),i};if(a&&1===a.length)if(a=a[0],s.settings.treeGrid)for(i=0,n=(t=s.settings.treeDepth).length;i<n;i++)e=""!==a.value&&!r(t[i].node,i),t[i].node._isFilteredOut=e;else for(i=0,n=(t=s.settings.dataset).length;i<n;i++)e=""!==a.value&&!r(t[i],i),t[i]._isFilteredOut=e},highlightSearchRows:function(t){var e=this,i=this;if(t&&""!==t){i.tableBody.find("tr").toArray().forEach((function(n){var s=i.rowNodes(n.getAttribute("aria-rowindex")-1),a=function(n){var s=!1;return n.toArray().forEach((function(n){[].slice.call(n.querySelectorAll("td")).forEach((function(n){var a=n.innerText.toLowerCase(),r=!!i.settings.searchExpandableRow||!u.hasClass(e,"datagrid-expandable-row");a.indexOf(t)>-1&&r&&(s=!0,[].slice.call(n.querySelectorAll("*")).forEach((function(e){[].slice.call(e.childNodes).forEach((function(e){var i=e.parentElement;if(3===e.nodeType&&"i"!==i.tagName.toLowerCase()&&h.unescapeHTML(i.innerHTML)===e.textContent){var n=e.textContent,s=new RegExp("(".concat(E.escapeRegExp(t),")"),"gi");u.addClass(i,"search-mode"),u.html(i,n.replace(s,"<i>$1</i>"))}}))})))}))})),s}(s);a||s.find(".datagrid-row-detail").length?i.settings.searchExpandableRow&&a&&s.is(".datagrid-expandable-row")&&""!==t&&(s.prev().show(),s.prev().find(".datagrid-expand-btn").addClass("is-expanded"),s.prev().find(".plus-minus").addClass("active"),s.addClass("is-expanded").css("display","table-row"),s.find(".datagrid-row-detail").css("height","auto")):s.addClass("is-filtered").hide()}))}},getActiveDataset:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;return t.groupable&&(e=this.originalDataset),e},getDataset:function(){return this.settings.dataset.map((function(t){return delete t._isFilteredOut,t}))},selectAllRows:function(){for(var t=[],e=this.getActiveDataset(),i=0,n=e.length;i<n;i++){var s=this.settings.groupable?i:this.pagingRowIndex(i);this.filterRowRendered||this.filterExpr&&this.filterExpr[0]&&this.filterExpr[0].keywordSearch?e[i]._isFilteredOut||e[i]._selected||t.push(s):e[i]._selected||t.push(s)}this.dontSyncUi=!0,this.selectRows(t,!0,!0),this.dontSyncUi=!1,this.syncSelectedUI(),this.element.triggerHandler("selected",[this._selectedRows,"selectall"])},deSelectAllRows:function(){this.unSelectAllRows()},unSelectAllRows:function(t,e){if(this._selectedRows&&0!==this._selectedRows.length){this.dontSyncUi=!0;for(var i=this._selectedRows.length-1;i>=0;i--)if(this._selectedRows[i]){var n=this.settings.groupable?this._selectedRows[i].idx:this.pagingRowIndex(this._selectedRows[i].idx);this.unselectRow(n,!0,!0)}this.settings.dataset.map((function(t){delete t._selected})),this.dontSyncUi=!1,this._selectedRows=[],t||this.syncSelectedUI(),e||this.element.triggerHandler("selected",[this._selectedRows,"deselectall"])}else this.settings.dataset.map((function(t){delete t._selected}))},unSelectAllRowsCurrentPage:function(t){var e,i,n=this,s=this.settings;this.dontSyncUi=!0,null===(e=this.currentPageRows)||void 0===e||null==e||e.forEach((function(t){var e=s.groupable?t.dataIndex:n.pagingRowIndex(t.dataIndex);n.unselectRow(e,!0,!0)}));var a=this.getActiveDataset(),r=(null===(i=this.currentPageRows)||void 0===i||null==i?void 0:i.map((function(t){return t.dataIndex})))||[];a.filter((function(t,e){return r.indexOf(e)>-1})).map((function(t){return delete t._selected})),this.dontSyncUi=!1,t||this.syncSelectedUI()},selectAllRowsCurrentPage:function(t){var e;this.dontSyncUi=!0;var i=(null===(e=this.currentPageRows)||void 0===e||null==e?void 0:e.map((function(t){return t.dataIndex})))||[];i.length&&this.selectRowsBetweenIndexes([i[0],i[i.length-1]]),this.dontSyncUi=!1,t||this.syncSelectedUI()},isRowSelected:function(t){return!!t&&!0===t._selected},selectNode:function(t,e,i,n){var s=null,a="is-selected".concat("mixed"===this.settings.selectable?" hide-selected-color":"");(i&&!this.isRowSelected(i)||n)&&(s=t.find(".datagrid-selection-checkbox").closest("td"),t.addClass(a).attr("aria-selected","true"),s.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true").attr("aria-label","Selected"),i&&(i._selected=!0))},selectRow:function(t,e,i){var n,s=this,a=null,r=this,o=this.settings,l={};if(void 0!==t&&-1!==t&&o.selectable&&!this.isRowDisabled(t)&&(a=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),n=this.dataRowIndex(a),isNaN(n)&&(n=t),a&&(a.length||!o.source))){if("function"==typeof o.onBeforeSelect&&!i)if(!1===o.onBeforeSelect({node:a,idx:n}))return;var c=function(t,e){return!!s._selectedRows.filter((function(i){return function(t,e,i){return i&&i.idx===t&&i.elem&&i.elem.is(e)}(t,e,i)})).length};if("single"===o.selectable){var d=-1;this._selectedRows.length>0?d=this._selectedRows[0].pagingIdx:a[0]&&a[0].classList.contains("is-selected")&&(d=n),-1!==d&&(this.unselectRow(d,!0,!0),!a.length&&this._selectedRows.length>0&&this._selectedRows.pop())}var h=o.source&&"multiple"===o.selectable&&o.allowSelectAcrossPages;if(!a.hasClass("is-selected")||h){var u;if(o.treeGrid){var p=parseInt(a.attr("aria-level"),10);if(u=o.treeDepth[r.pagerAPI&&o.source?a.index():t].node,a.is(".datagrid-tree-parent")&&"multiple"===o.selectable)a.add(a.nextUntil('[aria-level="'.concat(p,'"]'))).each((function(t){var e=$(this),i=e.attr("aria-rowindex")-1,n=r.actualPagingRowIndex(i),s=o.treeDepth[n].node;if(o.selectChildren||!o.selectChildren&&0===t){var d=!e.is(a)&&!e.hasClass("is-selected");if(r.selectNode(e,i,s),d&&!c(n,e)){if(l={idx:n,data:s,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:n,pagesize:o.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var h=r.getUniqueRowID(s);h&&(l.uniqueRowID=h)}r._selectedRows.push(l)}}}));else if("siblings"===o.selectable){var g,f;r.settings.selectAllCurrentPage?r.unSelectAllRowsCurrentPage(!0):r.unSelectAllRows(!0,!0),1===p?g=a.parent().find('[aria-level="1"]'):p>1&&(g=a.nextUntil('[aria-level="'.concat(p-1,'"]')).filter('[aria-level="'.concat(p,'"]')),f=a.prevUntil('[aria-level="'.concat(p-1,'"]')).filter('[aria-level="'.concat(p,'"]'))),a.add(g).add(f).each((function(t){var e=$(this),i=e.attr("aria-rowindex")-1,n=r.actualPagingRowIndex(i),s=o.treeDepth[n].node;if(o.selectChildren||!o.selectChildren&&0===t){var d=!e.is(a)&&!e.hasClass("is-selected");if(r.selectNode(e,i,s),d&&!c(n,e)){if(l={idx:n,data:s,elem:e,page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:n,pagesize:o.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var h=r.getUniqueRowID(s);h&&(l.uniqueRowID=h)}r._selectedRows.push(l)}}}))}else r.selectNode(a,t,u);r.setNodeStatus(a)}else{if(u=o.dataset[n],o.groupable){var m=r.actualPagingRowIndex(r.actualRowIndex(a));if(isNaN(m))return;var v=r.groupArray[m];if(u=r.settings.dataset[v.group].values[v.node],!c(u.idx,a)){if(l={idx:u.idx,data:u,elem:a,group:o.dataset[r.groupArray[m].group],page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:n,pagesize:r.settings.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var b=r.getUniqueRowID(u);b&&(l.uniqueRowID=b)}this._selectedRows.push(l)}}r.selectNode(a,n,u),r.lastSelectedRow=t}if(!o.groupable){var y=r.actualPagingRowIndex(t);if(-1===y&&(y=t),!c(y,r.visualRowNode(y))){if(l={idx:y,data:u,elem:r.visualRowNode(y),page:r.pagerAPI?r.pagerAPI.activePage:1,pagingIdx:t,pagesize:r.settings.pagesize},r.settings.source&&r.settings.allowSelectAcrossPages){var w=r.getUniqueRowID(u);w&&(l.uniqueRowID=w)}this._selectedRows.push(l)}}}e||r.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"])}},selectRowsBetweenIndexes:function(t){t.sort((function(t,e){return t-e}));for(var e=t[0];e<=t[1];e++)this.selectRow(e);this.displayCounts()},syncHeaderCheckbox:function(t){if(0!==this.headerNodes().length){var e=this.settings,i=this.getActiveDataset(),n=this.headerNodes().find(".datagrid-checkbox"),s=t.length,a=this._selectedRows.length,r=n.data("selected");if(e.selectAllCurrentPage&&this.currentPageRows&&i.length!==t.length){var o,l=(null===(o=this.currentPageRows)||void 0===o||null==o?void 0:o.map((function(t){return t.dataIndex})))||[];a=i.filter((function(t,e){return l.indexOf(e)>-1})).filter((function(t){return t._selected})).length}e.source&&e.allowSelectAcrossPages&&(a=i.filter((function(t){return t._selected})).length),a!==s&&a>0&&"partial"===r||a===s&&"all"===r&&0!==a||0===a&&"none"===r||(a>0&&n.data("selected","partial").addClass("is-checked is-partial").attr("aria-checked","mixed"),a===s&&n.data("selected","all").addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),0===a&&n.data("selected","none").removeClass("is-checked is-partial").attr("aria-checked","false"))}},getUniqueRowID:function(t){var e=null;if(this.settings.columnIds.length>0){e="rowId";for(var i=0;i<this.settings.columnIds.length;i++)e+=" ".concat(t[this.settings.columnIds[i]]);e=e.replace(/([0-9A-Z]+)/g,(function(t,e){return" ".concat(e)})).replace(/([0-9a-z]+)/g,(function(t,e){return"".concat(e," ")})).trim(),e=h.toCamelCase(e)}return e},syncSelectedRows:function(){for(var t,e=this,i=this.settings,n=i.groupable&&this.originalDataset?this.originalDataset:i.dataset,s=null,a=function(t){var a=i.groupable?e.dataRowNode(s):e.visualRowNode(s);a[0]&&(e._selectedRows[t].elem=a,e.selectNode(a,s,n[s],!0))},r=0,o=this._selectedRows.length;r<o;r++){var l=(t=this._selectedRows[r])?t.uniqueRowID:null;if(this.settings.source&&this.settings.allowSelectAcrossPages&&l){for(var c=0,d=n.length;c<d;c++)if(l===this.getUniqueRowID(n[c])){var h=i.groupable?this.dataRowNode(c):this.visualRowNode(c);h[0]&&(this._selectedRows[r].elem=h,this.selectNode(h,c,n[c],!0))}}else this.pagerAPI&&this._selectedRows[r].page===this.pagerAPI.activePage&&(s=this._selectedRows[r].idx,a(r)),this._selectedRows[r].pagesize===i.pagesize||i.groupable||(s=this._selectedRows[r].pagingIdx,i.dataset[s]?(a(r),this._selectedRows[r].idx=s,this._selectedRows[r].page=this.pagerAPI.activePage,this._selectedRows[r].pagesize=i.pagesize):(this._selectedRows[r].idx=s%i.pagesize,this._selectedRows[r].page=Math.round(s/i.pagesize)+1,this._selectedRows[r].pagesize=i.pagesize))}},calculatePagerInfo:function(t,e,i){for(var n=this.settings,s=e||n.treeGrid?n.treeDepth:n.dataset,a={idx:t,page:1,pagesize:i="number"==typeof i&&i>0?i:n.pagesize,numOfPages:Math.ceil(s.length/i)},r=0;r<a.numOfPages;r++){if(t>=(a.page-1)*a.pagesize&&t<a.page*a.pagesize){a.pagingIdx=t-a.pagesize*r;break}a.page++}return a},syncSelectedRowsIdx:function(){var t=this.settings.groupable&&this.originalDataset?this.originalDataset:this.settings.dataset;if(0!==this._selectedRows.length&&0!==t.length){this._selectedRows=[];for(var e=0;e<t.length;e++)if(t[e]._selected){var i={idx:e,data:t[e],elem:this.dataRowNode(e),pagingIdx:e,pagesize:this.settings.pagesize};if(this.settings.groupable){var n=this.rowNodesByDataIndex(e);if(n.length){var s=this.actualPagingRowIndex(this.actualRowIndex(n)),a=this.groupArray[s].group;i.group=this.settings.dataset[a],i.page=this.calculatePagerInfo(a).page}}else i.page=this.calculatePagerInfo(e).page;this._selectedRows.push(i)}}},syncSelectedUI:function(){var t=this,e=this.getActiveDataset(),i=e;if(this.settings.selectAllCurrentPage){var n,s=(null===(n=this.currentPageRows)||void 0===n||null==n?void 0:n.map((function(t){return t.dataIndex})))||[];i=e.filter((function(t,e){return s.indexOf(e)>-1}))}var a=i;if(this.filterRowRendered){a=[];for(var r=0,o=i.length;r<o;r++)i[r]._isFilteredOut||a.push(r)}this.syncHeaderCheckbox(a),1!==this.contextualToolbar.length||this.dontSyncUi||(0===this._selectedRows.length&&this.contextualToolbar.one("animateclosedcomplete.datagrid",(function(){t.contextualToolbar.css("display","none")})).animateClosed(),this._selectedRows.length>0&&0===this.contextualToolbar.height()&&this.contextualToolbar.css("display","block").one("animateopencomplete.datagrid",(function(){$(this).triggerHandler("recalculate-buttons")})).animateOpen())},activateRow:function(t){this.activatedRow()[0].row!==t&&this.toggleRowActivation(t)},deactivateRow:function(){var t=this.activatedRow()[0].row;t>=0&&this.toggleRowActivation(t)},activatedRow:function(){var t=[{row:-1,item:void 0,elem:void 0}];if(this.tableBody){var e=this.settings,i=e.treeGrid?e.treeDepth:e.dataset,n=this.tableBody.find("tr.is-rowactivated");if(n.length){var s=this.dataRowIndex(n),a=e.indeterminate?s:this.actualRowIndex(n);t=[{row:a,item:i[a],elem:n}]}else{t=null;for(var r=0;r<i.length;r++)if(i[r]._rowactivated){t=[{row:r,item:i[r],elem:void 0}];break}null===t&&(t=[{row:-1,item:void 0,elem:n}])}}return t},toggleRowActivation:function(t){var e,i,n,s=this.settings,a=s.treeGrid?s.treeDepth:s.dataset;if("number"==typeof t){if(e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(t+1,'"]')),n=t,this.pagerAPI&&s.source&&s.indeterminate){var r=t+(this.pagerAPI.activePage-1)*s.pagesize;e=this.tableBody[0].querySelector('tr[aria-rowindex="'.concat(r+1,'"]'))}}else e=(i=t instanceof jQuery?t:$(t))[0],n=s.treeGrid||s.groupable?this.actualRowIndex(i):this.dataRowIndex(i);s.indeterminate&&!e&&(e=(i=this.actualRowNode(n))[0]),!!a[n]&&a[n]._rowactivated?this.deactivateRowNode(n,a):(this.deactivateAllRowNodes(a),this.activateAllRowNodes(n,a))},activateAllRowNodes:function(t,e){var i=this;if(!("number"!=typeof t||t<0)){var n=this.settings;void 0===e&&(e=n.treeGrid?n.treeDepth:n.dataset);var s=[{row:t,item:e[t]}];e[t]&&$.when(this.element.triggerHandler("beforerowactivated",s)).done((function(a){var r;"string"==typeof(r=a)&&"false"===r.toLowerCase()||"boolean"==typeof r&&!1===r||"number"==typeof r&&0===r||((n.paging&&n.source&&"mixed"===n.selectable?i.rowNodesByDataIndex(t).toArray():i.rowNodes(t).toArray()).forEach((function(t){t.classList.add("is-rowactivated")})),e[t]._rowactivated=!0,s=[{row:t,item:e[t]}],i.element.triggerHandler("rowactivated",s))}))}},deactivateRowNode:function(t,e){if(!("number"!=typeof t||t<0)){var i=this.settings;if(void 0===e&&(e=i.treeGrid?i.treeDepth:i.dataset),e[t]&&!i.disableRowDeactivation)this.rowNodes(t).toArray().forEach((function(t){t.classList.remove("is-rowactivated")})),delete e[t]._rowactivated,this.element.triggerHandler("rowdeactivated",[{row:t,item:e[t]}])}},deactivateAllRowNodes:function(t){var e=this.settings,i=null;void 0===t&&(t=e.treeGrid?e.treeDepth:e.dataset);var n=[].slice.call(this.element[0].querySelectorAll("tr.is-rowactivated"));if(n.length>0){n.forEach((function(t){t.classList.remove("is-rowactivated")}));var s=e.treeGrid||e.groupable?this.actualRowIndex($(n)):this.dataRowIndex($(n));i={row:s,item:t[s]},t[s]&&delete t[s]._rowactivated}else for(var a=0;a<t.length;a++){var r=t[a];if(r._rowactivated){delete r._rowactivated,i={row:a,item:r};break}}null!==i&&this.element.triggerHandler("rowdeactivated",[i])},toggleRowSelection:function(t){var e="number"==typeof t?this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]')):t,i="number"==typeof t?t:this.actualRowIndex(e);if(this.settings.groupable&&(i=this.dataRowIndex(e)),!(!1===this.settings.selectable||this.editor&&e.hasClass("is-selected")))return"single"===this.settings.selectable&&e.hasClass("is-selected")&&!this.settings.disableRowDeselection?(this.unselectRow(i),this.displayCounts(),this._selectedRows):(e.hasClass("is-selected")?this.settings.disableRowDeselection||this.unselectRow(i):this.selectRow(i),this.displayCounts(),this._selectedRows)},unselectRow:function(t,e,i){var n=this,s=n.settings,a=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),r=s.source&&"multiple"===s.selectable&&s.allowSelectAcrossPages;if(a&&void 0!==t){var o=function(t){return t?t.uniqueRowID:null},l=function(t,e){var i=function(i,a){delete i._selected,void 0===a&&(a=e);for(var l=0;l<n._selectedRows.length;l++){var c=o(n._selectedRows[l]);if(s.source&&s.allowSelectAcrossPages&&c){if(c===n.getUniqueRowID(i)){n._selectedRows.splice(l,1);break}}else if(n._selectedRows[l].idx===a){if(r&&n._selectedRows[l].elem&&!n._selectedRows[l].elem.is(t))continue;n._selectedRows.splice(l,1);break}}};if(n.cellNode(t,n.columnIdxById("selectionCheckbox")),t.removeClass("is-selected hide-selected-color").removeAttr("aria-selected"),-1!==n.columnIdxById("selectionCheckbox")&&n.cellNode(t,n.columnIdxById("selectionCheckbox")).find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked no-animate").attr("aria-checked","false").removeAttr("aria-label"),s.treeGrid)for(var a=0;a<s.treeDepth.length;a++)n.isRowSelected(s.treeDepth[a].node)&&(void 0!==e?e===s.treeDepth[a].idx-1&&i(s.treeDepth[a].node):i(s.treeDepth[a].node));else{var l,c=t.length?n.dataRowIndex(t):e;void 0!==c&&c>-1&&(l=s.dataset[c]),s.groupable&&(l=n.originalDataset[c]),void 0!==l&&(s.paging&&s.source?i(l,c):i(l))}};if(s.treeGrid){var c=parseInt(a.attr("aria-level"),10);if(a.is(".datagrid-tree-parent")&&"multiple"===s.selectable)a.add(a.nextUntil('[aria-level="'.concat(c,'"]'))).each((function(t){var e=$(this),i=e.attr("aria-rowindex")-1,a=n.actualPagingRowIndex(i);(s.selectChildren||!s.selectChildren&&0===t)&&l(e,a)}));else if("siblings"===s.selectable)a.parent().find(".is-selected").each((function(t){var e=$(this),i=e.attr("aria-rowindex")-1,a=n.actualPagingRowIndex(i);(s.selectChildren||!s.selectChildren&&0===t)&&l(e,a)}));else{var d=n.actualPagingRowIndex(t);l(a,d)}n.setNodeStatus(a)}else l(a,t);e||n.syncSelectedUI(),i||n.element.triggerHandler("selected",[n._selectedRows,"deselect"])}},setNodeStatus:function(t){var e,i=this,n="multiple"===i.settings.selectable,s=i.settings,a=i.cellNode(t,i.columnIdxById("selectionCheckbox"));if(!n)return a.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),void(t.is(".is-selected")&&a.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true"));var r=function(t,e){t.each((function(){var t=$(this),n=i.cellNode(t,i.columnIdxById("selectionCheckbox")),s=i.getSelectedStatus(t,e);n.find(".datagrid-cell-wrapper .datagrid-checkbox").removeClass("is-checked is-partial").attr("aria-checked","false"),"mixed"===s?n.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked is-partial").attr("aria-checked","mixed"):s&&n.find(".datagrid-cell-wrapper .datagrid-checkbox").addClass("is-checked").attr("aria-checked","true")}))};e=t.add(t.nextUntil('[aria-level="1"]')).filter(".datagrid-tree-parent"),s.selectChildren&&r(e),e=t,+t.attr("aria-level")>1&&(e=e.add(t.prevUntil('[aria-level="1"]')).add(t.prevAll('[aria-level="1"]:first'))),e=e.filter(".datagrid-tree-parent"),s.selectChildren&&r(e)},getSelectedStatus:function(t){var e=this.settings,i=0,n=0,s=0,a=t.add(t.nextUntil('[aria-level="1"]'));if(e.treeGrid&&"multiple"===e.selectable){var r=t.attr("aria-level");a=t.add(t.nextUntil('[aria-level="'.concat(r,'"]')))}return a.each((function(){i++,$(this).is(".is-selected")?n++:s++})),i===n||i!==s&&"mixed"},selectedRows:function(){return this._selectedRows},selectRows:function(t,e,i){var n=-1,s=this.settings,a="siblings"===s.selectable,r=this.getActiveDataset();if("number"==typeof t&&(t=[t]),!t||0===t.length)return this._selectedRows;if("single"===s.selectable&&(this._selectedRows.length&&this.unselectRow(this._selectedRows[0].idx,!0,!0),n="[object Array]"===Object.prototype.toString.call(t)?t[0]:t.index(),this.selectRow(n,!0,!0)),"multiple"===s.selectable||"mixed"===s.selectable||a)if("[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<t.length;o++)this.selectRow(t[o],!0,!0);if(0===t.length)for(var l=0,c=r.length;l<c;l++)this.unselectRow(l,!0,!0)}else this.selectRow(t.index(),!0,!0);return this.displayCounts(),e||this.syncSelectedUI(),i||this.element.triggerHandler("selected",[this._selectedRows,"select"]),this._selectedRows},findRowsByValue:function(t,e){for(var i=this.settings,n=this.getActiveDataset(),s=-1,a=[],r=0;r<n.length;r++)if(i.groupable)for(var o=0;o<n[r].values.length;o++)s++,n[r].values[o][t]===e&&a.push(s);else(i.treeGrid?n[r].node:n[r])[t]===e&&a.push(r);return a},rowStatus:function(t,e,i){var n=this.getActiveDataset();if(!e)return delete n[t].rowStatus,void this.updateRow(t);if(!/dirty/.test(e)&&n[t]){n[t].rowStatus={};var s=n[t].rowStatus;s.icon=e,e=(e=e.charAt(0).toUpperCase()+e.slice(1)).replace("-progress","Progress"),s.text=B.translate(e),i=i?i.charAt(0).toUpperCase()+i.slice(1):s.text,s.tooltip=i,this.updateRow(t),this.setupTooltips(!0)}},columnById:function(t){return $.grep(this.settings.columns,(function(e){return e.id===t}))},columnIdxById:function(t){for(var e=this.settings.columns,i=-1,n=0;n<e.length;n++)if(e[n].id===t){i=n;break}return i},handleKeys:function(){var t=this,e=this,i=$("th .datagrid-checkbox",e.headerRow);e.element.on("keydown.datagrid","th",(function(t){var n,s,a=t.which||t.keyCode||t.charCode||0,r=$(this),o=e.columnIdxById(r.attr("data-column-id")),l=e.visibleColumns().length-1;if(!($(t.target).closest(".popupmenu").length>0)){if(13===a||32===a){(n="multiple"===e.settings.selectable&&0===o?$(".datagrid-checkbox",r):r).trigger("click.datagrid").focus();var c="selectionCheckbox"===n[0].dataset.columnId||"selectionCheckbox"===n.prevObject[0].dataset.columnId;if(("multiple"===e.settings.selectable||"mixed"===this.settings.selectable)&&c){if(i.addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),e.recordCount===e._selectedRows.length)return void(e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows());e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows()}32===a&&t.preventDefault()}-1!==[35,36,37,39].indexOf(a)&&(s=o,s=/35|36/i.test(a)||(t.ctrlKey||t.metaKey)&&/37|39/i.test(a)?B.isRTL()?36===a||(t.ctrlKey||t.metaKey)&&37===a?l:0:35===a||(t.ctrlKey||t.metaKey)&&39===a?l:0:B.isRTL()?39===a?o>0?o-1:o:o<l?o+1:l:37===a?o>0?o-1:o:o<l?o+1:l,e.activeCell.cell=s,r.removeAttr("tabindex").removeClass("is-active"),t.preventDefault()),40===a&&(r.removeAttr("tabindex"),e.activeCell.node=e.cellNode(0,e.settings.groupable?0:e.activeCell.cell).attr("tabindex","0").focus(),t.preventDefault())}})),e.element.on("keydown.datagrid","td, input",(function(i){var n=!1;if(113!==(i.which||i.keyCode||i.charCode||0)||t.inlineMode||(e.settings.actionableMode=!e.settings.actionableMode,n=!0),n)return i.preventDefault(),i.stopPropagation(),n})),e.element.on("keydown.datagrid","td",(function(t){var n=t.which||t.keyCode||t.charCode||0,s=!1,a=$(t.target),r=B.isRTL(),o=e.activeCell.node,l=$(this).parent(),c=l.prevAll(":not(.is-hidden, .datagrid-expandable-row)").first(),d=l.nextAll(":not(.is-hidden, .datagrid-expandable-row)").first(),h=e.activeCell.row,u=e.activeCell.cell,p=e.columnSettings(u),g=l.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"),f=e.settings.dataset[e.dataRowIndex(l)],m=e.tableBody.find("tr:visible"),v=function(t){var i=m.filter('[aria-rowindex="'.concat(t+1,'"]'));return i.is(".datagrid-rowgroup-header")?i.index():e.dataRowIndex(i)};o.length||(e.activeCell.node=e.cellNode(h,u),o=e.activeCell.node);var b=function(t,i,n){if(g)return function(t,i,n){var s=e.activeCell.groupNode||o,a=t+(n?-1:1);return a=a>i?n?s.prevAll(":visible").last():s.nextAll(":visible").last():n?s.prevAll(":visible").first():s.nextAll(":visible").first()}(t,i,n);var s=t+(n?-1:1);if(s>i)return i;for(;e.settings.columns[s]&&e.settings.columns[s].hidden;)s=n?s-1:s+1;return s},y=!!$(".datagrid-selection-checkbox",o).length,w=m.last(),x=e.settings.columns.length-1;if(e.settings.onKeyDown){var C=function(e){e||(t.stopPropagation(),t.preventDefault())},k={activeCell:e.activeCell,row:h,cell:u};if(!1===e.settings.onKeyDown(t,k,C)||!C)return t.stopPropagation(),void t.preventDefault()}if(-1!==[9,37,38,39,40].indexOf(n)){if(a.closest(".code-block").length&&(9!==n||!t.shiftKey||0!==e.getFocusables(o).index))return;if(9!==n){if(a.is(".code-block-actions"))return;if(a.closest(".popupmenu.is-open").closest(".popupmenu-wrapper").prev().is(".code-block-actions"))return}}if(-1!==[9,37,39].indexOf(n)){if(9===n&&!e.settings.actionableMode)return;if(9!==n&&t.altKey)u=37===n&&!r||39===n&&r?0:x,e.setActiveCell(h,u);else if(!e.quickEditMode||9===n){if(9===n&&t.shiftKey&&a.is(".code-block-actions")?e.focusNextPrev("prev",o):u=!r&&(37===n||9===n&&t.shiftKey)||r&&(39===n||9===n)?b(u,x,!0):b(u,x),-1===u&&!e.settings.actionableMode)return;if(-1===u&&e.settings.actionableMode&&(u=x,-1===--h))return;if(u===x&&x===e.activeCell.cell&&e.settings.actionableMode&&(u=0,++h===e.visibleRowCount))return;u instanceof jQuery?e.setActiveCell(u):e.setActiveCell(h,u),e.settings.actionableMode&&(e.makeCellEditable(e.activeCell.rowIndex,u,t),e.containsTextField(o)&&e.containsTriggerField(o)&&(e.quickEditMode=!0)),e.quickEditMode=!1,s=!0}}if(38===n&&!e.quickEditMode)if(t.altKey||t.metaKey){var T=v(0);e.setActiveCell(T,u),s=!0}else{if(0===h&&!c.is(".datagrid-rowgroup-header"))return o.removeAttr("tabindex"),void e.element.find("th").eq(u).attr("tabindex","0").focus();e.setActiveCell(c,u),s=!0}if(40!==n||e.quickEditMode||(t.altKey||t.metaKey?(e.setActiveCell(w,u),s=!0):(e.setActiveCell(d,u),s=!0)),32===n&&t.ctrlKey&&o){var S="";(h=o.closest("tr")).children().each((function(){var t=$(this);S+="".concat(t.text()," ")})),$("body").toast({title:"",audibleOnly:!0,message:S}),s=!0}if(36===n&&(e.setActiveCell(h,0),s=!0),35===n&&(e.setActiveCell(h,x),s=!0),34===n&&(e.setActiveCell(w,u),s=!0),33===n&&(e.setActiveCell(v(0),u),s=!0),32===n&&(!e.settings.editable||y)){if(h=o.closest("tr"),1===a.closest(".datagrid-row-detail").length)return;t.preventDefault();var A=a.find(".datagrid-expand-btn, .datagrid-drilldown");if(A&&A.length)return A.trigger("click.datagrid"),void t.preventDefault();"multiple"===e.settings.selectable&&t.shiftKey?e.selectRowsBetweenIndexes([e.lastSelectedRow,h.attr("aria-rowindex")-1]):e.toggleRowSelection(h)}if(e.settings.editable&&32===n&&(e.editor||e.makeCellEditable(e.activeCell.rowIndex,u,t)),13===n&&o.is(".has-btn-actions")){var E=o.find(".btn-actions");E.length&&E.trigger("click")}if(13===n&&p.click&&"function"==typeof p.click&&(o.hasClass("is-cell-readonly")||p.click(t,[{row:h,cell:u,item:f,originalEvent:t}])),e.settings.editable&&13===n){if(a.is("textarea")&&t.shiftKey)return;if(a.is(".btn-menu")||a.closest(".popupmenu.is-open").length)return;e.editor?(e.quickEditMode=!1,e.commitCellEdit(),e.setNextActiveCell(t)):(e.makeCellEditable(e.activeCell.rowIndex,u,t),e.containsTextField(o)&&e.containsTriggerField(o)&&(e.quickEditMode=!0)),s=!0}if(-1!==[9,13,32,35,36,37,38,39,40,113].indexOf(n)||t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||!e.settings.editable||e.editor||e.makeCellEditable(e.activeCell.rowIndex,u,t),("multiple"===e.settings.selectable||"mixed"===e.settings.selectable)&&!e.editor&&(t.ctrlKey||t.metaKey)&&65===n){if(i.addClass("is-checked").removeClass("is-partial").attr("aria-checked","true"),e.recordCount===e._selectedRows.length)return void(e.settings.selectAllCurrentPage?e.unSelectAllRowsCurrentPage():e.unSelectAllRows());e.settings.selectAllCurrentPage?e.selectAllRowsCurrentPage():e.selectAllRows(),s=!0}if(s)return t.preventDefault(),t.stopPropagation(),!1}))},getFocusables:function(t){var e=$(":focusable",t);return{elements:e,index:e.index($(":focus"))}},focusNextPrev:function(t,e){if(e&&"string"==typeof t){t=t.toLowerCase();var i=this.getFocusables(e),n=i.elements,s=n.length,a=i.index;/\b(next|prev)\b/g.test(t)&&(a="next"===t?a+1>=s?0:a+1:a-1<0?s:a-1,n.eq(a).focus())}},containsTextField:function(t){var e,i=["image","button","submit","reset","checkbox","radio"],n="textarea, input",s=i.length;for(n+=s?":not(":"",e=0;e<s;e++)n+="[type=".concat(i[e],"],");return n=s?"".concat(n.slice(0,-1),")"):"",!!$(n,t).length},containsTriggerField:function(t){return!$(".dropdown, .datepicker, .lookup",t).length},isRowDisabled:function(t){if(this.settings.isRowDisabled&&"function"==typeof this.settings.isRowDisabled&&"true"===this.rowNodes(t).attr("aria-disabled"))return!0;return!1},isCellEditable:function(t,e){if(!this.settings.editable)return!1;var i=this.columnSettings(e);if(i.readonly)return!1;if(this.isRowDisabled(t)||!this.activeCell.node)return!1;var n=this.activeCell.node.find(".datagrid-cell-wrapper"),s=n.text()?n.text():this.fieldValue(this.settings.dataset[t],i.field);if(i.isEditable){var a=this.settings.dataset[t];if(this.settings.treeDepth&&this.settings.treeDepth[t]&&(a=this.settings.treeDepth[t].node),!i.isEditable(t,e,s,i,a,this,"is-editable"))return!1}return!!i.editor},makeCellEditable:function(t,e,i){var n;if(!this.activeCell.node.closest("tr").hasClass("datagrid-summary-row")){var s=this.activeCell.node.find(".datagrid-cell-wrapper"),a=s.parent("td"),r=$(".datagrid-tree-node",s).length>0,o=$(".datagrid-expand-btn",s).length>0;if(a.hasClass("is-editing")||a.hasClass("is-editing-inline"))return!1;this.editor&&this.editor.input&&this.commitCellEdit();var l=this.columnSettings(e);if(!l.editor)return 32!==i.keyCode||$(i.currentTarget).find(".datagrid-selection-checkbox").length||this.toggleRowSelection(this.activeCell.node.closest("tr")),!1;var c=this.actualRowNode(t),d=this.settings.treeGrid?this.actualPagingRowIndex(this.actualRowIndex(c)):this.dataRowIndex(c),u=this.rowData(d),p=$(".is-editor",a).length>0,g=$(".is-placeholder",s).length>0,f=s.text()?s.text():this.fieldValue(u,l.field);if((p||g)&&(f=this.fieldValue(u,l.field)),!this.isCellEditable(d,e))return!1;if((o||r)&&(o&&(f=$("> span",s).text()),"string"==typeof f&&(f=f.replace(/^\s/,""))),l.inlineEditor?a.addClass("is-editing-inline"):(p&&s.css({position:"static",height:s.outerHeight()}),a.addClass("is-editing"),s.empty()),f=h.sanitizeConsoleMethods(f),this.element.triggerHandler("beforeentereditmode",[{row:d,cell:e,item:u,target:s,value:f,column:l,editor:this.editor}]),1===this.visibleColumns().length&&a.addClass("has-singlecolumn"),this.editor=new l.editor(d,e,f,s,l,i,this,u),this.editor.row=d,this.editor.cell=e,this.settings.onEditCell&&this.settings.onEditCell(this.editor),this.editor.useValue&&(f=this.fieldValue(u,l.field)),this.editor.val(f),this.settings.showDirty){var m=f;""===m&&/checkbox|favorite/i.test(this.getEditorName(this.editor))&&(m=!1);var v={originalVal:m,isDirty:!1};this.addToDirtyArray(d,e,v)}if(this.editor.focus(),null!==(n=this.editor)&&void 0!==n&&(null==n?void 0:n.input.is(".dropdown"))&&i.keyCode&&![9,13,32,37,38,39,40].includes(i.keyCode))this.editor.input.data("dropdown").handleAutoComplete(i);return this.element.triggerHandler("entereditmode",[{row:d,cell:e,item:u,target:s,value:f,column:l,editor:this.editor}]),!0}},rowData:function(t){return this.settings.groupable?this.originalDataset[t]:this.settings.treeGrid?this.settings.treeDepth[t].node:this.settings.dataset[t]},commitCellEdit:function(t){if(this.editor){var e,i,n,s,a=this.editor.input,r=this.getEditorName(this.editor),o="editor"===r,l="fileupload"===r,c=!a.is(".timepicker, .datepicker, .lookup, .spinbox, .colorpicker");"function"==typeof this.editor.val&&(e=this.editor.val()),o?i=this.editor.td:l?("clear"===this.editor.status?e="":"init"!==this.editor.status&&"cancel"!==this.editor.status||(e=this.editor.originalValue),i=this.tableBody.find("#".concat(a.attr("id"))).closest("td"),e=h.escapeHTML(e)):(i=a.closest("td"),e=h.escapeHTML(e)),null!==this.settings.source&&c?(n=this.activeCell.rowIndex,s=this.activeCell.dataRow):(n=this.actualRowIndex(i.parent()),s=this.dataRowIndex(i.parent()));var d=i.attr("aria-colindex")-1,u=this.columnSettings(d),p=this.settings.treeGrid?this.settings.treeDepth[s].node:this.getActiveDataset()[s],g=this.fieldValue(p,u.field);if(u.beforeCommitCellEdit&&!t)if(!1===u.beforeCommitCellEdit({cell:d,row:s,item:p,editor:this.editor,api:this}))return;if(this.editor){g=h.sanitizeConsoleMethods(g),e=h.sanitizeConsoleMethods(e);var f=i.hasClass("is-editing-inline");i.removeClass("is-editing is-editing-inline has-singlecolumn"),this.editor.destroy(),this.editor=null,this.updateCellNode(this.settings.groupable?s:n,d,e,!1,f);var m=this.fieldValue(p,u.field);this.element.triggerHandler("exiteditmode",[{row:n,cell:d,item:p,target:i,value:m,oldValue:g,column:u,editor:this.editor}])}}},validateCell:function(t,e){var i,n,s=this,a=this,r=this.columnSettings(e);if(r.validate){var o,l,c=[],d=r.validate.split(" "),h=$.fn.validation,u=this.fieldValue(this.settings.dataset[t],r.field),p=[],g="";for(l=0;l<d.length;l++){var f=h.rules[d[l]],m={row:t,cell:e,item:this.settings.dataset[t],column:r,grid:a};o=$.Deferred(),f.async?f.check(u,$("<input>").val(u),m,v,o):v(f.check(u,$("<input>").val(u),m),!0,d[l],o),c.push(o)}(i=$).when.apply(i,c).then((function(){var i=$.fn.validation.ValidationTypes;for(var o in i)if(g="",n=i[o],p[n.type]&&(g=p[n.type]),""!==g){a.showCellError(t,e,g,n.type);var l=s.dataRowNode(t);a.element.trigger("cell".concat(n.type),{row:t,cell:e,message:g,target:s.cellNode(l,e),value:u,column:r})}else a.clearCellError(t,e,n.type)}))}function v(t,e,i,s){var a=h.rules[i];n=$.fn.validation.ValidationTypes[a.type]||$.fn.validation.ValidationTypes.error,g="",p[n.type]&&(g=p[n.type]),!t&&e&&(g?(g=(/^\u2022/.test(g)?"":" ")+g,g+="<br/>".concat(" ",a.message)):g=a.message,p[n.type]=g),s.resolve()}},showCellError:function(t,e,i,n){var s=this.dataRowNode(t),a=this.cellNode(s,e);if(this.clearNonVisibleCellErrors(t,e,n),!a.length)return this.nonVisibleCellErrors.push({row:t,cell:e,message:i,type:n}),void this.showNonVisibleCellErrors();a.addClass(n).attr("data-".concat(n,"message"),i);var r=a.find(".icon-".concat(n));if(!r.length){a.find(".datagrid-cell-wrapper").append($($.createIcon({classes:["icon-".concat(n)],icon:n})));var o={forced:!0,placement:"bottom",content:i,isError:"error"===n||"dirtyerror"===n,wrapper:r=a.find(".icon-".concat(n))};this.cacheTooltip(r,o),this.setupTooltips(!1,!0)}},showNonVisibleCellErrors:function(){var t=this;if(this.toolbar||(this.settings.toolbar={title:" "},this.appendToolbar()),0===this.nonVisibleCellErrors.length)this.toolbar&&1===this.toolbar.parent().find(".table-errors").length&&this.toolbar.parent().find(".table-errors").remove();else{var e=function(e){var i=$.fn.validation.ValidationTypes[e].type,n=$.grep(t.nonVisibleCellErrors,(function(t){return t.type===i}));t.showNonVisibleCellErrorType(n,i)};for(var i in $.fn.validation.ValidationTypes)e(i)}},showNonVisibleCellErrorType:function(t,e){var i,n,s,a,r=[],o=$.fn.validation.ValidationTypes[e]||$.fn.validation.ValidationTypes.error;if(1===this.toolbar.parent().find(".table-errors").length&&(n=this.toolbar.parent().find(".table-errors")),0!==t.length){for(a=0;a<t.length;a++){var l=Math.floor((t[a].row+this.settings.pagesize)/this.settings.pagesize);-1===$.inArray(l,r)&&r.push(l)}for(a=0;a<r.length;a++)i="".concat((i?"".concat(i,"<br>"):"")+B.translate(o.pagingMessageID)," ").concat(r[a]);0===this.toolbar.parent().find(".table-errors").length&&(n=$('<div class="table-errors"></div>')),(s=n.find(".icon-".concat(e))).length||(n.append($($.createIcon({classes:["icon-".concat(e)],icon:e}))),s=n.find(".icon-".concat(e))),this.element.hasClass("has-toolbar")&&this.toolbar.children(".title").append(n),this.cacheTooltip(s,{forced:!0,placement:"bottom",content:i,isError:"error"===e||"dirtyerror"===e,wrapper:s}),this.setupTooltips(!1,!0)}else n&&n.length&&(s=n.find(".icon-".concat(o.type)),this.hideTooltip(),n.find(".icon-".concat(o.type)).remove())},clearAllCellError:function(t,e){var i=$.fn.validation.ValidationTypes;for(var n in i){var s=i[n];this.clearCellError(t,e,s.type)}},clearCellError:function(t,e,i){this.clearNonVisibleCellErrors(t,e,i);var n=this.dataRowNode(t),s=this.cellNode(n,e);s.length&&this.clearNodeErrors(s,i)},clearNonVisibleCellErrors:function(t,e,i){if(this.nonVisibleCellErrors.length){if(this.toolbar&&this.toolbar.parent()&&this.toolbar.parent().find(".table-errors").length>0){var n=this.toolbar.parent().find(".table-errors").find(".icon-".concat(i));if(n.length)$.grep(this.nonVisibleCellErrors,(function(t){return t.type===i?t:""})).length||n.remove()}this.nonVisibleCellErrors=$.grep(this.nonVisibleCellErrors,(function(n){return n.row!==t||n.cell!==e||n.type!==i?n:""})),this.nonVisibleCellErrors.length||this.showNonVisibleCellErrors()}},clearRowError:function(t){this.dataRowNode(t).removeClass("error alert rowstatus-row-error rowstatus-row-alert rowstatus-row-info rowstatus-row-in-progress rowstatus-row-success"),this.rowStatus(t,"","");for(var e=0;e<this.settings.columns.length;e++)this.clearAllCellError(t,e)},clearAllErrors:function(){for(var t=0,e=0;e<this.settings.dataset.length;e++){this.settings.dataset[e].rowStatus&&(delete this.settings.dataset[e].rowStatus,t++);for(var i=0;i<this.settings.columns.length;i++)this.clearAllCellError(e,i)}t>0&&this.render()},clearNodeErrors:function(t,e){(t=t instanceof jQuery?t[0]:t).classList.remove(e),t.removeAttribute("data-".concat(e,"message"));var i=t.querySelector(".icon-".concat(e));i&&(i.parentNode.removeChild(i),this.hideTooltip())},resetRowStatus:function(){for(var t=this.settings.dataset.filter((function(t){return t.rowStatus})),e=0;e<t.length;e++)delete t[e].rowStatus;t.length>0&&this.render(),this.clearDirty()},clearDirtyClass:function(t){(t=t instanceof jQuery?t[0]:t)&&[].slice.call(t.querySelectorAll(".is-dirty-cell")).forEach((function(t){t.classList.remove("is-dirty-cell")}))},clearDirty:function(){this.settings.showDirty&&(this.clearDirtyClass(this.element),this.dirtyArray=void 0)},clearDirtyRow:function(t){if(this.settings.showDirty&&"number"==typeof t){var e=this.rowNodes(t);this.clearDirtyClass(e),this.dirtyArray&&(this.dirtyArray[t]=void 0)}},clearDirtyCell:function(t,e){this.settings.showDirty&&this.dirtyArray&&"number"==typeof t&&"number"==typeof e&&(void 0!==this.dirtyArray[t]&&(this.cellNode(t,e).removeClass("is-dirty-cell"),this.dirtyArray[t][e]=void 0))},dirtyCells:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,i=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,s=e.length;n<s;n++){var a=this.dirtyArray[n];if(void 0!==a)for(var r=0,o=a.length;r<o;r++){var l=a[r];void 0!==l&&l.isDirty&&i.push(t.treeGrid?e[n].node:e[n])}}return i},dirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset,i=[];if(t.showDirty&&this.dirtyArray&&this.dirtyArray.length)for(var n=0,s=e.length;n<s;n++){var a=this.dirtyArray[n];if(void 0!==a)for(var r=0,o=a.length;r<o;r++){var l=a[r];if(void 0!==l&&l.isDirty){i.push(t.treeGrid?e[n].node:e[n]);break}}}return i},getModifiedRows:function(t){for(var e=this.settings,i=e.treeGrid?e.treeDepth:e.dataset,n=[],s=0;s<i.length;s++){var a=e.treeGrid?i[s].node:i[s],r={row:s,data:a,cells:[]};if(this.isRowDirty(s)){r.type="dirty";for(var o=0;!t&&o<this.dirtyArray[s].length;o++){var l=this.dirtyArray[s][o];void 0!==l&&l.isDirty&&r.cells.push({row:s,col:o,cellData:l})}}void 0===a.rowStatus||"error"!==a.rowStatus.icon&&"in-progress"!==a.rowStatus.icon||(r.type="dirty"===r.type?["dirty",a.rowStatus.icon]:a.rowStatus.icon),void 0!==r.type&&n.push(t?a:r)}return n},showRowError:function(t,e,i){var n=i||"error";this.dataRowNode(t).addClass(i),this.rowStatus(t,n,e)},validateRow:function(t){if(void 0!==t)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},validateAll:function(){for(var t=0;t<this.settings.dataset.length;t++)for(var e=0;e<this.settings.columns.length;e++)this.validateCell(t,e)},columnSettings:function(t){return this.settings.columns[t]||{}},coerceValue:function(t,e,i,n,s){var a;if(i.serialize){var r=this.settings,o=r.treeGrid?r.treeDepth:r.dataset;this.settings.groupable&&(o=this.originalDataset||o);var l=r.treeGrid?o[n].node:o[n];return a=i.serialize(t,e,i,n,s,l)}return i.sourceFormat?a=t instanceof Date?B.parseDate(t,i.sourceFormat):B.formatDate(t,{pattern:i.sourceFormat}):"number"==typeof e&&t&&(a=B.parseNumber(t)),a},updateCell:function(t,e,i){var n=this.columnSettings(e);void 0===i&&(i=this.fieldValue(this.settings.dataset[t],n.field)),this.updateCellNode(t,e,i,!0)},updateCellNode:function(t,e,i,n,s){var a,r=this.settings.groupable?this.rowNodesByDataIndex(t):this.rowNodes(t),o=r.find("td").eq(e),l=this.settings.columns[e]||{},c="",d=l.formatter?l.formatter:this.defaultFormatter,u=$(".editor",o).length>0,p=this.settings.treeGrid,g=p?this.actualPagingRowIndex(this.actualRowIndex(r)):this.dataRowIndex(r);(null==g||isNaN(g))&&(g=t);var f=this.rowData(g);0===r.length&&this.settings.paging&&(o=(r=this.visualRowNode(t)).find("td").eq(e));var m=this.fieldValue(f,l.field);if((n||void 0===(a=this.coerceValue(i,m,l,t,e)))&&(a=i),r.length&&f&&!f.rowStatus){var v=r.find("svg.icon-rowstatus");v.length&&v.remove()}if(this.removeTooltipData(o),0===e&&f&&f.rowStatus){var b=o.find("svg.icon-rowstatus");if(r&&o[0]){for(var y=0;y<r.length;y++)r[y].classList.add("rowstatus-row-".concat(f.rowStatus.icon));if(o[0].classList.add("rowstatus-cell"),!b.length){var w="success"===f.rowStatus.icon?"#icon-check":"#icon-exclamation";o.prepend('<svg class="icon icon-rowstatus" focusable="false" aria-hidden="true" role="presentation"><use href="'.concat(w,'"></use></svg>'))}}if(f.rowStatus.tooltip){b=o.find("svg.icon-rowstatus");var x=f.rowStatus.icon;this.cacheTooltip(b,{forced:!0,placement:"right",content:f.rowStatus.tooltip,isError:"error"===x||"dirtyerror"===x,wrapper:o})}}if(a=h.unescapeHTML(a),l.field&&a!==m)if(l.field.indexOf(".")>-1){var C=f,k=l.field.split(".").length;l.field.split(".").forEach((function(t,e){e===k-1?C[t]=a:C=C[t]}))}else f[l.field]=a;var T,S=function(t,e){return(("string"==typeof t?t.match(e):[""])||[""])[0].replace(/\s/g,"&nbsp;")},A=h.escapeHTML(a),E=u?a:A;("string"==typeof E&&(E="".concat(S(E,/^\s*/)).concat(E.trim()).concat(S(E,/\s*$/))),c=this.formatValue(d,t,e,E,l,f),l.contentVisible)&&(l.contentVisible(t,e,A,l,f)||(c=""));if(s||o.find(".datagrid-cell-wrapper").html(c),n||(this.validateCell(g,e),this.isDirtyCellUndefined(t,e)||(this.dirtyArray[t][e].value=i,this.dirtyArray[t][e].coercedVal=a,this.dirtyArray[t][e].escapedCoercedVal=h.escapeHTML(a),this.dirtyArray[t][e].cellNodeText=o.text(),this.dirtyArray[t][e].cell=e,this.dirtyArray[t][e].column=this.settings.columns[e],this.setDirtyCell(t,e))),this.settings.stretchColumnOnChange&&l){var D=this.calculateTextWidth(l);l.minWidth&&D<l.minWidth&&(D=l.minWidth),l.minWidth&&D>l.maxWidth&&(D=l.maxWidth),D>0&&D-this.stretchColumnWidth>this.stretchColumnDiff&&(this.stretchColumnWidth=D,this.stretchColumnDiff=0,this.setColumnWidth(l.id,D,!0))}if(m=h.sanitizeConsoleMethods(m),a=h.sanitizeConsoleMethods(a),"string"==typeof m&&"string"==typeof a){var I={oldVal:"".concat(S(m,/^\s*/)).concat(m.trim()).concat(S(m,/\s*$/)),coercedVal:"".concat(S(a,/^\s*/)).concat(a.trim()).concat(S(a,/\s*$/))};T=I.coercedVal!==I.oldVal&&!n}else T=a!==m&&!n;if(T){var L={row:null!==this.settings.source?g:t,relativeRow:t,cell:e,target:o,value:a,oldValue:m,column:l,api:this};L.rowData=p&&this.settings.treeDepth[t]?this.settings.treeDepth[t].node:f,this.element.trigger("cellchange",L),this.wasJustUpdated=!0}},isRowDirty:function(t){var e=!1;if("number"==typeof t&&this.dirtyArray&&this.dirtyArray.length){var i=this.dirtyArray[t];if(void 0!==i)for(var n=0,s=i.length;n<s;n++){var a=i[n];if(void 0!==a&&a.isDirty){e=!0;break}}}return e},isCellDirty:function(t,e){return!this.isDirtyCellUndefined(t,e)&&this.dirtyArray[t][e].isDirty},addToDirtyArray:function(t,e,i){void 0===this.dirtyArray&&(this.dirtyArray=[]),void 0===this.dirtyArray[t]?(this.dirtyArray[t]=[],this.dirtyArray[t][e]=i):void 0===this.dirtyArray[t][e]&&(this.dirtyArray[t][e]=i)},setDirtyCell:function(t,e,i){var n=this.cellNode(t,e);i&&this.addToDirtyArray(t,e,i);var s=this.dirtyArray[t][e];s.originalVal===s.value||s.originalVal===s.coercedVal||s.originalVal===s.escapedCoercedVal||s.originalVal===s.cellNodeText?(this.dirtyArray[t][e].isDirty=!1,this.setDirtyIndicator(t,e,!1)):(this.dirtyArray[t][e].isDirty=!0,n[0].classList.add("is-dirty-cell"),this.setDirtyIndicator(t,e,!0))},setDirtyIndicator:function(t,e,i,n){var s=this.cellNode(t,e);n&&this.addToDirtyArray(t,e,n),t<0||e<0||!s.length||(i?s[0].classList.add("is-dirty-cell"):s[0].classList.remove("is-dirty-cell"))},isDirtyCellUndefined:function(t,e){return!(this.settings.showDirty&&"number"==typeof t&&"number"==typeof e&&t>-1&&e>-1&&void 0!==this.dirtyArray&&void 0!==this.dirtyArray[t]&&void 0!==this.dirtyArray[t][e])},visualRowIndex:function(t){var e="tr:visible:not(.is-hidden, .datagrid-expandable-row)",i=this.tableBody.find(e).index(t);return-1===i&&this.tableBodyLeft&&(i=this.tableBodyLeft.find(e).index(t)),-1===i&&this.tableBodyRight&&(i=this.tableBodyRight.find(e).index(t)),i},visualRowNode:function(t){var e=t;return this.settings.paging&&this.settings.source&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),this.isRowVisible(t)?this.tableBody.find('tr[aria-rowindex="'.concat(e+1,'"]')):$([])},actualRowNode:function(t){return this.tableBody.find('tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodes:function(t){var e=this.element;return t instanceof jQuery&&(e=t.closest(".datagrid-container"),t=t.attr("aria-rowindex")-1),e.find('> .datagrid-wrapper > table > tbody > tr[aria-rowindex="'.concat(t+1,'"]'))},rowNodesByDataIndex:function(t){t instanceof jQuery&&(t=t.attr("data-index"));var e=this.tableBodyLeft?this.tableBodyLeft.find('tr[data-index="'.concat(t,'"]')):$(),i=this.tableBody.find('tr[data-index="'.concat(t,'"]')),n=this.tableBodyRight?this.tableBodyRight.find('tr[data-index="'.concat(t,'"]')):$();return $(i).add(e).add(n)},cellNode:function(t,e){var i=this.settings.groupable?this.rowNodesByDataIndex(t).find("td"):this.rowNodes(t).find("td");return i.eq(e>=i.length?i.length-1:e)},actualRowIndex:function(t){return(t=t instanceof jQuery?t:$(t)).attr("aria-rowindex")-1},pagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e+=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},actualPagingRowIndex:function(t){var e=t;return this.settings.paging&&this.settings.source&&!this.settings.indeterminate&&(e-=(this.pagerAPI.activePage-1)*this.settings.pagesize),e},dataRowNode:function(t){return this.tableBody.find('tr[data-index="'.concat(t,'"]'))},dataRowIndex:function(t){return t=t instanceof jQuery?t:$(t),parseInt(t.attr("data-index"),10)},setActiveCell:function(t,e){var i,n,s,a=this.activeCell,r=t,o=t instanceof jQuery&&t.is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer");if(!(t instanceof jQuery&&0===t.length||("number"==typeof t&&(i=t,r=this.tableBody.find("tr:visible").eq(t),n=this.actualRowIndex(r),s=this.dataRowIndex(r)),t instanceof jQuery&&t.is("td")&&((o=t.parent().is(".datagrid-rowgroup-header, .datagrid-rowgroup-footer"))&&(r=t.parent()),e=t.attr("aria-colindex")-1,i=this.visualRowIndex(t.parent()),n=this.actualRowIndex(t.parent()),s=this.dataRowIndex(t.parent()),r=t.parent()),t instanceof jQuery&&t.is("tr")&&(i=this.visualRowIndex(t),n=this.actualRowIndex(t),s=this.dataRowIndex(t),r=t),i<0||e<0))){a.node&&1===a.node.length&&this.activeCell.node.removeAttr("tabindex").removeClass("is-active"),a.cell===e&&a.row===t||this.hideTooltip(),this.activeCell.node=this.cellNode(o||r?r:n>-1?n:i,e).attr("tabindex","0"),this.activeCell.node&&1===a.node.length?(this.activeCell.row=i,this.activeCell.cell=e,n=this.actualRowIndex(this.activeCell.node.parent()),s=this.dataRowIndex(this.activeCell.node.parent())):this.activeCell=a,(!$("input, select, button:not(.btn-secondary, .row-btn, .datagrid-expand-btn, .datagrid-drilldown, .btn-icon)",this.activeCell.node).length||this.activeCell.node.is(".has-btn-actions")&&this.activeCell.node.find(".btn-actions").length)&&(this.activeCell.node.focus(),o&&(this.activeCell.groupNode=this.activeCell.node)),this.activeCell.node.is(".is-focusable")&&this.activeCell.node.find("button").focus(),void 0!==s&&(this.activeCell.dataRow=s),void 0!==n&&(this.activeCell.rowIndex=n);var l=+r.find("td[colspan]").attr("colspan");if(o&&this.activeCell.node&&a.node&&!(t instanceof jQuery&&t.is("td"))&&(e<l?(r.find("td[colspan]").attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td[colspan]")):e>=l?(r.find("td").eq(e-l+1).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e-l+1)):(r.find("td").eq(e).attr("tabindex","0").focus(),this.activeCell.groupNode=r.find("td").eq(e))),o&&t instanceof jQuery&&t.is("td")&&(this.activeCell.cell=l-1+e,t.is("[colspan]")&&(this.activeCell.cell=e)),this.settings.cellNavigation){var c=this.headerNodes(),d=0;this.hasColSpans&&(d=0,c.eq(e).prevAll("[colspan]").each((function(t,e){var i=$(e).attr("colspan")-1;d+=i})),e-=d),c.removeClass("is-active"),c.eq(e).addClass("is-active")}this.activeCell.isFocused=!0;var h=this.settings.columns[e];h&&h.expandOnActivate&&this.activeCell&&this.activeCell.node&&this.activeCell.node.addClass("is-active"),this.element.trigger("activecellchange",{node:this.activeCell.node,row:this.activeCell.row,cell:this.activeCell.cell,api:this})}},setNextActiveCell:function(t){var e=this;if("keydown"===t.type)if(this.settings.actionableMode){var i=13===t.keyCode?40:t.keyCode;if(32===i)return;setTimeout((function(){var t=$.Event("keydown.datagrid");t.keyCode=i,e.activeCell.node.trigger(t)}),0)}else this.setActiveCell(this.activeCell.row,this.activeCell.cell)},addChildren:function(t,e){if(!(!e||e&&!e.length||t<0)){var i=this.settings.treeDepth[t].node;i.children=i.children||[];for(var n=0,s=(e=JSON.parse(JSON.stringify(e))).length;n<s;n++)i.children.push(e[n]);this.updateDataset(this.settings.dataset)}},setExpandedInDataset:function(t,e){this.settings.treeDepth[t].node.expanded=e},toggleChildren:function(t,e){if(!this.settings.groupable){var i=this,n=this.settings,s=this.rowNodes(e),a=s.find(".datagrid-expand-btn"),r=parseInt(s.attr("aria-level"),10),o=a.hasClass("is-expanded"),l=[{grid:i,row:e,item:s}];if(i.settings.treeDepth&&i.settings.treeDepth[e]&&(l[0].rowData=i.settings.treeDepth[e].node),s.hasClass("datagrid-tree-parent")&&($(t.target).is(a)||!i.settings.editable&&!i.settings.selectable)){var c=function(){s=i.rowNodes(e),a=s.find(".datagrid-expand-btn");var t=s.nextUntil('[aria-level="'.concat(r,'"]')),n=i.settings.treeGrid&&i.settings.source&&i.settings.paging?i.dataRowIndex(s):e;o?(s.attr("aria-expanded",!1),a.removeClass("is-expanded").find(".plus-minus").removeClass("active")):(s.attr("aria-expanded",!0),a.addClass("is-expanded").find(".plus-minus").addClass("active")),i.setExpandedInDataset(n,!o);!function t(e,n,s){var a=e.nextUntil('[aria-level="'.concat(n,'"]'));s?a.each((function(){var t=$(this);parseInt(t.attr("aria-level"),10)>n&&t.addClass("is-hidden")})):a.each((function(){var e=$(this),s=parseInt(e.attr("aria-level"),10);if(s===n+1){if(!e.hasClass("is-filtered")&&(e.removeClass("is-hidden"),i.settings.frozenColumns)){var a=e.attr("aria-rowindex");i.tableBody.find('[aria-rowindex="'.concat(a,'"]')).removeClass("is-hidden")}if(e.is(".datagrid-tree-parent")){var r=e.find(".datagrid-expand-btn.is-expanded").length>0;r&&t(e,s,!r)}}}))}(s,r,o),i.setAlternateRowShading(),l.children=t},d=o?"collapserow":"expandrow";$.when(i.element.triggerHandler(d,l)).done((function(t){var e=function(t){return"string"==typeof t&&"false"===t.toLowerCase()||"boolean"==typeof t&&!1===t||"number"==typeof t&&0===t};e(t)||("function"!=typeof n.onExpandChildren||o?"function"==typeof n.onCollapseChildren&&o?$.when(n.onCollapseChildren(l[0])).done((function(t){e(t)||c()})):c():$.when(n.onExpandChildren(l[0])).done((function(t){e(t)||c()})))}))}}},toggleRowDetail:function(t){var e=this,i=e.rowNodes(t);!i.length&&e.settings.paging&&(e.settings.rowTemplate||e.settings.expandableRow)&&(t+=(e.pagerAPI.activePage-1)*e.settings.pagesize,i=e.dataRowNode(t));var n=i.next(),s=i.find(".datagrid-expand-btn"),a=n.find(".datagrid-row-detail"),r=e.settings.dataset[e.dataRowIndex(i)];if(!i.hasClass("datagrid-tree-parent")){if(e.settings.allowOneExpandedRow&&null===e.settings.groupable){var o=e.tableBody.add(e.tableBodyLeft).add(e.tableBodyRight).find("tr.is-expanded"),l=o.prev().find(".datagrid-expand-btn"),c=o.prev(),d=e.actualRowNode(c),h=e.dataRowIndex(c);if(o.length&&n.index()!==o.index()){var u=o.find(".datagrid-row-detail");o.add(l).removeClass("is-expanded"),c.removeClass("is-rowactivated"),c.find(".plus-minus").removeClass("active"),u.animateClosed().on("animateclosedcomplete",(function(){o.removeClass("is-expanded"),e.element.triggerHandler("collapserow",[{grid:e,row:d,detail:u,item:e.settings.dataset[h]}])}));var p=o.prev().find(".btn-primary");p.length&&p.attr("class",p.attr("class").replace("btn-primary","btn-secondary"))}var g=!n.hasClass("is-expanded"),f=n.prev().find(g?".btn-secondary":".btn-primary");if(f.length>0&&c&&f){var m=f.attr("class")||"";f.attr("class",m.replace(g?"btn-secondary":"btn-primary",g?"btn-primary":"btn-secondary"))}}if(n.hasClass("is-expanded"))a.one("animateclosedcomplete",(function(){n.removeClass("is-expanded")})).animateClosed(),s.removeClass("is-expanded").find(".plus-minus").removeClass("active"),e.settings.allowOneExpandedRow&&i.removeClass("is-rowactivated"),e.element.triggerHandler("collapserow",[{grid:e,row:t,detail:a,item:r}]);else{n.addClass("is-expanded"),s.addClass("is-expanded").find(".plus-minus").addClass("active"),n.find(".constrained-width").css("max-width",this.element.outerWidth());var v=[{grid:e,row:t,detail:a,item:r}];if(e.element.triggerHandler("expandrow",v),e.settings.allowOneExpandedRow&&"multiple"!==this.settings.selectable&&i.addClass("is-rowactivated"),e.settings.onExpandRow){e.settings.onExpandRow(v[0],(function(t){t&&a.find(".datagrid-row-detail-padding").empty().append(t),e.adjustExpandRowHeight(a),a.animateOpen()}))}else e.adjustExpandRowHeight(a),a.animateOpen();if(e.settings.frozenColumns.expandRowAcrossAllCells&&e.frozenExpandRowAcrossAllCells(),e.settings.frozenColumns.left.length||e.settings.frozenColumns.right.length){var b={left:a.eq(0)[0],center:a.eq(1)[0],right:a.eq(2)[0]},y={theme:"themechanged.".concat("datagrid"),rowheight:"rowheightchanged.".concat("datagrid")};$("html").off(y.theme).on(y.theme,(function(){e.frozenExpandRowSetHeight(b)})),e.element.off(y.rowheight).on(y.rowheight,(function(){e.frozenExpandRowSetHeight(b)}))}}}},adjustExpandRowHeight:function(t){if(t.length&&(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length)){var e={left:t.eq(0)[0]?t.eq(0)[0].children[0]:null,center:t.eq(1)[0],right:t.eq(2)[0]?t.eq(2)[0].children[0]:null},i=0;e.center&&(e.center.style.height="auto",i=e.center.offsetHeight-1,e.center.style.height=""),i>0&&(e.left&&(e.left.style.height="".concat(i,"px")),e.right&&(e.right.style.height="".concat(i,"px")))}},frozenExpandRowSetHeight:function(t){if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e=0;if(t&&t.center&&(t.padding=t.center.querySelector(".datagrid-row-detail-padding"),e=t.padding.offsetHeight),e&&(t.center.style.height="".concat(e,"px"),t.left&&(t.left.style.height="".concat(e,"px")),t.right&&(t.right.style.height="".concat(e,"px")),this.settings.frozenColumns.expandRowAcrossAllCells)){var i={container:this.element[0].getBoundingClientRect(),centerEl:t.center.getBoundingClientRect()},n="".concat(i.centerEl.top-i.container.top,"px");t.padding.style.top=n}}},frozenExpandRowAcrossAllCells:function(){var t=this;if(this.settings.frozenColumns.left.length||this.settings.frozenColumns.right.length){var e={row:".datagrid-expandable-row.is-expanded"};e.detail="".concat(e.row," > td .datagrid-row-detail"),e.padding="".concat(e.detail," .datagrid-row-detail-padding");var i={left:this.tableBodyLeft?this.tableBodyLeft[0]:null,center:this.tableBody?this.tableBody[0]:null,right:this.tableBodyRight?this.tableBodyRight[0]:null},n={rows:{left:i.left?i.left.querySelector(e.row):null,center:i.center?i.center.querySelector(e.row):null,right:i.right?i.right.querySelector(e.row):null},details:{left:i.left?i.left.querySelector(e.detail):null,center:i.center?i.center.querySelector(e.detail):null,right:i.right?i.right.querySelector(e.detail):null},padding:this.tableBody[0].querySelector(e.padding)};if(n.padding&&(n.details.left||n.details.right)){var s="is-expanded-frozen";n.padding.style.opacity="0",n.rows.left&&n.rows.left.classList.add(s),n.rows.right&&n.rows.right.classList.add(s),$(n.details.center).one("animateopencomplete.datagrid.expandedfrozen",(function(){(n.details.left||n.details.right)&&setTimeout((function(){n.rows.center.classList.add(s),t.frozenExpandRowSetHeight(n.details),n.padding.style.opacity="",$(window).on("resize.datagrid.expandedfrozen",(function(){t.frozenExpandRowSetHeight(n.details)}))}),10)})).one("animateclosedstart.datagrid.expandedfrozen",(function(){$(window).off("resize.datagrid.expandedfrozen"),n.padding.style.opacity="0",n.padding.style.top="",n.rows.center.classList.remove(s),n.rows.left&&n.rows.left.classList.remove(s),n.rows.right&&n.rows.right.classList.remove(s)})).one("animateclosedcomplete.datagrid.expandedfrozen",(function(){n.padding.style.opacity=""}))}}},toggleGroupChildren:function(t){if(this.settings.groupable){var e=t.index(),i=$(),n=$(),s=$();this.hasLeftPane&&(i=this.tableLeft.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header")),n=this.table.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"),this.hasRightPane&&(s=this.tableRight.find("tbody tr").eq(e).nextUntil(".datagrid-rowgroup-header"));var a=t.find(".datagrid-expand-btn");t.hasClass("is-expanded")?(a.removeClass("is-expanded").find(".plus-minus").removeClass("active"),i.hide(),i.addClass("is-hidden"),n.hide(),n.addClass("is-hidden"),s.hide(),s.addClass("is-hidden"),this.element.triggerHandler("collapserow",[{grid:this,row:t.index(),detail:n,item:{}}]),t.removeClass("is-expanded")):(a.addClass("is-expanded").find(".plus-minus").addClass("active"),i.show(),i.removeClass("is-hidden"),n.show(),n.removeClass("is-hidden"),s.show(),s.removeClass("is-hidden"),this.element.triggerHandler("expandrow",[{grid:this,row:t.index(),detail:n,item:{}}]),t.addClass("is-expanded"))}},setSortColumn:function(t,e){var i=!0;if(void 0!==e?(this.sortColumn.sortAsc===e&&this.sortColumn.sortId===t&&(i=!1),this.sortColumn.sortAsc=e):(this.sortColumn.sortId===t?this.sortColumn.sortAsc=!this.sortColumn.sortAsc:this.sortColumn.sortAsc=!0,e=this.sortColumn.sortAsc),this.sortColumn.sortId=t,this.sortColumn.sortField=this.columnById(t)[0]?this.columnById(t)[0].field:t,this.sortColumn.sortAsc=e,this.setSortIndicator(t,e),i&&this.sortDataset(),!this.settings.focusAfterSort&&this.activeCell&&this.activeCell.isFocused&&(this.activeCell.isFocused=!1),i){var n=this.activeCell.isFocused;this.settings.source||(this.setTreeDepth(),this.setRowGrouping(),this.setTreeRootNodes(),this.clearCache(),this.renderRows(),this.syncSelectedUI()),n&&1===this.activeCell.node.length&&this.setActiveCell(this.activeCell.row,this.activeCell.cell),this.filterExpr&&this.filterExpr[0]&&"all"===this.filterExpr[0].column&&this.highlightSearchRows(this.filterExpr[0].value),this.settings.source&&this.triggerSource({type:"sorted"})}this.tableBody.removeClass("is-loading"),this.saveUserSettings(),this.validateAll(),this.element.trigger("sorted",[this.sortColumn])},sortDataset:function(){if(this.settings.disableClientSort)this.restoreSortOrder=!0;else{this.settings.groupable&&this.originalDataset&&(this.settings.dataset=this.originalDataset);var t=this.sortFunction(this.sortColumn.sortId,this.sortColumn.sortAsc);this.saveDirtyRows(),this.settings.dataset.sort(t),this.setTreeDepth(),this.restoreDirtyRows(),this.settings.selectable&&this.syncDatasetWithSelectedRows()}},saveDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&!this.settings.source&&this.dirtyArray&&this.dirtyArray.length)for(var i=0,n=e.length;i<n;i++){if(void 0!==this.dirtyArray[i])(t.treeGrid?e[i].node:e[i]).tempNodeIndex=i}},restoreDirtyRows:function(){var t=this.settings,e=t.treeGrid?t.treeDepth:t.dataset;if(this.settings.groupable&&(e=this.originalDataset||e),t.showDirty&&this.dirtyArray&&this.dirtyArray.length){for(var i=[],n=0,s=e.length;n<s;n++){var a=t.treeGrid?e[n].node:e[n];void 0!==a.tempNodeIndex&&(i.push({newIdx:n,oldIdx:a.tempNodeIndex}),delete a.tempNodeIndex)}for(var r=[],o=0,l=i.length;o<l;o++)r[i[o].newIdx]=this.dirtyArray[i[o].oldIdx];this.dirtyArray=r}},syncDatasetWithSelectedRows:function(){var t,e=this,i=this.settings;if(!(i.source&&i.paging&&i.allowSelectAcrossPages&&null!==(t=i.columnIds)&&void 0!==t&&(null==t?void 0:t.length))){this._selectedRows=[];for(var n,s=i.treeGrid?i.treeDepth:i.dataset,a=-1,r=function(t,r){if(i.groupable&&!e.originalDataset)for(var o=0;o<Object.keys(s[t]).length;o++)a++,r=Object.keys(s[t]).map((function(e){return s[t][e]})),e.isRowSelected(r)&&e._selectedRows.push({idx:a,data:r,elem:e.dataRowNode(a),group:s[t],page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:a,pagesize:e.settings.pagesize});else r=i.treeGrid?s[t].node:s[t],e.isRowSelected(r)&&e._selectedRows.push({idx:t,data:r,elem:e.visualRowNode(t),pagesize:e.settings.pagesize,page:e.pagerAPI?e.pagerAPI.activePage:1,pagingIdx:t});n=r},o=0;o<s.length;o++)r(o,n)}},setSortIndicator:function(t,e){this.headerRow&&(this.sortColumn={sortId:t,sortAsc:e,sortField:this.columnById(t)[0]?this.columnById(t)[0].field:t},this.element.find(".is-sorted-asc, .is-sorted-desc").removeClass("is-sorted-asc is-sorted-desc"),this.element.find('[data-column-id="'.concat(t,'"]')).addClass(e?"is-sorted-asc":"is-sorted-desc").attr("aria-sort",e?"ascending":"descending"))},sortFunction:function(t,e){var n=this.columnById(t),s=0===n.length?null:n[0],a=null===s?t:s.field,r=this,o=function(t){return"string"==typeof(e=null==(e=r.fieldValue(t,a))?"":e)&&(e=e.toUpperCase(),$.isNumeric(e)&&(e=parseFloat(e))),e;var e};return s&&s.sortFunction&&(o=function(t){return s.sortFunction(r.fieldValue(t,a))}),e=e?1:-1,function(t,n){return t=o(t),n=o(n),i(t)!==i(n)&&(t=t.toString().toLowerCase(),n=n.toString().toLowerCase()),e*((t>n)-(n>t))}},defaultFormatter:function(t,e,i){return null==i||""===i?"":i.toString()},handlePaging:function(){this.settings.paging&&(this.element.addClass("paginated"),this.tableBody.pager({componentAPI:this,dataset:this.settings.dataset,hideOnOnePage:this.settings.hidePagerOnOnePage,source:this.settings.source,pagesize:this.settings.pagesize,indeterminate:this.settings.indeterminate,rowTemplate:this.settings.rowTemplate,pagesizes:this.settings.pagesizes,pageSizeSelectorText:this.settings.groupable?"GroupsPerPage":"RecordsPerPage",showPageSizeSelector:this.settings.showPageSizeSelector,activePage:this.restoreActivePage?parseInt(this.savedActivePage,10):1}),this.restoreActivePage&&(this.savedActivePage=null,this.restoreActivePage=!1))},renderPager:function(t,e,i){this.pagerAPI&&(this.settings.source||(this.pagerAPI.settings.dataset=this.settings.dataset,t.isFilteredClientside=!0),this.pagerAPI.updatePagingInfo(t,e),e||this.triggerSource(t,i),this.syncSelectedUI())},getPageableElements:function(){var t=this.element.children().not(".datagrid-expandable-row");return t.is("table")&&(t=t.find("tbody tr")),t},appendTooltip:function(t){var e=this,i=new RegExp("\\b".concat("grid-tooltip","\\b"),"g");"string"==typeof t?i.test(t)||(t+=" ".concat("grid-tooltip")):t="grid-tooltip";var n=this.uniqueId("tooltip");if(this.tooltip=document.getElementById(n),!this.tooltip){var s=""+'<div id="'.concat(n,'" class="tooltip ').concat(t,' is-hidden">\n          <div class="arrow"></div>\n          <div class="tooltip-content"></div>\n        </div>');document.body.insertAdjacentHTML("beforeend",s),this.tooltip=document.getElementById(n),this.isTouch&&(this.tooltip.style.pointerEvents="auto",$(this.tooltip).on("touchend.gridtooltip",(function(){e.hideTooltip()})))}},cacheTooltip:function(t,e){if(void 0===e){var i,n=t.querySelector(".is-editor.content-tooltip"),s=t.querySelector("a[title]"),a=u.hasClass(t,"rowstatus-cell"),r="svg"===t.tagName.toLowerCase(),o="th"===t.tagName.toLowerCase(),l=u.hasClass(t,"datagrid-column-wrapper"),c=u.hasClass(t.parentNode,"datagrid-filter-wrapper"),d=t.getAttribute("aria-colindex")-1,p=this.columnSettings(d);if(e={content:"",wrapper:t.querySelector(".datagrid-cell-wrapper")},(o||l||c)&&(e.wrapper=t,e.distance=c?15:null,e.placement=l?"top":"bottom"),a||r){var g=this.closest(t,(function(t){return u.hasClass(t,"datagrid-row")})),f=g?g.classList:[];e.isError=f.contains("rowstatus-row-error"),e.placement="right",r&&(e.wrapper=this.closest(t,(function(t){return"td"===t.tagName.toLowerCase()})))}if(n){var v=!(!p.editorOptions||!p.editorOptions.width)&&this.setUnit(p.editorOptions.width),b=$(n).clone()[0];b.style.width=v||"".concat(t.offsetWidth,"px");var y=b.outerHTML;""!==h.stripHTML(y)&&(e.content=y,e.extraClassList=["popover","alternate","content-tooltip"])}else if(s)e.content=s.getAttribute("title"),s.removeAttribute("title");else if(i=t.getAttribute("title")){var w=t.querySelector(".row-btn[disabled]");e.content=w?"":i,t.removeAttribute("title")}else if(o&&!c){var x=t.querySelector(".datagrid-header-text");e.content=x?h.stripHTML(x.textContent):""}else if(c){if(!(t.parentNode.querySelectorAll('.dropdown.is-disabled, input[type="text"][disabled], .btn-filter[disabled]').length>0)){var C=t.parentNode.querySelector(".is-checked");e.content=C?h.stripHTML(C.textContent):""}}else e.wrapper.querySelector(".datagrid-expand-btn")?Array.prototype.filter.call(e.wrapper.children,(function(t){return!t.matches(".datagrid-expand-btn")})).forEach((function(t){e.content=t.textContent})):e.content=e.wrapper.textContent,e.content=h.stripHTML(e.content).trim();var k=e.wrapper.querySelector("select");if(k&&k.selectedIndex&&k.options[k.selectedIndex]&&k.options[k.selectedIndex].innerHTML&&(e.content=m.features.touch?"":k.options[k.selectedIndex].innerHTML.trim()),o&&(e.content=e.content.trim()),""!==e.content){var T=u.hasClass(l?t.parentNode:t,"text-ellipsis"),S=[].slice.call(t.querySelectorAll(".icon")),A=T?8:0;if(S.forEach((function(t){var e="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect();A+=e.width+8})),this.settings.treeGrid){var D=function(t){return!!e.wrapper.querySelector(t)};if(D(".datagrid-tree-node")||D(".datagrid-expand-btn")){var I=this.closest(e.wrapper,(function(t){return u.hasClass(t,"datagrid-row")})),L=parseInt(I.getAttribute("aria-level"),10);L&&(A+=30*L)}}if(T&&l){var P=t.querySelector(".datagrid-header-text");e.textwidth=P.scrollWidth+(k?0:A)}else e.textwidth=E.textWidth(e.content)+(k?0:A);o&&(e.textwidth=E.textWidth(e.content)),e.content=n?e.content:"<p>".concat(e.content,"</p>"),(i||c)&&(e.forced=!0)}if("function"==typeof p.tooltip){var M,R,B=this.closest(t,(function(t){return u.hasClass(t,"datagrid-row")}));this.settings.treeGrid&&this.settings.treeDepth?(M=this.actualRowIndex(B),R=this.settings.treeDepth[M].node):(M=this.dataRowIndex(B),R=this.settings.dataset[M]);var O=this.fieldValue(R,p.field);e.content=p.tooltip(M,d,O,p,R,this),e.textwidth=E.textWidth(e.content)+20,void 0!==e.content&&null!==e.content&&""!==e.content&&(e.forced=!0)}}return(t=t instanceof jQuery?t:$(t)).data("gridtooltip",e),e},showTooltip:function(t){var e=this;if(this.tooltip){var i=$(this.tooltip),n=this.tooltip.querySelector(".tooltip-content");if(n){n.innerHTML=t.content,this.tooltip.classList.remove("is-hidden","top","right","bottom","left"),this.tooltip.style.display="",this.tooltip.classList.add(t.placement||"top"),t.isError&&this.tooltip.classList.add("is-error"),t.extraClassList&&t.extraClassList.map((function(t){return e.tooltip.classList.add(t)}));var s="number"==typeof t.distance?t.distance:10,a={x:0,y:s,container:this.element.closest(".page-container.scrollable")||$("body"),containerOffsetX:t.wrapper.offsetLeft,containerOffsetY:t.wrapper.offsetTop,parent:$(t.wrapper),placement:t.placement||"top",strategies:["flip","nudge"]};"left"!==a.placement&&"right"!==a.placement||(a.x=s,a.y=0),i.one("afterplace.gridtooltip",(function(t,n){e.handleAfterPlaceTooltip(t,i,n)})).on("click.gridtooltip",(function(){e.hideTooltip()})),i.data("place")||i.place(a),i.data("place").place(a),i.data("gridtooltip",!0),$("body, .scrollable").off("scroll.gridtooltip").on("scroll.gridtooltip",(function(){e.hideTooltip()}))}}},handleAfterPlaceTooltip:function(t,e,i){var n=e||$("#tooltip");n[0]&&(n.data("place").setArrowPosition(t,i,n),n.triggerHandler("tooltipafterplace",[i]))},hideTooltip:function(){var t=this;this.tooltip&&(this.removeTooltipData(this.tooltip),this.tooltip.classList.add("is-hidden"),this.tooltip.classList.remove("is-error","popover","alternate","content-tooltip"),this.tooltip.style.left="-999px"),$("body, .scrollable").off("scroll.gridtooltip",(function(){t.hideTooltip()}))},isGridtooltip:function(){var t=!1;this.tooltip&&((this.tooltip instanceof jQuery?this.tooltip:$(this.tooltip)).data("gridtooltip")&&(t=!0));return t},removeTooltipData:function(t){(t=t instanceof jQuery?t:$(t)).data("gridtooltip")&&$.removeData(t[0],"gridtooltip")},removeTooltip:function(){var t=this;if(this.tooltip){var e=$(this.tooltip),i={th:".datagrid-header th",td:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"]:not(.rowstatus-cell)',rowstatus:'.datagrid-wrapper tbody tr.datagrid-row td[role="gridcell"] .icon-rowstatus'};i.str="".concat(i.th,", ").concat(i.td,", ").concat(i.rowstatus),$("body, .scrollable").off("scroll.gridtooltip"),e.off("touchend.gridtooltip"),this.element.off("mouseenter.gridtooltip mouseleave.gridtooltip click.gridtooltip longpress.gridtooltip keydown.gridtooltip",i.str),this.toolbar&&this.toolbar.parent().find(".table-errors").length>0&&this.toolbar.parent().find(".table-errors").off("mouseenter.tableerrortooltip",".icon").off("mouseleave.tableerrortooltip click.tableerrortooltip",".icon").off("longpress.tableerrortooltip",".icon");var n=e.data("place");n&&n.destroy(),[].slice.call(this.element[0].querySelectorAll(i.str)).forEach((function(e){return t.removeTooltipData(e)})),this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip)}this.tooltip=void 0},destroy:function(){this.removeTooltip(),$("html").off("themechanged.".concat("datagrid")),this.element.add(this.element.find("*")).off("selected.gridpopupth close.gridpopupth selected.gridpopuptr close.gridpopuptr selected.gridpopupbtn close.gridpopupbtn"),this.pagerAPI&&(this.tableBody.off("page.".concat("datagrid"," pagesizechange.").concat("datagrid")),this.pagerAPI.destroy()),this.element.off().empty().removeClass("datagrid-container");var t=this.element.prev(".toolbar");if(this.triggerDestroyCell(),this.removeToolbarOnDestroy&&this.settings.toolbar&&this.settings.toolbar.keywordFilter){var e=t.find(".searchfield"),i=e.data("searchfield"),n=e.parent().find(".close.icon");e.off("keypress.datagrid"),n.off("click.datagrid"),i&&"function"==typeof i.destroy&&i.destroy(),e.removeData("options")}return this.removeToolbarOnDestroy&&(t.data("toolbar")&&t.data("toolbar").destroy(),t.remove()),this.element.next(".pager-toolbar").remove(),$.removeData(this.element[0],"datagrid"),this.element.off(),$(document).off("touchstart.datagrid touchend.datagrid touchcancel.datagrid click.datagrid touchmove.datagrid"),$("body").off("resize.vtable resize.datagrid"),$(window).off("orientationchange.datagrid"),$(window).off("resize.datagrid"),this},updated:function(t){return this.settings=C.mergeSettings(this.element,t,this.settings),this.pagerAPI&&"function"==typeof this.pagerAPI.destroy&&this.pagerAPI.destroy(),t&&t.frozenColumns&&(this.headerRow=void 0,this.element.empty(),this.firstRender()),t&&t.dataset&&(this.settings.dataset=t.dataset),t&&t.columns&&(this.settings.columns=t.columns),this.render(),this.handlePaging(),this}},$.fn.datagrid=function(t){return this.each((function(){var e=$.data(this,"datagrid");e?e.updated(t):e=$.data(this,"datagrid",new Es(this,t))}))};var Ds={};function Is(t,e){if(!(t instanceof HTMLElement))throw new Error("Element used for `FormCompact` component must be an instance of HTMLElement");this.settings=C.mergeSettings(t,e,Ds),this.element=t,this.init()}Is.prototype={init:function(){this.form=this.element.querySelector("form"),this.inputs=C.getArrayFromList(this.element.querySelectorAll("input")),this.renderProps(),this.handleEvents()},renderProps:function(){var t=this;if(this.inputs&&this.inputs.length){var e=["disabled","readonly"];this.inputs.forEach((function(i){e.forEach((function(e){t.setState(e,i)}))}))}},handleEvents:function(){var t=this;$(this.form).on("focusin.".concat("formcompact"),"input",(function(e){return t.handleFocusIn(e)})).on("focusout.".concat("formcompact"),"input",(function(e){return t.handleFocusOut(e)}));var e=["disabled","readonly"];this.inputsObserver=new MutationObserver((function(i){i.length&&i.forEach((function(i){"attributes"===i.type&&e.indexOf(i.attributeName)>-1&&t.setState(i.attributeName,i.target)}))}));var i={attributes:!0};this.inputs.forEach((function(e){t.inputsObserver.observe(e,i)}))},handleFocusIn:function(t){u.parents(t.target,".column, .columns",!0).classList.add("is-focused")},handleFocusOut:function(t){u.parents(t.target,".column, .columns",!0).classList.remove("is-focused")},setState:function(t,e){if("string"==typeof t&&e instanceof HTMLElement){if(!(["checkbox","radio"].indexOf(e.type)>-1)){"readonly"===t&&(t="readOnly");var i=!0===e[t]?"add":"remove";e.parentNode.classList[i]("is-".concat(t.toLowerCase()))}}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){this.inputsObserver.disconnect(),delete this.inputsObserver,$(this.form).off(["focusin.".concat("formcompact"),"focusout.".concat("formcompact")].join(" ")),delete this.form,delete this.inputs},destroy:function(){this.teardown(),$.removeData(this.element,"formcompact")}},$.fn.formcompact=function(t){return this.each((function(){var e=$.data(this,"formcompact");e?e.updated(t):e=$.data(this,"formcompact",new Is(this,t))}))};var Ls={addScrollClass:!1,demoOptions:!0,tabs:null,toolbarSettings:void 0,useAlternate:!1,useBackButton:!0,useBreadcrumb:!1,useFlexToolbar:!1,usePopupmenu:!1,wizardTicks:null};function Ps(t,e){this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ls),this.init()}Ps.prototype={get toolbarAPI(){if(this.toolbarElem)return this.toolbarElem.data("toolbar-flex")||this.toolbarElem.data("toolbar")},get toolbar(){return F("toolbarAPI","toolbar"),this.toolbarAPI},get titleButton(){var t=".title > button";return this.toolbarElem&&this.toolbarElem.is(".flex-toolbar")&&(t=".toolbar-section:first-child > button"),this.element.find(t)},get hasTitleButton(){return this.titleButton.length>0},init:function(){this.setup().build().handleEvents(),this.settings.demoOptions&&this.initPageChanger()},setup:function(){return this.settings.demoOptions=this.element.attr("data-demo-options")?"true"===this.element.attr("data-demo-options"):this.settings.demoOptions,this.settings.useBackButton=this.element.attr("data-use-backbutton")?"true"===this.element.attr("data-use-backbutton"):this.settings.useBackButton,this.settings.useBreadcrumb=this.element.attr("data-use-breadcrumb")?"true"===this.element.attr("data-use-breadcrumb"):this.settings.useBreadcrumb,this.settings.useAlternate=this.element.attr("data-use-alternate")?"true"===this.element.attr("data-use-alternate"):this.settings.useAlternate,this.settings.tabs=$.isArray(this.settings.tabs)?this.settings.tabs:null,this.settings.wizardTicks=$.isArray(this.settings.wizardTicks)?this.settings.wizardTicks:null,this.titleText=this.element.find(".title > h1"),this.levelsDeep=[],this.levelsDeep.push("".concat(this.titleText.text())),this},build:function(){var t=!1,e=this.element.find(".toolbar, .flex-toolbar");if(!e.length)return this;e.is(".flex-toolbar")&&(t=!0),this.toolbarElem=e;var i=this.settings.toolbarSettings;if(this.toolbarElem[t?"toolbarflex":"toolbar"](i),!this.hasTitleButton&&this.levelsDeep.length>1&&this.buildTitleButton(),this.settings.tabs&&this.settings.tabs.length&&this.buildTabs(),this.settings.wizardTicks&&this.settings.wizardTicks.length&&this.buildWizard(),this.settings.usePopupmenu&&this.buildPopupmenu(),this.settings.addScrollClass){var n=$(this.element),s=$(this.element).next(".scrollable"),a=1===s.length?s:$(window),r=this.settings.scrollThreshold?this.settings.scrollThreshold:15;a.on("scroll.header",(function(){this.scrollTop>r?n.addClass("is-scrolled-down"):n.removeClass("is-scrolled-down")})),a.scrollTop()>r&&n.addClass("is-scrolled-down")}return this},buildTitleButton:function(){if(this.levelsDeep.length>1&&!this.hasTitleButton&&!this.titleButton.length){this.toolbarAPI.teardown();var t=$('<button class="btn-icon back-button" type="button">\n        <span class="audible">'.concat(B.translate("Drillup"),'</span>\n        <span class="icon app-header go-back">\n          <span class="one"></span>\n          <span class="two"></span>\n          <span class="three"></span>\n        </span>\n      </button>')),e=this.toolbarElem.find(".title");if(this.settings.useFlexToolbar){var i=e.prev(".toolbar-section");i.length||(i=$('<div class="toolbar-section"></div>').insertBefore(e)),t.prependTo(i)}else t.prependTo(e);this.toolbarAPI.init()}this.toolbarElem.addClass("has-title-button"),this.titleButton.find(".icon.app-header").addClass("go-back");var n=$("#application-menu").data("applicationmenu");n?n.modifyTriggers([this.titleButton],null,!0):$("#application-menu").applicationmenu({triggers:[this.titleButton]}),this.handleTitleButtonEvents()},getCurrentBreadcrumbData:function(){var t=this;function e(){var e=this.index,i=t.breadcrumbAPI.list;if(!this.current)if(0!==e){var n,s=i.childNodes.length-1;if(e<s)for(n=s-e;n>0;)t.drillup(),t.breadcrumbAPI.remove(s,!1,!0),n-=1,s-=1;t.breadcrumbAPI.render()}else t.reset()}return this.levelsDeep.map((function(i,n){var s="header-breadcrumb-".concat(i.replace(" ","-").toLowerCase());return{callback:e,content:i,current:n+1===t.levelsDeep.length,id:s}}))},buildBreadcrumb:function(){var t="has-breadcrumb",e="default";this.settings.useAlternate&&(t="has-alternate-breadcrumb",e="alternate"),this.element.addClass(t),this.breadcrumb=this.element.find(".breadcrumb"),this.breadcrumb.length||(this.breadcrumb=$('<nav class="breadcrumb hidden" role="navigation"></nav>').appendTo(this.element),this.breadcrumb.breadcrumb({breadcrumbs:this.getCurrentBreadcrumbData(),style:e}),this.breadcrumbAPI=this.breadcrumb.data("breadcrumb")),this.adjustBreadcrumb()},adjustBreadcrumb:function(){this.breadcrumbAPI&&this.breadcrumbAPI.updated({breadcrumbs:this.getCurrentBreadcrumbData()})},buildTabs:function(){if(this.tabsContainer=this.element.find(".tab-container"),!this.tabsContainer.length){this.tabsContainer=$('<div class="tab-container"></div>').appendTo(this.element);var t=$('<ul class="tab-list" role="tablist"></ul>').appendTo(this.tabsContainer);$('<li class="tab"><a href="#header-tabs-home" role="tab">IDS Enterprise Controls | Patterns</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-1" role="tab">Level 1 Detail</a></li>').appendTo(t),$('<li class="tab"><a href="#header-tabs-level-2" role="tab">Level 2 Detail</a></li>').appendTo(t)}this.element.addClass(this.settings.useAlternate?"has-alternate-tabs":"has-tabs"),this.tabsContainer[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),$("#header-tabs-level-1").removeAttr("style"),$("#header-tabs-level-2").removeAttr("style"),this.tabsContainer.tabs({containerElement:"#maincontent"})},buildWizard:function(){if(this.element.addClass("has-wizard"),this.wizard=this.element.find(".wizard"),!this.wizard.length){this.wizard=$('<div class="wizard"></div>').appendTo(this.element);var t=$('<div class="wizard-header"></div>').appendTo(this.wizard),e=$('<div class="bar"></div>').appendTo(t);$('<div class="completed-range"></div>').appendTo(e),$('<a href="#" class="tick current"><span class="label">Context Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Utility Apps</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">Inbound Configuration</span></a>').appendTo(e),$('<a href="#" class="tick"><span class="label">OID Mapping</span></a>').appendTo(e)}this.wizard[this.settings.useAlternate?"addClass":"removeClass"]("alternate"),this.wizard.wizard()},buildPopupmenu:function(){this.toolbarAPI.teardown();var t=this.toolbarElem.children(".title");if(this.titlePopup=t.find(".btn-menu"),!this.titlePopup.length){var e=t.find("h1");e.wrap('<button id="header-menu" type="button" class="btn-menu"></button>'),this.titlePopup=e.parent(".btn-menu")}this.titlePopupMenu=this.titlePopup.next(".popupmenu"),this.titlePopupMenu.length||(this.titlePopupMenu=$('<ul class="popupmenu is-selectable"></ul>').insertAfter(this.titlePopup),$('<li class="is-checked"><a href="#">Page One Title</a></li><li><a href="#">Page Two Title</a></li><li><a href="#">Page Three Title</a></li><li class="is-disabled"><a href="#">Page Four Title</a></li><li><a href="#">Page Five Title</a></li>').appendTo(this.titlePopupMenu)),this.titlePopupMenu.addClass("is-selectable");var i=this.titlePopupMenu.children(".is-checked").first().text();i||(i=this.titlePopupMenu.children().first().text()),this.titlePopup.children("h1").text(i),this.titlePopup.button().popupmenu(),this.element.addClass("has-popupmenu-title"),this.toolbarAPI.init()},handleEvents:function(){var t=this,e=this;return this.element.on("updated.".concat("header"),(function(t,i){e.updated(i)})).on("reset.".concat("header"),(function(){e.reset()})).on("drilldown.".concat("header"),(function(t,i){e.drilldown(i)})).on("drillup.".concat("header"),(function(t,i){e.drillup(i)})),$("html").on("themechanged.".concat("header"),(function(){t.updatePageChanger()})),this.handleTitleButtonEvents(),this.titlePopup&&this.titlePopup.length&&this.titlePopup.on("selected.".concat("header"),(function(t,e){var i;i=e instanceof $?e.text():$(e.element).text(),$(this).children("h1").text(i)})),this},handleTitleButtonEvents:function(){var t=this;this.titleButton&&this.titleButton.length&&this.titleButton.bindFirst("click.".concat("header"),(function(e){t.levelsDeep.length>1&&(e.stopImmediatePropagation(),t.drillup(),e.returnValue=!1)}))},initPageChanger:function(){if(this.changer=this.element.find(".page-changer"),this.changer.length){var t=this.changer.data("popupmenu").menu,e=t.find("li.personalization-colors");if(e.length>0){var n=Z.personalizationColors(),s=e.parent().hasClass("popupmenu")?"":'<li class="heading" role="presentation">Personalization</li>';Object.keys(n).forEach((function(t){return s+='<li class="is-selectable'.concat("Default"===n[t].name?" is-checked is-default":"",'"><a href="#" data-rgbcolor="').concat(n[t].value,'">').concat(n[t].name,"</a></li>"),t})),e.replaceWith(s)}this.changer.on("selected.header",(function(e,i){e.preventDefault(),void 0!==i&&!(i instanceof $)&&i.element instanceof HTMLElement&&(i=$(i.element));var n=i.attr("data-theme-name"),s=i.attr("data-theme-variant");if(n||s){var a=t.find(".is-checked a[data-theme-name]").attr("data-theme-name"),r=t.find(".is-checked a[data-theme-variant]").attr("data-theme-variant");a&&r&&nt.setTheme("".concat(a,"-").concat(r))}else{var o=i.attr("data-theme");if(o)nt.setTheme(o);else if(i.parent().hasClass("is-default"))nt.setColorsToDefault();else{var l=i.attr("data-rgbcolor");nt.setColors(l)}}}));var a=Z.currentTheme;if("theme-soho-light"!==a.id){var r=a.id.split("-");$("body").find(".popupmenu [data-theme-name]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-name="'.concat(r[0],"-").concat(r[1],'"]')).parent().addClass("is-checked"),$("body").find(".popupmenu [data-theme-variant]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-theme-variant="'.concat(r[2],'"]')).parent().addClass("is-checked")}if(nt.settings.colors){var o="object"===i(nt.settings.colors)?nt.settings.colors.header:nt.settings.colors;o=o.replace("#",""),$("body").find(".popupmenu [data-rgbcolor]").parent().removeClass("is-checked"),$("body").find('.popupmenu [data-rgbcolor="#'.concat(o,'"]')).parent().addClass("is-checked")}}},updatePageChanger:function(){if(this.change&&0!==this.changer.length)for(var t=this.changer.data("popupmenu").menu.find("[data-rgbcolor]"),e=Z.personalizationColors(),i=Object.keys(e),n=0;n<t.length;n++)t[n].setAttribute("data-rgbcolor",e[i[n]].value)},drilldown:function(t){this.element.addClass("is-drilldown"),this.levelsDeep.push(t.toString()),this.titleText.text(this.levelsDeep[this.levelsDeep.length-1]),this.settings.useBackButton&&this.buildTitleButton(),this.settings.useBreadcrumb&&(this.breadcrumb&&this.breadcrumb.length?this.adjustBreadcrumb():(this.buildBreadcrumb(),this.breadcrumb.css({display:"block",height:"auto"}).removeClass("hidden")))},drillup:function(t){var e;if(this.element.removeClass("is-drilldown"),this.levelsDeep.length>1&&(this.levelsDeep.pop(),e=this.levelsDeep[this.levelsDeep.length-1]),void 0!==t&&(e=t),this.levelsDeep.length>1)return this.settings.useBreadcrumb&&this.adjustBreadcrumb(),void this.titleText.text(e);e=this.levelsDeep[0],this.settings.useBackButton&&this.removeButton(),this.settings.useBreadcrumb&&this.removeBreadcrumb(),this.settings.usePopupmenu&&this.removePopupmenu(),this.titleText.text(e),this.element.trigger("drillTop")},reset:function(){for(;this.levelsDeep.length>1;)this.levelsDeep.pop();return this.titleText.text(this.levelsDeep[0]),this.removeBreadcrumb(),this.removeTabs(),this.removeWizard(),this.removePopupmenu(),this.removeButton(),this.element.trigger("afterreset"),this},removeButton:function(){if(this.hasTitleButton)this.titleButton.find(".icon.app-header").removeClass("go-back");else if(this.titleButton&&this.titleButton.length){this.toolbarAPI.teardown();var t=$("#application-menu").data("applicationmenu");t&&t.modifyTriggers([this.titleButton],!0,!0),this.titleButton.off("click.".concat("header")).remove(),this.titleButton=$(),this.toolbarAPI.init()}},removeBackButton:function(){this.titleButton.length&&this.element.find(".go-back").removeClass("go-back")},removeBreadcrumb:function(){if(this.breadcrumb&&this.breadcrumb.length){var t,e=this,i=$.fn.transitionEndName();e.element.removeClass("has-breadcrumb").removeClass("has-alternate-breadcrumb"),this.breadcrumb.is(":not(:hidden)")?(this.element.one("".concat(i,".breadcrumb-header"),n),t=setTimeout(n,300)):n()}function n(){t&&(clearTimeout(t),t=null),e.element.off("".concat(i,".breadcrumb-header")),e.breadcrumbAPI.destroy(),e.breadcrumb.remove(),delete e.breadcrumbAPI,delete e.breadcrumb}},removeTabs:function(){if(this.tabsContainer&&this.tabsContainer.length){var t,e=this,i=$.fn.transitionEndName();this.element.removeClass("has-tabs").removeClass("has-alternate-tabs"),this.tabsContainer.is(":not(:hidden)")?(this.element.one("".concat(i,".tabs-header"),n),t=setTimeout(n,300)):n()}function n(){t&&(clearTimeout(t),t=null),e.element.off("".concat(i,".tabs-header")),e.tabsContainer.data("tabs").destroy(),e.tabsContainer.remove(),e.tabsContainer=null,$("#header-tabs-level-1").css("display","none"),$("#header-tabs-level-2").css("display","none")}},removeWizard:function(){if(this.wizard&&this.wizard.length){var t,e=this,i=$.fn.transitionEndName();this.element.removeClass("has-wizard"),this.wizard.is(":not(:hidden)")?(this.element.one("".concat(i,".wizard-header"),n),t=setTimeout(n,300)):n()}function n(){t&&(clearTimeout(t),t=null),e.element.off("".concat(i,".wizard-header")),e.wizard.data("wizard").destroy(),e.wizard.remove(),e.wizard=null}},removePopupmenu:function(){this.titlePopup&&this.titlePopup.length&&(this.toolbarAPI.teardown(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("popupmenu").destroy(),this.titlePopup.data("popupmenu")&&this.titlePopup.data("button").destroy(),this.titlePopupMenu.remove(),this.titlePopup.children("h1").detach().insertBefore(this.titlePopup),this.titlePopup.remove(),this.titlePopup=void 0,this.titlePopupMenu=void 0,this.element.removeClass("has-popupmenu-title"),this.toolbarAPI.init())},unbind:function(){return this.titleButton&&this.titleButton.length&&this.titleButton.off("click.".concat("header")),this.titlePopup&&this.titlePopup.length&&this.titlePopup.off("updated.".concat("header")),this.element.off(["updated.".concat("header"),"reset.".concat("header"),"drilldown.".concat("header"),"drillup.".concat("header")].join(" ")),$("html").off("themechanged.".concat("header")),this},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.reset().unbind().init()},destroy:function(){if(this.unbind(),this.hasTitleButton&&this.toolbarElem.removeClass("has-title-button"),this.changer){var t=this.changer.data("popupmenu");t&&"function"==typeof t.destroy&&t.destroy(),this.changer.remove(),delete this.changer}$.removeData(this.element[0],"header")}},$.fn.header=function(t){return this.each((function(){var e=$.data(this,"header");e?e.updated(t):e=$.data(this,"header",new Ps(this,t))}))};var Ms={tabContainers:[]},Rs=["primary","secondary","tertiary"];function Bs(t,e){return this.element=$(t),this.settings=C.mergeSettings(this.element[0],e,Ms),this.tabContainers={},this.init()}Bs.prototype={init:function(){var t=this,e=[];e=this.settings.tabContainers instanceof Array&&this.settings.tabContainers.length?this.settings.tabContainers:this.element.find(".tab-container").filter((function(){return!$(this).parents(".tab-panel-container").length})),$(e).each((function(){t.setupTabsInstance($(this))}))},setupTabsInstance:function(t){if(t instanceof $){var e=this,i=!1;if(Rs.forEach((function(n){if(!i&&!Object.prototype.hasOwnProperty.call(e.tabContainers,n)){var s=t.data("tabs");s||(t.tabs(),s=t.data("tabs")),s.multitabsID=n,t.attr("data-multitabs",n),e.tabContainers[n]=t,i=!0}})),!i)throw new Error("all tab-container slots in MultiTabs component are taken, so a new tabs container was not invoked and stored")}},add:function(t,e,i,n){return(t=this.checkForValidTabContainer(t)).data("tabs").add(e,i,n)},remove:function(t,e,i){return(t=this.checkForValidTabContainer(t)).data("tabs").remove(e,i)},move:function(t,e,i){if(!t||!e)throw new Error("can't move a tab without both a tabId and a targetTabContainerName");var n,s,a;if(this.getFilterableTabContainers().each((function(){var e=$(this).data("tabs"),i=e.getTab(null,t);null!==i&&(a=e.multitabsID,n=i.clone(),s=e.getPanel(t).children())})),!n)throw new Error('No tab markup was found in any Multitabs container for href "'.concat(t,'"'));this.remove(a,t),this.add(e,t,{name:n.children("a").text().trim(),content:s,doActivate:i})},getTabContainer:function(t){var e,i=this;return Rs.forEach((function(n){!e&&i.tabContainers[n]&&t===n&&(e=i.tabContainers[n])})),e},getFilterableTabContainers:function(){var t=$();return this.performOnAllContainers((function(e,i){t=t.add(i)})),t},checkForValidTabContainer:function(t){if(!t)throw new Error("Need to have a tabContainer defined to hide a tabs instance");if("string"==typeof t&&(t=this.getTabContainer(t)),!(t instanceof $&&t.length))throw new Error("No matching tabContainer could be found and hidden.");return t},performOnAllContainers:function(t,e){var i=this;Array.isArray(e)||(e=e?[e]:[]),Rs.forEach((function(n){var s=i.tabContainers[n],a=[];s&&(a.push(n,s),a=a.concat(e),t.apply(this,a))}))},adjustModuleTabContainers:function(){this.performOnAllContainers((function(t,e){var i=e.data("tabs");i.isModuleTabs()&&i.adjustModuleTabs()}))},hideTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").addClass("hidden"),this.adjustModuleTabContainers()},showTabsInstance:function(t){(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").removeClass("hidden"),this.adjustModuleTabContainers()},destroyTabsInstance:function(t){if(t instanceof $&&t.data("tabs")&&"function"==typeof t.data("tabs").destroy){var e=this,i=!1;if(Rs.forEach((function(n){if(!i&&e.tabContainers[n].is(t)){var s=t.data("tabs");delete s.multitabsID,t.removeAttr("data-multitabs"),s.destroy(),delete e.tabContainers[n],i=!0}})),!i)throw new Error("could not destroy a tabContainer because it was not associated with this Multitabs instance")}},isHidden:function(t){return(t=this.checkForValidTabContainer(t)).parent(".multitabs-section").is(".hidden")},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings))},teardown:function(){var t=this;return Object.keys(this.tabContainers).forEach((function(e){t.destroyTabsInstance(e)})),this},destroy:function(){this.teardown(),$.removeData(this.element[0],"multitabs")}},$.fn.multitabs=function(t){return this.each((function(){var e=$.data(this,"multitabs");e?e.updated(t):e=$.data(this,"multitabs",new Bs(this,t))}))};var Os={backElement:void 0,edgeBleed:!1,edgeBleedBreakpoint:"phone",listElement:void 0,listCloseElement:void 0,detailElement:void 0},Fs=["accordion","listview"];function Ns(t){var e;if(t instanceof HTMLElement)return Object.keys($(t).data()).forEach((function(t){Fs.indexOf(t)>-1&&(e=t)})),e}function zs(t,e){t instanceof HTMLElement&&(this.element=t,this.settings=C.mergeSettings(this.element,e,Os),this.init())}zs.prototype={init:function(){var t=this;if(this.setInternalElementReference("listElement",(function(e){return(i=t.settings[e])instanceof HTMLElement&&void 0!==Ns(i);var i})),this.setInternalElementReference("detailElement"),this.setInternalElementReference("backElement"),this.setInternalElementReference("listCloseElement"),this.showDetail=!1,this.element.classList.contains("show-detail")&&(this.showDetail=!0),this.listElement){this.listComponentType=Ns(this.listElement);var e=this.getListAPI();e&&(e.isControllingDetails=!0)}if(this.backElement){this.backElement.classList.add("list-detail-back-button");var i=this.backElement.querySelector(".icon");i&&(this.backElementIcon=i),this.listContainsBackElement&&(this.listContainsBackElement=this.listElement.contains(this.backElement)),this.detailContainsBackElement=this.detailElement.contains(this.backElement)}var n=this.element.querySelectorAll(".list-detail");n&&(this.childrenListDetailElements=n),this.settings.edgeBleed?(this.edgeBleed=!0,this.element.classList.add("bleeding-edge__".concat(this.settings.edgeBleedBreakpoint))):(this.edgeBleed=!1,this.element.classList.remove("bleeding-edge__phone","bleeding-edge__tablet")),this.setBreakpointChecks(),this.handleEvents()},setBreakpointChecks:function(){this.abovePhoneBreakpoint=p.isAbove("phone-to-tablet"),this.aboveTabletBreakpoint=p.isAbove("desktop")},setInternalElementReference:function(t,e){if("string"==typeof this.settings[t]&&this.settings[t].length){var i=document.querySelector(this.settings[t]);i&&(this.settings[t]=i)}e="function"!=typeof e||e(t),this.settings[t]instanceof HTMLElement&&e&&(this[t]=this.settings[t])},handleEvents:function(){var t=this;$(this.element).on("drilldown.".concat("listdetail"),(function(e,i){e.stopPropagation(),t.drilldown(i,e.target)})).on("drillup.".concat("listdetail"),(function(e){e.stopPropagation(),t.drillup()})),this.backElement&&this.backElement.addEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.addEventListener("click",this.handleClose.bind(this)),$("body").off("resize.".concat("listdetail")).on("resize.".concat("listdetail"),(function(){t.handleResize()}))},drilldown:function(t,e){this.showDetail||e&&e.innerHTML!==this.listElement.innerHTML||(this.showDetail=!0,this.element.classList.add("show-detail"),this.addBackElementIconContext(),this.isAboveBreakpoint()||this.getListAPI().disable(),this.detailArea&&$(this.detailElement).triggerHandler("activatescreen",[t]))},drillup:function(){this.showDetail&&(this.removeBackElementIconContext(),this.getListAPI().enable(),this.showDetail=!1,this.element.classList.remove("show-detail"))},addBackElementIconContext:function(){this.showDetail&&this.backElementIcon&&!this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.add("go-back")},removeBackElementIconContext:function(){this.backElementIcon&&this.backElementIcon.classList.contains("go-back")&&this.backElementIcon.classList.remove("go-back")},handleBackClick:function(t){function e(){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}if(!this.showDetail){if(this.edgeBleed){var i=this.getCurrentSelectedListItem();if(i)return this.drilldown(i),e(),!1}return!0}return this.drillup(),this.childrenListDetailElements&&this.childrenListDetailElements.forEach((function(t){var e=$(t).data("listdetail");e&&"function"==typeof e.drillup&&e.drillup()})),e(),!1},handleClose:function(){if(!this.showDetail){var t=this.getCurrentSelectedListItem();this.drilldown(t)}},handleResize:function(){this.setBreakpointChecks();var t=this.getListAPI();this.isAboveBreakpoint()?this.edgeBleed&&!this.showDetail&&this.listElement.classList.contains("is-disabled")&&t.enable():this.edgeBleed&&this.showDetail&&!this.listElement.classList.contains("is-disabled")&&t.disable(),this.isAboveBreakpoint()?this.removeBackElementIconContext():this.addBackElementIconContext(),p.isAbove("desktop")&&t.enable()},isAboveBreakpoint:function(){var t=this.settings.edgeBleedBreakpoint;return this["above".concat(E.capitalize(t),"Breakpoint")]},getListAPI:function(){if(this.listElement)return $(this.listElement).data(this.listComponentType)},getCurrentSelectedListItem:function(){if(!this.listElement)return"";var t,e=this.getListAPI();switch(this.listComponentType){case"accordion":default:t=e.getSelected()}return t=u.convertToHTMLElement(t)},updated:function(t){t&&(this.settings=C.mergeSettings(this.element[0],t,this.settings)),this.teardown(),this.init()},teardown:function(){if($("body").off("resize.".concat("listdetail")),$(this.element).off("drilldown.".concat("listdetail"," drillup.").concat("listdetail")),this.backElement&&this.backElement.removeEventListener("click",this.handleBackClick.bind(this)),this.listCloseElement&&this.listCloseElement.removeEventListener("click",this.handleClose.bind(this)),this.listComponentType){var t=this.getListAPI();t&&delete t.isControllingDetails}delete this.listElement,delete this.detailElement,delete this.backElement,delete this.backElementIcon,delete this.edgeBleed,delete this.listContainsBackElement,delete this.detailContainsBackElement,delete this.childrenListDetailElements,delete this.showDetail},destroy:function(){this.teardown(),$.removeData(this.element,"listdetail")}},$.fn.listdetail=function(t){return this.each((function(){var e=$.data(this,"listdetail");e?e.updated(t):(e=$.data(this,"listdetail",new zs(this,t))).destroy=function(){this.teardown(),$.removeData(this,"listdetail")}}))};var Hs={linearProgression:!1,folderIconOpen:"caret-up",folderIconClosed:"caret-down",stepList:"#step-list",stepLi:".js-step",stepLink:".js-step-link",stepFolder:".js-step-folder",btnPrev:".js-step-link-prev",btnNext:".js-step-link-next",btnSaveClose:".js-btn-save-changes",beforeSelectStep:null};function qs(t,e){this.settings=C.mergeSettings(t,e,Hs),this.element=$(t),this.init(),N("Stepprocess")}qs.prototype={init:function(){this.stepListJq=$(this.settings.stepList),this.initStepprocess(),this.handleKeys(),this.setupEvents(),this.focusFirst()},initStepprocess:function(){for(var t=this.stepListJq.find(this.settings.stepLi),e=0,i=t.length;e<i;e++)this.decorateNode(t[e]);var n=$("".concat(this.settings.stepLi,".is-selected")).find(this.settings.stepLink);this.selectStep(n)},decorateNode:function(t){var e=$(t),i=e.children(this.settings.stepLink),n=e.children(this.settings.stepFolder),s=i.hasClass("is-disabled"),a=n.hasClass("is-open");if(s&&i.attr("aria-disabled","true"),n.length){if(e.addClass("folder"),n.attr("role","group"),s&&(n.addClass("disabled"),a))for(var r=n.children(),o=0,l=r.length;o<l;o++)$(r[o]).find(this.settings.stepLink).addClass("is-disabled").attr("aria-disabled","true");i.attr("aria-expanded",a)}var c=i.parentsUntil(this.stepListJq,"ul").length-1,d=e.index(),h=e.siblings().addBack().length;i.attr({role:"stepitem",tabindex:"-1","aria-selected":"false","aria-level":c+1,"aria-posinset":d+1,"aria-setsize":h,"aria-disabled":s}).addClass("hide-focus").hideFocus()},focusFirst:function(){this.stepListJq.find("".concat(this.settings.stepLi,":first")).attr("tabindex","0")},folderClose:function(t){var e=this,i=$(t),n=i.children(this.settings.stepLink),s=i.children(this.settings.stepFolder),a=n.closest(".folder").removeClass("is-open").end().find("svg.icon-tree");this.setIcon(a,this.settings.folderIconClosed),this.isAnimating=!0,s.one("animateclosedcomplete",(function(){s.removeClass("is-open"),e.isAnimating=!1})).animateClosed(),n.attr("aria-expanded","false")},folderOpen:function(t){var e=this,i=$(t);if(!this.isOpen(i)){var n=i.children(this.settings.stepLink),s=i.children(this.settings.stepFolder);i.addClass("is-open"),n.attr("aria-expanded","true");var a=n.find("svg.icon-tree");this.setIcon(a,this.settings.folderIconOpen),this.isAnimating=!0,s.one("animateopencomplete",(function(){e.isAnimating=!1})).addClass("is-open").css("height",0).animateOpen()}},folderToggle:function(t){var e=t.closest(this.settings.stepLi);if(this.isFolder(e)){var i=e.children(this.settings.stepFolder);this.isOpen(i)?this.folderClose(e):this.folderOpen(e)}},getSelectedStep:function(){return $("".concat(this.settings.stepLi,".is-selected"),this.stepListJq)},getNextNode:function(t){var e=this.settings,i=t.parent().next().find("".concat(e.stepLink,":first"));if(t.next().is(e.stepFolder)&&t.next().hasClass("is-open")&&(i=t.next().find("".concat(e.stepLink,":first"))),i.hasClass("is-disabled")&&(i=this.getNextNode(i)),0===i.length)for(var n=0,s=t;n<2&&!(i=(s=s.parent().closest(".folder")).next().find("".concat(e.stepLink,":first"))).length;n++);return i},getNextStep:function(t){var e=t.children(this.settings.stepLink),i=t.next(this.settings.stepFolder),n=this.getNextNode(e),s=n.next(this.settings.stepFolder),a=null,r=null;return(a=i.length?(r=i).children().length?r.find(this.settings.stepLink).first():n:s.length&&(r=s).children().length?r.find(this.settings.stepLink).first():n).hasClass("is-disabled")&&(a=this.getNextStep(a.parent())),a},getPreviousNode:function(t){var e=this.settings,i=t.parent().prev().find("".concat(e.stepLink,":first")),n=i.closest(e.stepLi);return n.is(".folder.is-open")&&n.find("ul.is-open a").length&&!n.find("ul.is-disabled").length&&(i=n.find("ul.is-open ".concat(e.stepLink,":last"))),i.hasClass("is-disabled")&&this.getPreviousNode(i),0===i.length&&(i=t.closest(e.stepFolder).prev(e.stepLink)),i},getPreviousStep:function(t){var e=this.settings,i=t.children(e.stepLink),n=this.getPreviousNode(i),s=n.closest(e.stepLi),a=n;if(this.isFolder(s))if(this.isOpen(s))a=this.getPreviousNode(n);else{var r=s.children(e.stepFolder);r.children().length&&(a=r.find(e.stepLink).last())}return a.hasClass("is-disabled")&&(a=this.getPreviousStep(a.parent())),a},goToNextStep:function(){var t=this,e=this.getSelectedStep(),i=t.getNextStep(e);if(i.length)t.selectStep(i,"next");else if("function"==typeof t.settings.beforeSelectStep){var n=t.settings.beforeSelectStep({isStepping:"next"});n.done&&"function"==typeof n.done?n.done((function(e,i){e&&i&&t.selectStepFinish(i)})):n&&t.selectStepFinish(i)}},goToPreviousStep:function(){var t=this.getSelectedStep(),e=this.getPreviousStep(t);e.length&&this.selectStep(e,"prev")},handleKeys:function(){var t=this,e=this.settings;this.stepListJq.on("focus.stepprocess",e.stepLink,(function(){var t=$(this);if(0===parseInt(t.attr("aria-level"),10)&&1===parseInt(t.attr("aria-posinset"),10)&&t.hasClass("is-disabled")){var e=$.Event("keydown.stepprocess");return e.keyCode=40,void t.trigger(e)}})),this.stepListJq.on("keydown.stepprocess",e.stepLink,(function(i){var n,s,a=i.charCode||i.keyCode,r=$(this);if(!t.isAnimating){if(40===a){var o=t.getNextNode(r);t.setFocus(o)}if(38===a){var l=t.getPreviousNode(r);t.setFocus(l)}if(32===i.keyCode&&r.trigger("click.stepprocess"),37===a)return B.isRTL()?r.next().hasClass("is-open")?(s=r.next().find("".concat(e.stepLink,":first")),t.setFocus(s)):t.folderToggle(r):r.next().hasClass("is-open")?t.folderToggle(r):(s=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(s)),i.stopPropagation(),!1;if(39===a)return B.isRTL()?r.next().hasClass("is-open")?t.folderToggle(r):(n=r.closest(".folder").find("".concat(e.stepLink,":first")),t.setFocus(n)):r.next().hasClass("is-open")?(n=r.next().find("".concat(e.stepLink,":first")),t.setFocus(n)):(t.folderToggle(r),t.setFocus(r)),i.stopPropagation(),!1;36===a&&(n=t.stepListJq.find("".concat(e.stepLink,":first:visible")),t.setFocus(n)),35===a&&(n=t.stepListJq.find("".concat(e.stepLink,":last:visible")),t.setFocus(n))}})),this.stepListJq.on("keypress.stepprocess",e.stepLink,(function(i){var n=i.charCode||i.keyCode,s=$(this);if(n>=37&&n<=40||32===n)return i.stopPropagation(),!1;0!==i.which&&s.closest(e.stepLi).nextAll().find(".js-step-link:visible").each((function(){var e=$(this);if(e.text().substr(0,1).toLowerCase()===String.fromCharCode(i.which).toLowerCase())return t.setFocus(e),!1}))}))},isFolder:function(t){return $(t).hasClass("folder")},isInFolder:function(t){return $(t).closest(this.settings.stepFolder,this.stepListJq).length},isOpen:function(t){return $(t).hasClass("is-open")},setFocus:function(t){t.focus()},setIcon:function(t,e){var i=e.replace(/icon-|hide-focus|\s?/gi,"");t.changeIcon(i)},selectStep:function(t,e){var i,n=this;if(void 0===e&&(e="none"),"function"==typeof n.settings.beforeSelectStep){var s={stepLink:t,isStepping:e};(i=n.settings.beforeSelectStep(s)).done&&"function"==typeof i.done?i.done((function(i,s){i&&(s&&(t=s),n.selectStepFinish(t,e))})):i&&n.selectStepFinish(t,e)}else n.selectStepFinish(t,e)},selectStepFinish:function(t,e){var i=this,n=$(this.settings.stepLink,this.stepListJq),s=t.closest(this.settings.stepLi);if(this.isFolder(s)||(n.attr({tabindex:"-1","aria-selected":"false"}).parent().removeClass("is-selected"),t.attr({tabindex:"0","aria-selected":"true"}),s.addClass("is-selected")),this.isFolder(s))"none"===e?this.folderToggle(s):this.folderOpen(s);else{var a=s.closest(this.settings.stepFolder,this.stepListJq);a.length&&this.folderOpen(a.closest(this.settings.stepLi)),this.showStepPanel(t.attr("href"))}t.focus(),setTimeout((function(){i.element.triggerHandler("selected",t)}),0)},unSelectedNode:function(t){var e=$(this.settings.stepLink,this.stepListJq),i=$(t),n=i.children(this.settings.stepLink);e.attr("tabindex","-1"),n.attr("tabindex","0"),i.removeClass("is-selected"),n.attr("aria-selected","false")},setupEvents:function(){var t=this,e=this,i=this.settings;this.stepListJq.on("updated.stepprocess",(function(){t.initStepprocess()})).on("click.stepprocess","".concat(i.stepLink,":not(.is-clone)"),(function(t){if(t.preventDefault(),!i.linearProgression){var n=$(this);n.is(".is-disabled, .is-loading")||(e.selectStep(n),t.stopPropagation())}})),$(i.btnPrev).on("click",(function(i){i.preventDefault(),t.goToPreviousStep.call(e)})),$(i.btnNext).on("click",(function(i){i.preventDefault(),t.goToNextStep.call(e)})),$(i.contentScroll).scrollaction({scrollActionTarget:".main"}),$(i.stepListScroll).scrollaction({scrollActionTarget:".sidebar"}),$(".js-toggle-sidebar").click((function(e){e.preventDefault(),t.element.toggleClass("tablet-hide-steps").toggleClass("phone-hide-steps")}))},showStepPanel:function(t){$(".step-panel-active").removeClass("step-panel-active"),$(t).addClass("step-panel-active"),this.element.addClass("phone-hide-steps")},unbind:function(){return this.stepListJq.off("updated.stepprocess click.stepprocess focus.stepprocess keydown.stepprocess keypress.stepprocess").empty(),this},updated:function(t){return void 0!==t&&(this.settings=C.mergeSettings(this.element,t,Hs)),this.unbind().init()},destroy:function(){this.unbind(),$.removeData(this.element[0],"stepprocess")}},$.fn.stepprocess=function(t){return this.each((function(){var e=$.data(this,"stepprocess");e?e.updated(t):e=$.data(this,"stepprocess",new qs(this,t))}))};var Vs={locale:"en-US",language:null};function Ws(t,e,i){return $(t)[e](i)}function js(t,e){var i=t.find(e).not(".no-init, [data-init]");return t.filter(e).length&&(i=i.add(t)),i}var Us=[["texttranslations",'[data-translate="text"]',function(t,e,i){js(t,i).each((function(t,e){var i=$(e);i.attr("data-translate-key",i.text()),i.text(B.translate(i.text(),!0))}))}],["texttranslations",'[data-translate="value"]',function(t,e,i){js(t,i).each((function(t,e){var i=$(e);i.attr("data-translate-key",i.attr("value")),i.attr("value",B.translate(i.attr("value"),!0))}))}],["texttranslations",'[data-translate="placeholder"]',function(t,e,i){js(t,i).each((function(t,e){var i=$(e);i.attr("data-translate-key",i.attr("placeholder")),i.attr("placeholder",B.translate(i.attr("placeholder"),!0))}))}],["applicationmenu","#application-menu",function(t,e,i){js(t,i).each((function(e,i){$(i).applicationmenu({triggers:t.find(".application-menu-trigger")})}))}],["personalize",null,function(){$("html").personalize()}],["hyperlink"],["icon"],["radio",".radio-section input:radio.handle",function(t,e,i){js(t,i).change((function(){if(this.checked){var t=$(this).closest(".option"),e=t.siblings(),i='button, select, input[type="text"]';$(i,t).removeAttr("disabled"),$(i,e).attr("disabled","disabled")}}))}],["splitter"],["tabs",".tab-container:not(.vertical)"],["verticaltabs",".tab-container.vertical"],["multitabs",".multitabs-container"],["dropdown","select.dropdown:not(.multiselect)"],["dropdown","select.dropdown-xs:not(.multiselect)"],["dropdown","select.dropdown-sm:not(.multiselect)"],["dropdown","select.dropdown-lg:not(.multiselect)"],["modal"],["revealText","input.input-password-reveal"],["slider",'input[type="range"], .slider'],["editor"],["tooltip","button[title], span[title], .hyperlink[title], .icon[title], input[title]"],["tree"],["rating"],["listbuilder"],["compositeform",".composite-form"],["progress",".progress-bar"],["mask","input[data-mask], .new-mask"],["autocomplete",".autocomplete:not([data-init])"],["multiselect","select[multiple]:not(.dropdown), .multiselect:not([data-init])"],["button",[".btn",".btn-toggle",".btn-secondary",".btn-primary",".btn-modal-primary",".btn-tertiary",".btn-icon",".btn-actions",".btn-menu",".btn-split",".btn-secondary-border"].join(", "),function(t,e,i){js(t,i).each((function(t,e){$(e).parents(".modal").length||$(e).button()}))}],["hideFocus","a.hide-focus, a.tick, .checkbox, .radio, .switch"],["circlepager"],["clearable",'[data-clearable="true"]'],["textarea","textarea"],["spinbox"],["arrange"],["swaplist"],["colorpicker"],["datepicker"],["timepicker"],["tag"],["busyindicator",".busy, .busy-xs, .busy-sm"],["header"],["fileupload",'input.fileupload:not(.fileupload-background-transparent):not([type="text"])'],["fileuploadadvanced",".fileupload-advanced"],["fieldfilter",".field-filter"],["fieldoptions",".field-options"],["about"],["contextualactionpanel",".contextual-action-panel-trigger"],["expandablearea",".expandable-area"],["signin"],["homepage"],["lookup",".lookup:not([data-init])"],["wizard"],["popdown","[data-popdown]"],["stepchart",".step-chart"],["calendar",".calendar"],["calendartoolbar",".calendar-toolbar"],["monthview",".monthview"],["weekview",".week-view"],["listview"],["trackdirty",'[data-trackdirty="true"]'],["popupmenu","[data-popupmenu]:not(.btn-actions, .btn-filter, .btn-menu)",function(t,e,i){js(t,i).each((function(t,i){var n=$(i),s=$.extend({},C.parseOptions(n)),a=n.attr("data-popupmenu");a&&(s.menuId=a),Ws(n,e,s)}))}],["popupmenu",".btn-actions, .btn-filter, .btn-menu",function(t,e,i){js(t,i).each((function(t,i){var n=$(i);n.parents(".toolbar, .flex-toolbar").length>0||Ws(n,e)}))}],["popover","[data-popover]",function(t,e,i){js(t,i).each((function(){var t=C.parseOptions(this),e=$(this),i=e.attr("data-trigger"),n=e.attr("data-title"),s=e.attr("data-placement");$.isEmptyObject(t)?e.popover({content:$("#".concat(e.attr("data-popover"))),popover:!0,trigger:i||"click",title:n||void 0,placement:s||"right",extraClass:t.extraClass||void 0}):e.popover({content:$(t.content),popover:!0,trigger:t.trigger||"click",title:t.title||void 0,placement:t.placement||"right",extraClass:t.extraClass||void 0})}))}],["searchfield",".searchfield",function(t,e,i){var n=js(t,i),s=n.filter((function(){return $(this).parents(".toolbar").length}));(n=n.not(s)).each((function(){Ws(this,"searchfield")}))}],["toolbar",".toolbar",function(t,e,i){js(t,i).each((function(e,i){var n=$(i);n.parents(".header, .contextual-action-panel .modal-header").length&&!t.is(".toolbar")||Ws(n,"toolbar")}))}],["toolbarflex",".flex-toolbar"],["accordion",".accordion",function(t,e,i){js(t,i).each((function(t,e){var i=$(e);i.parents(".application-menu").length||Ws(i,"accordion")}))}],["taglist",".tag-list"],["breadcrumb",".breadcrumb"],["formcompact",".form-compact-container",function(t,e,i){js(t,i).each((function(t,e){Ws($(e),"formcompact")}))}],["listdetail",".list-detail",function(t,e,i){js(t,i).each((function(t,e){Ws($(e),"listdetail")}))}],["breadcrumblabels",".breadcrumb ol",function(t,e,i){js(t,i).attr("aria-label",B.translate("Breadcrumb"))}],["validate","[data-validate]",function(t,e,i){js(t,i).closest("form, body").validate()}],["validate",'form[data-validate-on="submit"]']];function _s(t,e,i,n){($.fn[e]||"texttranslations"===e)&&(void 0===i&&(i=".".concat(e)),"function"!=typeof n?js(t,i).each((function(){var t=$(this);t.is(".no-init, [data-init]")||t.parents(".no-init, [data-init]").length||Ws(this,e)})):n(t,e,i))}function Gs(t,e){var i=e;"string"==typeof e&&(i={locale:e}),this.element=$(t),B.currentLocale&&B.currentLocale.name&&!e&&(i={locale:B.currentLocale.name}),B.currentLanguage&&B.currentLanguage.name&&B.currentLocale.name.substr(0,2)!==B.currentLanguage.name&&!e&&(i.language=B.currentLanguage.name),this.settings=C.mergeSettings(this.element[0],i,Vs),this.init()}Gs.prototype={init:function(){var t=this,e=this;return B.set(this.settings.locale).done((function(){t.settings.language?B.setLanguage(t.settings.language).done((function(){e.initAll()})):e.initAll()})),this},initAll:function(){return this.element.each((function(){for(var t=0;t<Us.length;t++)_s.apply(void 0,[$(this)].concat(c(Us[t])))})),this.element.triggerHandler("initialized",{locale:B.currentLocale}),$.fn.validate&&this.element.validate(),this}},$.fn.initialize=function(t){return this.each((function(){return new Gs(this,t)}))};var Ys={delay:400,mouseEvents:!1};function Ks(t){return this.settings=C.mergeSettings(this.element,t,Ys),this.init()}Ks.prototype={timer:null,init:function(){var t=this,e=this.getInputEventNames(),i=this;$(document).on("".concat(e.mousedown,".").concat("longpress"),(function(e){var n=e.target;t.timer=new U({id:"".concat("longpress","-timer"),duration:S.convertDelayToFPS(t.settings.delay),timeoutCallback:function(){i.fire(n,e)}}),G.register(t.timer)})),$(document).on(["".concat(e.mouseup,".").concat("longpress"),"".concat(e.mouseout,".").concat("longpress"),"".concat(e.mousemove,".").concat("longpress")].join(" "),(function(){t.killTimer()}))},fire:function(t,e){$(t).trigger("".concat("longpress"),[e])},killTimer:function(){this.timer&&(this.timer.destroy(!0),this.timer=null)},getInputEventNames:function(){var t=m.features.touch,e=this.settings.mouseEvents,i=t||!e;return{mousedown:i?"touchstart":"mousedown",mouseout:i?"touchcancel":"mouseout",mouseup:i?"touchend":"mouseup",mousemove:i?"touchmove":"mousemove"}},updated:function(t){t&&(this.settings=C.mergeSettings(this.element,t,this.settings)),this.teardown(),this.init()},teardown:function(){var t=this.getInputEventNames();this.killTimer(),$(document).off(["".concat(t.mousedown,".").concat("longpress"),"".concat(t.mouseup,".").concat("longpress"),"".concat(t.mouseout,".").concat("longpress"),"".concat(t.mousemove,".").concat("longpress")].join(" "))}};var Xs=new Ks,Qs=Object.freeze({__proto__:null,Button:Tt,ButtonSet:At,Hyperlink:Et,Icon:vt,ListFilter:ge,MaskInput:Ft,Modal:Cn,PopupMenu:zt,Tmpl:fe,About:qt,Accordion:Gt,ApplicationMenu:Ce,Autocomplete:ve,Bar:Ge,Blockgrid:Se,Breadcrumb:Ie,Bullet:Be,BusyIndicator:Pe,ColorPicker:ci,Column:Ue,CompletionChart:Fe,ContextualActionPanel:Li,Drag:ot,DatePicker:Vi,Dropdown:oi,EmptyMessage:qe,ExpandableArea:ee,FontPicker:_i,FontPickerStyle:ji,Line:We,ListBuilder:vn,ListView:fn,Message:Tn,MultiSelect:An,Notification:En,Pager:pn,Pie:Ke,Popdown:Pn,Radar:Qe,SearchField:we,Slider:Nn,Sparkline:ze,Spinbox:Wn,Splitter:Un,StepChart:Qn,Tabs:ts,Tag:ii,TagList:si,Textarea:is,TimePicker:Ri,Toast:Fi,Toolbar:Yi,ToolbarFlex:fi,Tooltip:yt,Tree:rs,Treemap:ls,Validator:zi,Wizard:ds,Calendar:ki,CalendarToolbar:vi,CompositeForm:$i,Datagrid:Es,FormCompact:Is,Header:Ps,Lookup:Ts,MonthView:yi,WeekView:xi,MultiTabs:Bs,ListDetail:zs,Stepprocess:qs});return t.DOM=u,t.Editors=As,t.Formatters=ps,t.GroupBy=ys,t.HideFocus=v,t.Initialize=Gs,t.Locale=B,t.Place=ft,t.RenderLoopItem=U,t.Validation=Bi,t.base=q,t.breakpoints=p,t.colors=I,t.components=Qs,t.debug=e,t.defer=y,t.env=m,t.excel=gs,t.getColorStyleSheet=function(t){return nt.getColorStyleSheet(t)},t.keyboard=K,t.longPress=Xs,t.masks=Dt,t.modalManager=J,t.number=D,t.object=A,t.personalization=nt,t.renderLoop=G,t.setColors=function(t){return nt.setColors(t)},t.setTheme=function(t){return nt.setTheme(t)},t.smoothScrollTo=b,t.string=E,t.theme=Z,t.uniqueIdCount=w,t.utils=C,t.version="4.36.2",t.xss=h,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=sohoxi.min.js.map